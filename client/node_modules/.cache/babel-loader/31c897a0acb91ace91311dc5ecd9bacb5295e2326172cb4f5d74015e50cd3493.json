{"ast":null,"code":"// LaTeX template validation helper\n\n/**\r\n * Validates if a LaTeX string contains required document structure elements\r\n * @param {string} latex - The LaTeX content to validate\r\n * @returns {Object} - Validation results\r\n */\nexport const validateLatexTemplate = latex => {\n  if (!latex || typeof latex !== 'string') {\n    return {\n      isValid: false,\n      errors: ['Template is empty or not a string']\n    };\n  }\n  const errors = [];\n  const warnings = [];\n\n  // Required elements\n  if (!latex.includes('\\\\begin{document}')) {\n    errors.push('Missing \\\\begin{document} tag');\n  }\n  if (!latex.includes('\\\\end{document}')) {\n    errors.push('Missing \\\\end{document} tag');\n  }\n\n  // Check order of document tags\n  const beginPos = latex.indexOf('\\\\begin{document}');\n  const endPos = latex.indexOf('\\\\end{document}');\n  if (beginPos >= 0 && endPos >= 0 && beginPos > endPos) {\n    errors.push('\\\\begin{document} must come before \\\\end{document}');\n  }\n\n  // Check for content before \\begin{document}\n  if (beginPos > 0) {\n    // Extract content before \\begin{document}\n    const preContent = latex.substring(0, beginPos).trim();\n\n    // Check if there's non-comment content that would cause errors\n    const nonCommentLines = preContent.split('\\n').filter(line => !line.trim().startsWith('%') && line.trim() !== '');\n    if (nonCommentLines.length > 0 && !nonCommentLines.every(line => line.startsWith('\\\\') || line.includes('{') || line.trim() === '')) {\n      warnings.push('Found potential content before \\\\begin{document} that may cause errors');\n    }\n  }\n\n  // Check for basic package requirements\n  const requiredPackages = ['geometry', 'enumitem'];\n  for (const pkg of requiredPackages) {\n    if (!latex.includes(`\\\\usepackage{${pkg}}`) && !latex.includes(`\\\\usepackage[`)) {\n      warnings.push(`Template may be missing recommended package: ${pkg}`);\n    }\n  }\n  return {\n    isValid: errors.length === 0,\n    errors,\n    warnings,\n    beginDocumentPosition: beginPos,\n    endDocumentPosition: endPos\n  };\n};\n\n/**\r\n * Attempts to fix common issues in LaTeX templates\r\n * @param {string} latex - The LaTeX content to fix\r\n * @returns {Object} - The fixed LaTeX content and list of fixes applied\r\n */\nexport const attemptLatexFix = latex => {\n  if (!latex || typeof latex !== 'string') {\n    return {\n      fixed: false,\n      latex,\n      fixes: ['Cannot fix empty or non-string template']\n    };\n  }\n  let fixedLatex = latex;\n  const fixes = [];\n\n  // Fix 1: Add missing document environment\n  if (!latex.includes('\\\\begin{document}')) {\n    // Find a good position to insert it - after all \\usepackage commands\n    const lastPackagePos = latex.lastIndexOf('\\\\usepackage');\n    if (lastPackagePos > -1) {\n      // Find the end of this line\n      const endOfLine = latex.indexOf('\\n', lastPackagePos);\n      const insertPos = endOfLine > -1 ? endOfLine + 1 : latex.length;\n      fixedLatex = fixedLatex.substring(0, insertPos) + '\\n\\\\begin{document}\\n' + fixedLatex.substring(insertPos);\n      fixes.push('Added missing \\\\begin{document} tag');\n    } else {\n      // No packages found, add at beginning\n      fixedLatex = '\\\\documentclass[11pt,a4paper]{article}\\n\\\\begin{document}\\n' + fixedLatex;\n      fixes.push('Added missing document class and \\\\begin{document} tag');\n    }\n  }\n\n  // Fix 2: Add missing end document\n  if (!fixedLatex.includes('\\\\end{document}')) {\n    fixedLatex = fixedLatex + '\\n\\\\end{document}\\n';\n    fixes.push('Added missing \\\\end{document} tag');\n  }\n\n  // Fix 3: Ensure proper order of begin/end document tags\n  const beginPos = fixedLatex.indexOf('\\\\begin{document}');\n  const endPos = fixedLatex.indexOf('\\\\end{document}');\n  if (beginPos >= 0 && endPos >= 0 && beginPos > endPos) {\n    // Remove the end tag and add it at the end\n    fixedLatex = fixedLatex.replace('\\\\end{document}', '');\n    fixedLatex = fixedLatex + '\\n\\\\end{document}\\n';\n    fixes.push('Fixed incorrect order of document tags');\n  }\n  return {\n    fixed: fixes.length > 0,\n    latex: fixedLatex,\n    fixes\n  };\n};\nexport default {\n  validateLatexTemplate,\n  attemptLatexFix\n};","map":{"version":3,"names":["validateLatexTemplate","latex","isValid","errors","warnings","includes","push","beginPos","indexOf","endPos","preContent","substring","trim","nonCommentLines","split","filter","line","startsWith","length","every","requiredPackages","pkg","beginDocumentPosition","endDocumentPosition","attemptLatexFix","fixed","fixes","fixedLatex","lastPackagePos","lastIndexOf","endOfLine","insertPos","replace"],"sources":["C:/Users/dell/OneDrive/Desktop/resumate/client/src/latexValidator.js"],"sourcesContent":["// LaTeX template validation helper\r\n\r\n/**\r\n * Validates if a LaTeX string contains required document structure elements\r\n * @param {string} latex - The LaTeX content to validate\r\n * @returns {Object} - Validation results\r\n */\r\nexport const validateLatexTemplate = (latex) => {\r\n  if (!latex || typeof latex !== 'string') {\r\n    return {\r\n      isValid: false,\r\n      errors: ['Template is empty or not a string']\r\n    };\r\n  }\r\n\r\n  const errors = [];\r\n  const warnings = [];\r\n\r\n  // Required elements\r\n  if (!latex.includes('\\\\begin{document}')) {\r\n    errors.push('Missing \\\\begin{document} tag');\r\n  }\r\n\r\n  if (!latex.includes('\\\\end{document}')) {\r\n    errors.push('Missing \\\\end{document} tag');\r\n  }\r\n\r\n  // Check order of document tags\r\n  const beginPos = latex.indexOf('\\\\begin{document}');\r\n  const endPos = latex.indexOf('\\\\end{document}');\r\n  \r\n  if (beginPos >= 0 && endPos >= 0 && beginPos > endPos) {\r\n    errors.push('\\\\begin{document} must come before \\\\end{document}');\r\n  }\r\n\r\n  // Check for content before \\begin{document}\r\n  if (beginPos > 0) {\r\n    // Extract content before \\begin{document}\r\n    const preContent = latex.substring(0, beginPos).trim();\r\n    \r\n    // Check if there's non-comment content that would cause errors\r\n    const nonCommentLines = preContent.split('\\n')\r\n      .filter(line => !line.trim().startsWith('%') && line.trim() !== '');\r\n      \r\n    if (nonCommentLines.length > 0 && !nonCommentLines.every(line => \r\n        line.startsWith('\\\\') || \r\n        line.includes('{') || \r\n        line.trim() === ''\r\n      )) {\r\n      warnings.push('Found potential content before \\\\begin{document} that may cause errors');\r\n    }\r\n  }\r\n\r\n  // Check for basic package requirements\r\n  const requiredPackages = ['geometry', 'enumitem'];\r\n  for (const pkg of requiredPackages) {\r\n    if (!latex.includes(`\\\\usepackage{${pkg}}`) && \r\n        !latex.includes(`\\\\usepackage[`)) {\r\n      warnings.push(`Template may be missing recommended package: ${pkg}`);\r\n    }\r\n  }\r\n\r\n  return {\r\n    isValid: errors.length === 0,\r\n    errors,\r\n    warnings,\r\n    beginDocumentPosition: beginPos,\r\n    endDocumentPosition: endPos\r\n  };\r\n};\r\n\r\n/**\r\n * Attempts to fix common issues in LaTeX templates\r\n * @param {string} latex - The LaTeX content to fix\r\n * @returns {Object} - The fixed LaTeX content and list of fixes applied\r\n */\r\nexport const attemptLatexFix = (latex) => {\r\n  if (!latex || typeof latex !== 'string') {\r\n    return { \r\n      fixed: false, \r\n      latex, \r\n      fixes: ['Cannot fix empty or non-string template'] \r\n    };\r\n  }\r\n\r\n  let fixedLatex = latex;\r\n  const fixes = [];\r\n  \r\n  // Fix 1: Add missing document environment\r\n  if (!latex.includes('\\\\begin{document}')) {\r\n    // Find a good position to insert it - after all \\usepackage commands\r\n    const lastPackagePos = latex.lastIndexOf('\\\\usepackage');\r\n    \r\n    if (lastPackagePos > -1) {\r\n      // Find the end of this line\r\n      const endOfLine = latex.indexOf('\\n', lastPackagePos);\r\n      const insertPos = endOfLine > -1 ? endOfLine + 1 : latex.length;\r\n      \r\n      fixedLatex = fixedLatex.substring(0, insertPos) + \r\n                 '\\n\\\\begin{document}\\n' + \r\n                 fixedLatex.substring(insertPos);\r\n      \r\n      fixes.push('Added missing \\\\begin{document} tag');\r\n    } else {\r\n      // No packages found, add at beginning\r\n      fixedLatex = '\\\\documentclass[11pt,a4paper]{article}\\n\\\\begin{document}\\n' + fixedLatex;\r\n      fixes.push('Added missing document class and \\\\begin{document} tag');\r\n    }\r\n  }\r\n\r\n  // Fix 2: Add missing end document\r\n  if (!fixedLatex.includes('\\\\end{document}')) {\r\n    fixedLatex = fixedLatex + '\\n\\\\end{document}\\n';\r\n    fixes.push('Added missing \\\\end{document} tag');\r\n  }\r\n\r\n  // Fix 3: Ensure proper order of begin/end document tags\r\n  const beginPos = fixedLatex.indexOf('\\\\begin{document}');\r\n  const endPos = fixedLatex.indexOf('\\\\end{document}');\r\n  \r\n  if (beginPos >= 0 && endPos >= 0 && beginPos > endPos) {\r\n    // Remove the end tag and add it at the end\r\n    fixedLatex = fixedLatex.replace('\\\\end{document}', '');\r\n    fixedLatex = fixedLatex + '\\n\\\\end{document}\\n';\r\n    fixes.push('Fixed incorrect order of document tags');\r\n  }\r\n\r\n  return {\r\n    fixed: fixes.length > 0,\r\n    latex: fixedLatex,\r\n    fixes\r\n  };\r\n};\r\n\r\nexport default {\r\n  validateLatexTemplate,\r\n  attemptLatexFix\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}