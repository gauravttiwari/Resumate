{"version":3,"file":"static/js/548.c19b07b6.chunk.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/toSetter.js","../node_modules/@babel/runtime/helpers/esm/checkPrivateRedeclaration.js","../node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js","../node_modules/@babel/runtime/helpers/esm/assertClassBrand.js","../node_modules/@babel/runtime/helpers/esm/classPrivateGetter.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js","../node_modules/@babel/runtime/helpers/esm/asyncIterator.js","../pdf.js/node_modules/core-js/internals/is-object.js","../pdf.js/node_modules/core-js/internals/get-iterator.js","../pdf.js/node_modules/core-js/modules/es.iterator.find.js","../pdf.js/node_modules/core-js/internals/make-built-in.js","../pdf.js/node_modules/core-js/internals/function-name.js","../pdf.js/node_modules/core-js/internals/html.js","../pdf.js/node_modules/core-js/internals/hidden-keys.js","../pdf.js/node_modules/core-js/modules/es.uint8-array.to-hex.js","../pdf.js/node_modules/core-js/internals/iterate-simple.js","../pdf.js/node_modules/core-js/modules/es.iterator.flat-map.js","../pdf.js/node_modules/core-js/internals/function-bind-native.js","../pdf.js/node_modules/core-js/internals/to-string.js","../pdf.js/node_modules/core-js/internals/an-instance.js","../pdf.js/node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js","../pdf.js/node_modules/core-js/internals/math-trunc.js","../pdf.js/node_modules/core-js/internals/is-symbol.js","../pdf.js/node_modules/core-js/internals/get-iterator-method.js","../pdf.js/node_modules/core-js/internals/get-alphabet-option.js","../pdf.js/node_modules/core-js/internals/object-keys.js","../pdf.js/node_modules/core-js/internals/perform.js","../pdf.js/node_modules/core-js/internals/is-big-int-array.js","../pdf.js/node_modules/core-js/modules/es.iterator.every.js","../pdf.js/node_modules/core-js/internals/internal-state.js","../pdf.js/node_modules/core-js/internals/to-integer-or-infinity.js","../pdf.js/node_modules/core-js/internals/iterator-close-all.js","../pdf.js/node_modules/core-js/internals/structured-clone-proper-transfer.js","../pdf.js/node_modules/core-js/modules/esnext.uint8-array.set-from-base64.js","../pdf.js/node_modules/core-js/internals/object-is-prototype-of.js","../pdf.js/node_modules/core-js/modules/es.promise.try.js","../pdf.js/node_modules/core-js/modules/es.set.union.v2.js","../pdf.js/node_modules/core-js/modules/es.iterator.map.js","../pdf.js/node_modules/core-js/internals/get-iterator-direct.js","../pdf.js/node_modules/core-js/internals/object-keys-internal.js","../pdf.js/node_modules/core-js/internals/define-built-in-accessor.js","../pdf.js/node_modules/core-js/internals/to-string-tag-support.js","../pdf.js/node_modules/core-js/internals/classof-raw.js","../pdf.js/node_modules/core-js/internals/correct-prototype-getter.js","../pdf.js/node_modules/core-js/internals/uint8-from-hex.js","../pdf.js/node_modules/core-js/internals/object-create.js","../pdf.js/node_modules/core-js/modules/es.set.is-superset-of.v2.js","../pdf.js/node_modules/core-js/modules/es.iterator.filter.js","../pdf.js/node_modules/core-js/internals/create-iter-result-object.js","../pdf.js/node_modules/core-js/internals/normalize-string-argument.js","../pdf.js/node_modules/core-js/internals/iterate.js","../pdf.js/node_modules/core-js/internals/to-primitive.js","../pdf.js/node_modules/core-js/internals/object-get-prototype-of.js","../pdf.js/node_modules/core-js/internals/is-forced.js","../pdf.js/node_modules/core-js/internals/base64-map.js","../pdf.js/node_modules/core-js/internals/validate-arguments-length.js","../pdf.js/node_modules/core-js/internals/environment-user-agent.js","../pdf.js/node_modules/core-js/internals/object-set-prototype-of.js","../pdf.js/node_modules/core-js/modules/es.math.sum-precise.js","../pdf.js/node_modules/core-js/internals/inherit-if-required.js","../pdf.js/node_modules/core-js/internals/array-buffer-is-detached.js","../pdf.js/node_modules/core-js/internals/uid.js","../pdf.js/node_modules/core-js/internals/set-difference.js","../pdf.js/node_modules/core-js/internals/a-string.js","../pdf.js/node_modules/core-js/internals/a-possible-prototype.js","../pdf.js/node_modules/core-js/modules/es.iterator.some.js","../pdf.js/node_modules/core-js/internals/set-symmetric-difference.js","../pdf.js/node_modules/core-js/internals/inspect-source.js","../pdf.js/node_modules/core-js/internals/object-get-own-property-symbols.js","../pdf.js/node_modules/core-js/internals/descriptors.js","../pdf.js/node_modules/core-js/internals/get-set-record.js","../pdf.js/node_modules/core-js/internals/set-is-subset-of.js","../pdf.js/node_modules/core-js/modules/es.set.is-disjoint-from.v2.js","../pdf.js/node_modules/core-js/internals/is-possible-prototype.js","../pdf.js/node_modules/core-js/internals/an-object-or-undefined.js","../pdf.js/node_modules/core-js/internals/document-create-element.js","../pdf.js/node_modules/core-js/modules/es.array.push.js","../pdf.js/node_modules/core-js/internals/is-null-or-undefined.js","../pdf.js/node_modules/core-js/internals/not-a-nan.js","../pdf.js/node_modules/core-js/internals/an-uint8-array.js","../pdf.js/node_modules/core-js/internals/set-union.js","../pdf.js/node_modules/core-js/internals/is-array-iterator-method.js","../pdf.js/node_modules/core-js/internals/environment.js","../pdf.js/node_modules/core-js/modules/es.uint8-array.set-from-hex.js","../pdf.js/node_modules/core-js/modules/esnext.math.sum-precise.js","../pdf.js/node_modules/core-js/internals/ordinary-to-primitive.js","../pdf.js/node_modules/core-js/internals/is-array.js","../pdf.js/node_modules/core-js/internals/set-helpers.js","../pdf.js/node_modules/core-js/internals/set-is-disjoint-from.js","../pdf.js/node_modules/core-js/internals/detach-transferable.js","../pdf.js/node_modules/core-js/internals/symbol-constructor-detection.js","../pdf.js/node_modules/core-js/internals/array-set-length.js","../pdf.js/node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js","../pdf.js/node_modules/core-js/internals/global-this.js","../pdf.js/node_modules/core-js/modules/web.url-search-params.delete.js","../pdf.js/node_modules/core-js/modules/es.promise.with-resolvers.js","../pdf.js/node_modules/core-js/internals/array-buffer-view-core.js","../pdf.js/node_modules/core-js/internals/create-property.js","../pdf.js/node_modules/core-js/internals/is-callable.js","../pdf.js/node_modules/core-js/internals/object-define-property.js","../pdf.js/node_modules/core-js/internals/set-method-accept-set-like.js","../pdf.js/node_modules/core-js/modules/es.iterator.take.js","../pdf.js/node_modules/core-js/modules/web.dom-exception.stack.js","../pdf.js/node_modules/core-js/internals/dom-exception-constants.js","../pdf.js/node_modules/core-js/modules/es.set.symmetric-difference.v2.js","../pdf.js/node_modules/core-js/internals/own-keys.js","../pdf.js/node_modules/core-js/internals/array-buffer-not-detached.js","../pdf.js/node_modules/core-js/internals/set-size.js","../pdf.js/node_modules/core-js/modules/es.uint8-array.from-base64.js","../pdf.js/node_modules/core-js/internals/array-from-constructor-and-list.js","../pdf.js/node_modules/core-js/internals/to-indexed-object.js","../pdf.js/node_modules/core-js/internals/to-absolute-index.js","../pdf.js/node_modules/core-js/modules/esnext.uint8-array.to-hex.js","../pdf.js/node_modules/core-js/internals/array-buffer-transfer.js","../pdf.js/node_modules/core-js/internals/shared.js","../pdf.js/node_modules/core-js/modules/web.url.parse.js","../pdf.js/node_modules/core-js/internals/to-big-int.js","../pdf.js/node_modules/core-js/modules/es.set.is-subset-of.v2.js","../pdf.js/node_modules/core-js/internals/ie8-dom-define.js","../pdf.js/node_modules/core-js/internals/get-method.js","../pdf.js/node_modules/core-js/internals/new-promise-capability.js","../pdf.js/node_modules/core-js/internals/function-bind-context.js","../pdf.js/node_modules/core-js/internals/shared-key.js","../pdf.js/node_modules/core-js/internals/environment-is-node.js","../pdf.js/node_modules/core-js/internals/length-of-array-like.js","../pdf.js/node_modules/core-js/internals/iterators.js","../pdf.js/node_modules/core-js/internals/define-built-ins.js","../pdf.js/node_modules/core-js/internals/call-with-safe-iteration-closing.js","../pdf.js/node_modules/core-js/internals/is-pure.js","../pdf.js/node_modules/core-js/internals/export.js","../pdf.js/node_modules/core-js/modules/es.array-buffer.detached.js","../pdf.js/node_modules/core-js/modules/es.uint8-array.set-from-base64.js","../pdf.js/node_modules/core-js/internals/create-non-enumerable-property.js","../pdf.js/node_modules/core-js/internals/function-uncurry-this-accessor.js","../pdf.js/node_modules/core-js/internals/object-define-properties.js","../pdf.js/node_modules/core-js/internals/try-to-string.js","../pdf.js/node_modules/core-js/internals/does-not-exceed-safe-integer.js","../pdf.js/node_modules/core-js/internals/define-built-in.js","../pdf.js/node_modules/core-js/internals/classof.js","../pdf.js/node_modules/core-js/internals/to-property-key.js","../pdf.js/node_modules/core-js/internals/create-property-descriptor.js","../pdf.js/node_modules/core-js/internals/use-symbol-as-uid.js","../pdf.js/node_modules/core-js/internals/indexed-object.js","../pdf.js/node_modules/core-js/internals/a-set.js","../pdf.js/node_modules/core-js/internals/object-get-own-property-descriptor.js","../pdf.js/node_modules/core-js/internals/array-buffer-byte-length.js","../pdf.js/node_modules/core-js/internals/url-constructor-detection.js","../pdf.js/node_modules/core-js/internals/function-uncurry-this-clause.js","../pdf.js/node_modules/core-js/modules/web.url-search-params.has.js","../pdf.js/node_modules/core-js/modules/es.iterator.for-each.js","../pdf.js/node_modules/core-js/internals/shared-store.js","../pdf.js/node_modules/core-js/modules/es.set.difference.v2.js","../pdf.js/node_modules/core-js/internals/iterators-core.js","../pdf.js/node_modules/core-js/internals/array-slice.js","../pdf.js/node_modules/core-js/internals/to-index.js","../pdf.js/node_modules/core-js/internals/copy-constructor-properties.js","../pdf.js/node_modules/core-js/internals/require-object-coercible.js","../pdf.js/node_modules/core-js/internals/get-built-in.js","../pdf.js/node_modules/core-js/internals/array-buffer-basic-detection.js","../pdf.js/node_modules/core-js/modules/es.array-buffer.transfer-to-fixed-length.js","../pdf.js/node_modules/core-js/modules/es.set.intersection.v2.js","../pdf.js/node_modules/core-js/internals/to-length.js","../pdf.js/node_modules/core-js/modules/es.array-buffer.transfer.js","../pdf.js/node_modules/core-js/modules/es.iterator.constructor.js","../pdf.js/node_modules/core-js/internals/well-known-symbol.js","../pdf.js/node_modules/core-js/internals/parse-json-string.js","../pdf.js/node_modules/core-js/modules/es.iterator.reduce.js","../pdf.js/node_modules/core-js/modules/esnext.json.parse.js","../pdf.js/node_modules/core-js/internals/set-iterate.js","../pdf.js/node_modules/core-js/internals/object-get-own-property-names.js","../pdf.js/node_modules/core-js/internals/set-is-superset-of.js","../pdf.js/node_modules/core-js/internals/an-object.js","../pdf.js/node_modules/core-js/internals/error-stack-clear.js","../pdf.js/node_modules/core-js/internals/weak-map-basic-detection.js","../pdf.js/node_modules/core-js/internals/get-iterator-flattenable.js","../pdf.js/node_modules/core-js/internals/v8-prototype-define-bug.js","../pdf.js/node_modules/core-js/modules/web.url-search-params.size.js","../pdf.js/node_modules/core-js/internals/enum-bug-keys.js","../pdf.js/node_modules/core-js/internals/function-apply.js","../pdf.js/node_modules/core-js/internals/set-intersection.js","../pdf.js/node_modules/core-js/internals/object-property-is-enumerable.js","../pdf.js/node_modules/core-js/internals/to-object.js","../pdf.js/node_modules/core-js/internals/fails.js","../pdf.js/node_modules/core-js/internals/uint8-from-base64.js","../pdf.js/node_modules/core-js/internals/set-clone.js","../pdf.js/node_modules/core-js/internals/has-own-property.js","../pdf.js/node_modules/core-js/internals/a-callable.js","../pdf.js/node_modules/core-js/modules/es.iterator.drop.js","../pdf.js/node_modules/core-js/internals/get-built-in-node-module.js","../pdf.js/node_modules/core-js/modules/esnext.uint8-array.from-base64.js","../pdf.js/node_modules/core-js/internals/define-global-property.js","../pdf.js/node_modules/core-js/internals/iterator-create-proxy.js","../pdf.js/node_modules/core-js/modules/es.uint8-array.to-base64.js","../pdf.js/node_modules/core-js/internals/function-uncurry-this.js","../pdf.js/node_modules/core-js/internals/environment-v8-version.js","../pdf.js/node_modules/core-js/internals/iterator-close.js","../pdf.js/node_modules/core-js/internals/function-call.js","../pdf.js/node_modules/core-js/modules/es.typed-array.with.js","../pdf.js/node_modules/core-js/internals/to-positive-integer.js","../pdf.js/node_modules/core-js/internals/array-includes.js","../pdf.js/node_modules/core-js/modules/esnext.uint8-array.to-base64.js","../pdf.js/node_modules/core-js/modules/esnext.uint8-array.set-from-hex.js","../pdf.js/node_modules/core-js/internals/set-method-get-keys-before-cloning-detection.js","../pdf.js/node_modules/core-js/internals/array-with.js","../pdf.js/webpack/bootstrap","../pdf.js/webpack/runtime/define property getters","../pdf.js/webpack/runtime/hasOwnProperty shorthand","../pdf.js/src/shared/util.js","../pdf.js/src/display/display_utils.js","../pdf.js/src/display/editor/toolbar.js","../pdf.js/src/display/editor/tools.js","../pdf.js/src/display/editor/alt_text.js","../pdf.js/src/display/editor/comment.js","../pdf.js/src/display/touch_manager.js","../pdf.js/src/display/editor/editor.js","../pdf.js/src/shared/murmurhash3.js","../pdf.js/src/display/annotation_storage.js","../pdf.js/src/display/font_loader.js","../pdf.js/src/display/api_utils.js","../pdf.js/src/shared/message_handler.js","../pdf.js/src/display/canvas_factory.js","../pdf.js/src/display/cmap_reader_factory.js","../pdf.js/src/display/filter_factory.js","../pdf.js/src/display/standard_fontdata_factory.js","../pdf.js/src/display/wasm_factory.js","../pdf.js/src/display/node_utils.js","../pdf.js/src/display/canvas_dependency_tracker.js","../pdf.js/src/display/pattern_helper.js","../pdf.js/src/shared/image_utils.js","../pdf.js/src/display/canvas.js","../pdf.js/src/display/worker_options.js","../pdf.js/src/display/metadata.js","../pdf.js/src/display/optional_content_config.js","../pdf.js/src/display/transport_stream.js","../pdf.js/src/display/network_utils.js","../pdf.js/src/display/content_disposition.js","../pdf.js/src/display/fetch_stream.js","../pdf.js/src/display/network.js","../pdf.js/src/display/node_stream.js","../pdf.js/src/display/pdf_objects.js","../pdf.js/src/display/text_layer.js","../pdf.js/src/display/xfa_text.js","../pdf.js/src/display/api.js","../pdf.js/src/display/editor/color_picker.js","../pdf.js/src/shared/scripting_utils.js","../pdf.js/src/display/svg_factory.js","../pdf.js/src/display/xfa_layer.js","../pdf.js/src/display/annotation_layer.js","../pdf.js/src/display/editor/freetext.js","../pdf.js/src/display/editor/drawers/outline.js","../pdf.js/src/display/editor/drawers/freedraw.js","../pdf.js/src/display/editor/drawers/highlight.js","../pdf.js/src/display/editor/highlight.js","../pdf.js/src/display/editor/draw.js","../pdf.js/src/display/editor/drawers/inkdraw.js","../pdf.js/src/display/editor/ink.js","../pdf.js/src/display/editor/drawers/contour.js","../pdf.js/src/display/editor/drawers/signaturedraw.js","../pdf.js/src/display/editor/signature.js","../pdf.js/src/display/editor/stamp.js","../pdf.js/src/display/editor/annotation_editor_layer.js","../pdf.js/src/display/draw_layer.js","../pdf.js/src/pdf.js"],"sourcesContent":["function _toSetter(t, e, n) {\n  e || (e = []);\n  var r = e.length++;\n  return Object.defineProperty({}, \"_\", {\n    set: function set(o) {\n      e[r] = o, t.apply(n, e);\n    }\n  });\n}\nexport { _toSetter as default };","function _checkPrivateRedeclaration(e, t) {\n  if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n}\nexport { _checkPrivateRedeclaration as default };","import checkPrivateRedeclaration from \"./checkPrivateRedeclaration.js\";\nfunction _classPrivateMethodInitSpec(e, a) {\n  checkPrivateRedeclaration(e, a), a.add(e);\n}\nexport { _classPrivateMethodInitSpec as default };","import checkPrivateRedeclaration from \"./checkPrivateRedeclaration.js\";\nfunction _classPrivateFieldInitSpec(e, t, a) {\n  checkPrivateRedeclaration(e, t), t.set(e, a);\n}\nexport { _classPrivateFieldInitSpec as default };","function _assertClassBrand(e, t, n) {\n  if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n;\n  throw new TypeError(\"Private element is not present on this object\");\n}\nexport { _assertClassBrand as default };","import assertClassBrand from \"./assertClassBrand.js\";\nfunction _classPrivateGetter(s, r, a) {\n  return a(assertClassBrand(s, r));\n}\nexport { _classPrivateGetter as default };","import assertClassBrand from \"./assertClassBrand.js\";\nfunction _classPrivateFieldGet2(s, a) {\n  return s.get(assertClassBrand(s, a));\n}\nexport { _classPrivateFieldGet2 as default };","import assertClassBrand from \"./assertClassBrand.js\";\nfunction _classPrivateFieldSet2(s, a, r) {\n  return s.set(assertClassBrand(s, a), r), r;\n}\nexport { _classPrivateFieldSet2 as default };","function _asyncIterator(r) {\n  var n,\n    t,\n    o,\n    e = 2;\n  for (\"undefined\" != typeof Symbol && (t = Symbol.asyncIterator, o = Symbol.iterator); e--;) {\n    if (t && null != (n = r[t])) return n.call(r);\n    if (o && null != (n = r[o])) return new AsyncFromSyncIterator(n.call(r));\n    t = \"@@asyncIterator\", o = \"@@iterator\";\n  }\n  throw new TypeError(\"Object is not async iterable\");\n}\nfunction AsyncFromSyncIterator(r) {\n  function AsyncFromSyncIteratorContinuation(r) {\n    if (Object(r) !== r) return Promise.reject(new TypeError(r + \" is not an object.\"));\n    var n = r.done;\n    return Promise.resolve(r.value).then(function (r) {\n      return {\n        value: r,\n        done: n\n      };\n    });\n  }\n  return AsyncFromSyncIterator = function AsyncFromSyncIterator(r) {\n    this.s = r, this.n = r.next;\n  }, AsyncFromSyncIterator.prototype = {\n    s: null,\n    n: null,\n    next: function next() {\n      return AsyncFromSyncIteratorContinuation(this.n.apply(this.s, arguments));\n    },\n    \"return\": function _return(r) {\n      var n = this.s[\"return\"];\n      return void 0 === n ? Promise.resolve({\n        value: r,\n        done: !0\n      }) : AsyncFromSyncIteratorContinuation(n.apply(this.s, arguments));\n    },\n    \"throw\": function _throw(r) {\n      var n = this.s[\"return\"];\n      return void 0 === n ? Promise.reject(r) : AsyncFromSyncIteratorContinuation(n.apply(this.s, arguments));\n    }\n  }, new AsyncFromSyncIterator(r);\n}\nexport { _asyncIterator as default };","'use strict';\nvar isCallable = require('../internals/is-callable');\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw new $TypeError(tryToString(argument) + ' is not iterable');\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar findWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('find', TypeError);\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true, forced: findWithoutClosingOnEarlyError }, {\n  find: function find(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (findWithoutClosingOnEarlyError) return call(findWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\).*$/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anUint8Array = require('../internals/an-uint8-array');\nvar notDetached = require('../internals/array-buffer-not-detached');\n\nvar numberToString = uncurryThis(1.1.toString);\n\nvar Uint8Array = globalThis.Uint8Array;\n\nvar INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS = !Uint8Array || !Uint8Array.prototype.toHex || !(function () {\n  try {\n    var target = new Uint8Array([255, 255, 255, 255, 255, 255, 255, 255]);\n    return target.toHex() === 'ffffffffffffffff';\n  } catch (error) {\n    return false;\n  }\n})();\n\n// `Uint8Array.prototype.toHex` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (Uint8Array) $({ target: 'Uint8Array', proto: true, forced: INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS }, {\n  toHex: function toHex() {\n    anUint8Array(this);\n    notDetached(this.buffer);\n    var result = '';\n    for (var i = 0, length = this.length; i < length; i++) {\n      var hex = numberToString(this[i], 16);\n      result += hex.length === 1 ? '0' + hex : hex;\n    }\n    return result;\n  }\n});\n","'use strict';\nvar call = require('../internals/function-call');\n\nmodule.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {\n  var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;\n  var next = record.next;\n  var step, result;\n  while (!(step = call(next, iterator)).done) {\n    result = fn(step.value);\n    if (result !== undefined) return result;\n  }\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar getIteratorFlattenable = require('../internals/get-iterator-flattenable');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar iteratorClose = require('../internals/iterator-close');\nvar IS_PURE = require('../internals/is-pure');\nvar iteratorHelperThrowsOnInvalidIterator = require('../internals/iterator-helper-throws-on-invalid-iterator');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR = !IS_PURE\n  && !iteratorHelperThrowsOnInvalidIterator('flatMap', function () { /* empty */ });\nvar flatMapWithoutClosingOnEarlyError = !IS_PURE && !FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR\n  && iteratorHelperWithoutClosingOnEarlyError('flatMap', TypeError);\n\nvar FORCED = IS_PURE || FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR || flatMapWithoutClosingOnEarlyError;\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var mapper = this.mapper;\n  var result, inner;\n\n  while (true) {\n    if (inner = this.inner) try {\n      result = anObject(call(inner.next, inner.iterator));\n      if (!result.done) return result.value;\n      this.inner = null;\n    } catch (error) { iteratorClose(iterator, 'throw', error); }\n\n    result = anObject(call(this.next, iterator));\n\n    if (this.done = !!result.done) return;\n\n    try {\n      this.inner = getIteratorFlattenable(mapper(result.value, this.counter++), false);\n    } catch (error) { iteratorClose(iterator, 'throw', error); }\n  }\n});\n\n// `Iterator.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.flatmap\n$({ target: 'Iterator', proto: true, real: true, forced: FORCED }, {\n  flatMap: function flatMap(mapper) {\n    anObject(this);\n    try {\n      aCallable(mapper);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (flatMapWithoutClosingOnEarlyError) return call(flatMapWithoutClosingOnEarlyError, this, mapper);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      mapper: mapper,\n      inner: null\n    });\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","'use strict';\nvar classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","'use strict';\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw new $TypeError('Incorrect invocation');\n};\n","'use strict';\n// Should throw an error on invalid iterator\n// https://issues.chromium.org/issues/336839115\nmodule.exports = function (methodName, argument) {\n  // eslint-disable-next-line es/no-iterator -- required for testing\n  var method = typeof Iterator == 'function' && Iterator.prototype[methodName];\n  if (method) try {\n    method.call({ next: null }, argument).next();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","'use strict';\nvar classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (options) {\n  var alphabet = options && options.alphabet;\n  if (alphabet === undefined || alphabet === 'base64' || alphabet === 'base64url') return alphabet || 'base64';\n  throw new $TypeError('Incorrect `alphabet` option');\n};\n","'use strict';\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nmodule.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","'use strict';\nvar classof = require('../internals/classof');\n\nmodule.exports = function (it) {\n  var klass = classof(it);\n  return klass === 'BigInt64Array' || klass === 'BigUint64Array';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar everyWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('every', TypeError);\n\n// `Iterator.prototype.every` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.every\n$({ target: 'Iterator', proto: true, real: true, forced: everyWithoutClosingOnEarlyError }, {\n  every: function every(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (everyWithoutClosingOnEarlyError) return call(everyWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return !iterate(record, function (value, stop) {\n      if (!predicate(value, counter++)) return stop();\n    }, { IS_RECORD: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar globalThis = require('../internals/global-this');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = globalThis.TypeError;\nvar WeakMap = globalThis.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw new TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","'use strict';\nvar trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","'use strict';\nvar iteratorClose = require('../internals/iterator-close');\n\nmodule.exports = function (iters, kind, value) {\n  for (var i = iters.length - 1; i >= 0; i--) {\n    if (iters[i] === undefined) continue;\n    try {\n      value = iteratorClose(iters[i].iterator, kind, value);\n    } catch (error) {\n      kind = 'throw';\n      value = error;\n    }\n  }\n  if (kind === 'throw') throw value;\n  return value;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar fails = require('../internals/fails');\nvar V8 = require('../internals/environment-v8-version');\nvar ENVIRONMENT = require('../internals/environment');\n\nvar structuredClone = globalThis.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((ENVIRONMENT === 'DENO' && V8 > 92) || (ENVIRONMENT === 'NODE' && V8 > 94) || (ENVIRONMENT === 'BROWSER' && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength !== 0 || clone.byteLength !== 8;\n});\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.uint8-array.set-from-base64');\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar apply = require('../internals/function-apply');\nvar slice = require('../internals/array-slice');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar aCallable = require('../internals/a-callable');\nvar perform = require('../internals/perform');\n\nvar Promise = globalThis.Promise;\n\nvar ACCEPT_ARGUMENTS = false;\n// Avoiding the use of polyfills of the previous iteration of this proposal\n// that does not accept arguments of the callback\nvar FORCED = !Promise || !Promise['try'] || perform(function () {\n  Promise['try'](function (argument) {\n    ACCEPT_ARGUMENTS = argument === 8;\n  }, 8);\n}).error || !ACCEPT_ARGUMENTS;\n\n// `Promise.try` method\n// https://tc39.es/ecma262/#sec-promise.try\n$({ target: 'Promise', stat: true, forced: FORCED }, {\n  'try': function (callbackfn /* , ...args */) {\n    var args = arguments.length > 1 ? slice(arguments, 1) : [];\n    var promiseCapability = newPromiseCapabilityModule.f(this);\n    var result = perform(function () {\n      return apply(aCallable(callbackfn), undefined, args);\n    });\n    (result.error ? promiseCapability.reject : promiseCapability.resolve)(result.value);\n    return promiseCapability.promise;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar union = require('../internals/set-union');\nvar setMethodGetKeysBeforeCloning = require('../internals/set-method-get-keys-before-cloning-detection');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar FORCED = !setMethodAcceptSetLike('union') || !setMethodGetKeysBeforeCloning('union');\n\n// `Set.prototype.union` method\n// https://tc39.es/ecma262/#sec-set.prototype.union\n$({ target: 'Set', proto: true, real: true, forced: FORCED }, {\n  union: union\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperThrowsOnInvalidIterator = require('../internals/iterator-helper-throws-on-invalid-iterator');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\nvar IS_PURE = require('../internals/is-pure');\n\nvar MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR = !IS_PURE && !iteratorHelperThrowsOnInvalidIterator('map', function () { /* empty */ });\nvar mapWithoutClosingOnEarlyError = !IS_PURE && !MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR\n  && iteratorHelperWithoutClosingOnEarlyError('map', TypeError);\n\nvar FORCED = IS_PURE || MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR || mapWithoutClosingOnEarlyError;\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return callWithSafeIterationClosing(iterator, this.mapper, [result.value, this.counter++], true);\n});\n\n// `Iterator.prototype.map` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.map\n$({ target: 'Iterator', proto: true, real: true, forced: FORCED }, {\n  map: function map(mapper) {\n    anObject(this);\n    try {\n      aCallable(mapper);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (mapWithoutClosingOnEarlyError) return call(mapWithoutClosingOnEarlyError, this, mapper);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      mapper: mapper\n    });\n  }\n});\n","'use strict';\n// `GetIteratorDirect(obj)` abstract operation\n// https://tc39.es/ecma262/#sec-getiteratordirect\nmodule.exports = function (obj) {\n  return {\n    iterator: obj,\n    next: obj.next,\n    done: false\n  };\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","'use strict';\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineProperty = require('../internals/object-define-property');\n\nmodule.exports = function (target, name, descriptor) {\n  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });\n  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });\n  return defineProperty.f(target, name, descriptor);\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar Uint8Array = globalThis.Uint8Array;\nvar SyntaxError = globalThis.SyntaxError;\nvar parseInt = globalThis.parseInt;\nvar min = Math.min;\nvar NOT_HEX = /[^\\da-f]/i;\nvar exec = uncurryThis(NOT_HEX.exec);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (string, into) {\n  var stringLength = string.length;\n  if (stringLength % 2 !== 0) throw new SyntaxError('String should be an even number of characters');\n  var maxLength = into ? min(into.length, stringLength / 2) : stringLength / 2;\n  var bytes = into || new Uint8Array(maxLength);\n  var read = 0;\n  var written = 0;\n  while (written < maxLength) {\n    var hexits = stringSlice(string, read, read += 2);\n    if (exec(NOT_HEX, hexits)) throw new SyntaxError('String should only contain hex characters');\n    bytes[written++] = parseInt(hexits, 16);\n  }\n  return { bytes: bytes, read: read };\n};\n","'use strict';\n/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  // eslint-disable-next-line no-useless-assignment -- avoid memory leak\n  activeXDocument = null;\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar isSupersetOf = require('../internals/set-is-superset-of');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isSupersetOf', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issupersetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSupersetOf: isSupersetOf\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar IS_PURE = require('../internals/is-pure');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperThrowsOnInvalidIterator = require('../internals/iterator-helper-throws-on-invalid-iterator');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR = !IS_PURE && !iteratorHelperThrowsOnInvalidIterator('filter', function () { /* empty */ });\nvar filterWithoutClosingOnEarlyError = !IS_PURE && !FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR\n  && iteratorHelperWithoutClosingOnEarlyError('filter', TypeError);\n\nvar FORCED = IS_PURE || FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR || filterWithoutClosingOnEarlyError;\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var predicate = this.predicate;\n  var next = this.next;\n  var result, done, value;\n  while (true) {\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n    value = result.value;\n    if (callWithSafeIterationClosing(iterator, predicate, [value, this.counter++], true)) return value;\n  }\n});\n\n// `Iterator.prototype.filter` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.filter\n$({ target: 'Iterator', proto: true, real: true, forced: FORCED }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (filterWithoutClosingOnEarlyError) return call(filterWithoutClosingOnEarlyError, this, predicate);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n","'use strict';\n// `CreateIterResultObject` abstract operation\n// https://tc39.es/ecma262/#sec-createiterresultobject\nmodule.exports = function (value, done) {\n  return { value: value, done: done };\n};\n","'use strict';\nvar toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_RECORD = !!(options && options.IS_RECORD);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal');\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_RECORD) {\n    iterator = iterable.iterator;\n  } else if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw new $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = IS_RECORD ? iterable.next : iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw new $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object ? ObjectPrototype : null;\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value === POLYFILL ? true\n    : value === NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","'use strict';\nvar commonAlphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nvar base64Alphabet = commonAlphabet + '+/';\nvar base64UrlAlphabet = commonAlphabet + '-_';\n\nvar inverse = function (characters) {\n  // TODO: use `Object.create(null)` in `core-js@4`\n  var result = {};\n  var index = 0;\n  for (; index < 64; index++) result[characters.charAt(index)] = index;\n  return result;\n};\n\nmodule.exports = {\n  i2c: base64Alphabet,\n  c2i: inverse(base64Alphabet),\n  i2cUrl: base64UrlAlphabet,\n  c2iUrl: inverse(base64UrlAlphabet)\n};\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\nvar navigator = globalThis.navigator;\nvar userAgent = navigator && navigator.userAgent;\n\nmodule.exports = userAgent ? String(userAgent) : '';\n","'use strict';\n/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar isObject = require('../internals/is-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    requireObjectCoercible(O);\n    aPossiblePrototype(proto);\n    if (!isObject(O)) return O;\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\n// based on Shewchuk's algorithm for exactly floating point addition\n// adapted from https://github.com/tc39/proposal-math-sum/blob/3513d58323a1ae25560e8700aa5294500c6c9287/polyfill/polyfill.mjs\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar iterate = require('../internals/iterate');\n\nvar $RangeError = RangeError;\nvar $TypeError = TypeError;\nvar $Infinity = Infinity;\nvar $NaN = NaN;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar push = uncurryThis([].push);\n\nvar POW_2_1023 = pow(2, 1023);\nvar MAX_SAFE_INTEGER = pow(2, 53) - 1; // 2 ** 53 - 1 === 9007199254740992\nvar MAX_DOUBLE = Number.MAX_VALUE; // 2 ** 1024 - 2 ** (1023 - 52) === 1.79769313486231570815e+308\nvar MAX_ULP = pow(2, 971); // 2 ** (1023 - 52) === 1.99584030953471981166e+292\n\nvar NOT_A_NUMBER = {};\nvar MINUS_INFINITY = {};\nvar PLUS_INFINITY = {};\nvar MINUS_ZERO = {};\nvar FINITE = {};\n\n// prerequisite: abs(x) >= abs(y)\nvar twosum = function (x, y) {\n  var hi = x + y;\n  var lo = y - (hi - x);\n  return { hi: hi, lo: lo };\n};\n\n// `Math.sumPrecise` method\n// https://github.com/tc39/proposal-math-sum\n$({ target: 'Math', stat: true }, {\n  // eslint-disable-next-line max-statements -- ok\n  sumPrecise: function sumPrecise(items) {\n    var numbers = [];\n    var count = 0;\n    var state = MINUS_ZERO;\n\n    iterate(items, function (n) {\n      if (++count >= MAX_SAFE_INTEGER) throw new $RangeError('Maximum allowed index exceeded');\n      if (typeof n != 'number') throw new $TypeError('Value is not a number');\n      if (state !== NOT_A_NUMBER) {\n        // eslint-disable-next-line no-self-compare -- NaN check\n        if (n !== n) state = NOT_A_NUMBER;\n        else if (n === $Infinity) state = state === MINUS_INFINITY ? NOT_A_NUMBER : PLUS_INFINITY;\n        else if (n === -$Infinity) state = state === PLUS_INFINITY ? NOT_A_NUMBER : MINUS_INFINITY;\n        else if ((n !== 0 || (1 / n) === $Infinity) && (state === MINUS_ZERO || state === FINITE)) {\n          state = FINITE;\n          push(numbers, n);\n        }\n      }\n    });\n\n    switch (state) {\n      case NOT_A_NUMBER: return $NaN;\n      case MINUS_INFINITY: return -$Infinity;\n      case PLUS_INFINITY: return $Infinity;\n      case MINUS_ZERO: return -0;\n    }\n\n    var partials = [];\n    var overflow = 0; // conceptually 2 ** 1024 times this value; the final partial is biased by this amount\n    var x, y, sum, hi, lo, tmp;\n\n    for (var i = 0; i < numbers.length; i++) {\n      x = numbers[i];\n      var actuallyUsedPartials = 0;\n      for (var j = 0; j < partials.length; j++) {\n        y = partials[j];\n        if (abs(x) < abs(y)) {\n          tmp = x;\n          x = y;\n          y = tmp;\n        }\n        sum = twosum(x, y);\n        hi = sum.hi;\n        lo = sum.lo;\n        if (abs(hi) === $Infinity) {\n          var sign = hi === $Infinity ? 1 : -1;\n          overflow += sign;\n\n          x = (x - (sign * POW_2_1023)) - (sign * POW_2_1023);\n          if (abs(x) < abs(y)) {\n            tmp = x;\n            x = y;\n            y = tmp;\n          }\n          sum = twosum(x, y);\n          hi = sum.hi;\n          lo = sum.lo;\n        }\n        if (lo !== 0) partials[actuallyUsedPartials++] = lo;\n        x = hi;\n      }\n      partials.length = actuallyUsedPartials;\n      if (x !== 0) push(partials, x);\n    }\n\n    // compute the exact sum of partials, stopping once we lose precision\n    var n = partials.length - 1;\n    hi = 0;\n    lo = 0;\n\n    if (overflow !== 0) {\n      var next = n >= 0 ? partials[n] : 0;\n      n--;\n      if (abs(overflow) > 1 || (overflow > 0 && next > 0) || (overflow < 0 && next < 0)) {\n        return overflow > 0 ? $Infinity : -$Infinity;\n      }\n      // here we actually have to do the arithmetic\n      // drop a factor of 2 so we can do it without overflow\n      // assert(abs(overflow) === 1)\n      sum = twosum(overflow * POW_2_1023, next / 2);\n      hi = sum.hi;\n      lo = sum.lo;\n      lo *= 2;\n      if (abs(2 * hi) === $Infinity) {\n        // rounding to the maximum value\n        if (hi > 0) {\n          return (hi === POW_2_1023 && lo === -(MAX_ULP / 2) && n >= 0 && partials[n] < 0) ? MAX_DOUBLE : $Infinity;\n        } return (hi === -POW_2_1023 && lo === (MAX_ULP / 2) && n >= 0 && partials[n] > 0) ? -MAX_DOUBLE : -$Infinity;\n      }\n\n      if (lo !== 0) {\n        partials[++n] = lo;\n        lo = 0;\n      }\n\n      hi *= 2;\n    }\n\n    while (n >= 0) {\n      sum = twosum(hi, partials[n--]);\n      hi = sum.hi;\n      lo = sum.lo;\n      if (lo !== 0) break;\n    }\n\n    if (n >= 0 && ((lo < 0 && partials[n] < 0) || (lo > 0 && partials[n] > 0))) {\n      y = lo * 2;\n      x = hi + y;\n      if (y === x - hi) hi = x;\n    }\n\n    return hi;\n  }\n});\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-basic-detection');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\n\nvar DataView = globalThis.DataView;\n\nmodule.exports = function (O) {\n  if (!NATIVE_ARRAY_BUFFER || arrayBufferByteLength(O) !== 0) return false;\n  try {\n    // eslint-disable-next-line no-new -- thrower\n    new DataView(O);\n    return false;\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.1.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar clone = require('../internals/set-clone');\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.difference` method\n// https://tc39.es/ecma262/#sec-set.prototype.difference\nmodule.exports = function difference(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = clone(O);\n  if (size(O) <= otherRec.size) iterateSet(O, function (e) {\n    if (otherRec.includes(e)) remove(result, e);\n  });\n  else iterateSimple(otherRec.getIterator(), function (e) {\n    if (has(result, e)) remove(result, e);\n  });\n  return result;\n};\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'string') return argument;\n  throw new $TypeError('Argument is not a string');\n};\n","'use strict';\nvar isPossiblePrototype = require('../internals/is-possible-prototype');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (isPossiblePrototype(argument)) return argument;\n  throw new $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar someWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('some', TypeError);\n\n// `Iterator.prototype.some` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.some\n$({ target: 'Iterator', proto: true, real: true, forced: someWithoutClosingOnEarlyError }, {\n  some: function some(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (someWithoutClosingOnEarlyError) return call(someWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop();\n    }, { IS_RECORD: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar clone = require('../internals/set-clone');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.symmetricDifference` method\n// https://tc39.es/ecma262/#sec-set.prototype.symmetricdifference\nmodule.exports = function symmetricDifference(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (e) {\n    if (has(O, e)) remove(result, e);\n    else add(result, e);\n  });\n  return result;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","'use strict';\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","'use strict';\nvar fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;\n});\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar call = require('../internals/function-call');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\nvar INVALID_SIZE = 'Invalid size';\nvar $RangeError = RangeError;\nvar $TypeError = TypeError;\nvar max = Math.max;\n\nvar SetRecord = function (set, intSize) {\n  this.set = set;\n  this.size = max(intSize, 0);\n  this.has = aCallable(set.has);\n  this.keys = aCallable(set.keys);\n};\n\nSetRecord.prototype = {\n  getIterator: function () {\n    return getIteratorDirect(anObject(call(this.keys, this.set)));\n  },\n  includes: function (it) {\n    return call(this.has, this.set, it);\n  }\n};\n\n// `GetSetRecord` abstract operation\n// https://tc39.es/proposal-set-methods/#sec-getsetrecord\nmodule.exports = function (obj) {\n  anObject(obj);\n  var numSize = +obj.size;\n  // NOTE: If size is undefined, then numSize will be NaN\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (numSize !== numSize) throw new $TypeError(INVALID_SIZE);\n  var intSize = toIntegerOrInfinity(numSize);\n  if (intSize < 0) throw new $RangeError(INVALID_SIZE);\n  return new SetRecord(obj, intSize);\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar size = require('../internals/set-size');\nvar iterate = require('../internals/set-iterate');\nvar getSetRecord = require('../internals/get-set-record');\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issubsetof\nmodule.exports = function isSubsetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) > otherRec.size) return false;\n  return iterate(O, function (e) {\n    if (!otherRec.includes(e)) return false;\n  }, true) !== false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar isDisjointFrom = require('../internals/set-is-disjoint-from');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isDisjointFrom', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.es/ecma262/#sec-set.prototype.isdisjointfrom\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isDisjointFrom: isDisjointFrom\n});\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nmodule.exports = function (argument) {\n  return isObject(argument) || argument === null;\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (argument === undefined || isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object or undefined');\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isObject = require('../internals/is-object');\n\nvar document = globalThis.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","'use strict';\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","'use strict';\nvar $RangeError = RangeError;\n\nmodule.exports = function (it) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (it === it) return it;\n  throw new $RangeError('NaN is not allowed');\n};\n","'use strict';\nvar classof = require('../internals/classof');\n\nvar $TypeError = TypeError;\n\n// Perform ? RequireInternalSlot(argument, [[TypedArrayName]])\n// If argument.[[TypedArrayName]] is not \"Uint8Array\", throw a TypeError exception\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Uint8Array') return argument;\n  throw new $TypeError('Argument is not an Uint8Array');\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar add = require('../internals/set-helpers').add;\nvar clone = require('../internals/set-clone');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\n\n// `Set.prototype.union` method\n// https://tc39.es/ecma262/#sec-set.prototype.union\nmodule.exports = function union(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","'use strict';\n/* global Bun, Deno -- detection */\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\nvar classof = require('../internals/classof-raw');\n\nvar userAgentStartsWith = function (string) {\n  return userAgent.slice(0, string.length) === string;\n};\n\nmodule.exports = (function () {\n  if (userAgentStartsWith('Bun/')) return 'BUN';\n  if (userAgentStartsWith('Cloudflare-Workers')) return 'CLOUDFLARE';\n  if (userAgentStartsWith('Deno/')) return 'DENO';\n  if (userAgentStartsWith('Node.js/')) return 'NODE';\n  if (globalThis.Bun && typeof Bun.version == 'string') return 'BUN';\n  if (globalThis.Deno && typeof Deno.version == 'object') return 'DENO';\n  if (classof(globalThis.process) === 'process') return 'NODE';\n  if (globalThis.window && globalThis.document) return 'BROWSER';\n  return 'REST';\n})();\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar aString = require('../internals/a-string');\nvar anUint8Array = require('../internals/an-uint8-array');\nvar notDetached = require('../internals/array-buffer-not-detached');\nvar $fromHex = require('../internals/uint8-from-hex');\n\n// `Uint8Array.prototype.setFromHex` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (globalThis.Uint8Array) $({ target: 'Uint8Array', proto: true }, {\n  setFromHex: function setFromHex(string) {\n    anUint8Array(this);\n    aString(string);\n    notDetached(this.buffer);\n    var read = $fromHex(string, this).read;\n    return { read: read, written: read / 2 };\n  }\n});\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.math.sum-precise');\n","'use strict';\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw new $TypeError(\"Can't convert object to primitive value\");\n};\n","'use strict';\nvar classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-set -- safe\nvar SetPrototype = Set.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-set -- safe\n  Set: Set,\n  add: uncurryThis(SetPrototype.add),\n  has: uncurryThis(SetPrototype.has),\n  remove: uncurryThis(SetPrototype['delete']),\n  proto: SetPrototype\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar has = require('../internals/set-helpers').has;\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\nvar iteratorClose = require('../internals/iterator-close');\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.es/ecma262/#sec-set.prototype.isdisjointfrom\nmodule.exports = function isDisjointFrom(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) <= otherRec.size) return iterateSet(O, function (e) {\n    if (otherRec.includes(e)) return false;\n  }, true) !== false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getBuiltInNodeModule = require('../internals/get-built-in-node-module');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar $ArrayBuffer = globalThis.ArrayBuffer;\nvar $MessageChannel = globalThis.MessageChannel;\nvar detach = false;\nvar WorkerThreads, channel, buffer, $detach;\n\nif (PROPER_STRUCTURED_CLONE_TRANSFER) {\n  detach = function (transferable) {\n    structuredClone(transferable, { transfer: [transferable] });\n  };\n} else if ($ArrayBuffer) try {\n  if (!$MessageChannel) {\n    WorkerThreads = getBuiltInNodeModule('worker_threads');\n    if (WorkerThreads) $MessageChannel = WorkerThreads.MessageChannel;\n  }\n\n  if ($MessageChannel) {\n    channel = new $MessageChannel();\n    buffer = new $ArrayBuffer(2);\n\n    $detach = function (transferable) {\n      channel.port1.postMessage(null, [transferable]);\n    };\n\n    if (buffer.byteLength === 2) {\n      $detach(buffer);\n      if (buffer.byteLength === 0) detach = $detach;\n    }\n  }\n} catch (error) { /* empty */ }\n\nmodule.exports = detach;\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/environment-v8-version');\nvar fails = require('../internals/fails');\nvar globalThis = require('../internals/global-this');\n\nvar $String = globalThis.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol('symbol detection');\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\n// https://github.com/tc39/ecma262/pull/3467\nmodule.exports = function (METHOD_NAME, ExpectedError) {\n  var Iterator = globalThis.Iterator;\n  var IteratorPrototype = Iterator && Iterator.prototype;\n  var method = IteratorPrototype && IteratorPrototype[METHOD_NAME];\n\n  var CLOSED = false;\n\n  if (method) try {\n    method.call({\n      next: function () { return { done: true }; },\n      'return': function () { CLOSED = true; }\n    }, -1);\n  } catch (error) {\n    // https://bugs.webkit.org/show_bug.cgi?id=291195\n    if (!(error instanceof ExpectedError)) CLOSED = false;\n  }\n\n  if (!CLOSED) return method;\n};\n","'use strict';\nvar check = function (it) {\n  return it && it.Math === Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  check(typeof this == 'object' && this) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\n\n// `Promise.withResolvers` method\n// https://tc39.es/ecma262/#sec-promise.withResolvers\n$({ target: 'Promise', stat: true }, {\n  withResolvers: function withResolvers() {\n    var promiseCapability = newPromiseCapabilityModule.f(this);\n    return {\n      promise: promiseCapability.promise,\n      resolve: promiseCapability.resolve,\n      reject: promiseCapability.reject\n    };\n  }\n});\n","'use strict';\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-basic-detection');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar tryToString = require('../internals/try-to-string');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar uid = require('../internals/uid');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar Int8Array = globalThis.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = globalThis.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar TypeError = globalThis.TypeError;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(globalThis.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQUIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar getTypedArrayConstructor = function (it) {\n  var proto = getPrototypeOf(it);\n  if (!isObject(proto)) return;\n  var state = getInternalState(proto);\n  return (state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR)) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw new TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;\n  throw new TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced, options) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) {\n      // old WebKit bug - some methods are non-configurable\n      try {\n        TypedArrayConstructor.prototype[KEY] = property;\n      } catch (error2) { /* empty */ }\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    defineBuiltIn(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = globalThis[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      defineBuiltIn(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw new TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQUIRED = true;\n  defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {\n    configurable: true,\n    get: function () {\n      return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n    }\n  });\n  for (NAME in TypedArrayConstructorsList) if (globalThis[NAME]) {\n    createNonEnumerableProperty(globalThis[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  getTypedArrayConstructor: getTypedArrayConstructor,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  if (DESCRIPTORS) definePropertyModule.f(object, key, createPropertyDescriptor(0, value));\n  else object[key] = value;\n};\n","'use strict';\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar documentAll = typeof document == 'object' && document.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nmodule.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\n\nvar createSetLike = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return false;\n    },\n    keys: function () {\n      return {\n        next: function () {\n          return { done: true };\n        }\n      };\n    }\n  };\n};\n\nvar createSetLikeWithInfinitySize = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return true;\n    },\n    keys: function () {\n      throw new Error('e');\n    }\n  };\n};\n\nmodule.exports = function (name, callback) {\n  var Set = getBuiltIn('Set');\n  try {\n    new Set()[name](createSetLike(0));\n    try {\n      // late spec change, early WebKit ~ Safari 17 implementation does not pass it\n      // https://github.com/tc39/proposal-set-methods/pull/88\n      // also covered engines with\n      // https://bugs.webkit.org/show_bug.cgi?id=272679\n      new Set()[name](createSetLike(-1));\n      return false;\n    } catch (error2) {\n      if (!callback) return true;\n      // early V8 implementation bug\n      // https://issues.chromium.org/issues/351332634\n      try {\n        new Set()[name](createSetLikeWithInfinitySize(-Infinity));\n        return false;\n      } catch (error) {\n        var set = new Set();\n        set.add(1);\n        set.add(2);\n        return callback(set[name](createSetLikeWithInfinitySize(Infinity)));\n      }\n    }\n  } catch (error) {\n    return false;\n  }\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar notANaN = require('../internals/not-a-nan');\nvar toPositiveInteger = require('../internals/to-positive-integer');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\nvar IS_PURE = require('../internals/is-pure');\n\nvar takeWithoutClosingOnEarlyError = !IS_PURE && iteratorHelperWithoutClosingOnEarlyError('take', RangeError);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  if (!this.remaining--) {\n    this.done = true;\n    return iteratorClose(iterator, 'normal', undefined);\n  }\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return result.value;\n});\n\n// `Iterator.prototype.take` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.take\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE || takeWithoutClosingOnEarlyError }, {\n  take: function take(limit) {\n    anObject(this);\n    var remaining;\n    try {\n      remaining = toPositiveInteger(notANaN(+limit));\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (takeWithoutClosingOnEarlyError) return call(takeWithoutClosingOnEarlyError, this, remaining);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      remaining: remaining\n    });\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar getBuiltIn = require('../internals/get-built-in');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar anInstance = require('../internals/an-instance');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar DOMExceptionConstants = require('../internals/dom-exception-constants');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = new Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(globalThis, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n","'use strict';\nmodule.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar symmetricDifference = require('../internals/set-symmetric-difference');\nvar setMethodGetKeysBeforeCloning = require('../internals/set-method-get-keys-before-cloning-detection');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar FORCED = !setMethodAcceptSetLike('symmetricDifference') || !setMethodGetKeysBeforeCloning('symmetricDifference');\n\n// `Set.prototype.symmetricDifference` method\n// https://tc39.es/ecma262/#sec-set.prototype.symmetricdifference\n$({ target: 'Set', proto: true, real: true, forced: FORCED }, {\n  symmetricDifference: symmetricDifference\n});\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","'use strict';\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isDetached(it)) throw new $TypeError('ArrayBuffer is detached');\n  return it;\n};\n","'use strict';\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar SetHelpers = require('../internals/set-helpers');\n\nmodule.exports = uncurryThisAccessor(SetHelpers.proto, 'size', 'get') || function (set) {\n  return set.size;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar arrayFromConstructorAndList = require('../internals/array-from-constructor-and-list');\nvar $fromBase64 = require('../internals/uint8-from-base64');\n\nvar Uint8Array = globalThis.Uint8Array;\n\nvar INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS = !Uint8Array || !Uint8Array.fromBase64 || !function () {\n  // Webkit not throw an error on odd length string\n  try {\n    Uint8Array.fromBase64('a');\n    return;\n  } catch (error) { /* empty */ }\n  try {\n    Uint8Array.fromBase64('', null);\n  } catch (error) {\n    return true;\n  }\n}();\n\n// `Uint8Array.fromBase64` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (Uint8Array) $({ target: 'Uint8Array', stat: true, forced: INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS }, {\n  fromBase64: function fromBase64(string /* , options */) {\n    var result = $fromBase64(string, arguments.length > 1 ? arguments[1] : undefined, null, 0x1FFFFFFFFFFFFF);\n    return arrayFromConstructorAndList(Uint8Array, result.bytes);\n  }\n});\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nmodule.exports = function (Constructor, list, $length) {\n  var index = 0;\n  var length = arguments.length > 2 ? $length : lengthOfArrayLike(list);\n  var result = new Constructor(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n","'use strict';\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.uint8-array.to-hex');\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar toIndex = require('../internals/to-index');\nvar notDetached = require('../internals/array-buffer-not-detached');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\nvar detachTransferable = require('../internals/detach-transferable');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar DataView = globalThis.DataView;\nvar min = Math.min;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataViewPrototype = DataView.prototype;\nvar slice = uncurryThis(ArrayBufferPrototype.slice);\nvar isResizable = uncurryThisAccessor(ArrayBufferPrototype, 'resizable', 'get');\nvar maxByteLength = uncurryThisAccessor(ArrayBufferPrototype, 'maxByteLength', 'get');\nvar getInt8 = uncurryThis(DataViewPrototype.getInt8);\nvar setInt8 = uncurryThis(DataViewPrototype.setInt8);\n\nmodule.exports = (PROPER_STRUCTURED_CLONE_TRANSFER || detachTransferable) && function (arrayBuffer, newLength, preserveResizability) {\n  var byteLength = arrayBufferByteLength(arrayBuffer);\n  var newByteLength = newLength === undefined ? byteLength : toIndex(newLength);\n  var fixedLength = !isResizable || !isResizable(arrayBuffer);\n  var newBuffer;\n  notDetached(arrayBuffer);\n  if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n    arrayBuffer = structuredClone(arrayBuffer, { transfer: [arrayBuffer] });\n    if (byteLength === newByteLength && (preserveResizability || fixedLength)) return arrayBuffer;\n  }\n  if (byteLength >= newByteLength && (!preserveResizability || fixedLength)) {\n    newBuffer = slice(arrayBuffer, 0, newByteLength);\n  } else {\n    var options = preserveResizability && !fixedLength && maxByteLength ? { maxByteLength: maxByteLength(arrayBuffer) } : undefined;\n    newBuffer = new ArrayBuffer(newByteLength, options);\n    var a = new DataView(arrayBuffer);\n    var b = new DataView(newBuffer);\n    var copyLength = min(newByteLength, byteLength);\n    for (var i = 0; i < copyLength; i++) setInt8(b, i, getInt8(a, i));\n  }\n  if (!PROPER_STRUCTURED_CLONE_TRANSFER) detachTransferable(arrayBuffer);\n  return newBuffer;\n};\n","'use strict';\nvar store = require('../internals/shared-store');\n\nmodule.exports = function (key, value) {\n  return store[key] || (store[key] = value || {});\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar toString = require('../internals/to-string');\nvar USE_NATIVE_URL = require('../internals/url-constructor-detection');\n\nvar URL = getBuiltIn('URL');\n\n// `URL.parse` method\n// https://url.spec.whatwg.org/#dom-url-canparse\n$({ target: 'URL', stat: true, forced: !USE_NATIVE_URL }, {\n  parse: function parse(url) {\n    var length = validateArgumentsLength(arguments.length, 1);\n    var urlString = toString(url);\n    var base = length < 2 || arguments[1] === undefined ? undefined : toString(arguments[1]);\n    try {\n      return new URL(urlString, base);\n    } catch (error) {\n      return null;\n    }\n  }\n});\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\n\nvar $TypeError = TypeError;\n\n// `ToBigInt` abstract operation\n// https://tc39.es/ecma262/#sec-tobigint\nmodule.exports = function (argument) {\n  var prim = toPrimitive(argument, 'number');\n  if (typeof prim == 'number') throw new $TypeError(\"Can't convert number to bigint\");\n  // eslint-disable-next-line es/no-bigint -- safe\n  return BigInt(prim);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar isSubsetOf = require('../internals/set-is-subset-of');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isSubsetOf', function (result) {\n  return result;\n});\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issubsetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSubsetOf: isSubsetOf\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a !== 7;\n});\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\n\nvar $TypeError = TypeError;\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw new $TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable(resolve);\n  this.reject = aCallable(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nvar shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","'use strict';\nvar ENVIRONMENT = require('../internals/environment');\n\nmodule.exports = ENVIRONMENT === 'NODE';\n","'use strict';\nvar toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) defineBuiltIn(target, key, src[key], options);\n  return target;\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n","'use strict';\nmodule.exports = false;\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = globalThis;\n  } else if (STATIC) {\n    target = globalThis[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = globalThis[TARGET] && globalThis[TARGET].prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\n\n// `ArrayBuffer.prototype.detached` getter\n// https://tc39.es/ecma262/#sec-get-arraybuffer.prototype.detached\nif (DESCRIPTORS && !('detached' in ArrayBufferPrototype)) {\n  defineBuiltInAccessor(ArrayBufferPrototype, 'detached', {\n    configurable: true,\n    get: function detached() {\n      return isDetached(this);\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar $fromBase64 = require('../internals/uint8-from-base64');\nvar anUint8Array = require('../internals/an-uint8-array');\n\nvar Uint8Array = globalThis.Uint8Array;\n\nvar INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS = !Uint8Array || !Uint8Array.prototype.setFromBase64 || !function () {\n  var target = new Uint8Array([255, 255, 255, 255, 255]);\n  try {\n    target.setFromBase64('', null);\n    return;\n  } catch (error) { /* empty */ }\n  // Webkit not throw an error on odd length string\n  try {\n    target.setFromBase64('a');\n    return;\n  } catch (error) { /* empty */ }\n  try {\n    target.setFromBase64('MjYyZg===');\n  } catch (error) {\n    return target[0] === 50 && target[1] === 54 && target[2] === 50 && target[3] === 255 && target[4] === 255;\n  }\n}();\n\n// `Uint8Array.prototype.setFromBase64` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (Uint8Array) $({ target: 'Uint8Array', proto: true, forced: INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS }, {\n  setFromBase64: function setFromBase64(string /* , options */) {\n    anUint8Array(this);\n\n    var result = $fromBase64(string, arguments.length > 1 ? arguments[1] : undefined, this, this.length);\n\n    return { read: result.read, written: result.written };\n  }\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\n\nmodule.exports = function (object, key, method) {\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));\n  } catch (error) { /* empty */ }\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","'use strict';\nvar $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","'use strict';\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","'use strict';\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL &&\n  !Symbol.sham &&\n  typeof Symbol.iterator == 'symbol';\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) === 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","'use strict';\nvar has = require('../internals/set-helpers').has;\n\n// Perform ? RequireInternalSlot(M, [[SetData]])\nmodule.exports = function (it) {\n  has(it);\n  return it;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar classof = require('../internals/classof-raw');\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar TypeError = globalThis.TypeError;\n\n// Includes\n// - Perform ? RequireInternalSlot(O, [[ArrayBufferData]]).\n// - If IsSharedArrayBuffer(O) is true, throw a TypeError exception.\nmodule.exports = ArrayBuffer && uncurryThisAccessor(ArrayBuffer.prototype, 'byteLength', 'get') || function (O) {\n  if (classof(O) !== 'ArrayBuffer') throw new TypeError('ArrayBuffer expected');\n  return O.byteLength;\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line unicorn/relative-url-style -- required for testing\n  var url = new URL('b?a=1&b=2&c=3', 'https://a');\n  var params = url.searchParams;\n  var params2 = new URLSearchParams('a=1&a=2&b=3');\n  var result = '';\n  url.pathname = 'c%20d';\n  params.forEach(function (value, key) {\n    params['delete']('b');\n    result += key + value;\n  });\n  params2['delete']('a', 2);\n  // `undefined` case is a Chromium 117 bug\n  // https://bugs.chromium.org/p/v8/issues/detail?id=14222\n  params2['delete']('b', undefined);\n  return (IS_PURE && (!url.toJSON || !params2.has('a', 1) || params2.has('a', 2) || !params2.has('a', undefined) || params2.has('b')))\n    || (!params.size && (IS_PURE || !DESCRIPTORS))\n    || !params.sort\n    || url.href !== 'https://a/c%20d?a=1&c=3'\n    || params.get('c') !== '3'\n    || String(new URLSearchParams('?a=1')) !== 'a=1'\n    || !params[ITERATOR]\n    // throws in Edge\n    || new URL('https://a@b').username !== 'a'\n    || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b'\n    // not punycoded in Edge\n    || new URL('https://тест').host !== 'xn--e1aybc'\n    // not escaped in Chrome 62-\n    || new URL('https://a#б').hash !== '#%D0%B1'\n    // fails in Chrome 66-\n    || result !== 'a1c3'\n    // throws in Safari\n    || new URL('https://x', undefined).host !== 'x';\n});\n","'use strict';\nvar classofRaw = require('../internals/classof-raw');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar forEachWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('forEach', TypeError);\n\n// `Iterator.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.foreach\n$({ target: 'Iterator', proto: true, real: true, forced: forEachWithoutClosingOnEarlyError }, {\n  forEach: function forEach(fn) {\n    anObject(this);\n    try {\n      aCallable(fn);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (forEachWithoutClosingOnEarlyError) return call(forEachWithoutClosingOnEarlyError, this, fn);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      fn(value, counter++);\n    }, { IS_RECORD: true });\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar globalThis = require('../internals/global-this');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});\n\n(store.versions || (store.versions = [])).push({\n  version: '3.45.0',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2025 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar difference = require('../internals/set-difference');\nvar fails = require('../internals/fails');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar SET_LIKE_INCORRECT_BEHAVIOR = !setMethodAcceptSetLike('difference', function (result) {\n  return result.size === 0;\n});\n\nvar FORCED = SET_LIKE_INCORRECT_BEHAVIOR || fails(function () {\n  // https://bugs.webkit.org/show_bug.cgi?id=288595\n  var setLike = {\n    size: 1,\n    has: function () { return true; },\n    keys: function () {\n      var index = 0;\n      return {\n        next: function () {\n          var done = index++ > 1;\n          if (baseSet.has(1)) baseSet.clear();\n          return { done: done, value: 2 };\n        }\n      };\n    }\n  };\n  // eslint-disable-next-line es/no-set -- testing\n  var baseSet = new Set([1, 2, 3, 4]);\n  // eslint-disable-next-line es/no-set-prototype-difference -- testing\n  return baseSet.difference(setLike).size !== 3;\n});\n\n// `Set.prototype.difference` method\n// https://tc39.es/ecma262/#sec-set.prototype.difference\n$({ target: 'Set', proto: true, real: true, forced: FORCED }, {\n  difference: difference\n});\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\nelse if (IS_PURE) IteratorPrototype = create(IteratorPrototype);\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif (!isCallable(IteratorPrototype[ITERATOR])) {\n  defineBuiltIn(IteratorPrototype, ITERATOR, function () {\n    return this;\n  });\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis([].slice);\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\n\nvar $RangeError = RangeError;\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toIntegerOrInfinity(it);\n  var length = toLength(number);\n  if (number !== length) throw new $RangeError('Wrong length or index');\n  return length;\n};\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","'use strict';\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw new $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(globalThis[namespace]) : globalThis[namespace] && globalThis[namespace][method];\n};\n","'use strict';\n// eslint-disable-next-line es/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transferToFixedLength` method\n// https://tc39.es/ecma262/#sec-arraybuffer.prototype.transfertofixedlength\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transferToFixedLength: function transferToFixedLength() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, false);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar intersection = require('../internals/set-intersection');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('intersection', function (result) {\n  return result.size === 2 && result.has(1) && result.has(2);\n}) || fails(function () {\n  // eslint-disable-next-line es/no-array-from, es/no-set, es/no-set-prototype-intersection -- testing\n  return String(Array.from(new Set([1, 2, 3]).intersection(new Set([3, 2])))) !== '3,2';\n});\n\n// `Set.prototype.intersection` method\n// https://tc39.es/ecma262/#sec-set.prototype.intersection\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  intersection: intersection\n});\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  var len = toIntegerOrInfinity(argument);\n  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transfer` method\n// https://tc39.es/ecma262/#sec-arraybuffer.prototype.transfer\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transfer: function transfer() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, true);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar anInstance = require('../internals/an-instance');\nvar anObject = require('../internals/an-object');\nvar isCallable = require('../internals/is-callable');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar createProperty = require('../internals/create-property');\nvar fails = require('../internals/fails');\nvar hasOwn = require('../internals/has-own-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar CONSTRUCTOR = 'constructor';\nvar ITERATOR = 'Iterator';\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nvar $TypeError = TypeError;\nvar NativeIterator = globalThis[ITERATOR];\n\n// FF56- have non-standard global helper `Iterator`\nvar FORCED = IS_PURE\n  || !isCallable(NativeIterator)\n  || NativeIterator.prototype !== IteratorPrototype\n  // FF44- non-standard `Iterator` passes previous tests\n  || !fails(function () { NativeIterator({}); });\n\nvar IteratorConstructor = function Iterator() {\n  anInstance(this, IteratorPrototype);\n  if (getPrototypeOf(this) === IteratorPrototype) throw new $TypeError('Abstract class Iterator not directly constructable');\n};\n\nvar defineIteratorPrototypeAccessor = function (key, value) {\n  if (DESCRIPTORS) {\n    defineBuiltInAccessor(IteratorPrototype, key, {\n      configurable: true,\n      get: function () {\n        return value;\n      },\n      set: function (replacement) {\n        anObject(this);\n        if (this === IteratorPrototype) throw new $TypeError(\"You can't redefine this property\");\n        if (hasOwn(this, key)) this[key] = replacement;\n        else createProperty(this, key, replacement);\n      }\n    });\n  } else IteratorPrototype[key] = value;\n};\n\nif (!hasOwn(IteratorPrototype, TO_STRING_TAG)) defineIteratorPrototypeAccessor(TO_STRING_TAG, ITERATOR);\n\nif (FORCED || !hasOwn(IteratorPrototype, CONSTRUCTOR) || IteratorPrototype[CONSTRUCTOR] === Object) {\n  defineIteratorPrototypeAccessor(CONSTRUCTOR, IteratorConstructor);\n}\n\nIteratorConstructor.prototype = IteratorPrototype;\n\n// `Iterator` constructor\n// https://tc39.es/ecma262/#sec-iterator\n$({ global: true, constructor: true, forced: FORCED }, {\n  Iterator: IteratorConstructor\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Symbol = globalThis.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\n\nvar $SyntaxError = SyntaxError;\nvar $parseInt = parseInt;\nvar fromCharCode = String.fromCharCode;\nvar at = uncurryThis(''.charAt);\nvar slice = uncurryThis(''.slice);\nvar exec = uncurryThis(/./.exec);\n\nvar codePoints = {\n  '\\\\\"': '\"',\n  '\\\\\\\\': '\\\\',\n  '\\\\/': '/',\n  '\\\\b': '\\b',\n  '\\\\f': '\\f',\n  '\\\\n': '\\n',\n  '\\\\r': '\\r',\n  '\\\\t': '\\t'\n};\n\nvar IS_4_HEX_DIGITS = /^[\\da-f]{4}$/i;\n// eslint-disable-next-line regexp/no-control-character -- safe\nvar IS_C0_CONTROL_CODE = /^[\\u0000-\\u001F]$/;\n\nmodule.exports = function (source, i) {\n  var unterminated = true;\n  var value = '';\n  while (i < source.length) {\n    var chr = at(source, i);\n    if (chr === '\\\\') {\n      var twoChars = slice(source, i, i + 2);\n      if (hasOwn(codePoints, twoChars)) {\n        value += codePoints[twoChars];\n        i += 2;\n      } else if (twoChars === '\\\\u') {\n        i += 2;\n        var fourHexDigits = slice(source, i, i + 4);\n        if (!exec(IS_4_HEX_DIGITS, fourHexDigits)) throw new $SyntaxError('Bad Unicode escape at: ' + i);\n        value += fromCharCode($parseInt(fourHexDigits, 16));\n        i += 4;\n      } else throw new $SyntaxError('Unknown escape sequence: \"' + twoChars + '\"');\n    } else if (chr === '\"') {\n      unterminated = false;\n      i++;\n      break;\n    } else {\n      if (exec(IS_C0_CONTROL_CODE, chr)) throw new $SyntaxError('Bad control character in string literal at: ' + i);\n      value += chr;\n      i++;\n    }\n  }\n  if (unterminated) throw new $SyntaxError('Unterminated string at: ' + i);\n  return { value: value, end: i };\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\nvar apply = require('../internals/function-apply');\nvar fails = require('../internals/fails');\n\nvar $TypeError = TypeError;\n\n// https://bugs.webkit.org/show_bug.cgi?id=291651\nvar FAILS_ON_INITIAL_UNDEFINED = fails(function () {\n  // eslint-disable-next-line es/no-iterator-prototype-reduce, es/no-array-prototype-keys, array-callback-return -- required for testing\n  [].keys().reduce(function () { /* empty */ }, undefined);\n});\n\nvar reduceWithoutClosingOnEarlyError = !FAILS_ON_INITIAL_UNDEFINED && iteratorHelperWithoutClosingOnEarlyError('reduce', $TypeError);\n\n// `Iterator.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.reduce\n$({ target: 'Iterator', proto: true, real: true, forced: FAILS_ON_INITIAL_UNDEFINED || reduceWithoutClosingOnEarlyError }, {\n  reduce: function reduce(reducer /* , initialValue */) {\n    anObject(this);\n    try {\n      aCallable(reducer);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    if (reduceWithoutClosingOnEarlyError) {\n      return apply(reduceWithoutClosingOnEarlyError, this, noInitial ? [reducer] : [reducer, accumulator]);\n    }\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = reducer(accumulator, value, counter);\n      }\n      counter++;\n    }, { IS_RECORD: true });\n    if (noInitial) throw new $TypeError('Reduce of empty iterator with no initial value');\n    return accumulator;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar globalThis = require('../internals/global-this');\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar hasOwn = require('../internals/has-own-property');\nvar toString = require('../internals/to-string');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar fails = require('../internals/fails');\nvar parseJSONString = require('../internals/parse-json-string');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nvar JSON = globalThis.JSON;\nvar Number = globalThis.Number;\nvar SyntaxError = globalThis.SyntaxError;\nvar nativeParse = JSON && JSON.parse;\nvar enumerableOwnProperties = getBuiltIn('Object', 'keys');\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar at = uncurryThis(''.charAt);\nvar slice = uncurryThis(''.slice);\nvar exec = uncurryThis(/./.exec);\nvar push = uncurryThis([].push);\n\nvar IS_DIGIT = /^\\d$/;\nvar IS_NON_ZERO_DIGIT = /^[1-9]$/;\nvar IS_NUMBER_START = /^[\\d-]$/;\nvar IS_WHITESPACE = /^[\\t\\n\\r ]$/;\n\nvar PRIMITIVE = 0;\nvar OBJECT = 1;\n\nvar $parse = function (source, reviver) {\n  source = toString(source);\n  var context = new Context(source, 0, '');\n  var root = context.parse();\n  var value = root.value;\n  var endIndex = context.skip(IS_WHITESPACE, root.end);\n  if (endIndex < source.length) {\n    throw new SyntaxError('Unexpected extra character: \"' + at(source, endIndex) + '\" after the parsed data at: ' + endIndex);\n  }\n  return isCallable(reviver) ? internalize({ '': value }, '', reviver, root) : value;\n};\n\nvar internalize = function (holder, name, reviver, node) {\n  var val = holder[name];\n  var unmodified = node && val === node.value;\n  var context = unmodified && typeof node.source == 'string' ? { source: node.source } : {};\n  var elementRecordsLen, keys, len, i, P;\n  if (isObject(val)) {\n    var nodeIsArray = isArray(val);\n    var nodes = unmodified ? node.nodes : nodeIsArray ? [] : {};\n    if (nodeIsArray) {\n      elementRecordsLen = nodes.length;\n      len = lengthOfArrayLike(val);\n      for (i = 0; i < len; i++) {\n        internalizeProperty(val, i, internalize(val, '' + i, reviver, i < elementRecordsLen ? nodes[i] : undefined));\n      }\n    } else {\n      keys = enumerableOwnProperties(val);\n      len = lengthOfArrayLike(keys);\n      for (i = 0; i < len; i++) {\n        P = keys[i];\n        internalizeProperty(val, P, internalize(val, P, reviver, hasOwn(nodes, P) ? nodes[P] : undefined));\n      }\n    }\n  }\n  return call(reviver, holder, name, val, context);\n};\n\nvar internalizeProperty = function (object, key, value) {\n  if (DESCRIPTORS) {\n    var descriptor = getOwnPropertyDescriptor(object, key);\n    if (descriptor && !descriptor.configurable) return;\n  }\n  if (value === undefined) delete object[key];\n  else createProperty(object, key, value);\n};\n\nvar Node = function (value, end, source, nodes) {\n  this.value = value;\n  this.end = end;\n  this.source = source;\n  this.nodes = nodes;\n};\n\nvar Context = function (source, index) {\n  this.source = source;\n  this.index = index;\n};\n\n// https://www.json.org/json-en.html\nContext.prototype = {\n  fork: function (nextIndex) {\n    return new Context(this.source, nextIndex);\n  },\n  parse: function () {\n    var source = this.source;\n    var i = this.skip(IS_WHITESPACE, this.index);\n    var fork = this.fork(i);\n    var chr = at(source, i);\n    if (exec(IS_NUMBER_START, chr)) return fork.number();\n    switch (chr) {\n      case '{':\n        return fork.object();\n      case '[':\n        return fork.array();\n      case '\"':\n        return fork.string();\n      case 't':\n        return fork.keyword(true);\n      case 'f':\n        return fork.keyword(false);\n      case 'n':\n        return fork.keyword(null);\n    } throw new SyntaxError('Unexpected character: \"' + chr + '\" at: ' + i);\n  },\n  node: function (type, value, start, end, nodes) {\n    return new Node(value, end, type ? null : slice(this.source, start, end), nodes);\n  },\n  object: function () {\n    var source = this.source;\n    var i = this.index + 1;\n    var expectKeypair = false;\n    var object = {};\n    var nodes = {};\n    while (i < source.length) {\n      i = this.until(['\"', '}'], i);\n      if (at(source, i) === '}' && !expectKeypair) {\n        i++;\n        break;\n      }\n      // Parsing the key\n      var result = this.fork(i).string();\n      var key = result.value;\n      i = result.end;\n      i = this.until([':'], i) + 1;\n      // Parsing value\n      i = this.skip(IS_WHITESPACE, i);\n      result = this.fork(i).parse();\n      createProperty(nodes, key, result);\n      createProperty(object, key, result.value);\n      i = this.until([',', '}'], result.end);\n      var chr = at(source, i);\n      if (chr === ',') {\n        expectKeypair = true;\n        i++;\n      } else if (chr === '}') {\n        i++;\n        break;\n      }\n    }\n    return this.node(OBJECT, object, this.index, i, nodes);\n  },\n  array: function () {\n    var source = this.source;\n    var i = this.index + 1;\n    var expectElement = false;\n    var array = [];\n    var nodes = [];\n    while (i < source.length) {\n      i = this.skip(IS_WHITESPACE, i);\n      if (at(source, i) === ']' && !expectElement) {\n        i++;\n        break;\n      }\n      var result = this.fork(i).parse();\n      push(nodes, result);\n      push(array, result.value);\n      i = this.until([',', ']'], result.end);\n      if (at(source, i) === ',') {\n        expectElement = true;\n        i++;\n      } else if (at(source, i) === ']') {\n        i++;\n        break;\n      }\n    }\n    return this.node(OBJECT, array, this.index, i, nodes);\n  },\n  string: function () {\n    var index = this.index;\n    var parsed = parseJSONString(this.source, this.index + 1);\n    return this.node(PRIMITIVE, parsed.value, index, parsed.end);\n  },\n  number: function () {\n    var source = this.source;\n    var startIndex = this.index;\n    var i = startIndex;\n    if (at(source, i) === '-') i++;\n    if (at(source, i) === '0') i++;\n    else if (exec(IS_NON_ZERO_DIGIT, at(source, i))) i = this.skip(IS_DIGIT, i + 1);\n    else throw new SyntaxError('Failed to parse number at: ' + i);\n    if (at(source, i) === '.') i = this.skip(IS_DIGIT, i + 1);\n    if (at(source, i) === 'e' || at(source, i) === 'E') {\n      i++;\n      if (at(source, i) === '+' || at(source, i) === '-') i++;\n      var exponentStartIndex = i;\n      i = this.skip(IS_DIGIT, i);\n      if (exponentStartIndex === i) throw new SyntaxError(\"Failed to parse number's exponent value at: \" + i);\n    }\n    return this.node(PRIMITIVE, Number(slice(source, startIndex, i)), startIndex, i);\n  },\n  keyword: function (value) {\n    var keyword = '' + value;\n    var index = this.index;\n    var endIndex = index + keyword.length;\n    if (slice(this.source, index, endIndex) !== keyword) throw new SyntaxError('Failed to parse value at: ' + index);\n    return this.node(PRIMITIVE, value, index, endIndex);\n  },\n  skip: function (regex, i) {\n    var source = this.source;\n    for (; i < source.length; i++) if (!exec(regex, at(source, i))) break;\n    return i;\n  },\n  until: function (array, i) {\n    i = this.skip(IS_WHITESPACE, i);\n    var chr = at(this.source, i);\n    for (var j = 0; j < array.length; j++) if (array[j] === chr) return i;\n    throw new SyntaxError('Unexpected character: \"' + chr + '\" at: ' + i);\n  }\n};\n\nvar NO_SOURCE_SUPPORT = fails(function () {\n  var unsafeInt = '9007199254740993';\n  var source;\n  nativeParse(unsafeInt, function (key, value, context) {\n    source = context.source;\n  });\n  return source !== unsafeInt;\n});\n\nvar PROPER_BASE_PARSE = NATIVE_SYMBOL && !fails(function () {\n  // Safari 9 bug\n  return 1 / nativeParse('-0 \\t') !== -Infinity;\n});\n\n// `JSON.parse` method\n// https://tc39.es/ecma262/#sec-json.parse\n// https://github.com/tc39/proposal-json-parse-with-source\n$({ target: 'JSON', stat: true, forced: NO_SOURCE_SUPPORT }, {\n  parse: function parse(text, reviver) {\n    return PROPER_BASE_PARSE && !isCallable(reviver) ? nativeParse(text) : $parse(text, reviver);\n  }\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar iterateSimple = require('../internals/iterate-simple');\nvar SetHelpers = require('../internals/set-helpers');\n\nvar Set = SetHelpers.Set;\nvar SetPrototype = SetHelpers.proto;\nvar forEach = uncurryThis(SetPrototype.forEach);\nvar keys = uncurryThis(SetPrototype.keys);\nvar next = keys(new Set()).next;\n\nmodule.exports = function (set, fn, interruptible) {\n  return interruptible ? iterateSimple({ iterator: keys(set), next: next }, fn) : forEach(set, fn);\n};\n","'use strict';\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar has = require('../internals/set-helpers').has;\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\nvar iteratorClose = require('../internals/iterator-close');\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issupersetof\nmodule.exports = function isSupersetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) < otherRec.size) return false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (!has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object');\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String(new $Error(arg).stack); })('zxcasd');\n// eslint-disable-next-line redos/no-vulnerable, sonarjs/slow-regex -- safe\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = globalThis.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","'use strict';\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nmodule.exports = function (obj, stringHandling) {\n  if (!stringHandling || typeof obj !== 'string') anObject(obj);\n  var method = getIteratorMethod(obj);\n  return getIteratorDirect(anObject(method !== undefined ? call(method, obj) : obj));\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype !== 42;\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n","'use strict';\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es/no-function-prototype-bind, es/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\n\n// `Set.prototype.intersection` method\n// https://tc39.es/ecma262/#sec-set.prototype.intersection\nmodule.exports = function intersection(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = new Set();\n\n  if (size(O) > otherRec.size) {\n    iterateSimple(otherRec.getIterator(), function (e) {\n      if (has(O, e)) add(result, e);\n    });\n  } else {\n    iterateSet(O, function (e) {\n      if (otherRec.includes(e)) add(result, e);\n    });\n  }\n\n  return result;\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","'use strict';\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","'use strict';\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anObjectOrUndefined = require('../internals/an-object-or-undefined');\nvar aString = require('../internals/a-string');\nvar hasOwn = require('../internals/has-own-property');\nvar base64Map = require('../internals/base64-map');\nvar getAlphabetOption = require('../internals/get-alphabet-option');\nvar notDetached = require('../internals/array-buffer-not-detached');\n\nvar base64Alphabet = base64Map.c2i;\nvar base64UrlAlphabet = base64Map.c2iUrl;\n\nvar SyntaxError = globalThis.SyntaxError;\nvar TypeError = globalThis.TypeError;\nvar at = uncurryThis(''.charAt);\n\nvar skipAsciiWhitespace = function (string, index) {\n  var length = string.length;\n  for (;index < length; index++) {\n    var chr = at(string, index);\n    if (chr !== ' ' && chr !== '\\t' && chr !== '\\n' && chr !== '\\f' && chr !== '\\r') break;\n  } return index;\n};\n\nvar decodeBase64Chunk = function (chunk, alphabet, throwOnExtraBits) {\n  var chunkLength = chunk.length;\n\n  if (chunkLength < 4) {\n    chunk += chunkLength === 2 ? 'AA' : 'A';\n  }\n\n  var triplet = (alphabet[at(chunk, 0)] << 18)\n    + (alphabet[at(chunk, 1)] << 12)\n    + (alphabet[at(chunk, 2)] << 6)\n    + alphabet[at(chunk, 3)];\n\n  var chunkBytes = [\n    (triplet >> 16) & 255,\n    (triplet >> 8) & 255,\n    triplet & 255\n  ];\n\n  if (chunkLength === 2) {\n    if (throwOnExtraBits && chunkBytes[1] !== 0) {\n      throw new SyntaxError('Extra bits');\n    }\n    return [chunkBytes[0]];\n  }\n\n  if (chunkLength === 3) {\n    if (throwOnExtraBits && chunkBytes[2] !== 0) {\n      throw new SyntaxError('Extra bits');\n    }\n    return [chunkBytes[0], chunkBytes[1]];\n  }\n\n  return chunkBytes;\n};\n\nvar writeBytes = function (bytes, elements, written) {\n  var elementsLength = elements.length;\n  for (var index = 0; index < elementsLength; index++) {\n    bytes[written + index] = elements[index];\n  }\n  return written + elementsLength;\n};\n\n/* eslint-disable max-statements, max-depth -- TODO */\nmodule.exports = function (string, options, into, maxLength) {\n  aString(string);\n  anObjectOrUndefined(options);\n  var alphabet = getAlphabetOption(options) === 'base64' ? base64Alphabet : base64UrlAlphabet;\n  var lastChunkHandling = options ? options.lastChunkHandling : undefined;\n\n  if (lastChunkHandling === undefined) lastChunkHandling = 'loose';\n\n  if (lastChunkHandling !== 'loose' && lastChunkHandling !== 'strict' && lastChunkHandling !== 'stop-before-partial') {\n    throw new TypeError('Incorrect `lastChunkHandling` option');\n  }\n\n  if (into) notDetached(into.buffer);\n\n  var stringLength = string.length;\n  var bytes = into || [];\n  var written = 0;\n  var read = 0;\n  var chunk = '';\n  var index = 0;\n\n  if (maxLength) while (true) {\n    index = skipAsciiWhitespace(string, index);\n    if (index === stringLength) {\n      if (chunk.length > 0) {\n        if (lastChunkHandling === 'stop-before-partial') {\n          break;\n        }\n        if (lastChunkHandling === 'loose') {\n          if (chunk.length === 1) {\n            throw new SyntaxError('Malformed padding: exactly one additional character');\n          }\n          written = writeBytes(bytes, decodeBase64Chunk(chunk, alphabet, false), written);\n        } else {\n          throw new SyntaxError('Missing padding');\n        }\n      }\n      read = stringLength;\n      break;\n    }\n    var chr = at(string, index);\n    ++index;\n    if (chr === '=') {\n      if (chunk.length < 2) {\n        throw new SyntaxError('Padding is too early');\n      }\n      index = skipAsciiWhitespace(string, index);\n      if (chunk.length === 2) {\n        if (index === stringLength) {\n          if (lastChunkHandling === 'stop-before-partial') {\n            break;\n          }\n          throw new SyntaxError('Malformed padding: only one =');\n        }\n        if (at(string, index) === '=') {\n          ++index;\n          index = skipAsciiWhitespace(string, index);\n        }\n      }\n      if (index < stringLength) {\n        throw new SyntaxError('Unexpected character after padding');\n      }\n      written = writeBytes(bytes, decodeBase64Chunk(chunk, alphabet, lastChunkHandling === 'strict'), written);\n      read = stringLength;\n      break;\n    }\n    if (!hasOwn(alphabet, chr)) {\n      throw new SyntaxError('Unexpected character');\n    }\n    var remainingBytes = maxLength - written;\n    if (remainingBytes === 1 && chunk.length === 2 || remainingBytes === 2 && chunk.length === 3) {\n      // special case: we can fit exactly the number of bytes currently represented by chunk, so we were just checking for `=`\n      break;\n    }\n\n    chunk += chr;\n    if (chunk.length === 4) {\n      written = writeBytes(bytes, decodeBase64Chunk(chunk, alphabet, false), written);\n      chunk = '';\n      read = index;\n      if (written === maxLength) {\n        break;\n      }\n    }\n  }\n\n  return { bytes: bytes, read: read, written: written };\n};\n","'use strict';\nvar SetHelpers = require('../internals/set-helpers');\nvar iterate = require('../internals/set-iterate');\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\n\nmodule.exports = function (set) {\n  var result = new Set();\n  iterate(set, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw new $TypeError(tryToString(argument) + ' is not a function');\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar notANaN = require('../internals/not-a-nan');\nvar toPositiveInteger = require('../internals/to-positive-integer');\nvar iteratorClose = require('../internals/iterator-close');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar iteratorHelperThrowsOnInvalidIterator = require('../internals/iterator-helper-throws-on-invalid-iterator');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\nvar IS_PURE = require('../internals/is-pure');\n\nvar DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR = !IS_PURE && !iteratorHelperThrowsOnInvalidIterator('drop', 0);\nvar dropWithoutClosingOnEarlyError = !IS_PURE && !DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR\n  && iteratorHelperWithoutClosingOnEarlyError('drop', RangeError);\n\nvar FORCED = IS_PURE || DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR || dropWithoutClosingOnEarlyError;\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var next = this.next;\n  var result, done;\n  while (this.remaining) {\n    this.remaining--;\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n  }\n  result = anObject(call(next, iterator));\n  done = this.done = !!result.done;\n  if (!done) return result.value;\n});\n\n// `Iterator.prototype.drop` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.drop\n$({ target: 'Iterator', proto: true, real: true, forced: FORCED }, {\n  drop: function drop(limit) {\n    anObject(this);\n    var remaining;\n    try {\n      remaining = toPositiveInteger(notANaN(+limit));\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (dropWithoutClosingOnEarlyError) return call(dropWithoutClosingOnEarlyError, this, remaining);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      remaining: remaining\n    });\n  }\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar IS_NODE = require('../internals/environment-is-node');\n\nmodule.exports = function (name) {\n  if (IS_NODE) {\n    try {\n      return globalThis.process.getBuiltinModule(name);\n    } catch (error) { /* empty */ }\n    try {\n      // eslint-disable-next-line no-new-func -- safe\n      return Function('return require(\"' + name + '\")')();\n    } catch (error) { /* empty */ }\n  }\n};\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.uint8-array.from-base64');\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(globalThis, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    globalThis[key] = value;\n  } return value;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar create = require('../internals/object-create');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIns = require('../internals/define-built-ins');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar InternalStateModule = require('../internals/internal-state');\nvar getMethod = require('../internals/get-method');\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar createIterResultObject = require('../internals/create-iter-result-object');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorCloseAll = require('../internals/iterator-close-all');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ITERATOR_HELPER = 'IteratorHelper';\nvar WRAP_FOR_VALID_ITERATOR = 'WrapForValidIterator';\nvar NORMAL = 'normal';\nvar THROW = 'throw';\nvar setInternalState = InternalStateModule.set;\n\nvar createIteratorProxyPrototype = function (IS_ITERATOR) {\n  var getInternalState = InternalStateModule.getterFor(IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER);\n\n  return defineBuiltIns(create(IteratorPrototype), {\n    next: function next() {\n      var state = getInternalState(this);\n      // for simplification:\n      //   for `%WrapForValidIteratorPrototype%.next` or with `state.returnHandlerResult` our `nextHandler` returns `IterResultObject`\n      //   for `%IteratorHelperPrototype%.next` - just a value\n      if (IS_ITERATOR) return state.nextHandler();\n      if (state.done) return createIterResultObject(undefined, true);\n      try {\n        var result = state.nextHandler();\n        return state.returnHandlerResult ? result : createIterResultObject(result, state.done);\n      } catch (error) {\n        state.done = true;\n        throw error;\n      }\n    },\n    'return': function () {\n      var state = getInternalState(this);\n      var iterator = state.iterator;\n      state.done = true;\n      if (IS_ITERATOR) {\n        var returnMethod = getMethod(iterator, 'return');\n        return returnMethod ? call(returnMethod, iterator) : createIterResultObject(undefined, true);\n      }\n      if (state.inner) try {\n        iteratorClose(state.inner.iterator, NORMAL);\n      } catch (error) {\n        return iteratorClose(iterator, THROW, error);\n      }\n      if (state.openIters) try {\n        iteratorCloseAll(state.openIters, NORMAL);\n      } catch (error) {\n        return iteratorClose(iterator, THROW, error);\n      }\n      if (iterator) iteratorClose(iterator, NORMAL);\n      return createIterResultObject(undefined, true);\n    }\n  });\n};\n\nvar WrapForValidIteratorPrototype = createIteratorProxyPrototype(true);\nvar IteratorHelperPrototype = createIteratorProxyPrototype(false);\n\ncreateNonEnumerableProperty(IteratorHelperPrototype, TO_STRING_TAG, 'Iterator Helper');\n\nmodule.exports = function (nextHandler, IS_ITERATOR, RETURN_HANDLER_RESULT) {\n  var IteratorProxy = function Iterator(record, state) {\n    if (state) {\n      state.iterator = record.iterator;\n      state.next = record.next;\n    } else state = record;\n    state.type = IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER;\n    state.returnHandlerResult = !!RETURN_HANDLER_RESULT;\n    state.nextHandler = nextHandler;\n    state.counter = 0;\n    state.done = false;\n    setInternalState(this, state);\n  };\n\n  IteratorProxy.prototype = IS_ITERATOR ? WrapForValidIteratorPrototype : IteratorHelperPrototype;\n\n  return IteratorProxy;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anObjectOrUndefined = require('../internals/an-object-or-undefined');\nvar anUint8Array = require('../internals/an-uint8-array');\nvar notDetached = require('../internals/array-buffer-not-detached');\nvar base64Map = require('../internals/base64-map');\nvar getAlphabetOption = require('../internals/get-alphabet-option');\n\nvar base64Alphabet = base64Map.i2c;\nvar base64UrlAlphabet = base64Map.i2cUrl;\n\nvar charAt = uncurryThis(''.charAt);\n\nvar Uint8Array = globalThis.Uint8Array;\n\nvar INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS = !Uint8Array || !Uint8Array.prototype.toBase64 || !function () {\n  try {\n    var target = new Uint8Array();\n    target.toBase64(null);\n  } catch (error) {\n    return true;\n  }\n}();\n\n// `Uint8Array.prototype.toBase64` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (Uint8Array) $({ target: 'Uint8Array', proto: true, forced: INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS }, {\n  toBase64: function toBase64(/* options */) {\n    var array = anUint8Array(this);\n    var options = arguments.length ? anObjectOrUndefined(arguments[0]) : undefined;\n    var alphabet = getAlphabetOption(options) === 'base64' ? base64Alphabet : base64UrlAlphabet;\n    var omitPadding = !!options && !!options.omitPadding;\n    notDetached(this.buffer);\n\n    var result = '';\n    var i = 0;\n    var length = array.length;\n    var triplet;\n\n    var at = function (shift) {\n      return charAt(alphabet, (triplet >> (6 * shift)) & 63);\n    };\n\n    for (; i + 2 < length; i += 3) {\n      triplet = (array[i] << 16) + (array[i + 1] << 8) + array[i + 2];\n      result += at(3) + at(2) + at(1) + at(0);\n    }\n    if (i + 2 === length) {\n      triplet = (array[i] << 16) + (array[i + 1] << 8);\n      result += at(3) + at(2) + at(1) + (omitPadding ? '' : '=');\n    } else if (i + 1 === length) {\n      triplet = array[i] << 16;\n      result += at(3) + at(2) + (omitPadding ? '' : '==');\n    }\n\n    return result;\n  }\n});\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\n// eslint-disable-next-line es/no-function-prototype-bind -- safe\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\n\nvar process = globalThis.process;\nvar Deno = globalThis.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","'use strict';\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n// eslint-disable-next-line es/no-function-prototype-bind -- safe\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar arrayWith = require('../internals/array-with');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar isBigIntArray = require('../internals/is-big-int-array');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toBigInt = require('../internals/to-big-int');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar PROPER_ORDER = function () {\n  try {\n    // eslint-disable-next-line no-throw-literal, es/no-typed-arrays, es/no-array-prototype-with -- required for testing\n    new Int8Array(1)['with'](2, { valueOf: function () { throw 8; } });\n  } catch (error) {\n    // some early implementations, like WebKit, does not follow the final semantic\n    // https://github.com/tc39/proposal-change-array-by-copy/pull/86\n    return error === 8;\n  }\n}();\n\n// Bug in WebKit. It should truncate a negative fractional index to zero, but instead throws an error\nvar THROW_ON_NEGATIVE_FRACTIONAL_INDEX = PROPER_ORDER && function () {\n  try {\n    // eslint-disable-next-line es/no-typed-arrays, es/no-array-prototype-with -- required for testing\n    new Int8Array(1)['with'](-0.5, 1);\n  } catch (error) {\n    return true;\n  }\n}();\n\n// `%TypedArray%.prototype.with` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.with\nexportTypedArrayMethod('with', { 'with': function (index, value) {\n  var O = aTypedArray(this);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualValue = isBigIntArray(O) ? toBigInt(value) : +value;\n  return arrayWith(O, getTypedArrayConstructor(O), relativeIndex, actualValue);\n} }['with'], !PROPER_ORDER || THROW_ON_NEGATIVE_FRACTIONAL_INDEX);\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar $RangeError = RangeError;\n\nmodule.exports = function (it) {\n  var result = toIntegerOrInfinity(it);\n  if (result < 0) throw new $RangeError(\"The argument can't be less than 0\");\n  return result;\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    if (length === 0) return !IS_INCLUDES && -1;\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el !== el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value !== value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.uint8-array.to-base64');\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.uint8-array.set-from-hex');\n","'use strict';\n// Should get iterator record of a set-like object before cloning this\n// https://bugs.webkit.org/show_bug.cgi?id=289430\nmodule.exports = function (METHOD_NAME) {\n  try {\n    // eslint-disable-next-line es/no-set -- needed for test\n    var baseSet = new Set();\n    var setLike = {\n      size: 0,\n      has: function () { return true; },\n      keys: function () {\n        // eslint-disable-next-line es/no-object-defineproperty -- needed for test\n        return Object.defineProperty({}, 'next', {\n          get: function () {\n            baseSet.clear();\n            baseSet.add(4);\n            return function () {\n              return { done: true };\n            };\n          }\n        });\n      }\n    };\n    var result = baseSet[METHOD_NAME](setLike);\n\n    return result.size === 1 && result.values().next().value === 4;\n  } catch (error) {\n    return false;\n  }\n};\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar $RangeError = RangeError;\n\n// https://tc39.es/ecma262/#sec-array.prototype.with\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.with\nmodule.exports = function (O, C, index, value) {\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualIndex = relativeIndex < 0 ? len + relativeIndex : relativeIndex;\n  if (actualIndex >= len || actualIndex < 0) throw new $RangeError('Incorrect index');\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = k === actualIndex ? value : O[k];\n  return A;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals process */\n\n// NW.js / Electron is a browser context, but copies some Node.js objects; see\n// http://docs.nwjs.io/en/latest/For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/#access-nodejs-and-nwjs-api-in-browser-context\n// https://www.electronjs.org/docs/api/process#processversionselectron-readonly\n// https://www.electronjs.org/docs/api/process#processtype-readonly\nconst isNodeJS =\n  (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n  typeof process === \"object\" &&\n  process + \"\" === \"[object process]\" &&\n  !process.versions.nw &&\n  !(process.versions.electron && process.type && process.type !== \"browser\");\n\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\n// Represent the percentage of the height of a single-line field over\n// the font size. Acrobat seems to use this value.\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\n\n/**\n * Refer to the `WorkerTransport.getRenderingIntent`-method in the API, to see\n * how these flags are being used:\n *  - ANY, DISPLAY, and PRINT are the normal rendering intents, note the\n *    `PDFPageProxy.{render, getOperatorList, getAnnotations}`-methods.\n *  - SAVE is used, on the worker-thread, when saving modified annotations.\n *  - ANNOTATIONS_FORMS, ANNOTATIONS_STORAGE, ANNOTATIONS_DISABLE control which\n *    annotations are rendered onto the canvas (i.e. by being included in the\n *    operatorList), note the `PDFPageProxy.{render, getOperatorList}`-methods\n *    and their `annotationMode`-option.\n *  - IS_EDITING is used when editing is active in the viewer.\n *  - OPLIST is used with the `PDFPageProxy.getOperatorList`-method, note the\n *    `OperatorList`-constructor (on the worker-thread).\n */\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  IS_EDITING: 0x80,\n  OPLIST: 0x100,\n};\n\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3,\n};\n\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\n\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n  POPUP: 16,\n  SIGNATURE: 101,\n  COMMENT: 102,\n};\n\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_THICKNESS: 32,\n  HIGHLIGHT_FREE: 33,\n  HIGHLIGHT_SHOW_ALL: 34,\n  DRAW_STEP: 41,\n};\n\n// Permission flags from Table 22, Section 7.6.3.2 of the PDF specification.\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800,\n};\n\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4,\n};\n\nconst ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3,\n};\n\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26,\n};\n\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\",\n};\n\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200,\n};\n\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\n\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5,\n};\n\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\",\n};\n\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\",\n};\n\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\",\n};\n\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5,\n};\n\n// All the possible operations for an operator list.\nconst OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  // PLEASE NOTE: We purposely keep any removed operators commented out, since\n  //              re-numbering the list would risk breaking third-party users.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  // beginAnnotations: 78,\n  // endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  // paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n  setStrokeTransparent: 92,\n  setFillTransparent: 93,\n  rawFillPath: 94,\n};\n\n// In order to have a switch statement that is fast (i.e. which use a jump\n// table), we need to have the OPS in a contiguous range.\nconst DrawOPS = {\n  moveTo: 0,\n  lineTo: 1,\n  curveTo: 2,\n  closePath: 3,\n};\n\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2,\n};\n\nlet verbosity = VerbosityLevel.WARNINGS;\n\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\n\nfunction getVerbosityLevel() {\n  return verbosity;\n}\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    // eslint-disable-next-line no-console\n    console.log(`Info: ${msg}`);\n  }\n}\n\n// Non-fatal warnings.\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    // eslint-disable-next-line no-console\n    console.log(`Warning: ${msg}`);\n  }\n}\n\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\n\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\n\n// Checks if URLs use one of the allowed protocols, e.g. to avoid XSS.\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Attempts to create a valid absolute URL.\n *\n * @param {URL|string} url - An absolute, or relative, URL.\n * @param {URL|string} [baseUrl] - An absolute URL.\n * @param {Object} [options]\n * @returns Either a valid {URL}, or `null` otherwise.\n */\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  if (options && typeof url === \"string\") {\n    // Let URLs beginning with \"www.\" default to using the \"http://\" protocol.\n    if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n      const dots = url.match(/\\./g);\n      // Avoid accidentally matching a *relative* URL pointing to a file named\n      // e.g. \"www.pdf\" or similar.\n      if (dots?.length >= 2) {\n        url = `http://${url}`;\n      }\n    }\n\n    // According to ISO 32000-1:2008, section 12.6.4.7, URIs should be encoded\n    // in 7-bit ASCII. Some bad PDFs use UTF-8 encoding; see bug 1122280.\n    if (options.tryConvertEncoding) {\n      try {\n        url = stringToUTF8String(url);\n      } catch {}\n    }\n  }\n\n  const absoluteUrl = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return _isValidProtocol(absoluteUrl) ? absoluteUrl : null;\n}\n\n/**\n * Remove, or replace, the hash property of the URL.\n *\n * @param {URL|string} url - The absolute, or relative, URL.\n * @param {string} hash - The hash property (use an empty string to remove it).\n * @param {boolean} [allowRel] - Allow relative URLs.\n * @returns {string} The resulting URL string.\n */\nfunction updateUrlHash(url, hash, allowRel = false) {\n  const res = URL.parse(url);\n  if (res) {\n    res.hash = hash;\n    return res.href;\n  }\n  // Support well-formed relative URLs, necessary for `web/app.js` in GENERIC\n  // builds, by optionally falling back to string parsing.\n  if (allowRel && createValidAbsoluteUrl(url, \"http://example.com\")) {\n    return url.split(\"#\", 1)[0] + `${hash ? `#${hash}` : \"\"}`;\n  }\n  return \"\";\n}\n\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      prop in obj,\n      `shadow: Property \"${prop && prop.toString()}\" not found in object.`\n    );\n  }\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false,\n  });\n  return value;\n}\n\n/**\n * @type {any}\n */\nconst BaseException = (function BaseExceptionClosure() {\n  // eslint-disable-next-line no-shadow\n  function BaseException(message, name) {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) &&\n      this.constructor === BaseException\n    ) {\n      unreachable(\"Cannot initialize BaseException.\");\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n\n  return BaseException;\n})();\n\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\n\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\n\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\n\nclass ResponseException extends BaseException {\n  constructor(msg, status, missing) {\n    super(msg, \"ResponseException\");\n    this.status = status;\n    this.missing = missing;\n  }\n}\n\n/**\n * Error caused during parsing PDF data.\n */\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\n\n/**\n * Error used to indicate task cancellation.\n */\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\n\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\n\nfunction string32(value) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      typeof value === \"number\" && Math.abs(value) < 2 ** 32,\n      `string32: Unexpected input \"${value}\".`\n    );\n  }\n  return String.fromCharCode(\n    (value >> 24) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 8) & 0xff,\n    value & 0xff\n  );\n}\n\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\n\n// Checks the endianness of the platform.\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\n\n// Checks if it's possible to eval JS expressions.\nfunction isEvalSupported() {\n  try {\n    new Function(\"\"); // eslint-disable-line no-new, no-new-func\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nclass FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n\n  static get isOffscreenCanvasSupported() {\n    return shadow(\n      this,\n      \"isOffscreenCanvasSupported\",\n      typeof OffscreenCanvas !== \"undefined\"\n    );\n  }\n\n  static get isImageDecoderSupported() {\n    return shadow(\n      this,\n      \"isImageDecoderSupported\",\n      typeof ImageDecoder !== \"undefined\"\n    );\n  }\n\n  static get platform() {\n    const { platform, userAgent } = navigator;\n\n    return shadow(this, \"platform\", {\n      isAndroid: userAgent.includes(\"Android\"),\n      isLinux: platform.includes(\"Linux\"),\n      isMac: platform.includes(\"Mac\"),\n      isWindows: platform.includes(\"Win\"),\n      isFirefox:\n        (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n        userAgent.includes(\"Firefox\"),\n    });\n  }\n\n  static get isCSSRoundSupported() {\n    return shadow(\n      this,\n      \"isCSSRoundSupported\",\n      globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\")\n    );\n  }\n}\n\nconst hexNumbers = Array.from(Array(256).keys(), n =>\n  n.toString(16).padStart(2, \"0\")\n);\n\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n\n  static domMatrixToTransform(dm) {\n    return [dm.a, dm.b, dm.c, dm.d, dm.e, dm.f];\n  }\n\n  // Apply a scaling matrix to some min/max values.\n  // If a scaling factor is negative then min and max must be\n  // swapped.\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n\n  // Concatenates two transformation matrices together and returns the result.\n  static transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5],\n    ];\n  }\n\n  // Multiplies m (an array-based transform) by md (a DOMMatrix transform).\n  static multiplyByDOMMatrix(m, md) {\n    return [\n      m[0] * md.a + m[2] * md.b,\n      m[1] * md.a + m[3] * md.b,\n      m[0] * md.c + m[2] * md.d,\n      m[1] * md.c + m[3] * md.d,\n      m[0] * md.e + m[2] * md.f + m[4],\n      m[1] * md.e + m[3] * md.f + m[5],\n    ];\n  }\n\n  // For 2d affine transforms\n  static applyTransform(p, m, pos = 0) {\n    const p0 = p[pos];\n    const p1 = p[pos + 1];\n    p[pos] = p0 * m[0] + p1 * m[2] + m[4];\n    p[pos + 1] = p0 * m[1] + p1 * m[3] + m[5];\n  }\n\n  static applyTransformToBezier(p, transform, pos = 0) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    for (let i = 0; i < 6; i += 2) {\n      const pI = p[pos + i];\n      const pI1 = p[pos + i + 1];\n      p[pos + i] = pI * m0 + pI1 * m2 + m4;\n      p[pos + i + 1] = pI * m1 + pI1 * m3 + m5;\n    }\n  }\n\n  static applyInverseTransform(p, m) {\n    const p0 = p[0];\n    const p1 = p[1];\n    const d = m[0] * m[3] - m[1] * m[2];\n    p[0] = (p0 * m[3] - p1 * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    p[1] = (-p0 * m[1] + p1 * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  }\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  static axialAlignedBoundingBox(rect, transform, output) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    const r0 = rect[0];\n    const r1 = rect[1];\n    const r2 = rect[2];\n    const r3 = rect[3];\n\n    let a0 = m0 * r0 + m4;\n    let a2 = a0;\n    let a1 = m0 * r2 + m4;\n    let a3 = a1;\n    let b0 = m3 * r1 + m5;\n    let b2 = b0;\n    let b1 = m3 * r3 + m5;\n    let b3 = b1;\n\n    if (m1 !== 0 || m2 !== 0) {\n      // Non-scaling matrix: shouldn't be frequent.\n      const m1r0 = m1 * r0;\n      const m1r2 = m1 * r2;\n      const m2r1 = m2 * r1;\n      const m2r3 = m2 * r3;\n      a0 += m2r1;\n      a3 += m2r1;\n      a1 += m2r3;\n      a2 += m2r3;\n      b0 += m1r0;\n      b3 += m1r0;\n      b1 += m1r2;\n      b2 += m1r2;\n    }\n\n    output[0] = Math.min(output[0], a0, a1, a2, a3);\n    output[1] = Math.min(output[1], b0, b1, b2, b3);\n    output[2] = Math.max(output[2], a0, a1, a2, a3);\n    output[3] = Math.max(output[3], b0, b1, b2, b3);\n  }\n\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [\n      m[3] / d,\n      -m[1] / d,\n      -m[2] / d,\n      m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d,\n      (m[4] * m[1] - m[5] * m[0]) / d,\n    ];\n  }\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  static singularValueDecompose2dScale(matrix, output) {\n    const m0 = matrix[0];\n    const m1 = matrix[1];\n    const m2 = matrix[2];\n    const m3 = matrix[3];\n    // Multiply matrix m with its transpose.\n    const a = m0 ** 2 + m1 ** 2;\n    const b = m0 * m2 + m1 * m3;\n    const c = m2 ** 2 + m3 ** 2;\n\n    // Solve the second degree polynomial to get roots.\n    const first = (a + c) / 2;\n    const second = Math.sqrt(first ** 2 - (a * c - b ** 2));\n    output[0] = Math.sqrt(first + second || 1);\n    output[1] = Math.sqrt(first - second || 1);\n  }\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  static normalizeRect(rect) {\n    const r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'null'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(\n      Math.min(rect1[0], rect1[2]),\n      Math.min(rect2[0], rect2[2])\n    );\n    const xHigh = Math.min(\n      Math.max(rect1[0], rect1[2]),\n      Math.max(rect2[0], rect2[2])\n    );\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(\n      Math.min(rect1[1], rect1[3]),\n      Math.min(rect2[1], rect2[3])\n    );\n    const yHigh = Math.min(\n      Math.max(rect1[1], rect1[3]),\n      Math.max(rect2[1], rect2[3])\n    );\n    if (yLow > yHigh) {\n      return null;\n    }\n\n    return [xLow, yLow, xHigh, yHigh];\n  }\n\n  static pointBoundingBox(x, y, minMax) {\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n\n  static rectBoundingBox(x0, y0, x1, y1, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x1);\n    minMax[1] = Math.min(minMax[1], y0, y1);\n    minMax[2] = Math.max(minMax[2], x0, x1);\n    minMax[3] = Math.max(minMax[3], y0, y1);\n  }\n\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(\n          x0,\n          x1,\n          x2,\n          x3,\n          y0,\n          y1,\n          y2,\n          y3,\n          -c / b,\n          minMax\n        );\n      }\n      return;\n    }\n\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      (-b + sqrtDelta) / a2,\n      minMax\n    );\n    this.#getExtremumOnCurve(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      (-b - sqrtDelta) / a2,\n      minMax\n    );\n  }\n\n  // From https://github.com/adobe-webplatform/Snap.svg/blob/b365287722a72526000ac4bfcf0ce4cac2faa015/src/path.js#L852\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x3);\n    minMax[1] = Math.min(minMax[1], y0, y3);\n    minMax[2] = Math.max(minMax[2], x0, x3);\n    minMax[3] = Math.max(minMax[3], y0, y3);\n\n    this.#getExtremum(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      3 * (-x0 + 3 * (x1 - x2) + x3),\n      6 * (x0 - 2 * x1 + x2),\n      3 * (x1 - x0),\n      minMax\n    );\n    this.#getExtremum(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      3 * (-y0 + 3 * (y1 - y2) + y3),\n      6 * (y0 - 2 * y1 + y2),\n      3 * (y1 - y0),\n      minMax\n    );\n  }\n}\n\nconst PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8,\n  0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192,\n  0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018,\n  0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d,\n  0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac,\n];\n\nfunction stringToPDFString(str, keepEscapeSequence = false) {\n  // See section 7.9.2.2 Text String Type.\n  // The string can contain some language codes bracketed with 0x1b,\n  // so we must remove them.\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (keepEscapeSequence || !decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  // ISO Latin 1\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (!keepEscapeSequence && charCode === 0x1b) {\n      // eslint-disable-next-line no-empty\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\n\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction getModificationDate(date = new Date()) {\n  if (!(date instanceof Date)) {\n    date = new Date(date);\n  }\n  const buffer = [\n    date.getUTCFullYear().toString(),\n    (date.getUTCMonth() + 1).toString().padStart(2, \"0\"),\n    date.getUTCDate().toString().padStart(2, \"0\"),\n    date.getUTCHours().toString().padStart(2, \"0\"),\n    date.getUTCMinutes().toString().padStart(2, \"0\"),\n    date.getUTCSeconds().toString().padStart(2, \"0\"),\n  ];\n\n  return buffer.join(\"\");\n}\n\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    // In order to generate the following regex:\n    //  - create a PDF containing all the chars in the range 0000-FFFF with\n    //    a NFKC which is different of the char.\n    //  - copy and paste all those chars and get the ones where NFKC is\n    //    required.\n    // It appears that most the chars here contain some ligatures.\n    NormalizeRegex =\n      /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) =>\n    p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2)\n  );\n}\n\nfunction getUuid() {\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    typeof crypto.randomUUID === \"function\"\n  ) {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  crypto.getRandomValues(buf);\n  return bytesToString(buf);\n}\n\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\n\nfunction _isValidExplicitDest(validRef, validName, dest) {\n  if (!Array.isArray(dest) || dest.length < 2) {\n    return false;\n  }\n  const [page, zoom, ...args] = dest;\n  if (!validRef(page) && !Number.isInteger(page)) {\n    return false;\n  }\n  if (!validName(zoom)) {\n    return false;\n  }\n  const argsLen = args.length;\n  let allowNull = true;\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (argsLen < 2 || argsLen > 3) {\n        return false;\n      }\n      break;\n    case \"Fit\":\n    case \"FitB\":\n      return argsLen === 0;\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (argsLen > 1) {\n        return false;\n      }\n      break;\n    case \"FitR\":\n      if (argsLen !== 4) {\n        return false;\n      }\n      allowNull = false;\n      break;\n    default:\n      return false;\n  }\n  for (const arg of args) {\n    if (typeof arg === \"number\" || (allowNull && arg === null)) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\n\n// TODO: Replace all occurrences of this function with `Math.clamp` once\n//       https://github.com/tc39/proposal-math-clamp/ is generally available.\nfunction MathClamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\n\n// TODO: Remove this once `Uint8Array.prototype.toHex` is generally available.\nfunction toHexUtil(arr) {\n  if (Uint8Array.prototype.toHex) {\n    return arr.toHex();\n  }\n  return Array.from(arr, num => hexNumbers[num]).join(\"\");\n}\n\n// TODO: Remove this once `Uint8Array.prototype.toBase64` is generally\n//       available.\nfunction toBase64Util(arr) {\n  if (Uint8Array.prototype.toBase64) {\n    return arr.toBase64();\n  }\n  return btoa(bytesToString(arr));\n}\n\n// TODO: Remove this once `Uint8Array.fromBase64` is generally available.\nfunction fromBase64Util(str) {\n  if (Uint8Array.fromBase64) {\n    return Uint8Array.fromBase64(str);\n  }\n  return stringToBytes(atob(str));\n}\n\n// TODO: Remove this once https://bugzilla.mozilla.org/show_bug.cgi?id=1928493\n//       is fixed.\nif (\n  (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"SKIP_BABEL\")) &&\n  typeof Promise.try !== \"function\"\n) {\n  Promise.try = function (fn, ...args) {\n    return new Promise(resolve => {\n      resolve(fn(...args));\n    });\n  };\n}\n\n// TODO: Remove this once the `javascript.options.experimental.math_sumprecise`\n//       preference is removed from Firefox.\nif (typeof Math.sumPrecise !== \"function\") {\n  // Note that this isn't a \"proper\" polyfill, but since we're only using it to\n  // replace `Array.prototype.reduce()` invocations it should be fine.\n  Math.sumPrecise = function (numbers) {\n    return numbers.reduce((a, b) => a + b, 0);\n  };\n}\n\nif (\n  typeof PDFJSDev !== \"undefined\" &&\n  !PDFJSDev.test(\"SKIP_BABEL\") &&\n  typeof AbortSignal.any !== \"function\"\n) {\n  AbortSignal.any = function (iterable) {\n    const ac = new AbortController();\n    const { signal } = ac;\n\n    // Return immediately if any of the signals are already aborted.\n    for (const s of iterable) {\n      if (s.aborted) {\n        ac.abort(s.reason);\n        return signal;\n      }\n    }\n    // Register \"abort\" listeners for all signals.\n    for (const s of iterable) {\n      s.addEventListener(\n        \"abort\",\n        () => {\n          ac.abort(s.reason);\n        },\n        { signal } // Automatically remove the listener.\n      );\n    }\n\n    return signal;\n  };\n}\n\nexport {\n  _isValidExplicitDest,\n  AbortException,\n  AnnotationActionEventType,\n  AnnotationBorderStyleType,\n  AnnotationEditorParamsType,\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  AnnotationFieldFlag,\n  AnnotationFlag,\n  AnnotationMode,\n  AnnotationPrefix,\n  AnnotationReplyType,\n  AnnotationType,\n  assert,\n  BaseException,\n  BASELINE_FACTOR,\n  bytesToString,\n  createValidAbsoluteUrl,\n  DocumentActionEventType,\n  DrawOPS,\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  FormatError,\n  fromBase64Util,\n  getModificationDate,\n  getUuid,\n  getVerbosityLevel,\n  hexNumbers,\n  ImageKind,\n  info,\n  InvalidPDFException,\n  isArrayEqual,\n  isNodeJS,\n  LINE_DESCENT_FACTOR,\n  LINE_FACTOR,\n  MathClamp,\n  normalizeUnicode,\n  objectSize,\n  OPS,\n  PageActionEventType,\n  PasswordException,\n  PasswordResponses,\n  PermissionFlag,\n  RenderingIntentFlag,\n  ResponseException,\n  setVerbosityLevel,\n  shadow,\n  string32,\n  stringToBytes,\n  stringToPDFString,\n  stringToUTF8String,\n  TextRenderingMode,\n  toBase64Util,\n  toHexUtil,\n  UnknownErrorException,\n  unreachable,\n  updateUrlHash,\n  utf8StringToString,\n  Util,\n  VerbosityLevel,\n  warn,\n};\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BaseException,\n  FeatureTest,\n  shadow,\n  Util,\n  warn,\n} from \"../shared/util.js\";\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\n\nclass PixelsPerInch {\n  static CSS = 96.0;\n\n  static PDF = 72.0;\n\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\n\nasync function fetchData(url, type = \"text\") {\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    isValidFetchUrl(url, document.baseURI)\n  ) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n\n  // The Fetch API is not supported.\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, /* async = */ true);\n    request.responseType = type;\n\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n\n    request.send(null);\n  });\n}\n\n/**\n * @typedef {Object} PageViewportParameters\n * @property {Array<number>} viewBox - The xMin, yMin, xMax and\n *   yMax coordinates.\n * @property {number} userUnit - The size of units.\n * @property {number} scale - The scale of the viewport.\n * @property {number} rotation - The rotation, in degrees, of the viewport.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset. The\n *   default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset. The\n *   default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * @typedef {Object} PageViewportCloneParameters\n * @property {number} [scale] - The scale, overriding the one in the cloned\n *   viewport. The default value is `this.scale`.\n * @property {number} [rotation] - The rotation, in degrees, overriding the one\n *   in the cloned viewport. The default value is `this.rotation`.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `this.offsetX`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `this.offsetY`.\n * @property {boolean} [dontFlip] - If true, the x-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n */\nclass PageViewport {\n  /**\n   * @param {PageViewportParameters}\n   */\n  constructor({\n    viewBox,\n    userUnit,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  }) {\n    this.viewBox = viewBox;\n    this.userUnit = userUnit;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    scale *= userUnit; // Take the userUnit into account.\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    // Normalize the rotation, by clamping it to the [0, 360) range.\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\n          \"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\"\n        );\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY,\n    ];\n\n    this.width = width;\n    this.height = height;\n  }\n\n  /**\n   * The original, un-scaled, viewport dimensions.\n   * @type {Object}\n   */\n  get rawDims() {\n    const dims = this.viewBox;\n\n    return shadow(this, \"rawDims\", {\n      pageWidth: dims[2] - dims[0],\n      pageHeight: dims[3] - dims[1],\n      pageX: dims[0],\n      pageY: dims[1],\n    });\n  }\n\n  /**\n   * Clones viewport, with optional additional properties.\n   * @param {PageViewportCloneParameters} [params]\n   * @returns {PageViewport} Cloned viewport.\n   */\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * Converts PDF point to the viewport coordinates. For examples, useful for\n   * converting PDF location into canvas pixel coordinates.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Array} Array containing `x`- and `y`-coordinates of the\n   *   point in the viewport coordinate space.\n   * @see {@link convertToPdfPoint}\n   * @see {@link convertToViewportRectangle}\n   */\n  convertToViewportPoint(x, y) {\n    const p = [x, y];\n    Util.applyTransform(p, this.transform);\n    return p;\n  }\n\n  /**\n   * Converts PDF rectangle to the viewport coordinates.\n   * @param {Array} rect - The xMin, yMin, xMax and yMax coordinates.\n   * @returns {Array} Array containing corresponding coordinates of the\n   *   rectangle in the viewport coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToViewportRectangle(rect) {\n    const topLeft = [rect[0], rect[1]];\n    Util.applyTransform(topLeft, this.transform);\n    const bottomRight = [rect[2], rect[3]];\n    Util.applyTransform(bottomRight, this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n\n  /**\n   * Converts viewport coordinates to the PDF location. For examples, useful\n   * for converting canvas pixel location into PDF one.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Array} Array containing `x`- and `y`-coordinates of the\n   *   point in the PDF coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToPdfPoint(x, y) {\n    const p = [x, y];\n    Util.applyInverseTransform(p, this.transform);\n    return p;\n  }\n}\n\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\n\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\n\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\n\n/**\n * Gets the filename from a given URL.\n * @param {string} url\n * @returns {string}\n */\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\n\n/**\n * Returns the filename or guessed filename from the url (see issue 3455).\n * @param {string} url - The original PDF location.\n * @param {string} defaultFilename - The value returned if the filename is\n *   unknown, or the protocol is unsupported.\n * @returns {string} Guessed PDF filename.\n */\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n\n  const getURL = urlString => {\n    try {\n      return new URL(urlString);\n    } catch {\n      try {\n        return new URL(decodeURIComponent(urlString));\n      } catch {\n        try {\n          // Attempt to parse the URL using the document's base URI.\n          return new URL(urlString, \"https://foo.bar\");\n        } catch {\n          try {\n            return new URL(decodeURIComponent(urlString), \"https://foo.bar\");\n          } catch {\n            return null;\n          }\n        }\n      }\n    }\n  };\n\n  const newURL = getURL(url);\n  if (!newURL) {\n    // If the URL is invalid, return the default filename.\n    return defaultFilename;\n  }\n\n  const decode = name => {\n    try {\n      let decoded = decodeURIComponent(name);\n      if (decoded.includes(\"/\")) {\n        decoded = decoded.split(\"/\").at(-1);\n        if (decoded.test(/^\\.pdf$/i)) {\n          return decoded;\n        }\n        return name;\n      }\n      return decoded;\n    } catch {\n      return name;\n    }\n  };\n\n  const pdfRegex = /\\.pdf$/i;\n  const filename = newURL.pathname.split(\"/\").at(-1);\n  if (pdfRegex.test(filename)) {\n    return decode(filename);\n  }\n\n  if (newURL.searchParams.size > 0) {\n    const values = Array.from(newURL.searchParams.values()).reverse();\n    for (const value of values) {\n      if (pdfRegex.test(value)) {\n        // If any of the search parameters ends with \".pdf\", return it.\n        return decode(value);\n      }\n    }\n    const keys = Array.from(newURL.searchParams.keys()).reverse();\n    for (const key of keys) {\n      if (pdfRegex.test(key)) {\n        // If any of the search parameter keys ends with \".pdf\", return it.\n        return decode(key);\n      }\n    }\n  }\n\n  if (newURL.hash) {\n    const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n    const hashFilename = reFilename.exec(newURL.hash);\n    if (hashFilename) {\n      return decode(hashFilename[0]);\n    }\n  }\n\n  return defaultFilename;\n}\n\nclass StatTimer {\n  started = Object.create(null);\n\n  times = [];\n\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now(),\n    });\n    // Remove timer from started so it can be called again.\n    delete this.started[name];\n  }\n\n  toString() {\n    // Find the longest name for padding purposes.\n    const outBuf = [];\n    let longest = 0;\n    for (const { name } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const { name, start, end } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\n\nfunction isValidFetchUrl(url, baseUrl) {\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n    throw new Error(\"Not implemented: isValidFetchUrl\");\n  }\n  const res = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  // The Fetch API only supports the http/https protocols, and not file/ftp.\n  return res?.protocol === \"http:\" || res?.protocol === \"https:\";\n}\n\n/**\n * Event handler to suppress context menu.\n */\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\n\nfunction stopEvent(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\n// Deprecated API function -- display regardless of the `verbosity` setting.\nfunction deprecated(details) {\n  // eslint-disable-next-line no-console\n  console.log(\"Deprecated API usage: \" + details);\n}\n\nclass PDFDateString {\n  static #regex;\n\n  /**\n   * Convert a PDF date string to a JavaScript `Date` object.\n   *\n   * The PDF date string format is described in section 7.9.4 of the official\n   * PDF 32000-1:2008 specification. However, in the PDF 1.7 reference (sixth\n   * edition) Adobe describes the same format including a trailing apostrophe.\n   * This syntax in incorrect, but Adobe Acrobat creates PDF files that contain\n   * them. We ignore all apostrophes as they are not necessary for date parsing.\n   *\n   * Moreover, Adobe Acrobat doesn't handle changing the date to universal time\n   * and doesn't use the user's time zone (effectively ignoring the HH' and mm'\n   * parts of the date string).\n   *\n   * @param {string} input\n   * @returns {Date|null}\n   */\n  static toDateObject(input) {\n    if (input instanceof Date) {\n      return input;\n    }\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n\n    // Lazily initialize the regular expression.\n    this.#regex ||= new RegExp(\n      \"^D:\" + // Prefix (required)\n        \"(\\\\d{4})\" + // Year (required)\n        \"(\\\\d{2})?\" + // Month (optional)\n        \"(\\\\d{2})?\" + // Day (optional)\n        \"(\\\\d{2})?\" + // Hour (optional)\n        \"(\\\\d{2})?\" + // Minute (optional)\n        \"(\\\\d{2})?\" + // Second (optional)\n        \"([Z|+|-])?\" + // Universal time relation (optional)\n        \"(\\\\d{2})?\" + // Offset hour (optional)\n        \"'?\" + // Splitting apostrophe (optional)\n        \"(\\\\d{2})?\" + // Offset minute (optional)\n        \"'?\" // Trailing apostrophe (optional)\n    );\n\n    // Optional fields that don't satisfy the requirements from the regular\n    // expression (such as incorrect digit counts or numbers that are out of\n    // range) will fall back the defaults from the specification.\n    const matches = this.#regex.exec(input);\n    if (!matches) {\n      return null;\n    }\n\n    // JavaScript's `Date` object expects the month to be between 0 and 11\n    // instead of 1 and 12, so we have to correct for that.\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n\n    // Universal time relation 'Z' means that the local time is equal to the\n    // universal time, whereas the relations '+'/'-' indicate that the local\n    // time is later respectively earlier than the universal time. Every date\n    // is normalized to universal time.\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\n\n/**\n * NOTE: This is (mostly) intended to support printing of XFA forms.\n */\nfunction getXfaPageViewport(xfaPage, { scale = 1, rotation = 0 }) {\n  const { width, height } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n\n  return new PageViewport({\n    viewBox,\n    userUnit: 1,\n    scale,\n    rotation,\n  });\n}\n\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [\n      (colorRGB & 0xff0000) >> 16,\n      (colorRGB & 0x00ff00) >> 8,\n      colorRGB & 0x0000ff,\n    ];\n  }\n\n  if (color.startsWith(\"rgb(\")) {\n    // getComputedStyle(...).color returns a `rgb(R, G, B)` color.\n    return color\n      .slice(/* \"rgb(\".length */ 4, -1) // Strip out \"rgb(\" and \")\".\n      .split(\",\")\n      .map(x => parseInt(x));\n  }\n\n  if (color.startsWith(\"rgba(\")) {\n    return color\n      .slice(/* \"rgba(\".length */ 5, -1) // Strip out \"rgba(\" and \")\".\n      .split(\",\")\n      .map(x => parseInt(x))\n      .slice(0, 3);\n  }\n\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\n\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  // NOTE: The following does *not* affect `forced-colors: active` mode.\n  span.style.colorScheme = \"only light\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\n\nfunction getCurrentTransform(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\n\nfunction getCurrentTransformInverse(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\n\n/**\n * @param {HTMLDivElement} div\n * @param {PageViewport} viewport\n * @param {boolean} mustFlip\n * @param {boolean} mustRotate\n */\nfunction setLayerDimensions(\n  div,\n  viewport,\n  mustFlip = false,\n  mustRotate = true\n) {\n  if (viewport instanceof PageViewport) {\n    const { pageWidth, pageHeight } = viewport.rawDims;\n    const { style } = div;\n    const useRound = FeatureTest.isCSSRoundSupported;\n\n    const w = `var(--total-scale-factor) * ${pageWidth}px`,\n      h = `var(--total-scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound\n        ? `round(down, ${w}, var(--scale-round-x))`\n        : `calc(${w})`,\n      heightStr = useRound\n        ? `round(down, ${h}, var(--scale-round-y))`\n        : `calc(${h})`;\n\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\n\n/**\n * Scale factors for the canvas, necessary with HiDPI displays.\n */\nclass OutputScale {\n  constructor() {\n    const { pixelRatio } = OutputScale;\n\n    /**\n     * @type {number} Horizontal scale.\n     */\n    this.sx = pixelRatio;\n\n    /**\n     * @type {number} Vertical scale.\n     */\n    this.sy = pixelRatio;\n  }\n\n  /**\n   * @type {boolean} Returns `true` when scaling is required, `false` otherwise.\n   */\n  get scaled() {\n    return this.sx !== 1 || this.sy !== 1;\n  }\n\n  /**\n   * @type {boolean} Returns `true` when scaling is symmetric,\n   *   `false` otherwise.\n   */\n  get symmetric() {\n    return this.sx === this.sy;\n  }\n\n  /**\n   * @returns {boolean} Returns `true` if scaling was limited,\n   *   `false` otherwise.\n   */\n  limitCanvas(width, height, maxPixels, maxDim, capAreaFactor = -1) {\n    let maxAreaScale = Infinity,\n      maxWidthScale = Infinity,\n      maxHeightScale = Infinity;\n\n    maxPixels = OutputScale.capPixels(maxPixels, capAreaFactor);\n    if (maxPixels > 0) {\n      maxAreaScale = Math.sqrt(maxPixels / (width * height));\n    }\n    if (maxDim !== -1) {\n      maxWidthScale = maxDim / width;\n      maxHeightScale = maxDim / height;\n    }\n    const maxScale = Math.min(maxAreaScale, maxWidthScale, maxHeightScale);\n\n    if (this.sx > maxScale || this.sy > maxScale) {\n      this.sx = maxScale;\n      this.sy = maxScale;\n      return true;\n    }\n    return false;\n  }\n\n  static get pixelRatio() {\n    return globalThis.devicePixelRatio || 1;\n  }\n\n  static capPixels(maxPixels, capAreaFactor) {\n    if (capAreaFactor >= 0) {\n      const winPixels = Math.ceil(\n        (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")\n          ? window.innerWidth * window.innerHeight\n          : window.screen.availWidth * window.screen.availHeight) *\n          this.pixelRatio ** 2 *\n          (1 + capAreaFactor / 100)\n      );\n      return maxPixels > 0 ? Math.min(maxPixels, winPixels) : winPixels;\n    }\n    return maxPixels;\n  }\n}\n\n// See https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types\n// to know which types are supported by the browser.\nconst SupportedImageMimeTypes = [\n  \"image/apng\",\n  \"image/avif\",\n  \"image/bmp\",\n  \"image/gif\",\n  \"image/jpeg\",\n  \"image/png\",\n  \"image/svg+xml\",\n  \"image/webp\",\n  \"image/x-icon\",\n];\n\nexport {\n  deprecated,\n  fetchData,\n  getColorValues,\n  getCurrentTransform,\n  getCurrentTransformInverse,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getRGB,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  isValidFetchUrl,\n  noContextMenu,\n  OutputScale,\n  PageViewport,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n  StatTimer,\n  stopEvent,\n  SupportedImageMimeTypes,\n  SVG_NS,\n};\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { noContextMenu, stopEvent } from \"../display_utils.js\";\n\nclass EditorToolbar {\n  #toolbar = null;\n\n  #colorPicker = null;\n\n  #editor;\n\n  #buttons = null;\n\n  #altText = null;\n\n  #comment = null;\n\n  #signatureDescriptionButton = null;\n\n  static #l10nRemove = null;\n\n  constructor(editor) {\n    this.#editor = editor;\n\n    EditorToolbar.#l10nRemove ||= Object.freeze({\n      freetext: \"pdfjs-editor-remove-freetext-button\",\n      highlight: \"pdfjs-editor-remove-highlight-button\",\n      ink: \"pdfjs-editor-remove-ink-button\",\n      stamp: \"pdfjs-editor-remove-stamp-button\",\n      signature: \"pdfjs-editor-remove-signature-button\",\n    });\n  }\n\n  render() {\n    const editToolbar = (this.#toolbar = document.createElement(\"div\"));\n    editToolbar.classList.add(\"editToolbar\", \"hidden\");\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n\n    const signal = this.#editor._uiManager._signal;\n    if (signal instanceof AbortSignal && !signal.aborted) {\n      editToolbar.addEventListener(\"contextmenu\", noContextMenu, { signal });\n      editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown, {\n        signal,\n      });\n    }\n\n    const buttons = (this.#buttons = document.createElement(\"div\"));\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const { style } = editToolbar;\n      const x =\n        this.#editor._uiManager.direction === \"ltr\"\n          ? 1 - position[0]\n          : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${\n        100 * position[1]\n      }% + var(--editor-toolbar-vert-offset))`;\n    }\n\n    return editToolbar;\n  }\n\n  get div() {\n    return this.#toolbar;\n  }\n\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    stopEvent(e);\n  }\n\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    stopEvent(e);\n  }\n\n  #addListenersToElement(element) {\n    // If we're clicking on a button with the keyboard or with\n    // the mouse, we don't want to trigger any focus events on\n    // the editor.\n    const signal = this.#editor._uiManager._signal;\n    if (!(signal instanceof AbortSignal) || signal.aborted) {\n      return false;\n    }\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n      signal,\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n      signal,\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu, { signal });\n    return true;\n  }\n\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n    this.#altText?.shown();\n    this.#comment?.shown();\n  }\n\n  addDeleteButton() {\n    const { editorType, _uiManager } = this.#editor;\n\n    const button = document.createElement(\"button\");\n    button.classList.add(\"basic\", \"deleteButton\");\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", EditorToolbar.#l10nRemove[editorType]);\n    if (this.#addListenersToElement(button)) {\n      button.addEventListener(\n        \"click\",\n        e => {\n          _uiManager.delete();\n        },\n        { signal: _uiManager._signal }\n      );\n    }\n    this.#buttons.append(button);\n  }\n\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n\n  async addAltText(altText) {\n    const button = await altText.render();\n    this.#addListenersToElement(button);\n    this.#buttons.append(button, this.#divider);\n    this.#altText = altText;\n  }\n\n  addComment(comment) {\n    if (this.#comment) {\n      return;\n    }\n    const button = comment.render();\n    if (!button) {\n      return;\n    }\n    this.#addListenersToElement(button);\n    this.#buttons.append(button, this.#divider);\n    this.#comment = comment;\n    comment.toolbar = this;\n  }\n\n  addColorPicker(colorPicker) {\n    if (this.#colorPicker) {\n      return;\n    }\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.append(button, this.#divider);\n  }\n\n  async addEditSignatureButton(signatureManager) {\n    const button = (this.#signatureDescriptionButton =\n      await signatureManager.renderEditButton(this.#editor));\n    this.#addListenersToElement(button);\n    this.#buttons.append(button, this.#divider);\n  }\n\n  async addButton(name, tool) {\n    switch (name) {\n      case \"colorPicker\":\n        this.addColorPicker(tool);\n        break;\n      case \"altText\":\n        await this.addAltText(tool);\n        break;\n      case \"editSignature\":\n        await this.addEditSignatureButton(tool);\n        break;\n      case \"delete\":\n        this.addDeleteButton();\n        break;\n      case \"comment\":\n        this.addComment(tool);\n        break;\n    }\n  }\n\n  updateEditSignatureButton(description) {\n    if (this.#signatureDescriptionButton) {\n      this.#signatureDescriptionButton.title = description;\n    }\n  }\n\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\n\nclass FloatingToolbar {\n  #buttons = null;\n\n  #toolbar = null;\n\n  #uiManager;\n\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n\n  #render() {\n    const editToolbar = (this.#toolbar = document.createElement(\"div\"));\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n\n    const signal = this.#uiManager._signal;\n    if (signal instanceof AbortSignal && !signal.aborted) {\n      editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n        signal,\n      });\n    }\n\n    const buttons = (this.#buttons = document.createElement(\"div\"));\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n\n    if (this.#uiManager.hasCommentManager()) {\n      this.#makeButton(\n        \"commentButton\",\n        `pdfjs-comment-floating-button`,\n        \"pdfjs-comment-floating-button-label\",\n        () => {\n          this.#uiManager.commentSelection(\"floating_button\");\n        }\n      );\n    }\n\n    this.#makeButton(\n      \"highlightButton\",\n      `pdfjs-highlight-floating-button1`,\n      \"pdfjs-highlight-floating-button-label\",\n      () => {\n        this.#uiManager.highlightSelection(\"floating_button\");\n      }\n    );\n\n    return editToolbar;\n  }\n\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const { style } = (this.#toolbar ||= this.#render());\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n\n  hide() {\n    this.#toolbar.remove();\n  }\n\n  #makeButton(buttonClass, l10nId, labelL10nId, clickHandler) {\n    const button = document.createElement(\"button\");\n    button.classList.add(\"basic\", buttonClass);\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", l10nId);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", labelL10nId);\n    const signal = this.#uiManager._signal;\n    if (signal instanceof AbortSignal && !signal.aborted) {\n      button.addEventListener(\"contextmenu\", noContextMenu, { signal });\n      button.addEventListener(\"click\", clickHandler, { signal });\n    }\n    this.#buttons.append(button);\n  }\n}\n\nexport { EditorToolbar, FloatingToolbar };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./editor.js\").AnnotationEditor} AnnotationEditor */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  FeatureTest,\n  getUuid,\n  shadow,\n  Util,\n  warn,\n} from \"../../shared/util.js\";\nimport {\n  fetchData,\n  getColorValues,\n  getRGB,\n  PixelsPerInch,\n  stopEvent,\n} from \"../display_utils.js\";\nimport { FloatingToolbar } from \"./toolbar.js\";\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\n\n/**\n * Class to create some unique ids for the different editors.\n */\nclass IdManager {\n  #id = 0;\n\n  constructor() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      Object.defineProperty(this, \"reset\", {\n        value: () => (this.#id = 0),\n      });\n    }\n  }\n\n  /**\n   * Get a unique id.\n   * @returns {string}\n   */\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\n\n/**\n * Class to manage the images used by the editors.\n * The main idea is to try to minimize the memory used by the images.\n * The images are cached and reused when possible\n * We use a refCounter to know when an image is not used anymore but we need to\n * be able to restore an image after a remove+undo, so we keep a file reference\n * or an url one.\n */\nclass ImageManager {\n  #baseId = getUuid();\n\n  #id = 0;\n\n  #cache = null;\n\n  static get _isSVGFittingCanvas() {\n    // By default, Firefox doesn't rescale without preserving the aspect ratio\n    // when drawing an SVG image on a canvas, see https://bugzilla.mozilla.org/1547776.\n    // The \"workaround\" is to append \"svgView(preserveAspectRatio(none))\" to the\n    // url, but according to comment #15, it seems that it leads to unexpected\n    // behavior in Safari.\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\", { willReadFrequently: true });\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      // We already tried to load the image but it failed.\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false,\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else if (rawData instanceof File) {\n        image = data.file = rawData;\n      } else if (rawData instanceof Blob) {\n        image = rawData;\n      }\n\n      if (image.type === \"image/svg+xml\") {\n        // Unfortunately, createImageBitmap doesn't work with SVG images.\n        // (see https://bugzilla.mozilla.org/1841972).\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = (data.svgUrl = fileReader.result);\n            // We need to set the preserveAspectRatio to none in order to let\n            // the image fits the canvas when resizing.\n            imageElement.src = (await mustRemoveAspectRatioPromise)\n              ? `${url}#svgView(preserveAspectRatio(none))`\n              : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      warn(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n\n  async getFromFile(file) {\n    const { lastModified, name, size, type } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n\n  async getFromBlob(id, blobPromise) {\n    const blob = await blobPromise;\n    return this.#get(id, blob);\n  }\n\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    if (data.blobPromise) {\n      const { blobPromise } = data;\n      delete data.blobPromise;\n      return this.getFromBlob(data.id, blobPromise);\n    }\n    return this.getFromUrl(data.url);\n  }\n\n  getFromCanvas(id, canvas) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(id);\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    const offscreen = new OffscreenCanvas(canvas.width, canvas.height);\n    const ctx = offscreen.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    data = {\n      bitmap: offscreen.transferToImageBitmap(),\n      id: `image_${this.#baseId}_${this.#id++}`,\n      refCounter: 1,\n      isSvg: false,\n    };\n    this.#cache.set(id, data);\n    this.#cache.set(data.id, data);\n    return data;\n  }\n\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    const { bitmap } = data;\n    if (!data.url && !data.file) {\n      // The image has no way to be restored (ctrl+z) so we must fix that.\n      const canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n      const ctx = canvas.getContext(\"bitmaprenderer\");\n      ctx.transferFromImageBitmap(bitmap);\n      data.blobPromise = canvas.convertToBlob();\n    }\n\n    bitmap.close?.();\n    data.bitmap = null;\n  }\n\n  // We can use the id only if it belongs this manager.\n  // We must take care of having the right manager because we can copy/paste\n  // some images from other documents, hence it'd be a pity to use an id from an\n  // other manager.\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\n\n/**\n * Class to handle undo/redo.\n * Commands are just saved in a buffer.\n * If we hit some memory issues we could likely use a circular buffer.\n * It has to be used as a singleton.\n */\nclass CommandManager {\n  #commands = [];\n\n  #locked = false;\n\n  #maxSize;\n\n  #position = -1;\n\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n\n  /**\n   * @typedef {Object} addOptions\n   * @property {function} cmd\n   * @property {function} undo\n   * @property {function} [post]\n   * @property {boolean} mustExec\n   * @property {number} type\n   * @property {boolean} overwriteIfSameType\n   * @property {boolean} keepUndo\n   */\n\n  /**\n   * Add a new couple of commands to be used in case of redo/undo.\n   * @param {addOptions} options\n   */\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false,\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n\n    if (this.#locked) {\n      return;\n    }\n\n    const save = { cmd, undo, post, type };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        // All the commands have been undone and then a new one is added\n        // hence we clear the queue.\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      // For example when we change a color we don't want to\n      // be able to undo all the steps, hence we only want to\n      // keep the last undoable action in this sequence of actions.\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n\n    this.#commands.push(save);\n  }\n\n  /**\n   * Undo the last command.\n   */\n  undo() {\n    if (this.#position === -1) {\n      // Nothing to undo.\n      return;\n    }\n\n    // Avoid to insert something during the undo execution.\n    this.#locked = true;\n    const { undo, post } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n\n    this.#position -= 1;\n  }\n\n  /**\n   * Redo the last command.\n   */\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n\n      // Avoid to insert something during the redo execution.\n      this.#locked = true;\n      const { cmd, post } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n\n  /**\n   * Check if there is something to undo.\n   * @returns {boolean}\n   */\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n\n  /**\n   * Check if there is something to redo.\n   * @returns {boolean}\n   */\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n\n  cleanType(type) {\n    if (this.#position === -1) {\n      return;\n    }\n    for (let i = this.#position; i >= 0; i--) {\n      if (this.#commands[i].type !== type) {\n        this.#commands.splice(i + 1, this.#position - i);\n        this.#position = i;\n        return;\n      }\n    }\n    this.#commands.length = 0;\n    this.#position = -1;\n  }\n\n  destroy() {\n    this.#commands = null;\n  }\n}\n\n/**\n * Class to handle the different keyboards shortcuts we can have on mac or\n * non-mac OSes.\n */\nclass KeyboardManager {\n  /**\n   * Create a new keyboard manager class.\n   * @param {Array<Array>} callbacks - an array containing an array of shortcuts\n   * and a callback to call.\n   * A shortcut is a string like `ctrl+c` or `mac+ctrl+c` for mac OS.\n   */\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n\n    const { isMac } = FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), { callback, options });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, { callback, options });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n\n  /**\n   * Serialize an event into a string in order to match a\n   * potential key for a callback.\n   * @param {KeyboardEvent} event\n   * @returns {string}\n   */\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n\n    return str;\n  }\n\n  /**\n   * Execute a callback, if any, for a given keyboard event.\n   * The self is used as `this` in the callback.\n   * @param {Object} self\n   * @param {KeyboardEvent} event\n   * @returns\n   */\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: { bubbles = false, args = [], checker = null },\n    } = info;\n\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n\n    // For example, ctrl+s in a FreeText must be handled by the viewer, hence\n    // the event must bubble.\n    if (!bubbles) {\n      stopEvent(event);\n    }\n  }\n}\n\nclass ColorManager {\n  static _colorsMapping = new Map([\n    [\"CanvasText\", [0, 0, 0]],\n    [\"Canvas\", [255, 255, 255]],\n  ]);\n\n  get _colors() {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"LIB\") &&\n      typeof document === \"undefined\"\n    ) {\n      return shadow(this, \"_colors\", ColorManager._colorsMapping);\n    }\n\n    const colors = new Map([\n      [\"CanvasText\", null],\n      [\"Canvas\", null],\n    ]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n\n  /**\n   * In High Contrast Mode, the color on the screen is not always the\n   * real color used in the pdf.\n   * For example in some cases white can appear to be black but when saving\n   * we want to have white.\n   * @param {string} color\n   * @returns {Array<number>}\n   */\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n\n  /**\n   * An input element must have its color value as a hex string\n   * and not as color name.\n   * So this function converts a name into an hex string.\n   * @param {string} name\n   * @returns {string}\n   */\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\n\n/**\n * A pdf has several pages and each of them when it will rendered\n * will have an AnnotationEditorLayer which will contain the some\n * new Annotations associated to an editor in order to modify them.\n *\n * This class is used to manage all the different layers, editors and\n * some action like copy/paste, undo/redo, ...\n */\nclass AnnotationEditorUIManager {\n  #abortController = new AbortController();\n\n  #activeEditor = null;\n\n  #allEditableAnnotations = null;\n\n  #allEditors = new Map();\n\n  #allLayers = new Map();\n\n  #altTextManager = null;\n\n  #annotationStorage = null;\n\n  #changedExistingAnnotations = null;\n\n  #commandManager = new CommandManager();\n\n  #commentManager = null;\n\n  #copyPasteAC = null;\n\n  #currentDrawingSession = null;\n\n  #currentPageIndex = 0;\n\n  #deletedAnnotationsElementIds = new Set();\n\n  #draggingEditors = null;\n\n  #editorTypes = null;\n\n  #editorsToRescale = new Set();\n\n  _editorUndoBar = null;\n\n  #enableHighlightFloatingButton = false;\n\n  #enableUpdatedAddImage = false;\n\n  #enableNewAltTextWhenAddingImage = false;\n\n  #filterFactory = null;\n\n  #focusMainContainerTimeoutId = null;\n\n  #focusManagerAC = null;\n\n  #highlightColors = null;\n\n  #highlightWhenShiftUp = false;\n\n  #floatingToolbar = null;\n\n  #idManager = new IdManager();\n\n  #isEnabled = false;\n\n  #isPointerDown = false;\n\n  #isWaiting = false;\n\n  #keyboardManagerAC = null;\n\n  #lastActiveElement = null;\n\n  #mainHighlightColorPicker = null;\n\n  #missingCanvases = null;\n\n  #mlManager = null;\n\n  #mode = AnnotationEditorType.NONE;\n\n  #selectedEditors = new Set();\n\n  #selectedTextNode = null;\n\n  #signatureManager = null;\n\n  #pageColors = null;\n\n  #showAllStates = null;\n\n  #pdfDocument = null;\n\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false,\n  };\n\n  #translation = [0, 0];\n\n  #translationTimeoutId = null;\n\n  #container = null;\n\n  #viewer = null;\n\n  #viewerAlert = null;\n\n  #updateModeCapability = null;\n\n  static TRANSLATE_SMALL = 1; // page units.\n\n  static TRANSLATE_BIG = 10; // page units.\n\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n\n    /**\n     * If the focused element is an input, we don't want to handle the arrow.\n     * For example, sliders can be controlled with the arrow keys.\n     */\n    const arrowChecker = self =>\n      self.#container.contains(document.activeElement) &&\n      document.activeElement.tagName !== \"BUTTON\" &&\n      self.hasSomethingToControl();\n\n    const textInputChecker = (_self, { target: el }) => {\n      if (el instanceof HTMLInputElement) {\n        const { type } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          [\"ctrl+a\", \"mac+meta+a\"],\n          proto.selectAll,\n          { checker: textInputChecker },\n        ],\n        [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, { checker: textInputChecker }],\n        [\n          // On mac, depending of the OS version, the event.key is either \"z\" or\n          // \"Z\" when the user presses \"meta+shift+z\".\n          [\n            \"ctrl+y\",\n            \"ctrl+shift+z\",\n            \"mac+meta+shift+z\",\n            \"ctrl+shift+Z\",\n            \"mac+meta+shift+Z\",\n          ],\n          proto.redo,\n          { checker: textInputChecker },\n        ],\n        [\n          [\n            \"Backspace\",\n            \"alt+Backspace\",\n            \"ctrl+Backspace\",\n            \"shift+Backspace\",\n            \"mac+Backspace\",\n            \"mac+alt+Backspace\",\n            \"mac+ctrl+Backspace\",\n            \"Delete\",\n            \"ctrl+Delete\",\n            \"shift+Delete\",\n            \"mac+Delete\",\n          ],\n          proto.delete,\n          { checker: textInputChecker },\n        ],\n        [\n          [\"Enter\", \"mac+Enter\"],\n          proto.addNewEditorFromKeyboard,\n          {\n            // Those shortcuts can be used in the toolbar for some other actions\n            // like zooming, hence we need to check if the container has the\n            // focus.\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(el) &&\n              !self.isEnterHandled,\n          },\n        ],\n        [\n          [\" \", \"mac+ \"],\n          proto.addNewEditorFromKeyboard,\n          {\n            // Those shortcuts can be used in the toolbar for some other actions\n            // like zooming, hence we need to check if the container has the\n            // focus.\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(document.activeElement),\n          },\n        ],\n        [[\"Escape\", \"mac+Escape\"], proto.unselectAll],\n        [\n          [\"ArrowLeft\", \"mac+ArrowLeft\"],\n          proto.translateSelectedEditors,\n          { args: [-small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          proto.translateSelectedEditors,\n          { args: [-big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowRight\", \"mac+ArrowRight\"],\n          proto.translateSelectedEditors,\n          { args: [small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          proto.translateSelectedEditors,\n          { args: [big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowUp\", \"mac+ArrowUp\"],\n          proto.translateSelectedEditors,\n          { args: [0, -small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"],\n          proto.translateSelectedEditors,\n          { args: [0, -big], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowDown\", \"mac+ArrowDown\"],\n          proto.translateSelectedEditors,\n          { args: [0, small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"],\n          proto.translateSelectedEditors,\n          { args: [0, big], checker: arrowChecker },\n        ],\n      ])\n    );\n  }\n\n  constructor(\n    container,\n    viewer,\n    viewerAlert,\n    altTextManager,\n    commentManager,\n    signatureManager,\n    eventBus,\n    pdfDocument,\n    pageColors,\n    highlightColors,\n    enableHighlightFloatingButton,\n    enableUpdatedAddImage,\n    enableNewAltTextWhenAddingImage,\n    mlManager,\n    editorUndoBar,\n    supportsPinchToZoom\n  ) {\n    const signal = (this._signal = this.#abortController.signal);\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#viewerAlert = viewerAlert;\n    this.#altTextManager = altTextManager;\n    this.#commentManager = commentManager;\n    this.#signatureManager = signatureManager;\n    this.#pdfDocument = pdfDocument;\n    this._eventBus = eventBus;\n    eventBus._on(\"editingaction\", this.onEditingAction.bind(this), { signal });\n    eventBus._on(\"pagechanging\", this.onPageChanging.bind(this), { signal });\n    eventBus._on(\"scalechanging\", this.onScaleChanging.bind(this), { signal });\n    eventBus._on(\"rotationchanging\", this.onRotationChanging.bind(this), {\n      signal,\n    });\n    eventBus._on(\"setpreference\", this.onSetPreference.bind(this), { signal });\n    eventBus._on(\n      \"switchannotationeditorparams\",\n      evt => this.updateParams(evt.type, evt.value),\n      { signal }\n    );\n    window.addEventListener(\n      \"pointerdown\",\n      () => {\n        this.#isPointerDown = true;\n      },\n      { capture: true, signal }\n    );\n    window.addEventListener(\n      \"pointerup\",\n      () => {\n        this.#isPointerDown = false;\n      },\n      { capture: true, signal }\n    );\n    this.#addSelectionListener();\n    this.#addDragAndDropListeners();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#enableUpdatedAddImage = enableUpdatedAddImage;\n    this.#enableNewAltTextWhenAddingImage = enableNewAltTextWhenAddingImage;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0,\n    };\n    this.isShiftKeyDown = false;\n    this._editorUndoBar = editorUndoBar || null;\n    this._supportsPinchToZoom = supportsPinchToZoom !== false;\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      Object.defineProperty(this, \"reset\", {\n        value: () => {\n          this.selectAll();\n          this.delete();\n          this.#idManager.reset();\n        },\n      });\n    }\n  }\n\n  destroy() {\n    this.#updateModeCapability?.resolve();\n    this.#updateModeCapability = null;\n\n    this.#abortController?.abort();\n    this.#abortController = null;\n    this._signal = null;\n\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#missingCanvases?.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#commentManager?.destroy();\n    this.#signatureManager?.destroy();\n    this.#floatingToolbar?.hide();\n    this.#floatingToolbar = null;\n    this.#mainHighlightColorPicker?.destroy();\n    this.#mainHighlightColorPicker = null;\n    this.#allEditableAnnotations = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this._editorUndoBar?.destroy();\n    this.#pdfDocument = null;\n  }\n\n  combinedSignal(ac) {\n    return AbortSignal.any([this._signal, ac.signal]);\n  }\n\n  get mlManager() {\n    return this.#mlManager;\n  }\n\n  get useNewAltTextFlow() {\n    return this.#enableUpdatedAddImage;\n  }\n\n  get useNewAltTextWhenAddingImage() {\n    return this.#enableNewAltTextWhenAddingImage;\n  }\n\n  get hcmFilter() {\n    return shadow(\n      this,\n      \"hcmFilter\",\n      this.#pageColors\n        ? this.#filterFactory.addHCMFilter(\n            this.#pageColors.foreground,\n            this.#pageColors.background\n          )\n        : \"none\"\n    );\n  }\n\n  get direction() {\n    return shadow(\n      this,\n      \"direction\",\n      getComputedStyle(this.#container).direction\n    );\n  }\n\n  get _highlightColors() {\n    return shadow(\n      this,\n      \"_highlightColors\",\n      this.#highlightColors\n        ? new Map(\n            this.#highlightColors.split(\",\").map(pair => {\n              pair = pair.split(\"=\").map(x => x.trim());\n              pair[1] = pair[1].toUpperCase();\n              return pair;\n            })\n          )\n        : null\n    );\n  }\n\n  get highlightColors() {\n    const { _highlightColors } = this;\n    if (!_highlightColors) {\n      return shadow(this, \"highlightColors\", null);\n    }\n    const map = new Map();\n    const hasHCM = !!this.#pageColors;\n    for (const [name, color] of _highlightColors) {\n      const isNameForHCM = name.endsWith(\"_HCM\");\n      if (hasHCM && isNameForHCM) {\n        map.set(name.replace(\"_HCM\", \"\"), color);\n        continue;\n      }\n      if (!hasHCM && !isNameForHCM) {\n        map.set(name, color);\n      }\n    }\n    return shadow(this, \"highlightColors\", map);\n  }\n\n  get highlightColorNames() {\n    return shadow(\n      this,\n      \"highlightColorNames\",\n      this.highlightColors\n        ? new Map(Array.from(this.highlightColors, e => e.reverse()))\n        : null\n    );\n  }\n\n  getNonHCMColor(color) {\n    if (!this._highlightColors) {\n      return color;\n    }\n    const colorName = this.highlightColorNames.get(color);\n    return this._highlightColors.get(colorName) || color;\n  }\n\n  getNonHCMColorName(color) {\n    return this.highlightColorNames.get(color) || color;\n  }\n\n  /**\n   * Set the current drawing session.\n   * @param {AnnotationEditorLayer} layer\n   */\n  setCurrentDrawingSession(layer) {\n    if (layer) {\n      this.unselectAll();\n      this.disableUserSelect(true);\n    } else {\n      this.disableUserSelect(false);\n    }\n    this.#currentDrawingSession = layer;\n  }\n\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n\n  editAltText(editor, firstTime = false) {\n    this.#altTextManager?.editAltText(this, editor, firstTime);\n  }\n\n  hasCommentManager() {\n    return !!this.#commentManager;\n  }\n\n  editComment(editor, position) {\n    this.#commentManager?.open(this, editor, position);\n  }\n\n  getSignature(editor) {\n    this.#signatureManager?.getSignature({ uiManager: this, editor });\n  }\n\n  get signatureManager() {\n    return this.#signatureManager;\n  }\n\n  switchToMode(mode, callback) {\n    // Switching to a mode can be asynchronous.\n    this._eventBus.on(\"annotationeditormodechanged\", callback, {\n      once: true,\n      signal: this._signal,\n    });\n    this._eventBus.dispatch(\"showannotationeditorui\", {\n      source: this,\n      mode,\n    });\n  }\n\n  setPreference(name, value) {\n    this._eventBus.dispatch(\"setpreference\", {\n      source: this,\n      name,\n      value,\n    });\n  }\n\n  onSetPreference({ name, value }) {\n    switch (name) {\n      case \"enableNewAltTextWhenAddingImage\":\n        this.#enableNewAltTextWhenAddingImage = value;\n        break;\n    }\n  }\n\n  onPageChanging({ pageNumber }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n\n  focusMainContainer() {\n    this.#container.focus();\n  }\n\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height,\n      } = layer.div.getBoundingClientRect();\n      if (\n        x >= layerX &&\n        x <= layerX + width &&\n        y >= layerY &&\n        y <= layerY + height\n      ) {\n        return layer;\n      }\n    }\n    return null;\n  }\n\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n\n  onScaleChanging({ scale }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n    this.#currentDrawingSession?.onScaleChanging();\n  }\n\n  onRotationChanging({ pagesRotation }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n\n  #getAnchorElementForSelection({ anchorNode }) {\n    return anchorNode.nodeType === Node.TEXT_NODE\n      ? anchorNode.parentElement\n      : anchorNode;\n  }\n\n  #getLayerForTextLayer(textLayer) {\n    const { currentLayer } = this;\n    if (currentLayer.hasTextLayer(textLayer)) {\n      return currentLayer;\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        return layer;\n      }\n    }\n    return null;\n  }\n\n  highlightSelection(methodOfCreation = \"\", comment = false) {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const { anchorNode, anchorOffset, focusNode, focusOffset } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n\n    const layer = this.#getLayerForTextLayer(textLayer);\n    const isNoneMode = this.#mode === AnnotationEditorType.NONE;\n    const callback = () => {\n      const editor = layer?.createAndAddNewEditor({ x: 0, y: 0 }, false, {\n        methodOfCreation,\n        boxes,\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n        text,\n      });\n      if (isNoneMode) {\n        this.showAllEditors(\"highlight\", true, /* updateButton = */ true);\n      }\n      if (comment) {\n        editor?.editComment();\n      }\n    };\n    if (isNoneMode) {\n      this.switchToMode(AnnotationEditorType.HIGHLIGHT, callback);\n      return;\n    }\n    callback();\n  }\n\n  commentSelection(methodOfCreation = \"\") {\n    this.highlightSelection(methodOfCreation, /* comment */ true);\n  }\n\n  #displayFloatingToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#floatingToolbar ||= new FloatingToolbar(this);\n    this.#floatingToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n\n  /**\n   * Add an editor in the annotation storage.\n   * @param {AnnotationEditor} editor\n   */\n  addToAnnotationStorage(editor) {\n    if (\n      !editor.isEmpty() &&\n      this.#annotationStorage &&\n      !this.#annotationStorage.has(editor.id)\n    ) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n\n  a11yAlert(messageId, args = null) {\n    const viewerAlert = this.#viewerAlert;\n    if (!viewerAlert) {\n      return;\n    }\n    viewerAlert.setAttribute(\"data-l10n-id\", messageId);\n    if (args) {\n      viewerAlert.setAttribute(\"data-l10n-args\", JSON.stringify(args));\n    } else {\n      viewerAlert.removeAttribute(\"data-l10n-args\");\n    }\n  }\n\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#floatingToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false,\n        });\n      }\n      return;\n    }\n    const { anchorNode } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#floatingToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false,\n        });\n      }\n      return;\n    }\n\n    this.#floatingToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true,\n    });\n\n    if (\n      this.#mode !== AnnotationEditorType.HIGHLIGHT &&\n      this.#mode !== AnnotationEditorType.NONE\n    ) {\n      return;\n    }\n\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, /* updateButton = */ true);\n    }\n\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const activeLayer =\n        this.#mode === AnnotationEditorType.HIGHLIGHT\n          ? this.#getLayerForTextLayer(textLayer)\n          : null;\n      activeLayer?.toggleDrawing();\n\n      if (this.#isPointerDown) {\n        const ac = new AbortController();\n        const signal = this.combinedSignal(ac);\n\n        const pointerup = e => {\n          if (e.type === \"pointerup\" && e.button !== 0) {\n            // Do nothing on right click.\n            return;\n          }\n          ac.abort();\n          activeLayer?.toggleDrawing(true);\n          if (e.type === \"pointerup\") {\n            this.#onSelectEnd(\"main_toolbar\");\n          }\n        };\n        window.addEventListener(\"pointerup\", pointerup, { signal });\n        window.addEventListener(\"blur\", pointerup, { signal });\n      } else {\n        // Here neither the shift key nor the pointer is down and we've\n        // something in the selection: we can be in the case where the user is\n        // using a screen reader (see bug 1976597).\n        activeLayer?.toggleDrawing(true);\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayFloatingToolbar();\n    }\n  }\n\n  #addSelectionListener() {\n    document.addEventListener(\n      \"selectionchange\",\n      this.#selectionChange.bind(this),\n      { signal: this._signal }\n    );\n  }\n\n  #addFocusManager() {\n    if (this.#focusManagerAC) {\n      return;\n    }\n    this.#focusManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#focusManagerAC);\n\n    window.addEventListener(\"focus\", this.focus.bind(this), { signal });\n    window.addEventListener(\"blur\", this.blur.bind(this), { signal });\n  }\n\n  #removeFocusManager() {\n    this.#focusManagerAC?.abort();\n    this.#focusManagerAC = null;\n  }\n\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    // When several editors are selected and the window loses focus, we want to\n    // keep the last active element in order to be able to focus it again when\n    // the window gets the focus back but we don't want to trigger any focus\n    // callbacks else only one editor will be selected.\n    const { activeElement } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\n      \"focusin\",\n      () => {\n        lastEditor._focusEventsAllowed = true;\n      },\n      { once: true, signal: this._signal }\n    );\n    lastActiveElement.focus();\n  }\n\n  #addKeyboardManager() {\n    if (this.#keyboardManagerAC) {\n      return;\n    }\n    this.#keyboardManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#keyboardManagerAC);\n\n    // The keyboard events are caught at the container level in order to be able\n    // to execute some callbacks even if the current page doesn't have focus.\n    window.addEventListener(\"keydown\", this.keydown.bind(this), { signal });\n    window.addEventListener(\"keyup\", this.keyup.bind(this), { signal });\n  }\n\n  #removeKeyboardManager() {\n    this.#keyboardManagerAC?.abort();\n    this.#keyboardManagerAC = null;\n  }\n\n  #addCopyPasteListeners() {\n    if (this.#copyPasteAC) {\n      return;\n    }\n    this.#copyPasteAC = new AbortController();\n    const signal = this.combinedSignal(this.#copyPasteAC);\n\n    document.addEventListener(\"copy\", this.copy.bind(this), { signal });\n    document.addEventListener(\"cut\", this.cut.bind(this), { signal });\n    document.addEventListener(\"paste\", this.paste.bind(this), { signal });\n  }\n\n  #removeCopyPasteListeners() {\n    this.#copyPasteAC?.abort();\n    this.#copyPasteAC = null;\n  }\n\n  #addDragAndDropListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"dragover\", this.dragOver.bind(this), { signal });\n    document.addEventListener(\"drop\", this.drop.bind(this), { signal });\n  }\n\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n\n  dragOver(event) {\n    for (const { type } of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(type)) {\n          event.dataTransfer.dropEffect = \"copy\";\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n\n  /**\n   * Drop callback.\n   * @param {DragEvent} event\n   */\n  drop(event) {\n    for (const item of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n\n  /**\n   * Copy callback.\n   * @param {ClipboardEvent} event\n   */\n  copy(event) {\n    event.preventDefault();\n\n    // An editor is being edited so just commit it.\n    this.#activeEditor?.commitOrRemove();\n\n    if (!this.hasSelection) {\n      return;\n    }\n\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(/* isForCopying = */ true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n\n  /**\n   * Cut callback.\n   * @param {ClipboardEvent} event\n   */\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n\n  /**\n   * Paste callback.\n   * @param {ClipboardEvent} event\n   */\n  async paste(event) {\n    event.preventDefault();\n    const { clipboardData } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n\n    if (!Array.isArray(data)) {\n      return;\n    }\n\n    this.unselectAll();\n    const layer = this.currentLayer;\n\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = await layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({ cmd, undo, mustExec: true });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n\n  /**\n   * Keydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (\n      this.#mode !== AnnotationEditorType.NONE &&\n      !this.isEditorHandlingKeyboard\n    ) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n\n  /**\n   * Keyup callback.\n   * @param {KeyboardEvent} event\n   */\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n\n  /**\n   * Execute an action for a given name.\n   * For example, the user can click on the \"Undo\" entry in the context menu\n   * and it'll trigger the undo action.\n   */\n  onEditingAction({ name }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n      case \"commentSelection\":\n        this.commentSelection(\"context_menu\");\n        break;\n    }\n  }\n\n  /**\n   * Update the different possible states of this manager, e.g. is there\n   * something to undo, redo, ...\n   * @param {Object} details\n   */\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(\n      ([key, value]) => this.#previousStates[key] !== value\n    );\n\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details),\n      });\n      // We could listen on our own event but it sounds like a bit weird and\n      // it's a way to simpler to handle that stuff here instead of having to\n      // add something in every place where an editor can be unselected.\n      if (\n        this.#mode === AnnotationEditorType.HIGHLIGHT &&\n        details.hasSelectedEditor === false\n      ) {\n        this.#dispatchUpdateUI([\n          [AnnotationEditorParamsType.HIGHLIGHT_FREE, true],\n        ]);\n      }\n    }\n  }\n\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details,\n    });\n  }\n\n  /**\n   * Set the editing state.\n   * It can be useful to temporarily disable it when the user is editing a\n   * FreeText annotation.\n   * @param {boolean} isEditing\n   */\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false,\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false,\n      });\n      this.disableUserSelect(false);\n    }\n  }\n\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n\n  /**\n   * Get an id.\n   * @returns {string}\n   */\n  getId() {\n    return this.#idManager.id;\n  }\n\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n\n  /**\n   * Add a new layer for a page which will contains the editors.\n   * @param {AnnotationEditorLayer} layer\n   */\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n\n  /**\n   * Remove a layer.\n   * @param {AnnotationEditorLayer} layer\n   */\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n\n  /**\n   * Change the editor mode (None, FreeText, Ink, ...)\n   * @param {number} mode\n   * @param {string|null} editId\n   * @param {boolean} [isFromKeyboard] - true if the mode change is due to a\n   *   keyboard action.\n   * @param {boolean} [mustEnterInEditMode] - true if the editor must enter in\n   *   edit mode.\n   * @param {boolean} [editComment] - true if the mode change is due to a\n   *   comment edit.\n   */\n  async updateMode(\n    mode,\n    editId = null,\n    isFromKeyboard = false,\n    mustEnterInEditMode = false,\n    editComment = false\n  ) {\n    if (this.#mode === mode) {\n      return;\n    }\n\n    if (this.#updateModeCapability) {\n      await this.#updateModeCapability.promise;\n      if (!this.#updateModeCapability) {\n        // This ui manager has been destroyed.\n        return;\n      }\n    }\n\n    this.#updateModeCapability = Promise.withResolvers();\n    this.#currentDrawingSession?.commitOrRemove();\n\n    if (this.#mode === AnnotationEditorType.POPUP) {\n      this.#commentManager?.hideSidebar();\n    }\n\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n\n      this._editorUndoBar?.hide();\n\n      this.#updateModeCapability.resolve();\n      return;\n    }\n\n    if (mode === AnnotationEditorType.SIGNATURE) {\n      await this.#signatureManager?.loadSignatures();\n    }\n    if (mode === AnnotationEditorType.POPUP) {\n      this.#allEditableAnnotations ||=\n        await this.#pdfDocument.getAnnotationsByType(\n          new Set(this.#editorTypes.map(editorClass => editorClass._editorType))\n        );\n      this.#commentManager?.showSidebar(this.#allEditableAnnotations);\n    }\n\n    this.setEditingState(true);\n    await this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId) {\n      if (isFromKeyboard) {\n        this.addNewEditorFromKeyboard();\n      }\n\n      this.#updateModeCapability.resolve();\n      return;\n    }\n\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId || editor.id === editId) {\n        this.setSelected(editor);\n        if (editComment) {\n          editor.editComment();\n        } else if (mustEnterInEditMode) {\n          editor.enterInEditMode();\n        }\n      } else {\n        editor.unselect();\n      }\n    }\n\n    this.#updateModeCapability.resolve();\n  }\n\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n\n  /**\n   * Update the toolbar if it's required to reflect the tool currently used.\n   * @param {Object} options\n   * @param {number} mode\n   * @returns {undefined}\n   */\n  updateToolbar(options) {\n    if (options.mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      ...options,\n    });\n  }\n\n  /**\n   * Update a parameter in the current editor or globally.\n   * @param {number} type\n   * @param {*} value\n   */\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor(value);\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\",\n            },\n          },\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n\n    if (this.hasSelection) {\n      for (const editor of this.#selectedEditors) {\n        editor.updateParams(type, value);\n      }\n    } else {\n      for (const editorType of this.#editorTypes) {\n        editorType.updateDefaultParams(type, value);\n      }\n    }\n  }\n\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state =\n      this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ??\n      true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([\n        [AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible],\n      ]);\n    }\n  }\n\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n\n  /**\n   * Enable all the layers.\n   */\n  async #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      const promises = [];\n      for (const layer of this.#allLayers.values()) {\n        promises.push(layer.enable());\n      }\n      await Promise.all(promises);\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n\n  /**\n   * Disable all the layers.\n   */\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n\n  /**\n   * Get all the editors belonging to a given page.\n   * @param {number} pageIndex\n   * @returns {Array<AnnotationEditor>}\n   */\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n\n  /**\n   * Get an editor with the given id.\n   * @param {string} id\n   * @returns {AnnotationEditor}\n   */\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n\n  /**\n   * Add a new editor.\n   * @param {AnnotationEditor} editor\n   */\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n\n  /**\n   * Remove an editor.\n   * @param {AnnotationEditor} editor\n   */\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        // When the div is removed from DOM the focus can move on the\n        // document.body, so we need to move it back to the main container.\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    if (editor.annotationElementId) {\n      this.#missingCanvases?.delete(editor.annotationElementId);\n    }\n    this.unselect(editor);\n    if (\n      !editor.annotationElementId ||\n      !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)\n    ) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n\n  /**\n   * The annotation element with the given id has been deleted.\n   * @param {AnnotationEditor} editor\n   */\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n\n  /**\n   * Check if the annotation element with the given id has been deleted.\n   * @param {string} annotationElementId\n   * @returns {boolean}\n   */\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n\n  /**\n   * The annotation element with the given id have been restored.\n   * @param {AnnotationEditor} editor\n   */\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n\n  /**\n   * Add an editor to the layer it belongs to or add it to the global map.\n   * @param {AnnotationEditor} editor\n   */\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n\n  /**\n   * Set the given editor as the active one.\n   * @param {AnnotationEditor} editor\n   */\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {\n      // Iterate to get the last element.\n    }\n    return ed;\n  }\n\n  /**\n   * Update the UI of the active editor.\n   * @param {AnnotationEditor} editor\n   */\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n\n  updateUIForDefaultProperties(editorType) {\n    this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n  }\n\n  /**\n   * Add or remove an editor the current selection.\n   * @param {AnnotationEditor} editor\n   */\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection,\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n\n  /**\n   * Set the last selected editor.\n   * @param {AnnotationEditor} editor\n   */\n  setSelected(editor) {\n    this.updateToolbar({\n      mode: editor.mode,\n      editId: editor.id,\n    });\n\n    this.#currentDrawingSession?.commitOrRemove();\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n\n  /**\n   * Check if the editor is selected.\n   * @param {AnnotationEditor} editor\n   */\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n\n  /**\n   * Unselect an editor.\n   * @param {AnnotationEditor} editor\n   */\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection,\n    });\n  }\n\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n\n  get isEnterHandled() {\n    return (\n      this.#selectedEditors.size === 1 &&\n      this.firstSelectedEditor.isEnterHandled\n    );\n  }\n\n  /**\n   * Undo the last command.\n   */\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty(),\n    });\n    this._editorUndoBar?.hide();\n  }\n\n  /**\n   * Redo the last undoed command.\n   */\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  /**\n   * Add a command to execute (cmd) and another one to undo it.\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  cleanUndoStack(type) {\n    this.#commandManager.cleanType(type);\n  }\n\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Delete the current editor or all.\n   */\n  delete() {\n    this.commitOrRemove();\n    const drawingEditor = this.currentLayer?.endDrawingSession(\n      /* isAborted = */ true\n    );\n    if (!this.hasSelection && !drawingEditor) {\n      return;\n    }\n\n    const editors = drawingEditor\n      ? [drawingEditor]\n      : [...this.#selectedEditors];\n    const cmd = () => {\n      this._editorUndoBar?.show(\n        undo,\n        editors.length === 1 ? editors[0].editorType : editors.length\n      );\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n\n    this.addCommands({ cmd, undo, mustExec: true });\n  }\n\n  commitOrRemove() {\n    // An editor is being edited so just commit it.\n    this.#activeEditor?.commitOrRemove();\n  }\n\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n\n  /**\n   * Select the editors.\n   * @param {Array<AnnotationEditor>} editors\n   */\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({ hasSelectedEditor: this.hasSelection });\n  }\n\n  /**\n   * Select all the editors.\n   */\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n\n  /**\n   * Unselect all the selected editors.\n   */\n  unselectAll() {\n    if (this.#activeEditor) {\n      // An editor is being edited so just commit it.\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        // If the mode is NONE, we want to really unselect the editor, hence we\n        // mustn't return here.\n        return;\n      }\n    }\n\n    if (this.#currentDrawingSession?.commitOrRemove()) {\n      return;\n    }\n\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false,\n    });\n  }\n\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n\n    // We don't want to have an undo/redo for each translation so we wait a bit\n    // before adding the command to the command manager.\n    const TIME_TO_WAIT = 1000;\n\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        mustExec: false,\n      });\n    }, TIME_TO_WAIT);\n\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n      editor.translationDone();\n    }\n  }\n\n  /**\n   * Set up the drag session for moving the selected editors.\n   */\n  setUpDragSession() {\n    // Note: don't use any references to the editor's parent which can be null\n    // if the editor belongs to a destroyed page.\n    if (!this.hasSelection) {\n      return;\n    }\n    // Avoid to have spurious text selection in the text layer when dragging.\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1,\n      });\n    }\n  }\n\n  /**\n   * Ends the drag session.\n   * @returns {boolean} true if at least one editor has been moved.\n   */\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n\n    for (const [{ x, y, pageIndex }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||=\n        x !== value.savedX ||\n        y !== value.savedY ||\n        pageIndex !== value.savedPageIndex;\n    }\n\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        // The editor can be undone/redone on a page which is not visible (and\n        // which potentially has no annotation editor layer), hence we need to\n        // use the pageIndex instead of the parent.\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, { newX, newY, newPageIndex }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, { savedX, savedY, savedPageIndex }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true,\n    });\n\n    return true;\n  }\n\n  /**\n   * Drag the set of selected editors.\n   * @param {number} tx\n   * @param {number} ty\n   */\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n\n  /**\n   * Rebuild the editor (usually on undo/redo actions) on a potentially\n   * non-rendered page.\n   * @param {AnnotationEditor} editor\n   */\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n\n  get isEditorHandlingKeyboard() {\n    return (\n      this.getActive()?.shouldGetKeyboardEvents() ||\n      (this.#selectedEditors.size === 1 &&\n        this.firstSelectedEditor.shouldGetKeyboardEvents())\n    );\n  }\n\n  /**\n   * Is the current editor the one passed as argument?\n   * @param {AnnotationEditor} editor\n   * @returns\n   */\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n\n  /**\n   * Get the current active editor.\n   * @returns {AnnotationEditor|null}\n   */\n  getActive() {\n    return this.#activeEditor;\n  }\n\n  /**\n   * Get the current editor mode.\n   * @returns {number}\n   */\n  getMode() {\n    return this.#mode;\n  }\n\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (\n        !textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)\n      ) {\n        return null;\n      }\n    }\n\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = textLayer.getBoundingClientRect();\n\n    // We must rotate the boxes because we want to have them in the non-rotated\n    // page coordinates.\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n    }\n\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const { x, y, width, height } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n\n  addChangedExistingAnnotation({ annotationElementId, id }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(\n      annotationElementId,\n      id\n    );\n  }\n\n  removeChangedExistingAnnotation({ annotationElementId }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n\n  setMissingCanvas(annotationId, annotationElementId, canvas) {\n    const editor = this.#missingCanvases?.get(annotationId);\n    if (!editor) {\n      return;\n    }\n    editor.setCanvas(annotationElementId, canvas);\n    this.#missingCanvases.delete(annotationId);\n  }\n\n  addMissingCanvas(annotationId, editor) {\n    (this.#missingCanvases ||= new Map()).set(annotationId, editor);\n  }\n}\n\nexport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  ColorManager,\n  CommandManager,\n  KeyboardManager,\n};\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass AltText {\n  #altText = null;\n\n  #altTextDecorative = false;\n\n  #altTextButton = null;\n\n  #altTextButtonLabel = null;\n\n  #altTextTooltip = null;\n\n  #altTextTooltipTimeout = null;\n\n  #altTextWasFromKeyBoard = false;\n\n  #badge = null;\n\n  #editor = null;\n\n  #guessedText = null;\n\n  #textWithDisclaimer = null;\n\n  #useNewAltTextFlow = false;\n\n  static #l10nNewButton = null;\n\n  static _l10n = null;\n\n  constructor(editor) {\n    this.#editor = editor;\n    this.#useNewAltTextFlow = editor._uiManager.useNewAltTextFlow;\n\n    AltText.#l10nNewButton ||= Object.freeze({\n      added: \"pdfjs-editor-new-alt-text-added-button\",\n      \"added-label\": \"pdfjs-editor-new-alt-text-added-button-label\",\n      missing: \"pdfjs-editor-new-alt-text-missing-button\",\n      \"missing-label\": \"pdfjs-editor-new-alt-text-missing-button-label\",\n      review: \"pdfjs-editor-new-alt-text-to-review-button\",\n      \"review-label\": \"pdfjs-editor-new-alt-text-to-review-button-label\",\n    });\n  }\n\n  static initialize(l10n) {\n    AltText._l10n ??= l10n;\n  }\n\n  async render() {\n    const altText = (this.#altTextButton = document.createElement(\"button\"));\n    altText.className = \"altText\";\n    altText.tabIndex = \"0\";\n\n    const label = (this.#altTextButtonLabel = document.createElement(\"span\"));\n    altText.append(label);\n\n    if (this.#useNewAltTextFlow) {\n      altText.classList.add(\"new\");\n      altText.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton.missing);\n      label.setAttribute(\n        \"data-l10n-id\",\n        AltText.#l10nNewButton[\"missing-label\"]\n      );\n    } else {\n      altText.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button\");\n      label.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button-label\");\n    }\n\n    const signal = this.#editor._uiManager._signal;\n    altText.addEventListener(\"contextmenu\", noContextMenu, { signal });\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal,\n    });\n\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n      if (this.#useNewAltTextFlow) {\n        this.#editor._reportTelemetry({\n          action: \"pdfjs.image.alt_text.image_status_label_clicked\",\n          data: { label: this.#label },\n        });\n      }\n    };\n    altText.addEventListener(\"click\", onClick, { capture: true, signal });\n    altText.addEventListener(\n      \"keydown\",\n      event => {\n        if (event.target === altText && event.key === \"Enter\") {\n          this.#altTextWasFromKeyBoard = true;\n          onClick(event);\n        }\n      },\n      { signal }\n    );\n    await this.#setState();\n\n    return altText;\n  }\n\n  get #label() {\n    return (\n      (this.#altText && \"added\") ||\n      (this.#altText === null && this.guessedText && \"review\") ||\n      \"missing\"\n    );\n  }\n\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({ focusVisible: this.#altTextWasFromKeyBoard });\n    this.#altTextWasFromKeyBoard = false;\n  }\n\n  isEmpty() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText === null;\n    }\n    return !this.#altText && !this.#altTextDecorative;\n  }\n\n  hasData() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText !== null || !!this.#guessedText;\n    }\n    return this.isEmpty();\n  }\n\n  get guessedText() {\n    return this.#guessedText;\n  }\n\n  async setGuessedText(guessedText) {\n    if (this.#altText !== null) {\n      // The user provided their own alt text, so we don't want to overwrite it.\n      return;\n    }\n    this.#guessedText = guessedText;\n    this.#textWithDisclaimer = await AltText._l10n.get(\n      \"pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer\",\n      { generatedAltText: guessedText }\n    );\n    this.#setState();\n  }\n\n  toggleAltTextBadge(visibility = false) {\n    if (!this.#useNewAltTextFlow || this.#altText) {\n      this.#badge?.remove();\n      this.#badge = null;\n      return;\n    }\n    if (!this.#badge) {\n      const badge = (this.#badge = document.createElement(\"div\"));\n      badge.className = \"noAltTextBadge\";\n      this.#editor.div.append(badge);\n    }\n    this.#badge.classList.toggle(\"hidden\", !visibility);\n  }\n\n  serialize(isForCopying) {\n    let altText = this.#altText;\n    if (!isForCopying && this.#guessedText === altText) {\n      altText = this.#textWithDisclaimer;\n    }\n    return {\n      altText,\n      decorative: this.#altTextDecorative,\n      guessedText: this.#guessedText,\n      textWithDisclaimer: this.#textWithDisclaimer,\n    };\n  }\n\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative,\n    };\n  }\n\n  /**\n   * Set the alt text data.\n   */\n  set data({\n    altText,\n    decorative,\n    guessedText,\n    textWithDisclaimer,\n    cancel = false,\n  }) {\n    if (guessedText) {\n      this.#guessedText = guessedText;\n      this.#textWithDisclaimer = textWithDisclaimer;\n    }\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    if (!cancel) {\n      this.#altText = altText;\n      this.#altTextDecorative = decorative;\n    }\n    this.#setState();\n  }\n\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n\n  shown() {\n    this.#editor._reportTelemetry({\n      action: \"pdfjs.image.alt_text.image_status_label_displayed\",\n      data: { label: this.#label },\n    });\n  }\n\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextButtonLabel = null;\n    this.#altTextTooltip = null;\n    this.#badge?.remove();\n    this.#badge = null;\n  }\n\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n\n    if (this.#useNewAltTextFlow) {\n      button.classList.toggle(\"done\", !!this.#altText);\n      button.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[this.#label]);\n\n      this.#altTextButtonLabel?.setAttribute(\n        \"data-l10n-id\",\n        AltText.#l10nNewButton[`${this.#label}-label`]\n      );\n      if (!this.#altText) {\n        this.#altTextTooltip?.remove();\n        return;\n      }\n    } else {\n      if (!this.#altText && !this.#altTextDecorative) {\n        button.classList.remove(\"done\");\n        this.#altTextTooltip?.remove();\n        return;\n      }\n      button.classList.add(\"done\");\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-edit-button\");\n    }\n\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      const signal = this.#editor._uiManager._signal;\n      signal.addEventListener(\n        \"abort\",\n        () => {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        },\n        { once: true }\n      );\n      button.addEventListener(\n        \"mouseenter\",\n        () => {\n          this.#altTextTooltipTimeout = setTimeout(() => {\n            this.#altTextTooltipTimeout = null;\n            this.#altTextTooltip.classList.add(\"show\");\n            this.#editor._reportTelemetry({\n              action: \"alt_text_tooltip\",\n            });\n          }, DELAY_TO_SHOW_TOOLTIP);\n        },\n        { signal }\n      );\n      button.addEventListener(\n        \"mouseleave\",\n        () => {\n          if (this.#altTextTooltipTimeout) {\n            clearTimeout(this.#altTextTooltipTimeout);\n            this.#altTextTooltipTimeout = null;\n          }\n          this.#altTextTooltip?.classList.remove(\"show\");\n        },\n        { signal }\n      );\n    }\n    if (this.#altTextDecorative) {\n      tooltip.setAttribute(\n        \"data-l10n-id\",\n        \"pdfjs-editor-alt-text-decorative-tooltip\"\n      );\n    } else {\n      tooltip.removeAttribute(\"data-l10n-id\");\n      tooltip.textContent = this.#altText;\n    }\n\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n\n    const element = this.#editor.getElementForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\nexport { AltText };\n","/* Copyright 2025 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { noContextMenu } from \"../display_utils.js\";\n\nclass Comment {\n  #commentButton = null;\n\n  #commentWasFromKeyBoard = false;\n\n  #editor = null;\n\n  #initialText = null;\n\n  #text = null;\n\n  #date = null;\n\n  #deleted = false;\n\n  constructor(editor) {\n    this.#editor = editor;\n    this.toolbar = null;\n  }\n\n  render() {\n    if (!this.#editor._uiManager.hasCommentManager()) {\n      return null;\n    }\n\n    const comment = (this.#commentButton = document.createElement(\"button\"));\n    comment.className = \"comment\";\n    comment.tabIndex = \"0\";\n    comment.setAttribute(\"data-l10n-id\", \"pdfjs-editor-edit-comment-button\");\n\n    const signal = this.#editor._uiManager._signal;\n    if (!(signal instanceof AbortSignal) || signal.aborted) {\n      return comment;\n    }\n\n    comment.addEventListener(\"contextmenu\", noContextMenu, { signal });\n    comment.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal,\n    });\n\n    const onClick = event => {\n      event.preventDefault();\n      this.edit();\n    };\n    comment.addEventListener(\"click\", onClick, { capture: true, signal });\n    comment.addEventListener(\n      \"keydown\",\n      event => {\n        if (event.target === comment && event.key === \"Enter\") {\n          this.#commentWasFromKeyBoard = true;\n          onClick(event);\n        }\n      },\n      { signal }\n    );\n\n    return comment;\n  }\n\n  edit() {\n    const { bottom, left, right } = this.#editor.getClientDimensions();\n    const position = { top: bottom };\n    if (this.#editor._uiManager.direction === \"ltr\") {\n      position.right = right;\n    } else {\n      position.left = left;\n    }\n    this.#editor._uiManager.editComment(this.#editor, position);\n  }\n\n  finish() {\n    if (!this.#commentButton) {\n      return;\n    }\n    this.#commentButton.focus({ focusVisible: this.#commentWasFromKeyBoard });\n    this.#commentWasFromKeyBoard = false;\n  }\n\n  isDeleted() {\n    return this.#deleted || this.#text === \"\";\n  }\n\n  hasBeenEdited() {\n    return this.isDeleted() || this.#text !== this.#initialText;\n  }\n\n  serialize() {\n    return this.data;\n  }\n\n  get data() {\n    return {\n      text: this.#text,\n      date: this.#date,\n      deleted: this.#deleted,\n    };\n  }\n\n  /**\n   * Set the comment data.\n   */\n  set data(text) {\n    if (text === null) {\n      this.#text = \"\";\n      this.#deleted = true;\n      return;\n    }\n    this.#text = text;\n    this.#date = new Date();\n    this.#deleted = false;\n  }\n\n  setInitialText(text) {\n    this.#initialText = text;\n    this.data = text;\n  }\n\n  toggle(enabled = false) {\n    if (!this.#commentButton) {\n      return;\n    }\n    this.#commentButton.disabled = !enabled;\n  }\n\n  shown() {}\n\n  destroy() {\n    this.#commentButton?.remove();\n    this.#commentButton = null;\n    this.#text = \"\";\n    this.#date = null;\n    this.#editor = null;\n    this.#commentWasFromKeyBoard = false;\n    this.#deleted = false;\n  }\n}\n\nexport { Comment };\n","/* Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { OutputScale, stopEvent } from \"./display_utils.js\";\n\nclass TouchManager {\n  #container;\n\n  #isPinching = false;\n\n  #isPinchingStopped = null;\n\n  #isPinchingDisabled;\n\n  #onPinchStart;\n\n  #onPinching;\n\n  #onPinchEnd;\n\n  #pointerDownAC = null;\n\n  #signal;\n\n  #touchInfo = null;\n\n  #touchManagerAC;\n\n  #touchMoveAC = null;\n\n  constructor({\n    container,\n    isPinchingDisabled = null,\n    isPinchingStopped = null,\n    onPinchStart = null,\n    onPinching = null,\n    onPinchEnd = null,\n    signal,\n  }) {\n    this.#container = container;\n    this.#isPinchingStopped = isPinchingStopped;\n    this.#isPinchingDisabled = isPinchingDisabled;\n    this.#onPinchStart = onPinchStart;\n    this.#onPinching = onPinching;\n    this.#onPinchEnd = onPinchEnd;\n    this.#touchManagerAC = new AbortController();\n    this.#signal = AbortSignal.any([signal, this.#touchManagerAC.signal]);\n\n    container.addEventListener(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: false,\n      signal: this.#signal,\n    });\n  }\n\n  /**\n   * NOTE: Don't shadow this value since `devicePixelRatio` may change if the\n   * window resolution changes, e.g. if the viewer is moved to another monitor.\n   */\n  get MIN_TOUCH_DISTANCE_TO_PINCH() {\n    // The 35 is coming from:\n    //  https://searchfox.org/mozilla-central/source/gfx/layers/apz/src/GestureEventListener.cpp#36\n    //\n    // The properties TouchEvent::screenX/Y are in screen CSS pixels:\n    //  https://developer.mozilla.org/en-US/docs/Web/API/Touch/screenX#examples\n    // MIN_TOUCH_DISTANCE_TO_PINCH is in CSS pixels.\n    return 35 / OutputScale.pixelRatio;\n  }\n\n  #onTouchStart(evt) {\n    if (this.#isPinchingDisabled?.()) {\n      return;\n    }\n\n    if (evt.touches.length === 1) {\n      if (this.#pointerDownAC) {\n        return;\n      }\n      const pointerDownAC = (this.#pointerDownAC = new AbortController());\n      const signal = AbortSignal.any([this.#signal, pointerDownAC.signal]);\n      const container = this.#container;\n\n      // We want to have the events at the capture phase to make sure we can\n      // cancel them.\n      const opts = { capture: true, signal, passive: false };\n      const cancelPointerDown = e => {\n        if (e.pointerType === \"touch\") {\n          this.#pointerDownAC?.abort();\n          this.#pointerDownAC = null;\n        }\n      };\n      container.addEventListener(\n        \"pointerdown\",\n        e => {\n          if (e.pointerType === \"touch\") {\n            // This is the second finger so we don't want it select something\n            // or whatever.\n            stopEvent(e);\n            cancelPointerDown(e);\n          }\n        },\n        opts\n      );\n      container.addEventListener(\"pointerup\", cancelPointerDown, opts);\n      container.addEventListener(\"pointercancel\", cancelPointerDown, opts);\n      return;\n    }\n\n    if (!this.#touchMoveAC) {\n      this.#touchMoveAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, this.#touchMoveAC.signal]);\n      const container = this.#container;\n\n      const opt = { signal, capture: false, passive: false };\n      container.addEventListener(\n        \"touchmove\",\n        this.#onTouchMove.bind(this),\n        opt\n      );\n      const onTouchEnd = this.#onTouchEnd.bind(this);\n      container.addEventListener(\"touchend\", onTouchEnd, opt);\n      container.addEventListener(\"touchcancel\", onTouchEnd, opt);\n\n      opt.capture = true;\n      container.addEventListener(\"pointerdown\", stopEvent, opt);\n      container.addEventListener(\"pointermove\", stopEvent, opt);\n      container.addEventListener(\"pointercancel\", stopEvent, opt);\n      container.addEventListener(\"pointerup\", stopEvent, opt);\n      this.#onPinchStart?.();\n    }\n\n    stopEvent(evt);\n\n    if (evt.touches.length !== 2 || this.#isPinchingStopped?.()) {\n      this.#touchInfo = null;\n      return;\n    }\n\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    this.#touchInfo = {\n      touch0X: touch0.screenX,\n      touch0Y: touch0.screenY,\n      touch1X: touch1.screenX,\n      touch1Y: touch1.screenY,\n    };\n  }\n\n  #onTouchMove(evt) {\n    if (!this.#touchInfo || evt.touches.length !== 2) {\n      return;\n    }\n\n    stopEvent(evt);\n\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    const { screenX: screen0X, screenY: screen0Y } = touch0;\n    const { screenX: screen1X, screenY: screen1Y } = touch1;\n    const touchInfo = this.#touchInfo;\n    const {\n      touch0X: pTouch0X,\n      touch0Y: pTouch0Y,\n      touch1X: pTouch1X,\n      touch1Y: pTouch1Y,\n    } = touchInfo;\n\n    const prevGapX = pTouch1X - pTouch0X;\n    const prevGapY = pTouch1Y - pTouch0Y;\n    const currGapX = screen1X - screen0X;\n    const currGapY = screen1Y - screen0Y;\n\n    const distance = Math.hypot(currGapX, currGapY) || 1;\n    const pDistance = Math.hypot(prevGapX, prevGapY) || 1;\n    if (\n      !this.#isPinching &&\n      Math.abs(pDistance - distance) <= TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH\n    ) {\n      return;\n    }\n\n    touchInfo.touch0X = screen0X;\n    touchInfo.touch0Y = screen0Y;\n    touchInfo.touch1X = screen1X;\n    touchInfo.touch1Y = screen1Y;\n\n    if (!this.#isPinching) {\n      // Start pinching.\n      this.#isPinching = true;\n\n      // We return here else the first pinch is a bit too much\n      return;\n    }\n\n    const origin = [(screen0X + screen1X) / 2, (screen0Y + screen1Y) / 2];\n    this.#onPinching?.(origin, pDistance, distance);\n  }\n\n  #onTouchEnd(evt) {\n    if (evt.touches.length >= 2) {\n      return;\n    }\n    // #touchMoveAC shouldn't be null but it seems that irl it can (see #19793).\n    if (this.#touchMoveAC) {\n      this.#touchMoveAC.abort();\n      this.#touchMoveAC = null;\n      this.#onPinchEnd?.();\n    }\n\n    if (!this.#touchInfo) {\n      return;\n    }\n    stopEvent(evt);\n    this.#touchInfo = null;\n    this.#isPinching = false;\n  }\n\n  destroy() {\n    this.#touchManagerAC?.abort();\n    this.#touchManagerAC = null;\n    this.#pointerDownAC?.abort();\n    this.#pointerDownAC = null;\n  }\n}\n\nexport { TouchManager };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  ColorManager,\n  KeyboardManager,\n} from \"./tools.js\";\nimport {\n  FeatureTest,\n  MathClamp,\n  shadow,\n  unreachable,\n} from \"../../shared/util.js\";\nimport { noContextMenu, stopEvent } from \"../display_utils.js\";\nimport { AltText } from \"./alt_text.js\";\nimport { Comment } from \"./comment.js\";\nimport { EditorToolbar } from \"./toolbar.js\";\nimport { TouchManager } from \"../touch_manager.js\";\n\n/**\n * @typedef {Object} AnnotationEditorParameters\n * @property {AnnotationEditorUIManager} uiManager - the global manager\n * @property {AnnotationEditorLayer} parent - the layer containing this editor\n * @property {string} id - editor id\n * @property {number} x - x-coordinate\n * @property {number} y - y-coordinate\n */\n\n/**\n * Base class for editors.\n */\nclass AnnotationEditor {\n  #accessibilityData = null;\n\n  #allResizerDivs = null;\n\n  #altText = null;\n\n  #comment = null;\n\n  #disabled = false;\n\n  #dragPointerId = null;\n\n  #dragPointerType = \"\";\n\n  #keepAspectRatio = false;\n\n  #resizersDiv = null;\n\n  #lastPointerCoords = null;\n\n  #savedDimensions = null;\n\n  #focusAC = null;\n\n  #focusedResizerName = \"\";\n\n  #hasBeenClicked = false;\n\n  #initialRect = null;\n\n  #isEditing = false;\n\n  #isInEditMode = false;\n\n  #isResizerEnabledForKeyboard = false;\n\n  #moveInDOMTimeout = null;\n\n  #prevDragX = 0;\n\n  #prevDragY = 0;\n\n  #telemetryTimeouts = null;\n\n  #touchManager = null;\n\n  isSelected = false;\n\n  _isCopy = false;\n\n  _editToolbar = null;\n\n  _initialOptions = Object.create(null);\n\n  _initialData = null;\n\n  _isVisible = true;\n\n  _uiManager = null;\n\n  _focusEventsAllowed = true;\n\n  static _l10n = null;\n\n  static _l10nResizer = null;\n\n  #isDraggable = false;\n\n  #zIndex = AnnotationEditor._zIndex++;\n\n  static _borderLineWidth = -1;\n\n  static _colorManager = new ColorManager();\n\n  static _zIndex = 1;\n\n  // Time to wait (in ms) before sending the telemetry data.\n  // We wait a bit to avoid sending too many requests when changing something\n  // like the thickness of a line.\n  static _telemetryTimeout = 1000;\n\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_resizerKeyboardManager\",\n      new KeyboardManager([\n        [[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, { args: [-small, 0] }],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          resize,\n          { args: [-big, 0] },\n        ],\n        [[\"ArrowRight\", \"mac+ArrowRight\"], resize, { args: [small, 0] }],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          resize,\n          { args: [big, 0] },\n        ],\n        [[\"ArrowUp\", \"mac+ArrowUp\"], resize, { args: [0, -small] }],\n        [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, { args: [0, -big] }],\n        [[\"ArrowDown\", \"mac+ArrowDown\"], resize, { args: [0, small] }],\n        [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, { args: [0, big] }],\n        [\n          [\"Escape\", \"mac+Escape\"],\n          AnnotationEditor.prototype._stopResizingWithKeyboard,\n        ],\n      ])\n    );\n  }\n\n  /**\n   * @param {AnnotationEditorParameters} parameters\n   */\n  constructor(parameters) {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) &&\n      this.constructor === AnnotationEditor\n    ) {\n      unreachable(\"Cannot initialize AnnotationEditor.\");\n    }\n\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    this.annotationElementId = parameters.annotationElementId || null;\n\n    const {\n      rotation,\n      rawDims: { pageWidth, pageHeight, pageX, pageY },\n    } = this.parent.viewport;\n\n    this.rotation = rotation;\n    this.pageRotation =\n      (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n\n  get mode() {\n    return Object.getPrototypeOf(this).constructor._editorType;\n  }\n\n  static get isDrawer() {\n    return false;\n  }\n\n  static get _defaultLineColor() {\n    return shadow(\n      this,\n      \"_defaultLineColor\",\n      this._colorManager.getHexCode(\"CanvasText\")\n    );\n  }\n\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager,\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n\n  /**\n   * Initialize the l10n stuff for this type of editor.\n   * @param {Object} l10n\n   */\n  static initialize(l10n, _uiManager) {\n    AnnotationEditor._l10n ??= l10n;\n\n    AnnotationEditor._l10nResizer ||= Object.freeze({\n      topLeft: \"pdfjs-editor-resizer-top-left\",\n      topMiddle: \"pdfjs-editor-resizer-top-middle\",\n      topRight: \"pdfjs-editor-resizer-top-right\",\n      middleRight: \"pdfjs-editor-resizer-middle-right\",\n      bottomRight: \"pdfjs-editor-resizer-bottom-right\",\n      bottomMiddle: \"pdfjs-editor-resizer-bottom-middle\",\n      bottomLeft: \"pdfjs-editor-resizer-bottom-left\",\n      middleLeft: \"pdfjs-editor-resizer-middle-left\",\n    });\n\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth =\n      parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n\n  /**\n   * Update the default parameters for this type of editor.\n   * @param {number} _type\n   * @param {*} _value\n   */\n  static updateDefaultParams(_type, _value) {}\n\n  /**\n   * Get the default properties to set in the UI for this type of editor.\n   * @returns {Array}\n   */\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n\n  /**\n   * Check if this kind of editor is able to handle the given mime type for\n   * pasting.\n   * @param {string} mime\n   * @returns {boolean}\n   */\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n\n  /**\n   * Extract the data from the clipboard item and delegate the creation of the\n   * editor to the parent.\n   * @param {DataTransferItem} item\n   * @param {AnnotationEditorLayer} parent\n   */\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n\n  /**\n   * Get the properties to update in the UI for this editor.\n   * @returns {Array}\n   */\n  get propertiesToUpdate() {\n    return [];\n  }\n\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n\n  /**\n   * @returns {boolean} true if the editor handles the Enter key itself.\n   */\n  get isEnterHandled() {\n    return true;\n  }\n\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= (this.height * pageHeight) / (pageWidth * 2);\n        this.y += (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += (this.height * pageHeight) / (pageWidth * 2);\n        this.y -= (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Add some commands into the CommandManager (undo/redo stuff).\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n\n  /**\n   * This editor will be behind the others.\n   */\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n\n  /**\n   * This editor will be in the foreground.\n   */\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      // The editor is being removed from the DOM, so we need to stop resizing.\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n\n  /**\n   * onfocus callback.\n   */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n\n  /**\n   * onblur callback.\n   * @param {FocusEvent} event\n   */\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n\n    // In case of focusout, the relatedTarget is the element which\n    // is grabbing the focus.\n    // So if the related target is an element under the div for this\n    // editor, then the editor isn't unactive.\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n\n  /**\n   * Commit the data contained in this editor.\n   */\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    this.addToAnnotationStorage();\n  }\n\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n\n  /**\n   * Set the editor position within its parent.\n   * @param {number} x\n   * @param {number} y\n   * @param {number} tx - x-translation in screen coordinates.\n   * @param {number} ty - y-translation in screen coordinates.\n   */\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n\n    this.fixAndSetPosition();\n  }\n\n  _moveAfterPaste(baseX, baseY) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setAt(\n      baseX * parentWidth,\n      baseY * parentHeight,\n      this.width * parentWidth,\n      this.height * parentHeight\n    );\n    this._onTranslated();\n  }\n\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n\n    this.x += x / width;\n    this.y += y / height;\n\n    this._onTranslating(this.x, this.y);\n\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Translate the editor position within its parent.\n   * @param {number} x - x-translation in screen coordinates.\n   * @param {number} y - y-translation in screen coordinates.\n   */\n  translate(x, y) {\n    // We don't change the initial position because the move here hasn't been\n    // done by the user.\n    this.#translate(this.parentDimensions, x, y);\n  }\n\n  /**\n   * Translate the editor position within its page and adjust the scroll\n   * in order to have the editor in the view.\n   * @param {number} x - x-translation in page coordinates.\n   * @param {number} y - y-translation in page coordinates.\n   */\n  translateInPage(x, y) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({ block: \"nearest\" });\n  }\n\n  translationDone() {\n    this._onTranslated(this.x, this.y);\n  }\n\n  drag(tx, ty) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    const {\n      div,\n      parentDimensions: [parentWidth, parentHeight],\n    } = this;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      // It's possible to not have a parent: for example, when the user is\n      // dragging all the selected editors but this one on a page which has been\n      // destroyed.\n      // It's why we need to check for it. In such a situation, it isn't really\n      // a problem to not find a new parent: it's something which is related to\n      // what the user is seeing, hence it depends on how pages are layed out.\n\n      // The element will be outside of its parent so change the parent.\n      const { x, y } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n\n    // The editor can be moved wherever the user wants, so we don't need to fix\n    // the position: it'll be done when the user will release the mouse button.\n\n    let { x, y } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n\n    const { style } = div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n\n    this._onTranslating(x, y);\n\n    div.scrollIntoView({ block: \"nearest\" });\n  }\n\n  /**\n   * Called when the editor is being translated.\n   * @param {number} x - in page coordinates.\n   * @param {number} y - in page coordinates.\n   */\n  _onTranslating(x, y) {}\n\n  /**\n   * Called when the editor has been translated.\n   * @param {number} x - in page coordinates.\n   * @param {number} y - in page coordinates.\n   */\n  _onTranslated(x, y) {}\n\n  get _hasBeenMoved() {\n    return (\n      !!this.#initialRect &&\n      (this.#initialRect[0] !== this.x || this.#initialRect[1] !== this.y)\n    );\n  }\n\n  get _hasBeenResized() {\n    return (\n      !!this.#initialRect &&\n      (this.#initialRect[2] !== this.width ||\n        this.#initialRect[3] !== this.height)\n    );\n  }\n\n  /**\n   * Get the translation to take into account the editor border.\n   * The CSS engine positions the element by taking the border into account so\n   * we must apply the opposite translation to have the editor in the right\n   * position.\n   * @returns {Array<number>}\n   */\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const { _borderLineWidth } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n\n  /**\n   * @returns {boolean} true if position must be fixed (i.e. make the x and y\n   * living in the page).\n   */\n  get _mustFixPosition() {\n    return true;\n  }\n\n  /**\n   * Fix the position of the editor in order to keep it inside its parent page.\n   * @param {number} [rotation] - the rotation of the page.\n   */\n  fixAndSetPosition(rotation = this.rotation) {\n    const {\n      div: { style },\n      pageDimensions: [pageWidth, pageHeight],\n    } = this;\n    let { x, y, width, height } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = MathClamp(x, 0, pageWidth - width);\n          y = MathClamp(y, 0, pageHeight - height);\n          break;\n        case 90:\n          x = MathClamp(x, 0, pageWidth - height);\n          y = MathClamp(y, width, pageHeight);\n          break;\n        case 180:\n          x = MathClamp(x, width, pageWidth);\n          y = MathClamp(y, height, pageHeight);\n          break;\n        case 270:\n          x = MathClamp(x, height, pageWidth);\n          y = MathClamp(y, 0, pageHeight - width);\n          break;\n      }\n    }\n\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n\n    this.moveInDOM();\n  }\n\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n\n  /**\n   * Convert a screen translation into a page one.\n   * @param {number} x\n   * @param {number} y\n   */\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n\n  /**\n   * Convert a page translation into a screen one.\n   * @param {number} x\n   * @param {number} y\n   */\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n      }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n      }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight],\n    } = this;\n    return [pageWidth * parentScale, pageHeight * parentScale];\n  }\n\n  /**\n   * Set the dimensions of this editor.\n   * @param {number} width\n   * @param {number} height\n   */\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const { style } = this.div;\n    style.width = `${((100 * width) / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      style.height = `${((100 * height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n\n  fixDims() {\n    const { style } = this.div;\n    const { height, width } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${((100 * parseFloat(width)) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${((100 * parseFloat(height)) / parentHeight).toFixed(2)}%`;\n    }\n  }\n\n  /**\n   * Get the translation used to position this editor when it's created.\n   * @returns {Array<number>}\n   */\n  getInitialTranslation() {\n    return [0, 0];\n  }\n\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    // When the resizers are used with the keyboard, they're focusable, hence\n    // we want to have them in this order (top left, top middle, top right, ...)\n    // in the DOM to have the focus order correct.\n    const classes = this._willKeepAspectRatio\n      ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"]\n      : [\n          \"topLeft\",\n          \"topMiddle\",\n          \"topRight\",\n          \"middleRight\",\n          \"bottomRight\",\n          \"bottomMiddle\",\n          \"bottomLeft\",\n          \"middleLeft\",\n        ];\n    const signal = this._uiManager._signal;\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\n        \"pointerdown\",\n        this.#resizerPointerdown.bind(this, name),\n        { signal }\n      );\n      div.addEventListener(\"contextmenu\", noContextMenu, { signal });\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      return;\n    }\n\n    this.#altText?.toggle(false);\n\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    this.#lastPointerCoords = [event.screenX, event.screenY];\n\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\n      \"pointermove\",\n      this.#resizerPointermove.bind(this, name),\n      { passive: true, capture: true, signal }\n    );\n    window.addEventListener(\n      \"touchmove\",\n      stopEvent /* Prevent the page from scrolling */,\n      { passive: false, signal }\n    );\n    window.addEventListener(\"contextmenu\", noContextMenu, { signal });\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height,\n    };\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor =\n      window.getComputedStyle(event.target).cursor;\n\n    const pointerUpCallback = () => {\n      ac.abort();\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n\n      this.#addResizeToUndoStack();\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, { signal });\n    // If the user switches to another window (with alt+tab), then we end the\n    // resize session.\n    window.addEventListener(\"blur\", pointerUpCallback, { signal });\n  }\n\n  #resize(x, y, width, height) {\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(parentWidth * width, parentHeight * height);\n    this.fixAndSetPosition();\n    this._onResized();\n  }\n\n  /**\n   * Called when the editor has been resized.\n   */\n  _onResized() {}\n\n  #addResizeToUndoStack() {\n    if (!this.#savedDimensions) {\n      return;\n    }\n    const { savedX, savedY, savedWidth, savedHeight } = this.#savedDimensions;\n    this.#savedDimensions = null;\n\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (\n      newX === savedX &&\n      newY === savedY &&\n      newWidth === savedWidth &&\n      newHeight === savedHeight\n    ) {\n      return;\n    }\n\n    this.addCommands({\n      cmd: this.#resize.bind(this, newX, newY, newWidth, newHeight),\n      undo: this.#resize.bind(this, savedX, savedY, savedWidth, savedHeight),\n      mustExec: true,\n    });\n  }\n\n  static _round(x) {\n    // 10000 because we multiply by 100 and use toFixed(2) in fixAndSetPosition.\n    // Without rounding, the positions of the corners other than the top left\n    // one can be slightly wrong.\n    return Math.round(x * 10000) / 10000;\n  }\n\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [\n      rotationMatrix[0] * x + rotationMatrix[2] * y,\n      rotationMatrix[1] * x + rotationMatrix[3] * y,\n    ];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [\n      invRotationMatrix[0] * x + invRotationMatrix[2] * y,\n      invRotationMatrix[1] * x + invRotationMatrix[3] * y,\n    ];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = AnnotationEditor._round(savedX + transfOppositePoint[0]);\n    const oppositeY = AnnotationEditor._round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n\n    let deltaX, deltaY;\n\n    if (!event.fromKeyboard) {\n      // We can't use event.movementX/Y because they're not reliable:\n      //  https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/movementX\n      // (it was buggy on a laptop with a touch screen).\n      const { screenX, screenY } = event;\n      const [lastScreenX, lastScreenY] = this.#lastPointerCoords;\n      [deltaX, deltaY] = this.screenToPageTranslation(\n        screenX - lastScreenX,\n        screenY - lastScreenY\n      );\n      this.#lastPointerCoords[0] = screenX;\n      this.#lastPointerCoords[1] = screenY;\n    } else {\n      ({ deltaX, deltaY } = event);\n    }\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(\n        Math.min(\n          Math.hypot(\n            oppositePoint[0] - point[0] - deltaX,\n            oppositePoint[1] - point[1] - deltaY\n          ) / oldDiag,\n          // Avoid the editor to be larger than the page.\n          1 / savedWidth,\n          1 / savedHeight\n        ),\n        // Avoid the editor to be smaller than the minimum size.\n        minWidth / savedWidth,\n        minHeight / savedHeight\n      );\n    } else if (isHorizontal) {\n      ratioX =\n        MathClamp(Math.abs(oppositePoint[0] - point[0] - deltaX), minWidth, 1) /\n        savedWidth;\n    } else {\n      ratioY =\n        MathClamp(\n          Math.abs(oppositePoint[1] - point[1] - deltaY),\n          minHeight,\n          1\n        ) / savedHeight;\n    }\n\n    const newWidth = AnnotationEditor._round(savedWidth * ratioX);\n    const newHeight = AnnotationEditor._round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n\n    this._onResizing();\n  }\n\n  /**\n   * Called when the editor is being resized.\n   */\n  _onResizing() {}\n\n  /**\n   * Called when the alt text dialog is closed.\n   */\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n\n  /**\n   * Get the toolbar buttons for this editor.\n   * @returns {Array<Array<string|object|null>>|null}\n   */\n  get toolbarButtons() {\n    return null;\n  }\n\n  /**\n   * Add a toolbar for this editor.\n   * @returns {Promise<EditorToolbar|null>}\n   */\n  async addEditToolbar() {\n    if (this._editToolbar || this.#isInEditMode) {\n      return this._editToolbar;\n    }\n    this._editToolbar = new EditorToolbar(this);\n    this.div.append(this._editToolbar.render());\n    const { toolbarButtons } = this;\n    if (toolbarButtons) {\n      for (const [name, tool] of toolbarButtons) {\n        await this._editToolbar.addButton(name, tool);\n      }\n    }\n    this._editToolbar.addButton(\"comment\", this.addCommentButton());\n    this._editToolbar.addButton(\"delete\");\n\n    return this._editToolbar;\n  }\n\n  removeEditToolbar() {\n    if (!this._editToolbar) {\n      return;\n    }\n    this._editToolbar.remove();\n    this._editToolbar = null;\n\n    // We destroy the alt text but we don't null it because we want to be able\n    // to restore it in case the user undoes the deletion.\n    this.#altText?.destroy();\n  }\n\n  addContainer(container) {\n    const editToolbarDiv = this._editToolbar?.div;\n    if (editToolbarDiv) {\n      editToolbarDiv.before(container);\n    } else {\n      this.div.append(container);\n    }\n  }\n\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n\n  /**\n   * Create the alt text for this editor.\n   * @returns {object}\n   */\n  createAltText() {\n    if (!this.#altText) {\n      AltText.initialize(AnnotationEditor._l10n);\n      this.#altText = new AltText(this);\n      if (this.#accessibilityData) {\n        this.#altText.data = this.#accessibilityData;\n        this.#accessibilityData = null;\n      }\n    }\n    return this.#altText;\n  }\n\n  get altTextData() {\n    return this.#altText?.data;\n  }\n\n  /**\n   * Set the alt text data.\n   */\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n\n  get guessedAltText() {\n    return this.#altText?.guessedText;\n  }\n\n  async setGuessedAltText(text) {\n    await this.#altText?.setGuessedText(text);\n  }\n\n  serializeAltText(isForCopying) {\n    return this.#altText?.serialize(isForCopying);\n  }\n\n  hasAltText() {\n    return !!this.#altText && !this.#altText.isEmpty();\n  }\n\n  hasAltTextData() {\n    return this.#altText?.hasData() ?? false;\n  }\n\n  addCommentButton() {\n    if (this.#comment) {\n      return this.#comment;\n    }\n    return (this.#comment = new Comment(this));\n  }\n\n  get commentColor() {\n    return null;\n  }\n\n  get comment() {\n    const comment = this.#comment;\n    return {\n      text: comment.data.text,\n      date: comment.data.date,\n      deleted: comment.isDeleted(),\n      color: this.commentColor,\n    };\n  }\n\n  set comment(text) {\n    if (!this.#comment) {\n      this.#comment = new Comment(this);\n    }\n    this.#comment.data = text;\n  }\n\n  setCommentData(text) {\n    if (!this.#comment) {\n      this.#comment = new Comment(this);\n    }\n    this.#comment.setInitialText(text);\n  }\n\n  get hasEditedComment() {\n    return this.#comment?.hasBeenEdited();\n  }\n\n  async editComment() {\n    if (!this.#comment) {\n      this.#comment = new Comment(this);\n    }\n    this.#comment.edit();\n  }\n\n  addComment(serialized) {\n    if (this.hasEditedComment) {\n      const DEFAULT_POPUP_WIDTH = 180;\n      const DEFAULT_POPUP_HEIGHT = 100;\n      const [, , , trY] = serialized.rect;\n      const [pageWidth] = this.pageDimensions;\n      const [pageX] = this.pageTranslation;\n      const blX = pageX + pageWidth + 1;\n      const blY = trY - DEFAULT_POPUP_HEIGHT;\n      const trX = blX + DEFAULT_POPUP_WIDTH;\n      serialized.popup = {\n        contents: this.comment.text,\n        deleted: this.comment.deleted,\n        rect: [blX, blY, trX, trY],\n      };\n    }\n  }\n\n  /**\n   * Render this editor in a div.\n   * @returns {HTMLDivElement | null}\n   */\n  render() {\n    const div = (this.div = document.createElement(\"div\"));\n    div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    div.className = this.name;\n    div.setAttribute(\"id\", this.id);\n    div.tabIndex = this.#disabled ? -1 : 0;\n    div.setAttribute(\"role\", \"application\");\n    if (this.defaultL10nId) {\n      div.setAttribute(\"data-l10n-id\", this.defaultL10nId);\n    }\n    if (!this._isVisible) {\n      div.classList.add(\"hidden\");\n    }\n\n    this.setInForeground();\n    this.#addFocusListeners();\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      div.style.maxWidth = `${((100 * parentHeight) / parentWidth).toFixed(\n        2\n      )}%`;\n      div.style.maxHeight = `${((100 * parentWidth) / parentHeight).toFixed(\n        2\n      )}%`;\n    }\n\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n\n    bindEvents(this, div, [\"keydown\", \"pointerdown\", \"dblclick\"]);\n\n    if (this.isResizable && this._uiManager._supportsPinchToZoom) {\n      this.#touchManager ||= new TouchManager({\n        container: div,\n        isPinchingDisabled: () => !this.isSelected,\n        onPinchStart: this.#touchPinchStartCallback.bind(this),\n        onPinching: this.#touchPinchCallback.bind(this),\n        onPinchEnd: this.#touchPinchEndCallback.bind(this),\n        signal: this._uiManager._signal,\n      });\n    }\n\n    this._uiManager._editorUndoBar?.hide();\n\n    return div;\n  }\n\n  #touchPinchStartCallback() {\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height,\n    };\n    this.#altText?.toggle(false);\n    this.parent.togglePointerEvents(false);\n  }\n\n  #touchPinchCallback(_origin, prevDistance, distance) {\n    // Slightly slow down the zooming because the editor could be small and the\n    // user could have difficulties to rescale it as they want.\n    const slowDownFactor = 0.7;\n    let factor =\n      slowDownFactor * (distance / prevDistance) + 1 - slowDownFactor;\n    if (factor === 1) {\n      return;\n    }\n\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [\n      rotationMatrix[0] * x + rotationMatrix[2] * y,\n      rotationMatrix[1] * x + rotationMatrix[3] * y,\n    ];\n\n    // The center of the editor is the fixed point.\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    factor = Math.max(\n      Math.min(factor, 1 / savedWidth, 1 / savedHeight),\n      minWidth / savedWidth,\n      minHeight / savedHeight\n    );\n    const newWidth = AnnotationEditor._round(savedWidth * factor);\n    const newHeight = AnnotationEditor._round(savedHeight * factor);\n    if (newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n\n    this.#initialRect ||= [savedX, savedY, savedWidth, savedHeight];\n    const transfCenterPoint = transf(savedWidth / 2, savedHeight / 2);\n    const centerX = AnnotationEditor._round(savedX + transfCenterPoint[0]);\n    const centerY = AnnotationEditor._round(savedY + transfCenterPoint[1]);\n    const newTransfCenterPoint = transf(newWidth / 2, newHeight / 2);\n\n    this.x = centerX - newTransfCenterPoint[0];\n    this.y = centerY - newTransfCenterPoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n\n    this._onResizing();\n  }\n\n  #touchPinchEndCallback() {\n    this.#altText?.toggle(true);\n    this.parent.togglePointerEvents(true);\n    this.#addResizeToUndoStack();\n  }\n\n  /**\n   * Onpointerdown callback.\n   * @param {PointerEvent} event\n   */\n  pointerdown(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Avoid to focus this editor because of a non-left click.\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n\n    this.#selectOnPointerEvent(event);\n  }\n\n  #selectOnPointerEvent(event) {\n    const { isMac } = FeatureTest.platform;\n    if (\n      (event.ctrlKey && !isMac) ||\n      event.shiftKey ||\n      (event.metaKey && isMac)\n    ) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n\n  #setUpDragSession(event) {\n    const { isSelected } = this;\n    this._uiManager.setUpDragSession();\n    let hasDraggingStarted = false;\n\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    const opts = { capture: true, passive: false, signal };\n    const cancelDrag = e => {\n      ac.abort();\n\n      this.#dragPointerId = null;\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(e);\n      }\n      if (hasDraggingStarted) {\n        this._onStopDragging();\n      }\n    };\n\n    if (isSelected) {\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      this.#dragPointerId = event.pointerId;\n      this.#dragPointerType = event.pointerType;\n      window.addEventListener(\n        \"pointermove\",\n        e => {\n          if (!hasDraggingStarted) {\n            hasDraggingStarted = true;\n            this._onStartDragging();\n          }\n          const { clientX: x, clientY: y, pointerId } = e;\n          if (pointerId !== this.#dragPointerId) {\n            stopEvent(e);\n            return;\n          }\n          const [tx, ty] = this.screenToPageTranslation(\n            x - this.#prevDragX,\n            y - this.#prevDragY\n          );\n          this.#prevDragX = x;\n          this.#prevDragY = y;\n          this._uiManager.dragSelectedEditors(tx, ty);\n        },\n        opts\n      );\n      window.addEventListener(\n        \"touchmove\",\n        stopEvent /* Prevent the page from scrolling */,\n        opts\n      );\n      window.addEventListener(\n        \"pointerdown\",\n        // If the user drags with one finger and then clicks with another.\n        e => {\n          if (e.pointerType === this.#dragPointerType) {\n            // We've a pinch to zoom session.\n            // We cannot have two primaries at the same time.\n            // It's possible to be in this state with Firefox and Gnome when\n            // trying to drag with three fingers (see bug 1933716).\n            if (this.#touchManager || e.isPrimary) {\n              cancelDrag(e);\n            }\n          }\n          stopEvent(e);\n        },\n        opts\n      );\n    }\n\n    const pointerUpCallback = e => {\n      if (!this.#dragPointerId || this.#dragPointerId === e.pointerId) {\n        cancelDrag(e);\n        return;\n      }\n      stopEvent(e);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, { signal });\n    // If the user is using alt+tab during the dragging session, the pointerup\n    // event could be not fired, but a blur event is fired so we can use it in\n    // order to interrupt the dragging session.\n    window.addEventListener(\"blur\", pointerUpCallback, { signal });\n  }\n\n  _onStartDragging() {}\n\n  _onStopDragging() {}\n\n  moveInDOM() {\n    // Moving the editor in the DOM can be expensive, so we wait a bit before.\n    // It's important to not block the UI (for example when changing the font\n    // size in a FreeText).\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n      if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n        this._uiManager._eventBus.dispatch(\"editormovedindom\", {\n          source: this,\n        });\n      }\n    }, 0);\n  }\n\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n    this._onTranslated();\n  }\n\n  /**\n   * Convert the current rect into a page one.\n   * @param {number} tx - x-translation in screen coordinates.\n   * @param {number} ty - y-translation in screen coordinates.\n   * @param {number} [rotation] - the rotation of the page.\n   */\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n\n    switch (rotation) {\n      case 0:\n        return [\n          x + shiftX + pageX,\n          pageHeight - y - shiftY - height + pageY,\n          x + shiftX + width + pageX,\n          pageHeight - y - shiftY + pageY,\n        ];\n      case 90:\n        return [\n          x + shiftY + pageX,\n          pageHeight - y + shiftX + pageY,\n          x + shiftY + height + pageX,\n          pageHeight - y + shiftX + width + pageY,\n        ];\n      case 180:\n        return [\n          x - shiftX - width + pageX,\n          pageHeight - y + shiftY + pageY,\n          x - shiftX + pageX,\n          pageHeight - y + shiftY + height + pageY,\n        ];\n      case 270:\n        return [\n          x - shiftY - height + pageX,\n          pageHeight - y - shiftX - width + pageY,\n          x - shiftY + pageX,\n          pageHeight - y - shiftX + pageY,\n        ];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n\n    const width = x2 - x1;\n    const height = y2 - y1;\n\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n\n  /**\n   * Get the rect in page coordinates without any translation.\n   * It's used when serializing the editor.\n   * @returns {Array<number>}\n   */\n  getPDFRect() {\n    return this.getRect(0, 0);\n  }\n\n  /**\n   * Executed once this editor has been rendered.\n   * @param {boolean} focus - true if the editor should be focused.\n   */\n  onceAdded(focus) {}\n\n  /**\n   * Check if the editor contains something.\n   * @returns {boolean}\n   */\n  isEmpty() {\n    return false;\n  }\n\n  /**\n   * Enable edit mode.\n   * @returns {boolean} - true if the edit mode has been enabled.\n   */\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(false);\n    this.#isInEditMode = true;\n\n    return true;\n  }\n\n  /**\n   * Disable edit mode.\n   * @returns {boolean} - true if the edit mode has been disabled.\n   */\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(true);\n    this.#isInEditMode = false;\n\n    return true;\n  }\n\n  /**\n   * Check if the editor is edited.\n   * @returns {boolean}\n   */\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n\n  /**\n   * If it returns true, then this editor handles the keyboard\n   * events itself.\n   * @returns {boolean}\n   */\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n\n  /**\n   * Check if this editor needs to be rebuilt or not.\n   * @returns {boolean}\n   */\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n\n  get isOnScreen() {\n    const { top, left, bottom, right } = this.getClientDimensions();\n    const { innerHeight, innerWidth } = window;\n    return left < innerWidth && right > 0 && top < innerHeight && bottom > 0;\n  }\n\n  #addFocusListeners() {\n    if (this.#focusAC || !this.div) {\n      return;\n    }\n    this.#focusAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#focusAC);\n\n    this.div.addEventListener(\"focusin\", this.focusin.bind(this), { signal });\n    this.div.addEventListener(\"focusout\", this.focusout.bind(this), { signal });\n  }\n\n  /**\n   * Rebuild the editor in case it has been removed on undo.\n   *\n   * To implement in subclasses.\n   */\n  rebuild() {\n    this.#addFocusListeners();\n  }\n\n  /**\n   * Rotate the editor when the page is rotated.\n   * @param {number} angle\n   */\n  rotate(_angle) {}\n\n  /**\n   * Resize the editor when the page is resized.\n   */\n  resize() {}\n\n  /**\n   * Serialize the editor when it has been deleted.\n   * @returns {Object}\n   */\n  serializeDeleted() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n      popupRef: this._initialData?.popupRef || \"\",\n    };\n  }\n\n  /**\n   * Serialize the editor.\n   * The result of the serialization will be used to construct a\n   * new annotation to add to the pdf document.\n   *\n   * To implement in subclasses.\n   * @param {boolean} [isForCopying]\n   * @param {Object | null} [context]\n   * @returns {Object | null}\n   */\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n\n  /**\n   * Deserialize the editor.\n   * The result of the deserialization is a new editor.\n   *\n   * @param {Object} data\n   * @param {AnnotationEditorLayer} parent\n   * @param {AnnotationEditorUIManager} uiManager\n   * @returns {Promise<AnnotationEditor | null>}\n   */\n  static async deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager,\n      annotationElementId: data.annotationElementId,\n    });\n    editor.rotation = data.rotation;\n    editor.#accessibilityData = data.accessibilityData;\n    editor._isCopy = data.isCopy || false;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(\n      data.rect,\n      pageHeight\n    );\n\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n\n    return editor;\n  }\n\n  /**\n   * Check if an existing annotation associated with this editor has been\n   * modified.\n   * @returns {boolean}\n   */\n  get hasBeenModified() {\n    return (\n      !!this.annotationElementId && (this.deleted || this.serialize() !== null)\n    );\n  }\n\n  /**\n   * Remove this editor.\n   * It's used on ctrl+backspace action.\n   */\n  remove() {\n    this.#focusAC?.abort();\n    this.#focusAC = null;\n\n    if (!this.isEmpty()) {\n      // The editor is removed but it can be back at some point thanks to\n      // undo/redo so we must commit it before.\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n    this.#touchManager?.destroy();\n    this.#touchManager = null;\n  }\n\n  /**\n   * @returns {boolean} true if this editor can be resized.\n   */\n  get isResizable() {\n    return false;\n  }\n\n  /**\n   * Add the resizers to this editor.\n   */\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n    }\n  }\n\n  get toolbarPosition() {\n    return null;\n  }\n\n  /**\n   * onkeydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (\n      !this.isResizable ||\n      event.target !== this.div ||\n      event.key !== \"Enter\"\n    ) {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height,\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      const signal = this._uiManager._signal;\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown, { signal });\n        div.addEventListener(\"blur\", boundResizerBlur, { signal });\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name), {\n          signal,\n        });\n        div.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n\n    // We want to have the resizers in the visual order, so we move the first\n    // (top-left) to the right place.\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition =\n      (((360 - this.rotation + this.parentRotation) % 360) / 90) *\n      (this.#allResizerDivs.length / 4);\n\n    if (nextFirstPosition !== firstPosition) {\n      // We need to reorder the resizers in the DOM in order to have the focus\n      // on the top-left one.\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        child.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({ focusVisible: true });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n\n  #resizerBlur(event) {\n    if (\n      this.#isResizerEnabledForKeyboard &&\n      event.relatedTarget?.parentNode !== this.#resizersDiv\n    ) {\n      this.#stopResizing();\n    }\n  }\n\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      deltaX: x,\n      deltaY: y,\n      fromKeyboard: true,\n    });\n  }\n\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    this.#addResizeToUndoStack();\n  }\n\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n\n  /**\n   * Select this editor.\n   */\n  select() {\n    if (this.isSelected && this._editToolbar) {\n      return;\n    }\n    this.isSelected = true;\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this._editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          // The editor can have been unselected while we were waiting for the\n          // edit toolbar to be created, hence we want to be sure that this\n          // editor is still selected.\n          this._editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this._editToolbar?.show();\n    this.#altText?.toggleAltTextBadge(false);\n  }\n\n  /**\n   * Unselect this editor.\n   */\n  unselect() {\n    if (!this.isSelected) {\n      return;\n    }\n    this.isSelected = false;\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      // Don't use this.div.blur() because we don't know where the focus will\n      // go.\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true,\n      });\n    }\n    this._editToolbar?.hide();\n    this.#altText?.toggleAltTextBadge(true);\n  }\n\n  /**\n   * Update some parameters which have been changed through the UI.\n   * @param {number} type\n   * @param {*} value\n   */\n  updateParams(type, value) {}\n\n  /**\n   * When the user disables the editing mode some editors can change some of\n   * their properties.\n   */\n  disableEditing() {}\n\n  /**\n   * When the user enables the editing mode some editors can change some of\n   * their properties.\n   */\n  enableEditing() {}\n\n  /**\n   * Check if the content of this editor can be changed.\n   * For example, a FreeText editor can be changed (the user can change the\n   * text), but a Stamp editor cannot.\n   * @returns {boolean}\n   */\n  get canChangeContent() {\n    return false;\n  }\n\n  /**\n   * The editor is about to be edited.\n   */\n  enterInEditMode() {\n    if (!this.canChangeContent) {\n      return;\n    }\n    this.enableEditMode();\n    this.div.focus();\n  }\n\n  /**\n   * ondblclick callback.\n   * @param {MouseEvent} event\n   */\n  dblclick(event) {\n    this.enterInEditMode();\n    this.parent.updateToolbar({\n      mode: this.constructor._editorType,\n      editId: this.id,\n    });\n  }\n\n  /**\n   * @returns {HTMLElement | null} the element requiring an alt text.\n   */\n  getElementForAltText() {\n    return this.div;\n  }\n\n  /**\n   * Get the div which really contains the displayed content.\n   * @returns {HTMLDivElement | undefined}\n   */\n  get contentDiv() {\n    return this.div;\n  }\n\n  /**\n   * If true then the editor is currently edited.\n   * @type {boolean}\n   */\n  get isEditing() {\n    return this.#isEditing;\n  }\n\n  /**\n   * When set to true, it means that this editor is currently edited.\n   * @param {boolean} value\n   */\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n\n  /**\n   * Set the aspect ratio to use when resizing.\n   * @param {number} width\n   * @param {number} height\n   */\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const { style } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n\n  static get MIN_SIZE() {\n    return 16;\n  }\n\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n\n  /**\n   * Get the data to report to the telemetry when the editor is added.\n   * @returns {Object}\n   */\n  get telemetryInitialData() {\n    return { action: \"added\" };\n  }\n\n  /**\n   * The telemetry data to use when saving/printing.\n   * @returns {Object|null}\n   */\n  get telemetryFinalData() {\n    return null;\n  }\n\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const { action } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data,\n      },\n    });\n  }\n\n  /**\n   * Show or hide this editor.\n   * @param {boolean|undefined} visible\n   */\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n\n  /**\n   * Render an annotation in the annotation layer.\n   * @param {Object} annotation\n   * @returns {HTMLElement|null}\n   */\n  renderAnnotationElement(annotation) {\n    if (this.deleted) {\n      annotation.hide();\n      return null;\n    }\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n\n    return content;\n  }\n\n  resetAnnotationElement(annotation) {\n    const { firstChild } = annotation.container;\n    if (\n      firstChild?.nodeName === \"DIV\" &&\n      firstChild.classList.contains(\"annotationContent\")\n    ) {\n      firstChild.remove();\n    }\n  }\n}\n\n// This class is used to fake an editor which has been deleted.\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n\n  serialize() {\n    return this.serializeDeleted();\n  }\n}\n\nexport { AnnotationEditor };\n","/* Copyright 2014 Opera Software ASA\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n *\n * Based on https://code.google.com/p/smhasher/wiki/MurmurHash3.\n * Hashes roughly 100 KB per millisecond on i7 3.4 GHz.\n */\n\nconst SEED = 0xc3d2e1f0;\n// Workaround for missing math precision in JS.\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\n\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    // We don't care about endianness here.\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        h1 ^= k1;\n        h1 = (h1 << 13) | (h1 >>> 19);\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = ((k2 * C1) & MASK_HIGH) | ((k2 * C1_LOW) & MASK_LOW);\n        k2 = (k2 << 15) | (k2 >>> 17);\n        k2 = ((k2 * C2) & MASK_HIGH) | ((k2 * C2_LOW) & MASK_LOW);\n        h2 ^= k2;\n        h2 = (h2 << 13) | (h2 >>> 19);\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n\n    k1 = 0;\n\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      /* falls through */\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      /* falls through */\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        /* falls through */\n\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0xed558ccd) & MASK_HIGH) | ((h1 * 0x8ccd) & MASK_LOW);\n    h2 =\n      ((h2 * 0xff51afd7) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xafd7ed55) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0x1a85ec53) & MASK_HIGH) | ((h1 * 0xec53) & MASK_LOW);\n    h2 =\n      ((h2 * 0xc4ceb9fe) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xb9fe1a85) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n\n    return (\n      (h1 >>> 0).toString(16).padStart(8, \"0\") +\n      (h2 >>> 0).toString(16).padStart(8, \"0\")\n    );\n  }\n}\n\nexport { MurmurHash3_64 };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { shadow, unreachable } from \"../shared/util.js\";\nimport { AnnotationEditor } from \"./editor/editor.js\";\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined,\n});\n\n/**\n * Key/value storage for annotation data in forms.\n */\nclass AnnotationStorage {\n  #modified = false;\n\n  #modifiedIds = null;\n\n  #storage = new Map();\n\n  constructor() {\n    // Callbacks to signal when the modification state is set or reset.\n    // This is used by the viewer to only bind on `beforeunload` if forms\n    // are actually edited to prevent doing so unconditionally since that\n    // can have undesirable effects.\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"_setValues\", {\n        value: obj => {\n          for (const [key, val] of Object.entries(obj)) {\n            this.setValue(key, val);\n          }\n        },\n      });\n    }\n  }\n\n  /**\n   * Get the value for a given key if it exists, or return the default value.\n   * @param {string} key\n   * @param {Object} defaultValue\n   * @returns {Object}\n   */\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n\n    return Object.assign(defaultValue, value);\n  }\n\n  /**\n   * Get the value for a given key.\n   * @param {string} key\n   * @returns {Object}\n   */\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n\n  /**\n   * Remove a value from the storage.\n   * @param {string} key\n   */\n  remove(key) {\n    this.#storage.delete(key);\n\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n\n  /**\n   * Set the value for a given key\n   * @param {string} key\n   * @param {Object} value\n   */\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n\n    if (\n      value instanceof AnnotationEditor &&\n      typeof this.onAnnotationEditor === \"function\"\n    ) {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n\n  /**\n   * Check if the storage contains the given key.\n   * @param {string} key\n   * @returns {boolean}\n   */\n  has(key) {\n    return this.#storage.has(key);\n  }\n\n  get size() {\n    return this.#storage.size;\n  }\n\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n\n  /**\n   * @returns {PrintAnnotationStorage}\n   */\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n\n    for (const [key, val] of this.#storage) {\n      const serialized =\n        val instanceof AnnotationEditor\n          ? val.serialize(/* isForCopying = */ false, context)\n          : val;\n      if (serialized) {\n        map.set(key, serialized);\n\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n\n    if (hasBitmap) {\n      // We must transfer the bitmap data separately, since it can be changed\n      // during serialization with SVG images.\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n\n    return map.size > 0\n      ? { map, hash: hash.hexdigest(), transfer }\n      : SerializableEmpty;\n  }\n\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const { type } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = (stats[type] ||= new Map());\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n\n  resetModifiedIds() {\n    this.#modifiedIds = null;\n  }\n\n  /**\n   * @returns {{ids: Set<string>, hash: string}}\n   */\n  get modifiedIds() {\n    if (this.#modifiedIds) {\n      return this.#modifiedIds;\n    }\n    const ids = [];\n    for (const value of this.#storage.values()) {\n      if (\n        !(value instanceof AnnotationEditor) ||\n        !value.annotationElementId ||\n        !value.serialize()\n      ) {\n        continue;\n      }\n      ids.push(value.annotationElementId);\n    }\n    return (this.#modifiedIds = {\n      ids: new Set(ids),\n      hash: ids.join(\",\"),\n    });\n  }\n\n  [Symbol.iterator]() {\n    return this.#storage.entries();\n  }\n}\n\n/**\n * A special `AnnotationStorage` for use during printing, where the serializable\n * data is *frozen* upon initialization, to prevent scripting from modifying its\n * contents. (Necessary since printing is triggered synchronously in browsers.)\n */\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n\n  constructor(parent) {\n    super();\n    const { map, hash, transfer } = parent.serializable;\n    // Create a *copy* of the data, since Objects are passed by reference in JS.\n    const clone = structuredClone(map, transfer ? { transfer } : null);\n\n    this.#serializable = { map: clone, hash, transfer };\n  }\n\n  /**\n   * @returns {PrintAnnotationStorage}\n   */\n  // eslint-disable-next-line getter-return\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    return this.#serializable;\n  }\n\n  get modifiedIds() {\n    return shadow(this, \"modifiedIds\", {\n      ids: new Set(),\n      hash: \"\",\n    });\n  }\n}\n\nexport { AnnotationStorage, PrintAnnotationStorage, SerializableEmpty };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  FeatureTest,\n  isNodeJS,\n  shadow,\n  string32,\n  toBase64Util,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\n\nclass FontLoader {\n  #systemFonts = new Set();\n\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null, // For testing only.\n  }) {\n    this._document = ownerDocument;\n\n    this.nativeFontFaces = new Set();\n    this.styleElement =\n      typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")\n        ? styleElement\n        : null;\n\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) {\n      this.loadingRequests = [];\n      this.loadTestFontId = 0;\n    }\n  }\n\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement\n        .getElementsByTagName(\"head\")[0]\n        .append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n\n    if (this.styleElement) {\n      // Note: ChildNode.remove doesn't throw if the parentNode is undefined.\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n\n  async loadSystemFont({\n    systemFontInfo: info,\n    disableFontFace,\n    _inspectFont,\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(\n      !disableFontFace,\n      \"loadSystemFont shouldn't be called when `disableFontFace` is set.\"\n    );\n\n    if (this.isFontLoadingAPISupported) {\n      const { loadedName, src, style } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(\n          `Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`\n        );\n\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n\n    unreachable(\n      \"Not implemented: loadSystemFont without the Font Loading API.\"\n    );\n  }\n\n  async bind(font) {\n    // Add the font to the DOM only once; skip if the font is already loaded.\n    if (font.attached || (font.missingFile && !font.systemFontInfo)) {\n      return;\n    }\n    font.attached = true;\n\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n\n          // When font loading failed, fall back to the built-in font renderer.\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return; // The font was, asynchronously, loaded.\n    }\n\n    // !this.isFontLoadingAPISupported\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n\n      if (this.isSyncFontLoadingSupported) {\n        return; // The font was, synchronously, loaded.\n      }\n      if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n        throw new Error(\"Not implemented: async font loading\");\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n      // The font was, asynchronously, loaded.\n    }\n  }\n\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      return shadow(\n        this,\n        \"isFontLoadingAPISupported\",\n        hasFonts && !this.styleElement\n      );\n    }\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n\n  get isSyncFontLoadingSupported() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      return shadow(this, \"isSyncFontLoadingSupported\", true);\n    }\n\n    // Node.js - we can pretend that sync font loading is supported.\n    // Firefox, from version 14, supports synchronous font loading.\n    return shadow(\n      this,\n      \"isSyncFontLoadingSupported\",\n      (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"CHROME\")) &&\n        (isNodeJS || FeatureTest.platform.isFirefox)\n    );\n  }\n\n  _queueLoadingCallback(callback) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _queueLoadingCallback\");\n    }\n\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n\n      // Sending all completed requests in order of how they were queued.\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n\n    const { loadingRequests } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback,\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n\n  get _loadTestFont() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _loadTestFont\");\n    }\n\n    // This is a CFF font with 1 glyph for '.' that fills its entire width\n    // and height.\n    const testFont = atob(\n      \"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" +\n        \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" +\n        \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" +\n        \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" +\n        \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" +\n        \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" +\n        \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" +\n        \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" +\n        \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" +\n        \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" +\n        \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" +\n        \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" +\n        \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" +\n        \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" +\n        \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" +\n        \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" +\n        \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\"\n    );\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n\n  _prepareFontLoadEvent(font, request) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _prepareFontLoadEvent\");\n    }\n\n    /** Hack begin */\n    // There's currently no event when a font has finished downloading so the\n    // following code is a dirty hack to 'guess' when a font is ready.\n    // It's assumed fonts are loaded in order, so add a known test font after\n    // the desired fonts and then test for the loading of that test font.\n\n    function int32(data, offset) {\n      return (\n        (data.charCodeAt(offset) << 24) |\n        (data.charCodeAt(offset + 1) << 16) |\n        (data.charCodeAt(offset + 2) << 8) |\n        (data.charCodeAt(offset + 3) & 0xff)\n      );\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n\n    // The temporary canvas is used to determine if fonts are loaded.\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n\n    let called = 0;\n    function isFontReady(name, callback) {\n      // With setTimeout clamping this gives the font ~100ms to load.\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    // Chromium seems to cache fonts based on a hash of the actual font data,\n    // so the font must be modified for each load test else it will appear to\n    // be loaded already.\n    // TODO: This could maybe be made faster by avoiding the btoa of the full\n    // font by splitting it in chunks before hand and padding the font id.\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976; // has to be on 4 byte boundary (for checksum)\n    data = spliceString(\n      data,\n      COMMENT_OFFSET,\n      loadTestFontId.length,\n      loadTestFontId\n    );\n    // CFF checksum is important for IE, adjusting it\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858; // the \"comment\" filled with 'X'\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      // align to 4 bytes boundary\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i)) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n    /** Hack end */\n  }\n}\n\nclass FontFaceObject {\n  constructor(translatedData, inspectFont = null) {\n    this.compiledGlyphs = Object.create(null);\n    // importing translated data\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      if (typeof this.disableFontFace !== \"boolean\") {\n        unreachable(\"disableFontFace must be available.\");\n      }\n      if (typeof this.fontExtraProperties !== \"boolean\") {\n        unreachable(\"fontExtraProperties must be available.\");\n      }\n    }\n    this._inspectFont = inspectFont;\n  }\n\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight,\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(\n        this.cssFontInfo.fontFamily,\n        this.data,\n        css\n      );\n    }\n\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    // Add the @font-face rule to the document.\n    const url = `url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n\n    const objId = this.loadedName + \"_path_\" + character;\n    let cmds;\n    try {\n      cmds = objs.get(objId);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    const path = new Path2D(cmds || \"\");\n\n    if (!this.fontExtraProperties) {\n      // Remove the raw path-string, since we don't need it anymore.\n      objs.delete(objId);\n    }\n    return (this.compiledGlyphs[character] = path);\n  }\n}\n\nexport { FontFaceObject, FontLoader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  _isValidExplicitDest,\n  isNodeJS,\n  stringToBytes,\n  warn,\n} from \"../shared/util.js\";\n\nfunction getUrlProp(val) {\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n    return null; // The 'url' is unused with `PDFDataRangeTransport`.\n  }\n  if (val instanceof URL) {\n    return val.href;\n  }\n  if (typeof val === \"string\") {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"GENERIC\") &&\n      isNodeJS\n    ) {\n      return val; // Use the url as-is in Node.js environments.\n    }\n\n    // The full path is required in the 'url' field.\n    const url = URL.parse(val, window.location);\n    if (url) {\n      return url.href;\n    }\n  }\n  throw new Error(\n    \"Invalid PDF url data: \" +\n      \"either string or URL-object is expected in the url property.\"\n  );\n}\n\nfunction getDataProp(val) {\n  // Converting string or array-like data to Uint8Array.\n  if (\n    typeof PDFJSDev !== \"undefined\" &&\n    PDFJSDev.test(\"GENERIC\") &&\n    isNodeJS &&\n    typeof Buffer !== \"undefined\" && // eslint-disable-line no-undef\n    val instanceof Buffer // eslint-disable-line no-undef\n  ) {\n    throw new Error(\n      \"Please provide binary data as `Uint8Array`, rather than `Buffer`.\"\n    );\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    // Use the data as-is when it's already a Uint8Array that completely\n    // \"utilizes\" its underlying ArrayBuffer, to prevent any possible\n    // issues when transferring it to the worker-thread.\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (\n    val instanceof ArrayBuffer ||\n    ArrayBuffer.isView(val) ||\n    (typeof val === \"object\" && !isNaN(val?.length))\n  ) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\n    \"Invalid PDF binary data: either TypedArray, \" +\n      \"string, or array-like object is expected in the data property.\"\n  );\n}\n\nfunction getFactoryUrlProp(val) {\n  if (typeof val !== \"string\") {\n    return null;\n  }\n  if (val.endsWith(\"/\")) {\n    return val;\n  }\n  throw new Error(`Invalid factory url: \"${val}\" must include trailing slash.`);\n}\n\nconst isRefProxy = v =>\n  typeof v === \"object\" &&\n  Number.isInteger(v?.num) &&\n  v.num >= 0 &&\n  Number.isInteger(v?.gen) &&\n  v.gen >= 0;\n\nconst isNameProxy = v => typeof v === \"object\" && typeof v?.name === \"string\";\n\nconst isValidExplicitDest = _isValidExplicitDest.bind(\n  null,\n  /* validRef = */ isRefProxy,\n  /* validName = */ isNameProxy\n);\n\nclass LoopbackPort {\n  #listeners = new Map();\n\n  #deferred = Promise.resolve();\n\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? { transfer } : null),\n    };\n\n    this.#deferred.then(() => {\n      for (const [listener] of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n\n  addEventListener(name, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const { signal } = options;\n      if (signal.aborted) {\n        warn(\"LoopbackPort - cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this.removeEventListener(name, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    this.#listeners.set(listener, rmAbort);\n  }\n\n  removeEventListener(name, listener) {\n    const rmAbort = this.#listeners.get(listener);\n    rmAbort?.();\n\n    this.#listeners.delete(listener);\n  }\n\n  terminate() {\n    for (const [, rmAbort] of this.#listeners) {\n      rmAbort?.();\n    }\n    this.#listeners.clear();\n  }\n}\n\nexport {\n  getDataProp,\n  getFactoryUrlProp,\n  getUrlProp,\n  isNameProxy,\n  isRefProxy,\n  isValidExplicitDest,\n  LoopbackPort,\n};\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  InvalidPDFException,\n  PasswordException,\n  ResponseException,\n  UnknownErrorException,\n  unreachable,\n} from \"./util.js\";\n\nconst CallbackKind = {\n  DATA: 1,\n  ERROR: 2,\n};\n\nconst StreamKind = {\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8,\n};\n\nfunction onFn() {}\n\nfunction wrapReason(ex) {\n  if (\n    ex instanceof AbortException ||\n    ex instanceof InvalidPDFException ||\n    ex instanceof PasswordException ||\n    ex instanceof ResponseException ||\n    ex instanceof UnknownErrorException\n  ) {\n    // Avoid re-creating the exception when its type is already correct.\n    return ex;\n  }\n\n  if (!(ex instanceof Error || (typeof ex === \"object\" && ex !== null))) {\n    unreachable(\n      'wrapReason: Expected \"reason\" to be a (possibly cloned) Error.'\n    );\n  }\n  switch (ex.name) {\n    case \"AbortException\":\n      return new AbortException(ex.message);\n    case \"InvalidPDFException\":\n      return new InvalidPDFException(ex.message);\n    case \"PasswordException\":\n      return new PasswordException(ex.message, ex.code);\n    case \"ResponseException\":\n      return new ResponseException(ex.message, ex.status, ex.missing);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(ex.message, ex.details);\n  }\n  return new UnknownErrorException(ex.message, ex.toString());\n}\n\nclass MessageHandler {\n  #messageAC = new AbortController();\n\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n\n    comObj.addEventListener(\"message\", this.#onMessage.bind(this), {\n      signal: this.#messageAC.signal,\n    });\n  }\n\n  #onMessage({ data }) {\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.stream) {\n      this.#processStreamMessage(data);\n      return;\n    }\n    if (data.callback) {\n      const callbackId = data.callbackId;\n      const capability = this.callbackCapabilities[callbackId];\n      if (!capability) {\n        throw new Error(`Cannot resolve callback ${callbackId}`);\n      }\n      delete this.callbackCapabilities[callbackId];\n\n      if (data.callback === CallbackKind.DATA) {\n        capability.resolve(data.data);\n      } else if (data.callback === CallbackKind.ERROR) {\n        capability.reject(wrapReason(data.reason));\n      } else {\n        throw new Error(\"Unexpected callback case\");\n      }\n      return;\n    }\n    const action = this.actionHandler[data.action];\n    if (!action) {\n      throw new Error(`Unknown action from worker: ${data.action}`);\n    }\n    if (data.callbackId) {\n      const sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n\n      Promise.try(action, data.data).then(\n        function (result) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            callback: CallbackKind.DATA,\n            callbackId: data.callbackId,\n            data: result,\n          });\n        },\n        function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            callback: CallbackKind.ERROR,\n            callbackId: data.callbackId,\n            reason: wrapReason(reason),\n          });\n        }\n      );\n      return;\n    }\n    if (data.streamId) {\n      this.#createStreamSink(data);\n      return;\n    }\n    action(data.data);\n  }\n\n  on(actionName, handler) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        typeof handler === \"function\",\n        'MessageHandler.on: Expected \"handler\" to be a function.'\n      );\n    }\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   */\n  send(actionName, data, transfers) {\n    this.comObj.postMessage(\n      {\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        data,\n      },\n      transfers\n    );\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that the other side will callback with the response.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage(\n        {\n          sourceName: this.sourceName,\n          targetName: this.targetName,\n          action: actionName,\n          callbackId,\n          data,\n        },\n        transfers\n      );\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expect that the other side will callback to signal 'start_complete'.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Object} queueingStrategy - Strategy to signal backpressure based on\n   *                 internal queue.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {ReadableStream} ReadableStream to read data in chunks.\n   */\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n\n    return new ReadableStream(\n      {\n        start: controller => {\n          const startCapability = Promise.withResolvers();\n          this.streamControllers[streamId] = {\n            controller,\n            startCall: startCapability,\n            pullCall: null,\n            cancelCall: null,\n            isClosed: false,\n          };\n          comObj.postMessage(\n            {\n              sourceName,\n              targetName,\n              action: actionName,\n              streamId,\n              data,\n              desiredSize: controller.desiredSize,\n            },\n            transfers\n          );\n          // Return Promise for Async process, to signal success/failure.\n          return startCapability.promise;\n        },\n\n        pull: controller => {\n          const pullCapability = Promise.withResolvers();\n          this.streamControllers[streamId].pullCall = pullCapability;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL,\n            streamId,\n            desiredSize: controller.desiredSize,\n          });\n          // Returning Promise will not call \"pull\"\n          // again until current pull is resolved.\n          return pullCapability.promise;\n        },\n\n        cancel: reason => {\n          assert(reason instanceof Error, \"cancel must have a valid reason\");\n          const cancelCapability = Promise.withResolvers();\n          this.streamControllers[streamId].cancelCall = cancelCapability;\n          this.streamControllers[streamId].isClosed = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL,\n            streamId,\n            reason: wrapReason(reason),\n          });\n          // Return Promise to signal success or failure.\n          return cancelCapability.promise;\n        },\n      },\n      queueingStrategy\n    );\n  }\n\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        // Enqueue decreases the desiredSize property of sink,\n        // so when it changes from positive to negative,\n        // set ready as unresolved promise.\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage(\n          {\n            sourceName,\n            targetName,\n            stream: StreamKind.ENQUEUE,\n            streamId,\n            chunk,\n          },\n          transfers\n        );\n      },\n\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId,\n        });\n        delete self.streamSinks[streamId];\n      },\n\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null,\n    };\n\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n\n    Promise.try(action, data.data, streamSink).then(\n      function () {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          success: true,\n        });\n      },\n      function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      }\n    );\n  }\n\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        // Ignore any pull after close is called.\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true,\n          });\n          break;\n        }\n        // Pull increases the desiredSize property of sink, so when it changes\n        // from negative to positive, set ready property as resolved promise.\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        // Reset desiredSize property of sink on every pull.\n        streamSink.desiredSize = data.desiredSize;\n\n        Promise.try(streamSink.onPull || onFn).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        const dataReason = wrapReason(data.reason);\n\n        Promise.try(streamSink.onCancel || onFn, dataReason).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        streamSink.sinkCapability.reject(dataReason);\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n\n  async #deleteStreamController(streamController, streamId) {\n    // Delete the `streamController` only when the start, pull, and cancel\n    // capabilities have settled, to prevent `TypeError`s.\n    await Promise.allSettled([\n      streamController.startCall?.promise,\n      streamController.pullCall?.promise,\n      streamController.cancelCall?.promise,\n    ]);\n    delete this.streamControllers[streamId];\n  }\n\n  destroy() {\n    this.#messageAC?.abort();\n    this.#messageAC = null;\n  }\n}\n\nexport { MessageHandler, wrapReason };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { unreachable } from \"../shared/util.js\";\n\nclass BaseCanvasFactory {\n  #enableHWA = false;\n\n  constructor({ enableHWA = false }) {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) &&\n      this.constructor === BaseCanvasFactory\n    ) {\n      unreachable(\"Cannot initialize BaseCanvasFactory.\");\n    }\n    this.#enableHWA = enableHWA;\n  }\n\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\", {\n        willReadFrequently: !this.#enableHWA,\n      }),\n    };\n  }\n\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    // Zeroing the width and height cause Firefox to release graphics\n    // resources immediately, which can greatly reduce memory consumption.\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\n\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({ ownerDocument = globalThis.document, enableHWA = false }) {\n    super({ enableHWA });\n    this._document = ownerDocument;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\nexport { BaseCanvasFactory, DOMCanvasFactory };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringToBytes, unreachable } from \"../shared/util.js\";\nimport { fetchData } from \"./display_utils.js\";\n\nclass BaseCMapReaderFactory {\n  constructor({ baseUrl = null, isCompressed = true }) {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) &&\n      this.constructor === BaseCMapReaderFactory\n    ) {\n      unreachable(\"Cannot initialize BaseCMapReaderFactory.\");\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n\n  async fetch({ name }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        \"Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.\"\n      );\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n\n    return this._fetch(url)\n      .then(cMapData => ({ cMapData, isCompressed: this.isCompressed }))\n      .catch(reason => {\n        throw new Error(\n          `Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`\n        );\n      });\n  }\n\n  /**\n   * @ignore\n   * @returns {Promise<Uint8Array>}\n   */\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\n\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  async _fetch(url) {\n    const data = await fetchData(\n      url,\n      /* type = */ this.isCompressed ? \"arraybuffer\" : \"text\"\n    );\n    return data instanceof ArrayBuffer\n      ? new Uint8Array(data)\n      : stringToBytes(data);\n  }\n}\n\nexport { BaseCMapReaderFactory, DOMCMapReaderFactory };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getRGB, isDataScheme, SVG_NS } from \"./display_utils.js\";\nimport { unreachable, updateUrlHash, Util, warn } from \"../shared/util.js\";\n\nclass BaseFilterFactory {\n  constructor() {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) &&\n      this.constructor === BaseFilterFactory\n    ) {\n      unreachable(\"Cannot initialize BaseFilterFactory.\");\n    }\n  }\n\n  addFilter(maps) {\n    return \"none\";\n  }\n\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n\n  destroy(keepHCM = false) {}\n}\n\n/**\n * FilterFactory aims to create some SVG filters we can use when drawing an\n * image (or whatever) on a canvas.\n * Filters aren't applied with ctx.putImageData because it just overwrites the\n * underlying pixels.\n * With these filters, it's possible for example to apply some transfer maps on\n * an image without the need to apply them on the pixel arrays: the renderer\n * does the magic for us.\n */\nclass DOMFilterFactory extends BaseFilterFactory {\n  #baseUrl;\n\n  #_cache;\n\n  #_defs;\n\n  #docId;\n\n  #document;\n\n  #_hcmCache;\n\n  #id = 0;\n\n  constructor({ docId, ownerDocument = globalThis.document }) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n\n  get #cache() {\n    return (this.#_cache ||= new Map());\n  }\n\n  get #hcmCache() {\n    return (this.#_hcmCache ||= new Map());\n  }\n\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const { style } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n\n  #createUrl(id) {\n    if (this.#baseUrl === undefined) {\n      // Unless a `<base>`-element is present a relative URL should work.\n      this.#baseUrl = \"\";\n\n      const url = this.#document.URL;\n      if (url !== this.#document.baseURI) {\n        if (isDataScheme(url)) {\n          warn('#createUrl: ignore \"data:\"-URL for performance reasons.');\n        } else {\n          this.#baseUrl = updateUrlHash(url, \"\");\n        }\n      }\n    }\n    return `url(${this.#baseUrl}#${id})`;\n  }\n\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n\n    // When a page is zoomed the page is re-drawn but the maps are likely\n    // the same.\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n\n    // We create a SVG filter: feComponentTransferElement\n    //  https://www.w3.org/TR/SVG11/filters.html#feComponentTransferElement\n\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n\n    return url;\n  }\n\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null,\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n\n    if (\n      (fgColor === \"#000000\" && bgColor === \"#ffffff\") ||\n      fgColor === bgColor\n    ) {\n      return info.url;\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/Accessibility/Understanding_Colors_and_Luminance\n    //\n    // Relative luminance:\n    // https://www.w3.org/TR/WCAG20/#relativeluminancedef\n    //\n    // We compute the rounded luminance of the default background color.\n    // Then for every color in the pdf, if its rounded luminance is the\n    // same as the background one then it's replaced by the new\n    // background color else by the foreground one.\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = (info.filter = this.#createFilter(id));\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + (i / n) * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(\n      getSteps(0, 5),\n      getSteps(1, 5),\n      getSteps(2, 5),\n      filter\n    );\n\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n\n  addAlphaFilter(map) {\n    // When a page is zoomed the page is re-drawn but the maps are likely\n    // the same.\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n\n    return url;\n  }\n\n  addLuminosityFilter(map) {\n    // When a page is zoomed the page is re-drawn but the maps are likely\n    // the same.\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n\n    return url;\n  }\n\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null,\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(\n      0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]\n    );\n    let bgGray = Math.round(\n      0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]\n    );\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(\n      this.#getRGB.bind(this)\n    );\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [\n        bgGray,\n        fgGray,\n        newBgRGB,\n        newFgRGB,\n      ];\n    }\n    this.#defs.style.color = \"\";\n\n    // Now we can create the filters to highlight some canvas parts.\n    // The colors in the pdf will almost be Canvas and CanvasText, hence we\n    // want to filter them to finally get Highlight and HighlightText.\n    // Since we're in HCM the background color and the foreground color should\n    // be really different when converted to grayscale (if they're not then it\n    // means that we've a poor contrast). Once the canvas colors are converted\n    // to grayscale we can easily map them on their new colors.\n    // The grayscale step is important because if we've something like:\n    //   fgColor = #FF....\n    //   bgColor = #FF....\n    //   then we are enable to map the red component on the new red components\n    //   which can be different.\n\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = (info.filter = this.#createFilter(id));\n\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(\n      getSteps(newFgRGB[0], newBgRGB[0], 5),\n      getSteps(newFgRGB[1], newBgRGB[1], 5),\n      getSteps(newFgRGB[2], newBgRGB[2], 5),\n      filter\n    );\n\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#_hcmCache?.size) {\n      return;\n    }\n    this.#_defs?.parentNode.parentNode.remove();\n    this.#_defs = null;\n\n    this.#_cache?.clear();\n    this.#_cache = null;\n\n    this.#_hcmCache?.clear();\n    this.#_hcmCache = null;\n\n    this.#id = 0;\n  }\n\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(\n      SVG_NS,\n      \"feColorMatrix\"\n    );\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\n      \"values\",\n      \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\"\n    );\n    filter.append(feColorMatrix);\n  }\n\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(\n      SVG_NS,\n      \"feColorMatrix\"\n    );\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\n      \"values\",\n      \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\"\n    );\n    filter.append(feColorMatrix);\n  }\n\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n\n    return filter;\n  }\n\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(\n      SVG_NS,\n      \"feComponentTransfer\"\n    );\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(\n      SVG_NS,\n      \"feComponentTransfer\"\n    );\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\nexport { BaseFilterFactory, DOMFilterFactory };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { fetchData } from \"./display_utils.js\";\nimport { unreachable } from \"../shared/util.js\";\n\nclass BaseStandardFontDataFactory {\n  constructor({ baseUrl = null }) {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) &&\n      this.constructor === BaseStandardFontDataFactory\n    ) {\n      unreachable(\"Cannot initialize BaseStandardFontDataFactory.\");\n    }\n    this.baseUrl = baseUrl;\n  }\n\n  async fetch({ filename }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        \"Ensure that the `standardFontDataUrl` API parameter is provided.\"\n      );\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n\n  /**\n   * @ignore\n   * @returns {Promise<Uint8Array>}\n   */\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\n\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  async _fetch(url) {\n    const data = await fetchData(url, /* type = */ \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\nexport { BaseStandardFontDataFactory, DOMStandardFontDataFactory };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { fetchData } from \"./display_utils.js\";\nimport { unreachable } from \"../shared/util.js\";\n\nclass BaseWasmFactory {\n  constructor({ baseUrl = null }) {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) &&\n      this.constructor === BaseWasmFactory\n    ) {\n      unreachable(\"Cannot initialize BaseWasmFactory.\");\n    }\n    this.baseUrl = baseUrl;\n  }\n\n  async fetch({ filename }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `wasmUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Wasm filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load wasm data at: ${url}`);\n    });\n  }\n\n  /**\n   * @ignore\n   * @returns {Promise<Uint8Array>}\n   */\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\n\nclass DOMWasmFactory extends BaseWasmFactory {\n  /**\n   * @ignore\n   */\n  async _fetch(url) {\n    const data = await fetchData(url, /* type = */ \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\nexport { BaseWasmFactory, DOMWasmFactory };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals process */\n\nimport { isNodeJS, warn } from \"../shared/util.js\";\nimport { BaseCanvasFactory } from \"./canvas_factory.js\";\nimport { BaseCMapReaderFactory } from \"./cmap_reader_factory.js\";\nimport { BaseFilterFactory } from \"./filter_factory.js\";\nimport { BaseStandardFontDataFactory } from \"./standard_fontdata_factory.js\";\nimport { BaseWasmFactory } from \"./wasm_factory.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_utils.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nif (isNodeJS) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"SKIP_BABEL\")) {\n    warn(\"Please use the `legacy` build in Node.js environments.\");\n  } else {\n    let canvas;\n    try {\n      const require = process\n        .getBuiltinModule(\"module\")\n        .createRequire(import.meta.url);\n\n      try {\n        canvas = require(\"@napi-rs/canvas\");\n      } catch (ex) {\n        warn(`Cannot load \"@napi-rs/canvas\" package: \"${ex}\".`);\n      }\n    } catch (ex) {\n      warn(`Cannot access the \\`require\\` function: \"${ex}\".`);\n    }\n\n    if (!globalThis.DOMMatrix) {\n      if (canvas?.DOMMatrix) {\n        globalThis.DOMMatrix = canvas.DOMMatrix;\n      } else {\n        warn(\"Cannot polyfill `DOMMatrix`, rendering may be broken.\");\n      }\n    }\n    if (!globalThis.ImageData) {\n      if (canvas?.ImageData) {\n        globalThis.ImageData = canvas.ImageData;\n      } else {\n        warn(\"Cannot polyfill `ImageData`, rendering may be broken.\");\n      }\n    }\n    if (!globalThis.Path2D) {\n      if (canvas?.Path2D) {\n        globalThis.Path2D = canvas.Path2D;\n      } else {\n        warn(\"Cannot polyfill `Path2D`, rendering may be broken.\");\n      }\n    }\n    if (!globalThis.navigator?.language) {\n      globalThis.navigator = {\n        language: \"en-US\",\n        platform: \"\",\n        userAgent: \"\",\n      };\n    }\n  }\n}\n\nasync function fetchData(url) {\n  const fs = process.getBuiltinModule(\"fs\");\n  const data = await fs.promises.readFile(url);\n  return new Uint8Array(data);\n}\n\nclass NodeFilterFactory extends BaseFilterFactory {}\n\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    const require = process\n      .getBuiltinModule(\"module\")\n      .createRequire(import.meta.url);\n    const canvas = require(\"@napi-rs/canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\n\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  async _fetch(url) {\n    return fetchData(url);\n  }\n}\n\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  async _fetch(url) {\n    return fetchData(url);\n  }\n}\n\nclass NodeWasmFactory extends BaseWasmFactory {\n  /**\n   * @ignore\n   */\n  async _fetch(url) {\n    return fetchData(url);\n  }\n}\n\nexport {\n  fetchData,\n  NodeCanvasFactory,\n  NodeCMapReaderFactory,\n  NodeFilterFactory,\n  NodeStandardFontDataFactory,\n  NodeWasmFactory,\n};\n","import { Util } from \"../shared/util.js\";\n\nconst FORCED_DEPENDENCY_LABEL = \"__forcedDependency\";\n\n/**\n * @typedef {\"lineWidth\" | \"lineCap\" | \"lineJoin\" | \"miterLimit\" | \"dash\" |\n * \"strokeAlpha\" | \"fillColor\" | \"fillAlpha\" | \"globalCompositeOperation\" |\n * \"path\" | \"filter\"} SimpleDependency\n */\n\n/**\n * @typedef {\"transform\" | \"moveText\" | \"sameLineText\"} IncrementalDependency\n */\n\n/**\n * @typedef {IncrementalDependency |\n * typeof FORCED_DEPENDENCY_LABEL} InternalIncrementalDependency\n */\nclass CanvasDependencyTracker {\n  /** @type {Record<SimpleDependency, number>} */\n  #simple = { __proto__: null };\n\n  /** @type {Record<InternalIncrementalDependency , number[]>} */\n  #incremental = {\n    __proto__: null,\n    transform: [],\n    moveText: [],\n    sameLineText: [],\n    [FORCED_DEPENDENCY_LABEL]: [],\n  };\n\n  #namedDependencies = new Map();\n\n  #savesStack = [];\n\n  #markedContentStack = [];\n\n  #baseTransformStack = [[1, 0, 0, 1, 0, 0]];\n\n  #clipBox = [-Infinity, -Infinity, Infinity, Infinity];\n\n  // Float32Array<minX, minY, maxX, maxY>\n  #pendingBBox = new Float64Array([Infinity, Infinity, -Infinity, -Infinity]);\n\n  #pendingBBoxIdx = -1;\n\n  #pendingDependencies = new Set();\n\n  #operations = new Map();\n\n  #fontBBoxTrustworthy = new Map();\n\n  #canvasWidth;\n\n  #canvasHeight;\n\n  constructor(canvas) {\n    this.#canvasWidth = canvas.width;\n    this.#canvasHeight = canvas.height;\n  }\n\n  save(opIdx) {\n    this.#simple = { __proto__: this.#simple };\n    this.#incremental = {\n      __proto__: this.#incremental,\n      transform: { __proto__: this.#incremental.transform },\n      moveText: { __proto__: this.#incremental.moveText },\n      sameLineText: { __proto__: this.#incremental.sameLineText },\n      [FORCED_DEPENDENCY_LABEL]: {\n        __proto__: this.#incremental[FORCED_DEPENDENCY_LABEL],\n      },\n    };\n    this.#clipBox = { __proto__: this.#clipBox };\n    this.#savesStack.push([opIdx, null]);\n\n    return this;\n  }\n\n  restore(opIdx) {\n    const previous = Object.getPrototypeOf(this.#simple);\n    if (previous === null) {\n      // Sometimes we call more .restore() than .save(), for\n      // example when using CanvasGraphics' #restoreInitialState()\n      return this;\n    }\n    this.#simple = previous;\n    this.#incremental = Object.getPrototypeOf(this.#incremental);\n    this.#clipBox = Object.getPrototypeOf(this.#clipBox);\n\n    const lastPair = this.#savesStack.pop();\n    if (lastPair !== undefined) {\n      lastPair[1] = opIdx;\n    }\n\n    return this;\n  }\n\n  /**\n   * @param {number} idx\n   */\n  recordOpenMarker(idx) {\n    this.#savesStack.push([idx, null]);\n    return this;\n  }\n\n  getOpenMarker() {\n    if (this.#savesStack.length === 0) {\n      return null;\n    }\n    return this.#savesStack.at(-1)[0];\n  }\n\n  recordCloseMarker(idx) {\n    const lastPair = this.#savesStack.pop();\n    if (lastPair !== undefined) {\n      lastPair[1] = idx;\n    }\n    return this;\n  }\n\n  // Marked content needs a separate stack from save/restore, because they\n  // form two independent trees.\n  beginMarkedContent(opIdx) {\n    this.#markedContentStack.push([opIdx, null]);\n    return this;\n  }\n\n  endMarkedContent(opIdx) {\n    const lastPair = this.#markedContentStack.pop();\n    if (lastPair !== undefined) {\n      lastPair[1] = opIdx;\n    }\n    return this;\n  }\n\n  pushBaseTransform(ctx) {\n    this.#baseTransformStack.push(\n      Util.multiplyByDOMMatrix(\n        this.#baseTransformStack.at(-1),\n        ctx.getTransform()\n      )\n    );\n    return this;\n  }\n\n  popBaseTransform() {\n    if (this.#baseTransformStack.length > 1) {\n      this.#baseTransformStack.pop();\n    }\n    return this;\n  }\n\n  /**\n   * @param {SimpleDependency} name\n   * @param {number} idx\n   */\n  recordSimpleData(name, idx) {\n    this.#simple[name] = idx;\n    return this;\n  }\n\n  /**\n   * @param {IncrementalDependency} name\n   * @param {number} idx\n   */\n  recordIncrementalData(name, idx) {\n    this.#incremental[name].push(idx);\n    return this;\n  }\n\n  /**\n   * @param {IncrementalDependency} name\n   * @param {number} idx\n   */\n  resetIncrementalData(name, idx) {\n    this.#incremental[name].length = 0;\n    return this;\n  }\n\n  recordNamedData(name, idx) {\n    this.#namedDependencies.set(name, idx);\n    return this;\n  }\n\n  // All next operations, until the next .restore(), will depend on this\n  recordFutureForcedDependency(name, idx) {\n    this.recordIncrementalData(FORCED_DEPENDENCY_LABEL, idx);\n    return this;\n  }\n\n  // All next operations, until the next .restore(), will depend on all\n  // the already recorded data with the given names.\n  inheritSimpleDataAsFutureForcedDependencies(names) {\n    for (const name of names) {\n      if (name in this.#simple) {\n        this.recordFutureForcedDependency(name, this.#simple[name]);\n      }\n    }\n    return this;\n  }\n\n  inheritPendingDependenciesAsFutureForcedDependencies() {\n    for (const dep of this.#pendingDependencies) {\n      this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL, dep);\n    }\n    return this;\n  }\n\n  resetBBox(idx) {\n    this.#pendingBBoxIdx = idx;\n    this.#pendingBBox[0] = Infinity;\n    this.#pendingBBox[1] = Infinity;\n    this.#pendingBBox[2] = -Infinity;\n    this.#pendingBBox[3] = -Infinity;\n    return this;\n  }\n\n  get hasPendingBBox() {\n    return this.#pendingBBoxIdx !== -1;\n  }\n\n  recordClipBox(idx, ctx, minX, maxX, minY, maxY) {\n    const transform = Util.multiplyByDOMMatrix(\n      this.#baseTransformStack.at(-1),\n      ctx.getTransform()\n    );\n    const clipBox = [Infinity, Infinity, -Infinity, -Infinity];\n    Util.axialAlignedBoundingBox([minX, minY, maxX, maxY], transform, clipBox);\n    const intersection = Util.intersect(this.#clipBox, clipBox);\n    if (intersection) {\n      this.#clipBox[0] = intersection[0];\n      this.#clipBox[1] = intersection[1];\n      this.#clipBox[2] = intersection[2];\n      this.#clipBox[3] = intersection[3];\n    } else {\n      this.#clipBox[0] = this.#clipBox[1] = Infinity;\n      this.#clipBox[2] = this.#clipBox[3] = -Infinity;\n    }\n    return this;\n  }\n\n  recordBBox(idx, ctx, minX, maxX, minY, maxY) {\n    const clipBox = this.#clipBox;\n    if (clipBox[0] === Infinity) {\n      return this;\n    }\n\n    const transform = Util.multiplyByDOMMatrix(\n      this.#baseTransformStack.at(-1),\n      ctx.getTransform()\n    );\n    if (clipBox[0] === -Infinity) {\n      Util.axialAlignedBoundingBox(\n        [minX, minY, maxX, maxY],\n        transform,\n        this.#pendingBBox\n      );\n      return this;\n    }\n\n    const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n    Util.axialAlignedBoundingBox([minX, minY, maxX, maxY], transform, bbox);\n    this.#pendingBBox[0] = Math.min(\n      this.#pendingBBox[0],\n      Math.max(bbox[0], clipBox[0])\n    );\n    this.#pendingBBox[1] = Math.min(\n      this.#pendingBBox[1],\n      Math.max(bbox[1], clipBox[1])\n    );\n    this.#pendingBBox[2] = Math.max(\n      this.#pendingBBox[2],\n      Math.min(bbox[2], clipBox[2])\n    );\n    this.#pendingBBox[3] = Math.max(\n      this.#pendingBBox[3],\n      Math.min(bbox[3], clipBox[3])\n    );\n    return this;\n  }\n\n  recordCharacterBBox(idx, ctx, font, scale = 1, x = 0, y = 0, getMeasure) {\n    const fontBBox = font.bbox;\n    let isBBoxTrustworthy;\n    let computedBBox;\n\n    if (fontBBox) {\n      isBBoxTrustworthy =\n        // Only use the bounding box defined by the font if it\n        // has a non-empty area.\n        fontBBox[2] !== fontBBox[0] &&\n        fontBBox[3] !== fontBBox[1] &&\n        this.#fontBBoxTrustworthy.get(font);\n\n      if (isBBoxTrustworthy !== false) {\n        computedBBox = [0, 0, 0, 0];\n        Util.axialAlignedBoundingBox(fontBBox, font.fontMatrix, computedBBox);\n        if (scale !== 1 || x !== 0 || y !== 0) {\n          Util.scaleMinMax([scale, 0, 0, -scale, x, y], computedBBox);\n        }\n\n        if (isBBoxTrustworthy) {\n          return this.recordBBox(\n            idx,\n            ctx,\n            computedBBox[0],\n            computedBBox[2],\n            computedBBox[1],\n            computedBBox[3]\n          );\n        }\n      }\n    }\n\n    if (!getMeasure) {\n      // We have no way of telling how big this character actually is, record\n      // a full page bounding box.\n      return this.recordFullPageBBox(idx);\n    }\n\n    const measure = getMeasure();\n\n    if (fontBBox && computedBBox && isBBoxTrustworthy === undefined) {\n      // If it's the first time we can compare the font bbox with the actual\n      // bbox measured when drawing it, check if the one recorded in the font\n      // is large enough to cover the actual bbox. If it is, we assume that the\n      // font is well-formed and we can use the declared bbox without having to\n      // measure it again for every character.\n      isBBoxTrustworthy =\n        computedBBox[0] <= x - measure.actualBoundingBoxLeft &&\n        computedBBox[2] >= x + measure.actualBoundingBoxRight &&\n        computedBBox[1] <= y - measure.actualBoundingBoxAscent &&\n        computedBBox[3] >= y + measure.actualBoundingBoxDescent;\n      this.#fontBBoxTrustworthy.set(font, isBBoxTrustworthy);\n      if (isBBoxTrustworthy) {\n        return this.recordBBox(\n          idx,\n          ctx,\n          computedBBox[0],\n          computedBBox[2],\n          computedBBox[1],\n          computedBBox[3]\n        );\n      }\n    }\n\n    // The font has no bbox or it is not trustworthy, so we need to\n    // return the bounding box based on .measureText().\n    return this.recordBBox(\n      idx,\n      ctx,\n      x - measure.actualBoundingBoxLeft,\n      x + measure.actualBoundingBoxRight,\n      y - measure.actualBoundingBoxAscent,\n      y + measure.actualBoundingBoxDescent\n    );\n  }\n\n  recordFullPageBBox(idx) {\n    this.#pendingBBox[0] = Math.max(0, this.#clipBox[0]);\n    this.#pendingBBox[1] = Math.max(0, this.#clipBox[1]);\n    this.#pendingBBox[2] = Math.min(this.#canvasWidth, this.#clipBox[2]);\n    this.#pendingBBox[3] = Math.min(this.#canvasHeight, this.#clipBox[3]);\n\n    return this;\n  }\n\n  getSimpleIndex(dependencyName) {\n    return this.#simple[dependencyName];\n  }\n\n  recordDependencies(idx, dependencyNames) {\n    const pendingDependencies = this.#pendingDependencies;\n    const simple = this.#simple;\n    const incremental = this.#incremental;\n    for (const name of dependencyNames) {\n      if (name in this.#simple) {\n        pendingDependencies.add(simple[name]);\n      } else if (name in incremental) {\n        incremental[name].forEach(pendingDependencies.add, pendingDependencies);\n      }\n    }\n\n    return this;\n  }\n\n  copyDependenciesFromIncrementalOperation(idx, name) {\n    const operations = this.#operations;\n    const pendingDependencies = this.#pendingDependencies;\n    for (const depIdx of this.#incremental[name]) {\n      operations\n        .get(depIdx)\n        .dependencies.forEach(\n          pendingDependencies.add,\n          pendingDependencies.add(depIdx)\n        );\n    }\n    return this;\n  }\n\n  recordNamedDependency(idx, name) {\n    if (this.#namedDependencies.has(name)) {\n      this.#pendingDependencies.add(this.#namedDependencies.get(name));\n    }\n\n    return this;\n  }\n\n  /**\n   * @param {number} idx\n   */\n  recordOperation(idx, preserveBbox = false) {\n    this.recordDependencies(idx, [FORCED_DEPENDENCY_LABEL]);\n    const dependencies = new Set(this.#pendingDependencies);\n    const pairs = this.#savesStack.concat(this.#markedContentStack);\n    const bbox =\n      this.#pendingBBoxIdx === idx\n        ? {\n            minX: this.#pendingBBox[0],\n            minY: this.#pendingBBox[1],\n            maxX: this.#pendingBBox[2],\n            maxY: this.#pendingBBox[3],\n          }\n        : null;\n    this.#operations.set(idx, { bbox, pairs, dependencies });\n    if (!preserveBbox) {\n      this.#pendingBBoxIdx = -1;\n    }\n    this.#pendingDependencies.clear();\n\n    return this;\n  }\n\n  bboxToClipBoxDropOperation(idx) {\n    if (this.#pendingBBoxIdx !== -1) {\n      this.#pendingBBoxIdx = -1;\n\n      this.#clipBox[0] = Math.max(this.#clipBox[0], this.#pendingBBox[0]);\n      this.#clipBox[1] = Math.max(this.#clipBox[1], this.#pendingBBox[1]);\n      this.#clipBox[2] = Math.min(this.#clipBox[2], this.#pendingBBox[2]);\n      this.#clipBox[3] = Math.min(this.#clipBox[3], this.#pendingBBox[3]);\n    }\n    this.#pendingDependencies.clear();\n    return this;\n  }\n\n  _takePendingDependencies() {\n    const pendingDependencies = this.#pendingDependencies;\n    this.#pendingDependencies = new Set();\n    return pendingDependencies;\n  }\n\n  _extractOperation(idx) {\n    const operation = this.#operations.get(idx);\n    this.#operations.delete(idx);\n    return operation;\n  }\n\n  _pushPendingDependencies(dependencies) {\n    for (const dep of dependencies) {\n      this.#pendingDependencies.add(dep);\n    }\n  }\n\n  take() {\n    this.#fontBBoxTrustworthy.clear();\n    return Array.from(\n      this.#operations,\n      ([idx, { bbox, pairs, dependencies }]) => {\n        pairs.forEach(pair => pair.forEach(dependencies.add, dependencies));\n        dependencies.delete(idx);\n        return {\n          minX: (bbox?.minX ?? 0) / this.#canvasWidth,\n          maxX: (bbox?.maxX ?? this.#canvasWidth) / this.#canvasWidth,\n          minY: (bbox?.minY ?? 0) / this.#canvasHeight,\n          maxY: (bbox?.maxY ?? this.#canvasHeight) / this.#canvasHeight,\n          dependencies: Array.from(dependencies).sort((a, b) => a - b),\n          idx,\n        };\n      }\n    );\n  }\n}\n\n/**\n * Used to track dependencies of nested operations list, that\n * should actually all map to the index of the operation that\n * contains the nested list.\n *\n * @implements {CanvasDependencyTracker}\n */\nclass CanvasNestedDependencyTracker {\n  /** @type {CanvasDependencyTracker} */\n  #dependencyTracker;\n\n  /** @type {number} */\n  #opIdx;\n\n  #nestingLevel = 0;\n\n  #outerDependencies;\n\n  #savesLevel = 0;\n\n  constructor(dependencyTracker, opIdx) {\n    if (dependencyTracker instanceof CanvasNestedDependencyTracker) {\n      // The goal of CanvasNestedDependencyTracker is to collapse all operations\n      // into a single one. If we are already in a\n      // CanvasNestedDependencyTracker, that is already happening.\n      return dependencyTracker;\n    }\n\n    this.#dependencyTracker = dependencyTracker;\n    this.#outerDependencies = dependencyTracker._takePendingDependencies();\n    this.#opIdx = opIdx;\n  }\n\n  save(opIdx) {\n    this.#savesLevel++;\n    this.#dependencyTracker.save(this.#opIdx);\n    return this;\n  }\n\n  restore(opIdx) {\n    if (this.#savesLevel > 0) {\n      this.#dependencyTracker.restore(this.#opIdx);\n      this.#savesLevel--;\n    }\n    return this;\n  }\n\n  recordOpenMarker(idx) {\n    this.#nestingLevel++;\n    return this;\n  }\n\n  getOpenMarker() {\n    return this.#nestingLevel > 0\n      ? this.#opIdx\n      : this.#dependencyTracker.getOpenMarker();\n  }\n\n  recordCloseMarker(idx) {\n    this.#nestingLevel--;\n    return this;\n  }\n\n  beginMarkedContent(opIdx) {\n    return this;\n  }\n\n  endMarkedContent(opIdx) {\n    return this;\n  }\n\n  pushBaseTransform(ctx) {\n    this.#dependencyTracker.pushBaseTransform(ctx);\n    return this;\n  }\n\n  popBaseTransform() {\n    this.#dependencyTracker.popBaseTransform();\n    return this;\n  }\n\n  /**\n   * @param {SimpleDependency} name\n   * @param {number} idx\n   */\n  recordSimpleData(name, idx) {\n    this.#dependencyTracker.recordSimpleData(name, this.#opIdx);\n    return this;\n  }\n\n  /**\n   * @param {IncrementalDependency} name\n   * @param {number} idx\n   */\n  recordIncrementalData(name, idx) {\n    this.#dependencyTracker.recordIncrementalData(name, this.#opIdx);\n    return this;\n  }\n\n  /**\n   * @param {IncrementalDependency} name\n   * @param {number} idx\n   */\n  resetIncrementalData(name, idx) {\n    this.#dependencyTracker.resetIncrementalData(name, this.#opIdx);\n    return this;\n  }\n\n  recordNamedData(name, idx) {\n    // Nested dependencies are not visible to the outside.\n    return this;\n  }\n\n  // All next operations, until the next .restore(), will depend on this\n  recordFutureForcedDependency(name, idx) {\n    this.#dependencyTracker.recordFutureForcedDependency(name, this.#opIdx);\n    return this;\n  }\n\n  // All next operations, until the next .restore(), will depend on all\n  // the already recorded data with the given names.\n  inheritSimpleDataAsFutureForcedDependencies(names) {\n    this.#dependencyTracker.inheritSimpleDataAsFutureForcedDependencies(names);\n    return this;\n  }\n\n  inheritPendingDependenciesAsFutureForcedDependencies() {\n    this.#dependencyTracker.inheritPendingDependenciesAsFutureForcedDependencies();\n    return this;\n  }\n\n  resetBBox(idx) {\n    if (!this.#dependencyTracker.hasPendingBBox) {\n      this.#dependencyTracker.resetBBox(this.#opIdx);\n    }\n    return this;\n  }\n\n  get hasPendingBBox() {\n    return this.#dependencyTracker.hasPendingBBox;\n  }\n\n  recordClipBox(idx, ctx, minX, maxX, minY, maxY) {\n    this.#dependencyTracker.recordClipBox(\n      this.#opIdx,\n      ctx,\n      minX,\n      maxX,\n      minY,\n      maxY\n    );\n    return this;\n  }\n\n  recordBBox(idx, ctx, minX, maxX, minY, maxY) {\n    this.#dependencyTracker.recordBBox(\n      this.#opIdx,\n      ctx,\n      minX,\n      maxX,\n      minY,\n      maxY\n    );\n    return this;\n  }\n\n  recordCharacterBBox(idx, ctx, font, scale, x, y, getMeasure) {\n    this.#dependencyTracker.recordCharacterBBox(\n      this.#opIdx,\n      ctx,\n      font,\n      scale,\n      x,\n      y,\n      getMeasure\n    );\n    return this;\n  }\n\n  recordFullPageBBox(idx) {\n    this.#dependencyTracker.recordFullPageBBox(this.#opIdx);\n    return this;\n  }\n\n  getSimpleIndex(dependencyName) {\n    return this.#dependencyTracker.getSimpleIndex(dependencyName);\n  }\n\n  recordDependencies(idx, dependencyNames) {\n    this.#dependencyTracker.recordDependencies(this.#opIdx, dependencyNames);\n    return this;\n  }\n\n  copyDependenciesFromIncrementalOperation(idx, name) {\n    this.#dependencyTracker.copyDependenciesFromIncrementalOperation(\n      this.#opIdx,\n      name\n    );\n    return this;\n  }\n\n  recordNamedDependency(idx, name) {\n    this.#dependencyTracker.recordNamedDependency(this.#opIdx, name);\n    return this;\n  }\n\n  /**\n   * @param {number} idx\n   * @param {SimpleDependency[]} dependencyNames\n   */\n  recordOperation(idx) {\n    this.#dependencyTracker.recordOperation(this.#opIdx, true);\n    const operation = this.#dependencyTracker._extractOperation(this.#opIdx);\n    for (const depIdx of operation.dependencies) {\n      this.#outerDependencies.add(depIdx);\n    }\n    this.#outerDependencies.delete(this.#opIdx);\n    this.#outerDependencies.delete(null);\n    return this;\n  }\n\n  bboxToClipBoxDropOperation(idx) {\n    this.#dependencyTracker.bboxToClipBoxDropOperation(this.#opIdx);\n    return this;\n  }\n\n  recordNestedDependencies() {\n    this.#dependencyTracker._pushPendingDependencies(this.#outerDependencies);\n  }\n\n  take() {\n    throw new Error(\"Unreachable\");\n  }\n}\n\n/** @satisfies {Record<string, SimpleDependency | IncrementalDependency>} */\nconst Dependencies = {\n  stroke: [\n    \"path\",\n    \"transform\",\n    \"filter\",\n    \"strokeColor\",\n    \"strokeAlpha\",\n    \"lineWidth\",\n    \"lineCap\",\n    \"lineJoin\",\n    \"miterLimit\",\n    \"dash\",\n  ],\n  fill: [\n    \"path\",\n    \"transform\",\n    \"filter\",\n    \"fillColor\",\n    \"fillAlpha\",\n    \"globalCompositeOperation\",\n    \"SMask\",\n  ],\n  imageXObject: [\n    \"transform\",\n    \"SMask\",\n    \"filter\",\n    \"fillAlpha\",\n    \"strokeAlpha\",\n    \"globalCompositeOperation\",\n  ],\n  rawFillPath: [\"filter\", \"fillColor\", \"fillAlpha\"],\n  showText: [\n    \"transform\",\n    \"leading\",\n    \"charSpacing\",\n    \"wordSpacing\",\n    \"hScale\",\n    \"textRise\",\n    \"moveText\",\n    \"textMatrix\",\n    \"font\",\n    \"filter\",\n    \"fillColor\",\n    \"textRenderingMode\",\n    \"SMask\",\n    \"fillAlpha\",\n    \"strokeAlpha\",\n    \"globalCompositeOperation\",\n    // TODO: More\n  ],\n  transform: [\"transform\"],\n  transformAndFill: [\"transform\", \"fillColor\"],\n};\n\nexport { CanvasDependencyTracker, CanvasNestedDependencyTracker, Dependencies };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FormatError, info, unreachable, Util } from \"../shared/util.js\";\nimport { getCurrentTransform } from \"./display_utils.js\";\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\",\n};\n\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\n\nclass BaseShadingPattern {\n  constructor() {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) &&\n      this.constructor === BaseShadingPattern\n    ) {\n      unreachable(\"Cannot initialize BaseShadingPattern.\");\n    }\n  }\n\n  isModifyingCurrentTransform() {\n    return false;\n  }\n\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\n\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(\n        this._p0[0],\n        this._p0[1],\n        this._p1[0],\n        this._p1[1]\n      );\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(\n        this._p0[0],\n        this._p0[1],\n        this._r0,\n        this._p1[0],\n        this._p1[1],\n        this._r1\n      );\n    }\n\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(\n        pathType,\n        getCurrentTransform(ctx)\n      ) || [0, 0, 0, 0];\n      // Create a canvas that is only as big as the current path. This doesn't\n      // allow us to cache the pattern, but it generally creates much smaller\n      // canvases and saves memory use. See bug 1722807 for an example.\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\n        \"pattern\",\n        width,\n        height\n      );\n\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      // Non shading fill patterns are positioned relative to the base transform\n      // (usually the page's initial transform), but we may have created a\n      // smaller canvas based on the path, so we must account for the shift.\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [\n        1,\n        0,\n        0,\n        1,\n        ownerBBox[0],\n        ownerBBox[1],\n      ]);\n\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      // Shading fills are applied relative to the current matrix which is also\n      // how canvas gradients work, so there's no need to do anything special\n      // here.\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\n\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  // Very basic Gouraud-shaded triangle rasterization algorithm.\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = (car - (car - cbr) * k) | 0;\n      bytes[j++] = (cag - (cag - cbg) * k) | 0;\n      bytes[j++] = (cab - (cab - cbb) * k) | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\n\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(\n            data,\n            context,\n            ps[q],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n          drawTriangle(\n            data,\n            context,\n            ps[q + verticesPerRow + 1],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q + verticesPerRow + 1],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(\n          data,\n          context,\n          ps[i],\n          ps[i + 1],\n          ps[i + 2],\n          cs[i],\n          cs[i + 1],\n          cs[i + 2]\n        );\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\n\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[6];\n    this._background = IR[7];\n    this.matrix = null;\n  }\n\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    // we will increase scale on some weird factor to let antialiasing take\n    // care of \"rough\" edges\n    const EXPECTED_SCALE = 1.1;\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    const MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n    // We need to keep transparent border around our pattern for fill():\n    // createPattern with 'no-repeat' will bleed edges across entire area.\n    const BORDER_SIZE = 2;\n\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n\n    const width = Math.min(\n      Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const height = Math.min(\n      Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    };\n\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n\n    const tmpCanvas = cachedCanvases.getCanvas(\n      \"mesh\",\n      paddedWidth,\n      paddedHeight\n    );\n    const tmpCtx = tmpCanvas.context;\n\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY,\n    };\n  }\n\n  isModifyingCurrentTransform() {\n    return true;\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    const scale = new Float32Array(2);\n    if (pathType === PathType.SHADING) {\n      Util.singularValueDecompose2dScale(getCurrentTransform(ctx), scale);\n    } else if (this.matrix) {\n      // Obtain scale from matrix and current transformation matrix.\n      Util.singularValueDecompose2dScale(this.matrix, scale);\n      const [matrixScaleX, matrixScaleY] = scale;\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n      scale[0] *= matrixScaleX;\n      scale[1] *= matrixScaleY;\n    } else {\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n    }\n\n    // Rasterizing on the main thread since sending/queue large canvases\n    // might cause OOM.\n    const temporaryPatternCanvas = this._createMeshCanvas(\n      scale,\n      pathType === PathType.SHADING ? null : this._background,\n      owner.cachedCanvases\n    );\n\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n\n    ctx.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\n\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\n\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\n\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2,\n};\n\nclass TilingPattern {\n  // 10in @ 300dpi shall be enough.\n  static MAX_PATTERN_SIZE = 3000;\n\n  constructor(IR, ctx, canvasGraphicsFactory, baseTransform) {\n    this.color = IR[1];\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n\n  createPatternCanvas(owner) {\n    const {\n      bbox,\n      operatorList,\n      paintType,\n      tilingType,\n      color,\n      canvasGraphicsFactory,\n    } = this;\n    let { xstep, ystep } = this;\n    xstep = Math.abs(xstep);\n    ystep = Math.abs(ystep);\n\n    info(\"TilingType: \" + tilingType);\n\n    // A tiling pattern as defined by PDF spec 8.7.2 is a cell whose size is\n    // described by bbox, and may repeat regularly by shifting the cell by\n    // xstep and ystep.\n    // Because the HTML5 canvas API does not support pattern repetition with\n    // gaps in between, we use the xstep/ystep instead of the bbox's size.\n    //\n    // This has the following consequences (similarly for ystep):\n    //\n    // - If xstep is the same as bbox, then there is no observable difference.\n    //\n    // - If xstep is larger than bbox, then the pattern canvas is partially\n    //   empty: the area bounded by bbox is painted, the outside area is void.\n    //\n    // - If xstep is smaller than bbox, then the pixels between xstep and the\n    //   bbox boundary will be missing. This is INCORRECT behavior.\n    //   \"Figures on adjacent tiles should not overlap\" (PDF spec 8.7.3.1),\n    //   but overlapping cells without common pixels are still valid.\n\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const width = x1 - x0;\n    const height = y1 - y0;\n\n    // Obtain scale from matrix and current transformation matrix.\n    const scale = new Float32Array(2);\n    Util.singularValueDecompose2dScale(this.matrix, scale);\n    const [matrixScaleX, matrixScaleY] = scale;\n    Util.singularValueDecompose2dScale(this.baseTransform, scale);\n    const combinedScaleX = matrixScaleX * scale[0];\n    const combinedScaleY = matrixScaleY * scale[1];\n\n    let canvasWidth = width,\n      canvasHeight = height,\n      redrawHorizontally = false,\n      redrawVertically = false;\n\n    const xScaledStep = Math.ceil(xstep * combinedScaleX);\n    const yScaledStep = Math.ceil(ystep * combinedScaleY);\n    const xScaledWidth = Math.ceil(width * combinedScaleX);\n    const yScaledHeight = Math.ceil(height * combinedScaleY);\n\n    if (xScaledStep >= xScaledWidth) {\n      canvasWidth = xstep;\n    } else {\n      redrawHorizontally = true;\n    }\n    if (yScaledStep >= yScaledHeight) {\n      canvasHeight = ystep;\n    } else {\n      redrawVertically = true;\n    }\n\n    // Use width and height values that are as close as possible to the end\n    // result when the pattern is used. Too low value makes the pattern look\n    // blurry. Too large value makes it look too crispy.\n    const dimx = this.getSizeAndScale(\n      canvasWidth,\n      this.ctx.canvas.width,\n      combinedScaleX\n    );\n    const dimy = this.getSizeAndScale(\n      canvasHeight,\n      this.ctx.canvas.height,\n      combinedScaleY\n    );\n\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\n      \"pattern\",\n      dimx.size,\n      dimy.size\n    );\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n\n    tmpCtx.translate(-dimx.scale * x0, -dimy.scale * y0);\n    graphics.transform(\n      // We pass 0 as the 'opIdx' argument, but the value is irrelevant.\n      // We know that we are in a 'CanvasNestedDependencyTracker' that captures\n      // all the sub-operations needed to create this pattern canvas and uses\n      // the top-level operation index as their index.\n      0,\n      dimx.scale,\n      0,\n      0,\n      dimy.scale,\n      0,\n      0\n    );\n\n    // To match CanvasGraphics beginDrawing we must save the context here or\n    // else we end up with unbalanced save/restores.\n    tmpCtx.save();\n    graphics.dependencyTracker?.save();\n\n    this.clipBbox(graphics, x0, y0, x1, y1);\n\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n\n    graphics.executeOperatorList(operatorList);\n\n    graphics.endDrawing();\n\n    graphics.dependencyTracker?.restore().recordNestedDependencies?.();\n    tmpCtx.restore();\n\n    if (redrawHorizontally || redrawVertically) {\n      // The tile is overlapping itself, so we create a new tile with\n      // dimensions xstep * ystep.\n      // Then we draw the overlapping parts of the original tile on the new\n      // tile.\n      // Just as a side note, the code here works correctly even if we don't\n      // have to redraw the tile horizontally or vertically. In that case, the\n      // original tile is drawn on the new tile only once, but it's useless.\n      const image = tmpCanvas.canvas;\n      if (redrawHorizontally) {\n        canvasWidth = xstep;\n      }\n      if (redrawVertically) {\n        canvasHeight = ystep;\n      }\n\n      const dimx2 = this.getSizeAndScale(\n        canvasWidth,\n        this.ctx.canvas.width,\n        combinedScaleX\n      );\n      const dimy2 = this.getSizeAndScale(\n        canvasHeight,\n        this.ctx.canvas.height,\n        combinedScaleY\n      );\n\n      const xSize = dimx2.size;\n      const ySize = dimy2.size;\n      const tmpCanvas2 = owner.cachedCanvases.getCanvas(\n        \"pattern-workaround\",\n        xSize,\n        ySize\n      );\n      const tmpCtx2 = tmpCanvas2.context;\n      const ii = redrawHorizontally ? Math.floor(width / xstep) : 0;\n      const jj = redrawVertically ? Math.floor(height / ystep) : 0;\n\n      // Draw the overlapping parts of the original tile on the new tile.\n      for (let i = 0; i <= ii; i++) {\n        for (let j = 0; j <= jj; j++) {\n          tmpCtx2.drawImage(\n            image,\n            xSize * i,\n            ySize * j,\n            xSize,\n            ySize,\n            0,\n            0,\n            xSize,\n            ySize\n          );\n        }\n      }\n      return {\n        canvas: tmpCanvas2.canvas,\n        scaleX: dimx2.scale,\n        scaleY: dimy2.scale,\n        offsetX: x0,\n        offsetY: y0,\n      };\n    }\n\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: x0,\n      offsetY: y0,\n    };\n  }\n\n  getSizeAndScale(step, realOutputSize, scale) {\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    // Use the destination canvas's size if it is bigger than the hard-coded\n    // limit of MAX_PATTERN_SIZE to avoid clipping patterns that cover the\n    // whole canvas.\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return { scale, size };\n  }\n\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    Util.axialAlignedBoundingBox(\n      [x0, y0, x1, y1],\n      getCurrentTransform(graphics.ctx),\n      graphics.current.minMax\n    );\n    graphics.clip();\n    graphics.endPath();\n  }\n\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const { fillStyle, strokeStyle } = this.ctx;\n        context.fillStyle = current.fillColor = fillStyle;\n        context.strokeStyle = current.strokeColor = strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        context.fillStyle = context.strokeStyle = color;\n        // Set color needed by image masks (fixes issues 3226 and 8741).\n        current.fillColor = current.strokeColor = color;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n\n  isModifyingCurrentTransform() {\n    return false;\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    // PDF spec 8.7.2 NOTE 1: pattern's matrix is relative to initial matrix.\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n\n    let domMatrix = new DOMMatrix(matrix);\n    // Rescale and so that the ctx.createPattern call generates a pattern with\n    // the desired size.\n    domMatrix = domMatrix.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    domMatrix = domMatrix.scale(\n      1 / temporaryPatternCanvas.scaleX,\n      1 / temporaryPatternCanvas.scaleY\n    );\n\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n\n    return pattern;\n  }\n}\n\nexport { getShadingPattern, PathType, TilingPattern };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FeatureTest, ImageKind } from \"./util.js\";\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n\n  return null;\n}\n\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false,\n}) {\n  const black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode\n    ? [nonBlackColor, black]\n    : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & (1 << (7 - j)) ? oneMapping : zeroMapping;\n    }\n  }\n  return { srcPos, destPos };\n}\n\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height,\n}) {\n  let i = 0;\n  const len = width * height * 3;\n  const len32 = len >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n\n  if (FeatureTest.isLittleEndian) {\n    // It's a way faster to do the shuffle manually instead of working\n    // component by component with some Uint8 arrays.\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i]; // R2B1G1R1\n      const s2 = src32[i + 1]; // G3R3B2G2\n      const s3 = src32[i + 2]; // B4G4R4B3\n\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = (s1 >>> 24) | (s2 << 8) | 0xff000000;\n      dest[destPos + 2] = (s2 >>> 16) | (s3 << 16) | 0xff000000;\n      dest[destPos + 3] = (s3 >>> 8) | 0xff000000;\n    }\n\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] =\n        src[j] | (src[j + 1] << 8) | (src[j + 2] << 16) | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i]; // R1G1B1R2\n      const s2 = src32[i + 1]; // G2B2R3G3\n      const s3 = src32[i + 2]; // B3R4G4B4\n\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = (s1 << 24) | (s2 >>> 8) | 0xff;\n      dest[destPos + 2] = (s2 << 16) | (s3 >>> 16) | 0xff;\n      dest[destPos + 3] = (s3 << 8) | 0xff;\n    }\n\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] =\n        (src[j] << 24) | (src[j + 1] << 16) | (src[j + 2] << 8) | 0xff;\n    }\n  }\n\n  return { srcPos: srcPos + len, destPos };\n}\n\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x10101) | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x1010100) | 0x000000ff;\n    }\n  }\n}\n\nexport { convertBlackAndWhiteToRGBA, convertToRGBA, grayToRGBA };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  CanvasNestedDependencyTracker,\n  Dependencies,\n} from \"./canvas_dependency_tracker.js\";\nimport {\n  DrawOPS,\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  OPS,\n  shadow,\n  TextRenderingMode,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  getCurrentTransform,\n  getCurrentTransformInverse,\n  OutputScale,\n  PixelsPerInch,\n} from \"./display_utils.js\";\nimport {\n  getShadingPattern,\n  PathType,\n  TilingPattern,\n} from \"./pattern_helper.js\";\nimport { convertBlackAndWhiteToRGBA } from \"../shared/image_utils.js\";\n\n// <canvas> contexts store most of the state we need natively.\n// However, PDF needs a bit more state, which we store here.\n// Minimal font size that would be used during canvas fillText operations.\nconst MIN_FONT_SIZE = 16;\n// Maximum font size that would be used during canvas fillText operations.\nconst MAX_FONT_SIZE = 100;\n\n// Defines the time the `executeOperatorList`-method is going to be executing\n// before it stops and schedules a continue of execution.\nconst EXECUTION_TIME = 15; // ms\n// Defines the number of steps before checking the execution time.\nconst EXECUTION_STEPS = 10;\n\nconst FULL_CHUNK_HEIGHT = 16;\n\n// Only used in rescaleAndStroke. The goal is to avoid\n// creating a new DOMMatrix object each time we need it.\nconst SCALE_MATRIX = new DOMMatrix();\n\n// Used to get some coordinates.\nconst XY = new Float32Array(2);\n\n// Initial rectangle values for the minMax array.\nconst MIN_MAX_INIT = new Float32Array([\n  Infinity,\n  Infinity,\n  -Infinity,\n  -Infinity,\n]);\n\n/**\n * Overrides certain methods on a 2d ctx so that when they are called they\n * will also call the same method on the destCtx. The methods that are\n * overridden are all the transformation state modifiers, path creation, and\n * save/restore. We only forward these specific methods because they are the\n * only state modifiers that we cannot copy over when we switch contexts.\n *\n * To remove mirroring call `ctx._removeMirroring()`.\n *\n * @param {Object} ctx - The 2d canvas context that will duplicate its calls on\n *   the destCtx.\n * @param {Object} destCtx - The 2d canvas context that will receive the\n *   forwarded calls.\n */\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n\n  ctx.save = function () {\n    destCtx.save();\n    this.__originalSave();\n  };\n\n  ctx.restore = function () {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n\n  ctx.translate = function (x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n\n  ctx.scale = function (x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n\n  ctx.transform = function (a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n\n  ctx.setTransform = function (a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n\n  ctx.resetTransform = function () {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n\n  ctx.rotate = function (angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n\n  ctx.clip = function (rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\n\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n\n  delete(id) {\n    delete this.cache[id];\n  }\n\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\n\nfunction drawImageAtIntegerCoords(\n  ctx,\n  srcImg,\n  srcX,\n  srcY,\n  srcW,\n  srcH,\n  destX,\n  destY,\n  destW,\n  destH\n) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    // top-left corner is at (X, Y) and\n    // bottom-right one is at (X + width, Y + height).\n\n    // If leftX is 4.321 then it's rounded to 4.\n    // If width is 10.432 then it's rounded to 11 because\n    // rightX = leftX + width = 14.753 which is rounded to 15\n    // so after rounding the total width is 11 (15 - 4).\n    // It's why we can't just floor/ceil uniformly, it just depends\n    // on the values we've.\n\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n\n    // Some pdf contains images with 1x1 images so in case of 0-width after\n    // scaling we must fallback on 1 to be sure there is something.\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    // We must apply a transformation in order to apply it on the image itself.\n    // For example if a == 1 && d == -1, it means that the image itself is\n    // mirrored w.r.t. the x-axis.\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rWidth, rHeight];\n  }\n\n  if (a === 0 && d === 0) {\n    // This path is taken in issue9462.pdf (page 3).\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rHeight, rWidth];\n  }\n\n  // Not a scale matrix so let the render handle the case without rounding.\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\n\nclass CanvasExtraState {\n  // Are soft masks and alpha values shapes or opacities?\n  alphaIsShape = false;\n\n  fontSize = 0;\n\n  fontSizeScale = 1;\n\n  textMatrix = null;\n\n  textMatrixScale = 1;\n\n  fontMatrix = FONT_IDENTITY_MATRIX;\n\n  leading = 0;\n\n  // Current point (in user coordinates)\n  x = 0;\n\n  y = 0;\n\n  // Start of text line (in text coordinates)\n  lineX = 0;\n\n  lineY = 0;\n\n  // Character and word spacing\n  charSpacing = 0;\n\n  wordSpacing = 0;\n\n  textHScale = 1;\n\n  textRenderingMode = TextRenderingMode.FILL;\n\n  textRise = 0;\n\n  // Default fore and background colors\n  fillColor = \"#000000\";\n\n  strokeColor = \"#000000\";\n\n  patternFill = false;\n\n  patternStroke = false;\n\n  // Note: fill alpha applies to all non-stroking operations\n  fillAlpha = 1;\n\n  strokeAlpha = 1;\n\n  lineWidth = 1;\n\n  activeSMask = null;\n\n  transferMaps = \"none\";\n\n  constructor(width, height, preInit) {\n    preInit?.(this);\n\n    this.clipBox = new Float32Array([0, 0, width, height]);\n    this.minMax = MIN_MAX_INIT.slice();\n  }\n\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    clone.minMax = this.minMax.slice();\n    return clone;\n  }\n\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = this.minMax.slice();\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      // Stroked paths can be outside of the path bounding box by 1/2 the line\n      // width.\n      Util.singularValueDecompose2dScale(transform, XY);\n      const xStrokePad = (XY[0] * this.lineWidth) / 2;\n      const yStrokePad = (XY[1] * this.lineWidth) / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n\n  isEmptyClip() {\n    return this.minMax[0] === Infinity;\n  }\n\n  startNewPathAndClipBox(box) {\n    this.clipBox.set(box, 0);\n    this.minMax.set(MIN_MAX_INIT, 0);\n  }\n\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(\n      this.clipBox,\n      this.getPathBoundingBox(pathType, transform)\n    );\n  }\n}\n\nfunction putBinaryImageData(ctx, imgData) {\n  if (imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n\n  // Put the image data to the canvas in chunks, rather than putting the\n  // whole image at once.  This saves JS memory, because the ImageData object\n  // is smaller. It also possibly saves C++ memory within the implementation\n  // of putImageData(). (E.g. in Firefox we make two short-lived copies of\n  // the data passed to putImageData()). |n| shouldn't be too small, however,\n  // because too many putImageData() calls will slow things down.\n  //\n  // Note: as written, if the last chunk is partial, the putImageData() call\n  // will (conceptually) put pixels past the bounds of the canvas.  But\n  // that's ok; any such pixels are ignored.\n\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n\n  // There are multiple forms in which the pixel data can be passed, and\n  // imgData.kind tells us which one this is.\n  if (imgData.kind === ImageKind.GRAYSCALE_1BPP) {\n    // Grayscale, 1 bit per pixel (i.e. black-and-white).\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = (width + 7) >> 3;\n    const white = 0xffffffff;\n    const black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      // We ran out of input. Make all remaining pixels transparent.\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === ImageKind.RGBA_32BPP) {\n    // RGBA, 32-bits per pixel.\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === ImageKind.RGB_24BPP) {\n    // RGB, 24-bits per pixel.\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n\n      destPos = 0;\n      for (j = elemsInThisChunk; j--; ) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\n\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    // The bitmap has been created in the worker.\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n\n  // Slow path: OffscreenCanvas isn't available in the worker.\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight =\n      i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n\n    // Expand the mask so it can be used by the canvas.  Any required\n    // inversion has already been handled.\n\n    ({ srcPos } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0,\n    }));\n\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\n\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\n    \"strokeStyle\",\n    \"fillStyle\",\n    \"fillRule\",\n    \"globalAlpha\",\n    \"lineWidth\",\n    \"lineCap\",\n    \"lineJoin\",\n    \"miterLimit\",\n    \"globalCompositeOperation\",\n    \"font\",\n    \"filter\",\n  ];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\n\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  const { filter } = ctx;\n  if (filter !== \"none\" && filter !== \"\") {\n    ctx.filter = \"none\";\n  }\n}\n\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  // In section 8.9.5.3 of the PDF spec, it's mentioned that the interpolate\n  // flag should be used when the image is upscaled.\n  // In Firefox, smoothing is always used when downscaling images (bug 1360415).\n\n  if (interpolate) {\n    return true;\n  }\n\n  Util.singularValueDecompose2dScale(transform, XY);\n  // Round to a 32bit float so that `<=` check below will pass for numbers that\n  // are very close, but not exactly the same 64bit floats.\n  const actualScale = Math.fround(\n    OutputScale.pixelRatio * PixelsPerInch.PDF_TO_CSS_UNITS\n  );\n  // `XY` is a Float32Array.\n  return XY[0] <= actualScale && XY[1] <= actualScale;\n}\n\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\n\nclass CanvasGraphics {\n  constructor(\n    canvasCtx,\n    commonObjs,\n    objs,\n    canvasFactory,\n    filterFactory,\n    { optionalContentConfig, markedContentStack = null },\n    annotationCanvasMap,\n    pageColors,\n    dependencyTracker\n  ) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    // Patterns are painted relative to the initial page/form transform, see\n    // PDF spec 8.7.2 NOTE 1.\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n\n    this.dependencyTracker = dependencyTracker ?? null;\n  }\n\n  getObject(opIdx, data, fallback = null) {\n    if (typeof data === \"string\") {\n      this.dependencyTracker?.recordNamedDependency(opIdx, data);\n      return data.startsWith(\"g_\")\n        ? this.commonObjs.get(data)\n        : this.objs.get(data);\n    }\n    return fallback;\n  }\n\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null,\n  }) {\n    // For pdfs that use blend modes we have to clear the canvas else certain\n    // blend modes can look wrong since we'd be blending with a white\n    // backdrop. The problem with a transparent backdrop though is we then\n    // don't get sub pixel anti aliasing on text, creating temporary\n    // transparent canvas when we have blend modes.\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\n        \"transparent\",\n        width,\n        height\n      );\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      // The transform can be applied before rendering, transferring it to\n      // the new canvas.\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n\n  executeOperatorList(\n    operatorList,\n    executionStartIdx,\n    continueCallback,\n    stepper,\n    filteredOperationIndexes\n  ) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n\n    // Sometimes the OperatorList to execute is empty.\n    if (argsArrayLen === i) {\n      return i;\n    }\n\n    const chunkOperations =\n      argsArrayLen - i > EXECUTION_STEPS &&\n      typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId, fnArgs;\n\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n\n      if (!filteredOperationIndexes || filteredOperationIndexes.has(i)) {\n        fnId = fnArray[i];\n        // TODO: There is a `undefined` coming from somewhere.\n        fnArgs = argsArray[i] ?? null;\n\n        if (fnId !== OPS.dependency) {\n          if (fnArgs === null) {\n            this[fnId](i);\n          } else {\n            this[fnId](i, ...fnArgs);\n          }\n        } else {\n          for (const depObjId of fnArgs) {\n            this.dependencyTracker?.recordNamedData(depObjId, i);\n            const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n\n            // If the promise isn't resolved yet, add the continueCallback\n            // to the promise and bail out.\n            if (!objsPool.has(depObjId)) {\n              objsPool.get(depObjId, continueCallback);\n              return i;\n            }\n          }\n        }\n      }\n\n      i++;\n\n      // If the entire operatorList was executed, stop as were done.\n      if (i === argsArrayLen) {\n        return i;\n      }\n\n      // If the execution took longer then a certain amount of time and\n      // `continueCallback` is specified, interrupt the execution.\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n\n      // If the operatorList isn't executed completely yet OR the execution\n      // time was short enough, do another execution round.\n    }\n  }\n\n  #restoreInitialState() {\n    // Finishing all opened operations such as SMask group painting.\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n\n    this.current.activeSMask = null;\n    this.ctx.restore();\n\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0); // Avoid apply transform twice\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n\n  endDrawing() {\n    this.#restoreInitialState();\n\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (\n          typeof HTMLCanvasElement !== \"undefined\" &&\n          canvas instanceof HTMLCanvasElement\n        ) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(\n        this.pageColors.foreground,\n        this.pageColors.background\n      );\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n\n  _scaleImage(img, inverseTransform) {\n    // Vertical or horizontal scaling shall not be more than 2 to not lose the\n    // pixels during drawImage operation, painting on the temporary canvas(es)\n    // that are twice smaller in size.\n\n    // displayWidth and displayHeight are used for VideoFrame.\n    const width = img.width ?? img.displayWidth;\n    const height = img.height ?? img.displayHeight;\n    let widthScale = Math.max(\n      Math.hypot(inverseTransform[0], inverseTransform[1]),\n      1\n    );\n    let heightScale = Math.max(\n      Math.hypot(inverseTransform[2], inverseTransform[3]),\n      1\n    );\n\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (\n      (widthScale > 2 && paintWidth > 1) ||\n      (heightScale > 2 && paintHeight > 1)\n    ) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        // See bug 1820511 (Windows specific bug).\n        // TODO: once the above bug is fixed we could revert to:\n        // newWidth = Math.ceil(paintWidth / 2);\n        newWidth =\n          paintWidth >= 16384\n            ? Math.floor(paintWidth / 2) - 1 || 1\n            : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        // TODO: see the comment above.\n        newHeight =\n          paintHeight >= 16384\n            ? Math.floor(paintHeight / 2) - 1 || 1\n            : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(\n        tmpCanvasId,\n        newWidth,\n        newHeight\n      );\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(\n        img,\n        0,\n        0,\n        paintWidth,\n        paintHeight,\n        0,\n        0,\n        newWidth,\n        newHeight\n      );\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight,\n    };\n  }\n\n  _createMaskCanvas(opIdx, img) {\n    const ctx = this.ctx;\n    const { width, height } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      // We're reusing the same image several times, so we can cache it.\n      // In case we've a pattern fill we just keep the scaled version of\n      // the image.\n      // Only the scaling part matters, the translation part is just used\n      // to compute offsets (but not when filling patterns see #15573).\n      // TODO: handle the case of a pattern fill if it's possible.\n      cacheKey = JSON.stringify(\n        isPatternFill\n          ? currentTransform\n          : [currentTransform.slice(0, 4), fillColor]\n      );\n\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(\n          Math.min(currentTransform[0], currentTransform[2]) +\n            currentTransform[4]\n        );\n        const offsetY = Math.round(\n          Math.min(currentTransform[1], currentTransform[3]) +\n            currentTransform[5]\n        );\n\n        this.dependencyTracker?.recordDependencies(\n          opIdx,\n          Dependencies.transformAndFill\n        );\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY,\n        };\n      }\n      scaled = cachedImage;\n    }\n\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n\n    // Create the mask canvas at the size it will be drawn at and also set\n    // its transform to match the current transform so if there are any\n    // patterns applied they will be applied relative to the correct\n    // transform.\n\n    let maskToCanvas = Util.transform(currentTransform, [\n      1 / width,\n      0,\n      0,\n      -1 / height,\n      0,\n      0,\n    ]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const minMax = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox([0, 0, width, height], maskToCanvas, minMax);\n    const [minX, minY, maxX, maxY] = minMax;\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\n      \"fillCanvas\",\n      drawnWidth,\n      drawnHeight\n    );\n    const fillCtx = fillCanvas.context;\n\n    // The offset will be the top-left coordinate mask.\n    // If objToCanvas is [a,b,c,d,e,f] then:\n    //   - offsetX = min(a, c) + e\n    //   - offsetY = min(b, d) + f\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n\n    if (!scaled) {\n      // Pre-scale if needed to improve image smoothing.\n      scaled = this._scaleImage(\n        maskCanvas.canvas,\n        getCurrentTransformInverse(fillCtx)\n      );\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(fillCtx),\n      img.interpolate\n    );\n\n    drawImageAtIntegerCoords(\n      fillCtx,\n      scaled,\n      0,\n      0,\n      scaled.width,\n      scaled.height,\n      0,\n      0,\n      width,\n      height\n    );\n    fillCtx.globalCompositeOperation = \"source-in\";\n\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [\n      1,\n      0,\n      0,\n      1,\n      -offsetX,\n      -offsetY,\n    ]);\n    fillCtx.fillStyle = isPatternFill\n      ? fillColor.getPattern(ctx, this, inverse, PathType.FILL)\n      : fillColor;\n\n    fillCtx.fillRect(0, 0, width, height);\n\n    if (cache && !isPatternFill) {\n      // The fill canvas is put in the cache associated to the mask image\n      // so we must remove from the cached canvas: it mustn't be used again.\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n\n    this.dependencyTracker?.recordDependencies(\n      opIdx,\n      Dependencies.transformAndFill\n    );\n\n    // Round the offsets to avoid drawing fractional pixels.\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY),\n    };\n  }\n\n  // Graphics state\n  setLineWidth(opIdx, width) {\n    this.dependencyTracker?.recordSimpleData(\"lineWidth\", opIdx);\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n\n  setLineCap(opIdx, style) {\n    this.dependencyTracker?.recordSimpleData(\"lineCap\", opIdx);\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n\n  setLineJoin(opIdx, style) {\n    this.dependencyTracker?.recordSimpleData(\"lineJoin\", opIdx);\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n\n  setMiterLimit(opIdx, limit) {\n    this.dependencyTracker?.recordSimpleData(\"miterLimit\", opIdx);\n    this.ctx.miterLimit = limit;\n  }\n\n  setDash(opIdx, dashArray, dashPhase) {\n    this.dependencyTracker?.recordSimpleData(\"dash\", opIdx);\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n\n  setRenderingIntent(opIdx, intent) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setFlatness(opIdx, flatness) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setGState(opIdx, states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(opIdx, value);\n          break;\n        case \"LC\":\n          this.setLineCap(opIdx, value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(opIdx, value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(opIdx, value);\n          break;\n        case \"D\":\n          this.setDash(opIdx, value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(opIdx, value);\n          break;\n        case \"FL\":\n          this.setFlatness(opIdx, value);\n          break;\n        case \"Font\":\n          this.setFont(opIdx, value[0], value[1]);\n          break;\n        case \"CA\":\n          this.dependencyTracker?.recordSimpleData(\"strokeAlpha\", opIdx);\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.dependencyTracker?.recordSimpleData(\"fillAlpha\", opIdx);\n          this.ctx.globalAlpha = this.current.fillAlpha = value;\n          break;\n        case \"BM\":\n          this.dependencyTracker?.recordSimpleData(\n            \"globalCompositeOperation\",\n            opIdx\n          );\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.dependencyTracker?.recordSimpleData(\"SMask\", opIdx);\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.dependencyTracker?.recordSimpleData(\"filter\", opIdx);\n          this.ctx.filter = this.current.transferMaps =\n            this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n    // Else, the state is okay and nothing needs to be done.\n  }\n\n  /**\n   * Soft mask mode takes the current main drawing canvas and replaces it with\n   * a temporary canvas. Any drawing operations that happen on the temporary\n   * canvas need to be composed with the main canvas that was suspended (see\n   * `compose()`). The temporary canvas also duplicates many of its operations\n   * on the suspended canvas to keep them in sync, so that when the soft mask\n   * mode ends any clipping paths or transformations will still be active and in\n   * the right order on the canvas' graphics state stack.\n   */\n  beginSMaskMode(opIdx) {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight\n    );\n    this.suspendedCtx = this.ctx;\n    const ctx = (this.ctx = scratchCanvas.context);\n    ctx.setTransform(this.suspendedCtx.getTransform());\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n\n    this.setGState(opIdx, [[\"BM\", \"source-over\"]]);\n  }\n\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    // The soft mask is done, now restore the suspended canvas as the main\n    // drawing canvas.\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n\n    this.suspendedCtx = null;\n  }\n\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    // Whatever was drawn has been moved to the suspended canvas, now clear it\n    // out of the current canvas.\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(\n      smask.context,\n      layerCtx,\n      layerWidth,\n      layerHeight,\n      smask.subtype,\n      smask.backdrop,\n      smask.transferMap,\n      layerOffsetX,\n      layerOffsetY,\n      smask.offsetX,\n      smask.offsetY\n    );\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n\n  genericComposeSMask(\n    maskCtx,\n    layerCtx,\n    width,\n    height,\n    subtype,\n    backdrop,\n    transferMap,\n    layerOffsetX,\n    layerOffsetY,\n    maskOffsetX,\n    maskOffsetY\n  ) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n\n    if (backdrop) {\n      if (\n        maskX < 0 ||\n        maskY < 0 ||\n        maskX + width > maskCanvas.width ||\n        maskY + height > maskCanvas.height\n      ) {\n        const canvas = this.cachedCanvases.getCanvas(\n          \"maskExtension\",\n          width,\n          height\n        );\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        ctx.globalCompositeOperation = \"destination-atop\";\n        ctx.fillStyle = backdrop;\n        ctx.fillRect(0, 0, width, height);\n        ctx.globalCompositeOperation = \"source-over\";\n\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = backdrop;\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(\n      maskCanvas,\n      maskX,\n      maskY,\n      width,\n      height,\n      layerOffsetX,\n      layerOffsetY,\n      width,\n      height\n    );\n    layerCtx.restore();\n  }\n\n  save(opIdx) {\n    if (this.inSMaskMode) {\n      // SMask mode may be turned on/off causing us to lose graphics state.\n      // Copy the temporary canvas state to the main(suspended) canvas to keep\n      // it in sync.\n      copyCtxState(this.ctx, this.suspendedCtx);\n    }\n    this.ctx.save();\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n    this.dependencyTracker?.save(opIdx);\n  }\n\n  restore(opIdx) {\n    this.dependencyTracker?.restore(opIdx);\n\n    if (this.stateStack.length === 0) {\n      if (this.inSMaskMode) {\n        this.endSMaskMode();\n      }\n      return;\n    }\n\n    this.current = this.stateStack.pop();\n    this.ctx.restore();\n    if (this.inSMaskMode) {\n      // Graphics state is stored on the main(suspended) canvas. Restore its\n      // state then copy it over to the temporary canvas.\n      copyCtxState(this.suspendedCtx, this.ctx);\n    }\n    this.checkSMaskState();\n\n    // Ensure that the clipping path is reset (fixes issue6413.pdf).\n    this.pendingClip = null;\n\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n\n  transform(opIdx, a, b, c, d, e, f) {\n    this.dependencyTracker?.recordIncrementalData(\"transform\", opIdx);\n    this.ctx.transform(a, b, c, d, e, f);\n\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n\n  // Path\n  constructPath(opIdx, op, data, minMax) {\n    let [path] = data;\n    if (!minMax) {\n      // The path is empty, so no need to update the current minMax.\n      path ||= data[0] = new Path2D();\n      this[op](opIdx, path);\n      return;\n    }\n\n    if (this.dependencyTracker !== null) {\n      const outerExtraSize = op === OPS.stroke ? this.current.lineWidth / 2 : 0;\n      this.dependencyTracker\n        .resetBBox(opIdx)\n        .recordBBox(\n          opIdx,\n          this.ctx,\n          minMax[0] - outerExtraSize,\n          minMax[2] + outerExtraSize,\n          minMax[1] - outerExtraSize,\n          minMax[3] + outerExtraSize\n        )\n        .recordDependencies(opIdx, [\"transform\"]);\n    }\n\n    if (!(path instanceof Path2D)) {\n      // Using a SVG string is slightly slower than using the following loop.\n      const path2d = (data[0] = new Path2D());\n      for (let i = 0, ii = path.length; i < ii; ) {\n        switch (path[i++]) {\n          case DrawOPS.moveTo:\n            path2d.moveTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.lineTo:\n            path2d.lineTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.curveTo:\n            path2d.bezierCurveTo(\n              path[i++],\n              path[i++],\n              path[i++],\n              path[i++],\n              path[i++],\n              path[i++]\n            );\n            break;\n          case DrawOPS.closePath:\n            path2d.closePath();\n            break;\n          default:\n            warn(`Unrecognized drawing path operator: ${path[i - 1]}`);\n            break;\n        }\n      }\n      path = path2d;\n    }\n    Util.axialAlignedBoundingBox(\n      minMax,\n      getCurrentTransform(this.ctx),\n      this.current.minMax\n    );\n    this[op](opIdx, path);\n\n    this._pathStartIdx = opIdx;\n  }\n\n  closePath(opIdx) {\n    this.ctx.closePath();\n  }\n\n  stroke(opIdx, path, consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    // For stroke we want to temporarily change the global alpha to the\n    // stroking alpha.\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        const baseTransform = strokeColor.isModifyingCurrentTransform()\n          ? ctx.getTransform()\n          : null;\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(\n          ctx,\n          this,\n          getCurrentTransformInverse(ctx),\n          PathType.STROKE\n        );\n        if (baseTransform) {\n          const newPath = new Path2D();\n          newPath.addPath(\n            path,\n            ctx.getTransform().invertSelf().multiplySelf(baseTransform)\n          );\n          path = newPath;\n        }\n        this.rescaleAndStroke(path, /* saveRestore */ false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(path, /* saveRestore */ true);\n      }\n    }\n\n    this.dependencyTracker?.recordDependencies(opIdx, Dependencies.stroke);\n\n    if (consumePath) {\n      this.consumePath(\n        opIdx,\n        path,\n        this.current.getClippedPathBoundingBox(\n          PathType.STROKE,\n          getCurrentTransform(this.ctx)\n        )\n      );\n    }\n\n    // Restore the global alpha to the fill alpha\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n\n  closeStroke(opIdx, path) {\n    this.stroke(opIdx, path);\n  }\n\n  fill(opIdx, path, consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n\n    if (isPatternFill) {\n      const baseTransform = fillColor.isModifyingCurrentTransform()\n        ? ctx.getTransform()\n        : null;\n      this.dependencyTracker?.save(opIdx);\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL\n      );\n      if (baseTransform) {\n        const newPath = new Path2D();\n        newPath.addPath(\n          path,\n          ctx.getTransform().invertSelf().multiplySelf(baseTransform)\n        );\n        path = newPath;\n      }\n      needRestore = true;\n    }\n\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(path, \"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill(path);\n      }\n    }\n\n    this.dependencyTracker?.recordDependencies(opIdx, Dependencies.fill);\n\n    if (needRestore) {\n      ctx.restore();\n      this.dependencyTracker?.restore(opIdx);\n    }\n    if (consumePath) {\n      this.consumePath(opIdx, path, intersect);\n    }\n  }\n\n  eoFill(opIdx, path) {\n    this.pendingEOFill = true;\n    this.fill(opIdx, path);\n  }\n\n  fillStroke(opIdx, path) {\n    this.fill(opIdx, path, false);\n    this.stroke(opIdx, path, false);\n\n    this.consumePath(opIdx, path);\n  }\n\n  eoFillStroke(opIdx, path) {\n    this.pendingEOFill = true;\n    this.fillStroke(opIdx, path);\n  }\n\n  closeFillStroke(opIdx, path) {\n    this.fillStroke(opIdx, path);\n  }\n\n  closeEOFillStroke(opIdx, path) {\n    this.pendingEOFill = true;\n    this.fillStroke(opIdx, path);\n  }\n\n  endPath(opIdx, path) {\n    this.consumePath(opIdx, path);\n  }\n\n  rawFillPath(opIdx, path) {\n    this.ctx.fill(path);\n    this.dependencyTracker\n      ?.recordDependencies(opIdx, Dependencies.rawFillPath)\n      .recordOperation(opIdx);\n  }\n\n  // Clipping\n  clip(opIdx) {\n    this.dependencyTracker?.recordFutureForcedDependency(\"clipMode\", opIdx);\n    this.pendingClip = NORMAL_CLIP;\n  }\n\n  eoClip(opIdx) {\n    this.dependencyTracker?.recordFutureForcedDependency(\"clipMode\", opIdx);\n    this.pendingClip = EO_CLIP;\n  }\n\n  // Text\n  beginText(opIdx) {\n    this.current.textMatrix = null;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n\n    this.dependencyTracker\n      ?.recordOpenMarker(opIdx)\n      .resetIncrementalData(\"sameLineText\")\n      .resetIncrementalData(\"moveText\", opIdx);\n  }\n\n  endText(opIdx) {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n\n    if (this.dependencyTracker) {\n      const { dependencyTracker } = this;\n      if (paths !== undefined) {\n        dependencyTracker\n          .recordFutureForcedDependency(\n            \"textClip\",\n            dependencyTracker.getOpenMarker()\n          )\n          .recordFutureForcedDependency(\"textClip\", opIdx);\n      }\n      dependencyTracker.recordCloseMarker(opIdx);\n    }\n\n    if (paths !== undefined) {\n      const newPath = new Path2D();\n      const invTransf = ctx.getTransform().invertSelf();\n      for (const { transform, x, y, fontSize, path } of paths) {\n        if (!path) {\n          continue; // Skip empty paths.\n        }\n        newPath.addPath(\n          path,\n          new DOMMatrix(transform)\n            .preMultiplySelf(invTransf)\n            .translate(x, y)\n            .scale(fontSize, -fontSize)\n        );\n      }\n\n      ctx.clip(newPath);\n    }\n    delete this.pendingTextPaths;\n  }\n\n  setCharSpacing(opIdx, spacing) {\n    this.dependencyTracker?.recordSimpleData(\"charSpacing\", opIdx);\n    this.current.charSpacing = spacing;\n  }\n\n  setWordSpacing(opIdx, spacing) {\n    this.dependencyTracker?.recordSimpleData(\"wordSpacing\", opIdx);\n    this.current.wordSpacing = spacing;\n  }\n\n  setHScale(opIdx, scale) {\n    this.dependencyTracker?.recordSimpleData(\"hScale\", opIdx);\n    this.current.textHScale = scale / 100;\n  }\n\n  setLeading(opIdx, leading) {\n    this.dependencyTracker?.recordSimpleData(\"leading\", opIdx);\n    this.current.leading = -leading;\n  }\n\n  setFont(opIdx, fontRefName, size) {\n    this.dependencyTracker\n      ?.recordSimpleData(\"font\", opIdx)\n      .recordNamedDependency(opIdx, fontRefName);\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n\n    // A valid matrix needs all main diagonal elements to be non-zero\n    // This also ensures we bypass FF bugzilla bug #719844.\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n\n    // The spec for Tf (setFont) says that 'size' specifies the font 'scale',\n    // and in some docs this can be negative (inverted x-y axes).\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n\n    if (fontObj.isType3Font) {\n      return; // we don't need ctx.font for Type3 fonts\n    }\n\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface =\n      fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n\n    // Some font backends cannot handle fonts below certain size.\n    // Keeping the font at minimal size and using the fontSizeScale to change\n    // the current transformation matrix before the fillText/strokeText.\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=726227\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n\n  setTextRenderingMode(opIdx, mode) {\n    this.dependencyTracker?.recordSimpleData(\"textRenderingMode\", opIdx);\n    this.current.textRenderingMode = mode;\n  }\n\n  setTextRise(opIdx, rise) {\n    this.dependencyTracker?.recordSimpleData(\"textRise\", opIdx);\n    this.current.textRise = rise;\n  }\n\n  moveText(opIdx, x, y) {\n    this.dependencyTracker\n      ?.resetIncrementalData(\"sameLineText\")\n      .recordIncrementalData(\"moveText\", opIdx);\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n\n  setLeadingMoveText(opIdx, x, y) {\n    this.setLeading(opIdx, -y);\n    this.moveText(opIdx, x, y);\n  }\n\n  setTextMatrix(opIdx, matrix) {\n    this.dependencyTracker?.recordSimpleData(\"textMatrix\", opIdx);\n    const { current } = this;\n    current.textMatrix = matrix;\n    current.textMatrixScale = Math.hypot(matrix[0], matrix[1]);\n\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n  }\n\n  nextLine(opIdx) {\n    this.moveText(opIdx, 0, this.current.leading);\n\n    this.dependencyTracker?.recordIncrementalData(\n      \"moveText\",\n      // 'leading' affects 'nextLine' operations. Rather than dealing\n      // with transitive dependencies, just mark everything that depends on\n      // the 'moveText' operation as depending on the 'leading' value.\n      this.dependencyTracker.getSimpleIndex(\"leading\") ?? opIdx\n    );\n  }\n\n  #getScaledPath(path, currentTransform, transform) {\n    const newPath = new Path2D();\n    newPath.addPath(\n      path,\n      new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform)\n    );\n    return newPath;\n  }\n\n  paintChar(\n    opIdx,\n    character,\n    x,\n    y,\n    patternFillTransform,\n    patternStrokeTransform\n  ) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode =\n      textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(\n      textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG\n    );\n    const patternFill = current.patternFill && !font.missingFile;\n    const patternStroke = current.patternStroke && !font.missingFile;\n\n    let path;\n    if (\n      (font.disableFontFace ||\n        isAddToPathSet ||\n        patternFill ||\n        patternStroke) &&\n      !font.missingFile\n    ) {\n      path = font.getPathGenerator(this.commonObjs, character);\n    }\n\n    if (path && (font.disableFontFace || patternFill || patternStroke)) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.scale(fontSize, -fontSize);\n\n      this.dependencyTracker?.recordCharacterBBox(opIdx, ctx, font);\n\n      let currentTransform;\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        if (patternFillTransform) {\n          currentTransform = ctx.getTransform();\n          ctx.setTransform(...patternFillTransform);\n          const scaledPath = this.#getScaledPath(\n            path,\n            currentTransform,\n            patternFillTransform\n          );\n          ctx.fill(scaledPath);\n        } else {\n          ctx.fill(path);\n        }\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        if (patternStrokeTransform) {\n          currentTransform ||= ctx.getTransform();\n          ctx.setTransform(...patternStrokeTransform);\n          const { a, b, c, d } = currentTransform;\n          const invPatternTransform = Util.inverseTransform(\n            patternStrokeTransform\n          );\n          const transf = Util.transform(\n            [a, b, c, d, 0, 0],\n            invPatternTransform\n          );\n          Util.singularValueDecompose2dScale(transf, XY);\n\n          // Cancel the pattern scaling of the line width.\n          // If sx and sy are different, unfortunately we can't do anything and\n          // we'll have a rendering bug.\n          ctx.lineWidth *= Math.max(XY[0], XY[1]) / fontSize;\n          ctx.stroke(\n            this.#getScaledPath(path, currentTransform, patternStrokeTransform)\n          );\n        } else {\n          ctx.lineWidth /= fontSize;\n          ctx.stroke(path);\n        }\n      }\n      ctx.restore();\n    } else {\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fillText(character, x, y);\n        this.dependencyTracker?.recordCharacterBBox(\n          opIdx,\n          ctx,\n          font,\n          fontSize,\n          x,\n          y,\n          () => ctx.measureText(character)\n        );\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        if (this.dependencyTracker) {\n          this.dependencyTracker\n            ?.recordCharacterBBox(opIdx, ctx, font, fontSize, x, y, () =>\n              ctx.measureText(character)\n            )\n            .recordDependencies(opIdx, Dependencies.stroke);\n        }\n        ctx.strokeText(character, x, y);\n      }\n    }\n\n    if (isAddToPathSet) {\n      const paths = (this.pendingTextPaths ||= []);\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        path,\n      });\n      this.dependencyTracker?.recordCharacterBBox(\n        opIdx,\n        ctx,\n        font,\n        fontSize,\n        x,\n        y\n      );\n    }\n  }\n\n  get isFontSubpixelAAEnabled() {\n    // Checks if anti-aliasing is enabled when scaled text is painted.\n    // On Windows GDI scaled fonts looks bad.\n    const { context: ctx } = this.cachedCanvases.getCanvas(\n      \"isFontSubpixelAAEnabled\",\n      10,\n      10\n    );\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n\n  showText(opIdx, glyphs) {\n    if (this.dependencyTracker) {\n      this.dependencyTracker\n        .recordDependencies(opIdx, Dependencies.showText)\n        .copyDependenciesFromIncrementalOperation(opIdx, \"sameLineText\")\n        .resetBBox(opIdx);\n      if (this.current.textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG) {\n        this.dependencyTracker\n          .recordFutureForcedDependency(\"textClip\", opIdx)\n          .inheritPendingDependenciesAsFutureForcedDependencies();\n      }\n    }\n\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      this.showType3Text(opIdx, glyphs);\n      this.dependencyTracker\n        ?.recordOperation(opIdx)\n        .recordIncrementalData(\"sameLineText\", opIdx);\n      return undefined;\n    }\n\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      this.dependencyTracker?.recordOperation(opIdx);\n      return undefined;\n    }\n\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n    const simpleFillText =\n      current.textRenderingMode === TextRenderingMode.FILL &&\n      !font.disableFontFace &&\n      !current.patternFill;\n\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n\n    let patternFillTransform, patternStrokeTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL\n      );\n      patternFillTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n\n    if (current.patternStroke) {\n      ctx.save();\n      const pattern = current.strokeColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.STROKE\n      );\n      patternStrokeTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.strokeStyle = pattern;\n    }\n\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode =\n        current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n\n    ctx.lineWidth = lineWidth;\n\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      const joinedChars = chars.join(\"\");\n      ctx.fillText(joinedChars, 0, 0);\n      if (this.dependencyTracker !== null) {\n        const measure = ctx.measureText(joinedChars);\n        this.dependencyTracker\n          .recordBBox(\n            opIdx,\n            this.ctx,\n            -measure.actualBoundingBoxLeft,\n            measure.actualBoundingBoxRight,\n            -measure.actualBoundingBoxAscent,\n            measure.actualBoundingBoxDescent\n          )\n          .recordOperation(opIdx)\n          .recordIncrementalData(\"sameLineText\", opIdx);\n      }\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += (spacingDir * glyph * fontSize) / 1000;\n        continue;\n      }\n\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx =\n          -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n\n      let measure;\n\n      if (font.remeasure && width > 0) {\n        measure = ctx.measureText(character);\n\n        // Some standard fonts may not have the exact width: rescale per\n        // character if measured width is greater than expected glyph width\n        // and subpixel-aa is enabled, otherwise just center the glyph.\n        const measuredWidth =\n          ((measure.width * 1000) / fontSize) * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX +=\n            (((width - measuredWidth) / 2000) * fontSize) / fontSizeScale;\n        }\n      }\n\n      // Only attempt to draw the glyph if it is actually in the embedded font\n      // file or if there isn't a font file so the fallback font is shown.\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          // common case\n          ctx.fillText(character, scaledX, scaledY);\n\n          this.dependencyTracker?.recordCharacterBBox(\n            opIdx,\n            ctx,\n            // If we already measured the character, force usage of that\n            measure ? { bbox: null } : font,\n            fontSize / fontSizeScale,\n            scaledX,\n            scaledY,\n            () => measure ?? ctx.measureText(character)\n          );\n        } else {\n          this.paintChar(\n            opIdx,\n            character,\n            scaledX,\n            scaledY,\n            patternFillTransform,\n            patternStrokeTransform\n          );\n          if (accent) {\n            const scaledAccentX =\n              scaledX + (fontSize * accent.offset.x) / fontSizeScale;\n            const scaledAccentY =\n              scaledY - (fontSize * accent.offset.y) / fontSizeScale;\n            this.paintChar(\n              opIdx,\n              accent.fontChar,\n              scaledAccentX,\n              scaledAccentY,\n              patternFillTransform,\n              patternStrokeTransform\n            );\n          }\n        }\n      }\n\n      const charWidth = vertical\n        ? width * widthAdvanceScale - spacing * fontDirection\n        : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n\n    this.dependencyTracker\n      ?.recordOperation(opIdx)\n      .recordIncrementalData(\"sameLineText\", opIdx);\n    return undefined;\n  }\n\n  showType3Text(opIdx, glyphs) {\n    // Type3 fonts - each glyph is a \"mini-PDF\"\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible =\n      current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n\n    ctx.scale(textHScale, fontDirection);\n\n    // Type3 fonts have their own operator list. Avoid mixing it up with the\n    // dependency tracker of the main operator list.\n    const dependencyTracker = this.dependencyTracker;\n    this.dependencyTracker = dependencyTracker\n      ? new CanvasNestedDependencyTracker(dependencyTracker, opIdx)\n      : null;\n\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = (spacingDir * glyph * fontSize) / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n      } else if (this.contentVisible) {\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n\n      const p = [glyph.width, 0];\n      Util.applyTransform(p, fontMatrix);\n      width = p[0] * fontSize + spacing;\n\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    if (dependencyTracker) {\n      this.dependencyTracker.recordNestedDependencies();\n      this.dependencyTracker = dependencyTracker;\n    }\n  }\n\n  // Type3 fonts\n  setCharWidth(opIdx, xWidth, yWidth) {\n    // We can safely ignore this since the width should be the same\n    // as the width in the Widths array.\n  }\n\n  setCharWidthAndBounds(opIdx, xWidth, yWidth, llx, lly, urx, ury) {\n    const clip = new Path2D();\n    clip.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip(clip);\n    this.dependencyTracker\n      ?.recordBBox(opIdx, this.ctx, llx, urx, lly, ury)\n      .recordClipBox(opIdx, this.ctx, llx, urx, lly, ury);\n    this.endPath(opIdx);\n  }\n\n  // Color\n  getColorN_Pattern(opIdx, IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx =>\n          new CanvasGraphics(\n            ctx,\n            this.commonObjs,\n            this.objs,\n            this.canvasFactory,\n            this.filterFactory,\n            {\n              optionalContentConfig: this.optionalContentConfig,\n              markedContentStack: this.markedContentStack,\n            },\n            undefined,\n            undefined,\n            this.dependencyTracker\n              ? new CanvasNestedDependencyTracker(this.dependencyTracker, opIdx)\n              : null\n          ),\n      };\n      pattern = new TilingPattern(\n        IR,\n        this.ctx,\n        canvasGraphicsFactory,\n        baseTransform\n      );\n    } else {\n      pattern = this._getPattern(opIdx, IR[1], IR[2]);\n    }\n    return pattern;\n  }\n\n  setStrokeColorN(opIdx, ...args) {\n    this.dependencyTracker?.recordSimpleData(\"strokeColor\", opIdx);\n    this.current.strokeColor = this.getColorN_Pattern(opIdx, args);\n    this.current.patternStroke = true;\n  }\n\n  setFillColorN(opIdx, ...args) {\n    this.dependencyTracker?.recordSimpleData(\"fillColor\", opIdx);\n    this.current.fillColor = this.getColorN_Pattern(opIdx, args);\n    this.current.patternFill = true;\n  }\n\n  setStrokeRGBColor(opIdx, color) {\n    this.dependencyTracker?.recordSimpleData(\"strokeColor\", opIdx);\n    this.ctx.strokeStyle = this.current.strokeColor = color;\n    this.current.patternStroke = false;\n  }\n\n  setStrokeTransparent(opIdx) {\n    this.dependencyTracker?.recordSimpleData(\"strokeColor\", opIdx);\n    this.ctx.strokeStyle = this.current.strokeColor = \"transparent\";\n    this.current.patternStroke = false;\n  }\n\n  setFillRGBColor(opIdx, color) {\n    this.dependencyTracker?.recordSimpleData(\"fillColor\", opIdx);\n    this.ctx.fillStyle = this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n\n  setFillTransparent(opIdx) {\n    this.dependencyTracker?.recordSimpleData(\"fillColor\", opIdx);\n    this.ctx.fillStyle = this.current.fillColor = \"transparent\";\n    this.current.patternFill = false;\n  }\n\n  _getPattern(opIdx, objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(opIdx, objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n\n  shadingFill(opIdx, objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    this.save(opIdx);\n    const pattern = this._getPattern(opIdx, objId);\n    ctx.fillStyle = pattern.getPattern(\n      ctx,\n      this,\n      getCurrentTransformInverse(ctx),\n      PathType.SHADING\n    );\n\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const { width, height } = ctx.canvas;\n      const minMax = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, width, height], inv, minMax);\n      const [x0, y0, x1, y1] = minMax;\n\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      // HACK to draw the gradient onto an infinite rectangle.\n      // PDF gradients are drawn across the entire image while\n      // Canvas only allows gradients to be drawn in a rectangle\n      // The following bug should allow us to remove this.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=664884\n\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n\n    this.dependencyTracker\n      ?.resetBBox(opIdx)\n      // TODO: Track proper bbox\n      .recordFullPageBBox(opIdx)\n      .recordDependencies(opIdx, Dependencies.transform)\n      .recordDependencies(opIdx, Dependencies.fill)\n      .recordOperation(opIdx);\n\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore(opIdx);\n  }\n\n  // Images\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n\n  paintFormXObjectBegin(opIdx, matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save(opIdx);\n    this.baseTransformStack.push(this.baseTransform);\n\n    if (matrix) {\n      this.transform(opIdx, ...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n\n    if (bbox) {\n      Util.axialAlignedBoundingBox(\n        bbox,\n        this.baseTransform,\n        this.current.minMax\n      );\n      const [x0, y0, x1, y1] = bbox;\n      const clip = new Path2D();\n      clip.rect(x0, y0, x1 - x0, y1 - y0);\n      this.ctx.clip(clip);\n      this.dependencyTracker?.recordClipBox(opIdx, this.ctx, x0, x1, y0, y1);\n      this.endPath(opIdx);\n    }\n  }\n\n  paintFormXObjectEnd(opIdx) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore(opIdx);\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n\n  beginGroup(opIdx, group) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    this.save(opIdx);\n    // If there's an active soft mask we don't want it enabled for the group, so\n    // clear it out. The mask and suspended canvas will be restored in endGroup.\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n\n    const currentCtx = this.ctx;\n    // TODO non-isolated groups - according to Rik at adobe non-isolated\n    // group results aren't usually that different and they even have tools\n    // that ignore this setting. Notes from Rik on implementing:\n    // - When you encounter an transparency group, create a new canvas with\n    // the dimensions of the bbox\n    // - copy the content from the previous canvas to the new canvas\n    // - draw as usual\n    // - remove the backdrop alpha:\n    // alphaNew = 1 - (1 - alpha)/(1 - alphaBackdrop) with 'alpha' the alpha\n    // value of your transparency group and 'alphaBackdrop' the alpha of the\n    // backdrop\n    // - remove background color:\n    // colorNew = color - alphaNew *colorBackdrop /(1 - alphaNew)\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n\n    // TODO knockout - supposedly possible with the clever use of compositing\n    // modes.\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n\n    // Based on the current transform figure out how big the bounding box\n    // will actually be.\n    let bounds = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox(\n      group.bbox,\n      getCurrentTransform(currentCtx),\n      bounds\n    );\n\n    // Clip the bounding box to the current canvas.\n    const canvasBounds = [\n      0,\n      0,\n      currentCtx.canvas.width,\n      currentCtx.canvas.height,\n    ];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    // Use ceil in case we're between sizes so we don't create canvas that is\n    // too small and make the canvas at least 1x1 pixels.\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      // Using two cache entries is case if masks are used one after another.\n      cacheId += \"_smask_\" + (this.smaskCounter++ % 2);\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight\n    );\n    const groupCtx = scratchCanvas.context;\n\n    // Since we created a new canvas that is just the size of the bounding box\n    // we have to translate the group ctx.\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n\n    // Apply the bbox to the group context.\n    let clip = new Path2D();\n    const [x0, y0, x1, y1] = group.bbox;\n    clip.rect(x0, y0, x1 - x0, y1 - y0);\n    if (group.matrix) {\n      const path = new Path2D();\n      path.addPath(clip, new DOMMatrix(group.matrix));\n      clip = path;\n    }\n    groupCtx.clip(clip);\n\n    if (group.smask) {\n      // Saving state and cached mask to be used in setGState.\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null, // used during suspend operation\n      });\n    }\n    if (\n      !group.smask ||\n      // When this is not an SMask group, we only need to update the current\n      // transform if recording operations bboxes, so they the bboxes have the\n      // correct transform applied.\n      this.dependencyTracker\n    ) {\n      // Setup the current ctx so when the group is popped we draw it at the\n      // right location.\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    // The transparency group inherits all off the current graphics state\n    // except the blend mode, soft mask, and alpha constants.\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.dependencyTracker\n      ?.inheritSimpleDataAsFutureForcedDependencies([\n        \"fillAlpha\",\n        \"strokeAlpha\",\n        \"globalCompositeOperation\",\n      ])\n      .pushBaseTransform(currentCtx);\n    this.setGState(opIdx, [\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n\n  endGroup(opIdx, group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    // Turn off image smoothing to avoid sub pixel interpolation which can\n    // look kind of blurry for some pdfs.\n    this.ctx.imageSmoothingEnabled = false;\n\n    this.dependencyTracker?.popBaseTransform();\n\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore(opIdx);\n      if (this.dependencyTracker) {\n        this.ctx.restore();\n      }\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore(opIdx);\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox(\n        [0, 0, groupCtx.canvas.width, groupCtx.canvas.height],\n        currentMtx,\n        dirtyBox\n      );\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n\n  beginAnnotation(opIdx, id, rect, transform, matrix, hasOwnCanvas) {\n    // The annotations are drawn just after the page content.\n    // The page content drawing can potentially have set a transform,\n    // a clipping path, whatever...\n    // So in order to have something clean, we restore the initial state.\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n\n    this.ctx.save();\n    this.save(opIdx);\n\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n\n        Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx), XY);\n        const { viewportScale } = this;\n        const canvasWidth = Math.ceil(\n          width * this.outputScaleX * viewportScale\n        );\n        const canvasHeight = Math.ceil(\n          height * this.outputScaleY * viewportScale\n        );\n\n        this.annotationCanvas = this.canvasFactory.create(\n          canvasWidth,\n          canvasHeight\n        );\n        const { canvas, context } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(XY[0], 0, 0, -XY[1], 0, height * XY[1]);\n\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n\n        // Consume a potential path before clipping.\n        this.endPath(opIdx);\n\n        const clip = new Path2D();\n        clip.rect(rect[0], rect[1], width, height);\n        this.ctx.clip(clip);\n      }\n    }\n\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n\n    this.transform(opIdx, ...transform);\n    this.transform(opIdx, ...matrix);\n  }\n\n  endAnnotation(opIdx) {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n\n  paintImageMaskXObject(opIdx, img) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    const count = img.count;\n    img = this.getObject(opIdx, img.data, img);\n    img.count = count;\n\n    const ctx = this.ctx;\n    const mask = this._createMaskCanvas(opIdx, img);\n    const maskCanvas = mask.canvas;\n\n    ctx.save();\n    // The mask is drawn with the transform applied. Reset the current\n    // transform to draw to the identity.\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    this.dependencyTracker\n      ?.resetBBox(opIdx)\n      .recordBBox(\n        opIdx,\n        this.ctx,\n        mask.offsetX,\n        mask.offsetX + maskCanvas.width,\n        mask.offsetY,\n        mask.offsetY + maskCanvas.height\n      )\n      .recordOperation(opIdx);\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectRepeat(\n    opIdx,\n    img,\n    scaleX,\n    skewX = 0,\n    skewY = 0,\n    scaleY,\n    positions\n  ) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    img = this.getObject(opIdx, img.data, img);\n\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(opIdx, img);\n\n    ctx.setTransform(\n      1,\n      0,\n      0,\n      1,\n      mask.offsetX - currentTransform[4],\n      mask.offsetY - currentTransform[5]\n    );\n    this.dependencyTracker?.resetBBox(opIdx);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [\n        scaleX,\n        skewX,\n        skewY,\n        scaleY,\n        positions[i],\n        positions[i + 1],\n      ]);\n\n      // Here we want to apply the transform at the origin,\n      // hence no additional computation is necessary.\n      ctx.drawImage(mask.canvas, trans[4], trans[5]);\n      this.dependencyTracker?.recordBBox(\n        opIdx,\n        this.ctx,\n        trans[4],\n        trans[4] + mask.canvas.width,\n        trans[5],\n        trans[5] + mask.canvas.height\n      );\n    }\n    ctx.restore();\n    this.compose();\n\n    this.dependencyTracker?.recordOperation(opIdx);\n  }\n\n  paintImageMaskXObjectGroup(opIdx, images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n\n    this.dependencyTracker\n      ?.resetBBox(opIdx)\n      .recordDependencies(opIdx, Dependencies.transformAndFill);\n\n    for (const image of images) {\n      const { data, width, height, transform } = image;\n\n      const maskCanvas = this.cachedCanvases.getCanvas(\n        \"maskCanvas\",\n        width,\n        height\n      );\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      const img = this.getObject(opIdx, data, image);\n      putBinaryImageMask(maskCtx, img);\n\n      maskCtx.globalCompositeOperation = \"source-in\";\n\n      maskCtx.fillStyle = isPatternFill\n        ? fillColor.getPattern(\n            maskCtx,\n            this,\n            getCurrentTransformInverse(ctx),\n            PathType.FILL\n          )\n        : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        maskCanvas.canvas,\n        0,\n        0,\n        width,\n        height,\n        0,\n        -1,\n        1,\n        1\n      );\n\n      this.dependencyTracker?.recordBBox(opIdx, ctx, 0, width, 0, height);\n      ctx.restore();\n    }\n    this.compose();\n    this.dependencyTracker?.recordOperation(opIdx);\n  }\n\n  paintImageXObject(opIdx, objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(opIdx, objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    this.paintInlineImageXObject(opIdx, imgData);\n  }\n\n  paintImageXObjectRepeat(opIdx, objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(opIdx, objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height,\n      });\n    }\n    this.paintInlineImageXObjectGroup(opIdx, imgData, map);\n  }\n\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const { bitmap, width, height } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\n      \"inlineImage\",\n      width,\n      height\n    );\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n\n    return tmpCanvas.canvas;\n  }\n\n  paintInlineImageXObject(opIdx, imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n\n    this.save(opIdx);\n\n    // The filter, if any, will be applied in applyTransferMapsToBitmap.\n    // It must be applied to the image before rescaling else some artifacts\n    // could appear.\n    // The final restore will reset it to its value.\n    const { filter } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n\n    // scale the image to the unit square\n    ctx.scale(1 / width, -1 / height);\n\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (\n      (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement) ||\n      !imgData.data\n    ) {\n      // typeof check is needed due to node.js support, see issue #8489\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\n        \"inlineImage\",\n        width,\n        height\n      );\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n\n    const scaled = this._scaleImage(\n      imgToPaint,\n      getCurrentTransformInverse(ctx)\n    );\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(ctx),\n      imgData.interpolate\n    );\n\n    this.dependencyTracker\n      ?.resetBBox(opIdx)\n      .recordBBox(opIdx, ctx, 0, width, -height, 0)\n      .recordDependencies(opIdx, Dependencies.imageXObject)\n      .recordOperation(opIdx);\n\n    drawImageAtIntegerCoords(\n      ctx,\n      scaled.img,\n      0,\n      0,\n      scaled.paintWidth,\n      scaled.paintHeight,\n      0,\n      -height,\n      width,\n      height\n    );\n    this.compose();\n    this.restore(opIdx);\n  }\n\n  paintInlineImageXObjectGroup(opIdx, imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n\n    this.dependencyTracker?.resetBBox(opIdx);\n\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        imgToPaint,\n        entry.x,\n        entry.y,\n        entry.w,\n        entry.h,\n        0,\n        -1,\n        1,\n        1\n      );\n      this.dependencyTracker?.recordBBox(opIdx, ctx, 0, 1, -1, 0);\n      ctx.restore();\n    }\n    this.dependencyTracker?.recordOperation(opIdx);\n    this.compose();\n  }\n\n  paintSolidColorImageMask(opIdx) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.dependencyTracker\n      ?.resetBBox(opIdx)\n      .recordBBox(opIdx, this.ctx, 0, 1, 0, 1)\n      .recordDependencies(opIdx, Dependencies.fill)\n      .recordOperation(opIdx);\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n\n  // Marked content\n\n  markPoint(opIdx, tag) {\n    // TODO Marked content.\n  }\n\n  markPointProps(opIdx, tag, properties) {\n    // TODO Marked content.\n  }\n\n  beginMarkedContent(opIdx, tag) {\n    this.dependencyTracker?.beginMarkedContent(opIdx);\n    this.markedContentStack.push({\n      visible: true,\n    });\n  }\n\n  beginMarkedContentProps(opIdx, tag, properties) {\n    this.dependencyTracker?.beginMarkedContent(opIdx);\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties),\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true,\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n\n  endMarkedContent(opIdx) {\n    this.dependencyTracker?.endMarkedContent(opIdx);\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n\n  // Compatibility\n\n  beginCompat(opIdx) {\n    // TODO ignore undefined operators (should we do that anyway?)\n  }\n\n  endCompat(opIdx) {\n    // TODO stop ignoring undefined operators\n  }\n\n  // Helper functions\n\n  consumePath(opIdx, path, clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(path, \"evenodd\");\n        } else {\n          ctx.clip(path);\n        }\n      }\n      this.pendingClip = null;\n      this.dependencyTracker\n        ?.bboxToClipBoxDropOperation(opIdx)\n        .recordFutureForcedDependency(\"clipPath\", opIdx);\n    } else {\n      this.dependencyTracker?.recordOperation(opIdx);\n    }\n\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n  }\n\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        // Fast path\n        this._cachedGetSinglePixelWidth =\n          1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n\n  getScaleForStroking() {\n    // A pixel has thicknessX = thicknessY = 1;\n    // A transformed pixel is a parallelogram and the thicknesses\n    // corresponds to the heights.\n    // The goal of this function is to rescale before setting the\n    // lineWidth in order to have both thicknesses greater or equal\n    // to 1 after transform.\n    if (this._cachedScaleForStroking[0] === -1) {\n      const { lineWidth } = this.current;\n      const { a, b, c, d } = this.ctx.getTransform();\n      let scaleX, scaleY;\n\n      if (b === 0 && c === 0) {\n        // Fast path\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        // A pixel (base (x, y)) is transformed by M into a parallelogram:\n        //  - its area is |det(M)|;\n        //  - heightY (orthogonal to Mx) has a length: |det(M)| / norm(Mx);\n        //  - heightX (orthogonal to My) has a length: |det(M)| / norm(My).\n        // heightX and heightY are the thicknesses of the transformed pixel\n        // and they must be both greater or equal to 1.\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n\n  // Rescale before stroking in order to have a final lineWidth\n  // with both thicknesses greater or equal to 1.\n  rescaleAndStroke(path, saveRestore) {\n    const {\n      ctx,\n      current: { lineWidth },\n    } = this;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n\n    if (scaleX === scaleY) {\n      ctx.lineWidth = (lineWidth || 1) * scaleX;\n      ctx.stroke(path);\n      return;\n    }\n\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n\n    ctx.scale(scaleX, scaleY);\n    SCALE_MATRIX.a = 1 / scaleX;\n    SCALE_MATRIX.d = 1 / scaleY;\n    const newPath = new Path2D();\n    newPath.addPath(path, SCALE_MATRIX);\n\n    // How the dashed line is rendered depends on the current transform...\n    // so we added a rescale to handle too thin lines and consequently\n    // the way the line is dashed will be modified.\n    // If scaleX === scaleY, the dashed lines will be rendered correctly\n    // else we'll have some bugs (but only with too thin lines).\n    // Here we take the max... why not taking the min... or something else.\n    // Anyway, as said it's buggy when scaleX !== scaleY.\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n\n    ctx.lineWidth = lineWidth || 1;\n    ctx.stroke(newPath);\n\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\nexport { CanvasGraphics };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass GlobalWorkerOptions {\n  static #port = null;\n\n  static #src = \"\";\n\n  /**\n   * @type {Worker | null}\n   */\n  static get workerPort() {\n    return this.#port;\n  }\n\n  /**\n   * @param {Worker | null} workerPort - Defines global port for worker process.\n   *   Overrides the `workerSrc` option.\n   */\n  static set workerPort(val) {\n    if (\n      !(typeof Worker !== \"undefined\" && val instanceof Worker) &&\n      val !== null\n    ) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n\n  /**\n   * @type {string}\n   */\n  static get workerSrc() {\n    return this.#src;\n  }\n\n  /**\n   * @param {string} workerSrc - A string containing the path and filename of\n   *   the worker file.\n   *\n   *   NOTE: The `workerSrc` option should always be set, in order to prevent\n   *         any issues when using the PDF.js library.\n   */\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\nexport { GlobalWorkerOptions };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass Metadata {\n  #map;\n\n  #data;\n\n  constructor({ parsedData, rawData }) {\n    this.#map = parsedData;\n    this.#data = rawData;\n  }\n\n  getRaw() {\n    return this.#data;\n  }\n\n  get(name) {\n    return this.#map.get(name) ?? null;\n  }\n\n  [Symbol.iterator]() {\n    return this.#map.entries();\n  }\n}\n\nexport { Metadata };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  info,\n  RenderingIntentFlag,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\n\nconst INTERNAL = Symbol(\"INTERNAL\");\n\nclass OptionalContentGroup {\n  #isDisplay = false;\n\n  #isPrint = false;\n\n  #userSet = false;\n\n  #visible = true;\n\n  constructor(renderingIntent, { name, intent, usage, rbGroups }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n    this.rbGroups = rbGroups;\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const { print, view } = this.usage;\n\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n\n  /**\n   * @ignore\n   */\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\n\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n\n  #groups = new Map();\n\n  #initialHash = null;\n\n  #order = null;\n\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n\n    this.name = null;\n    this.creator = null;\n\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(\n        group.id,\n        new OptionalContentGroup(renderingIntent, group)\n      );\n    }\n\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n\n    // The following code must always run *last* in the constructor.\n    this.#initialHash = this.getHash();\n  }\n\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      // Per the spec, the expression should be preferred if available.\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        // Default\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n\n  setVisibility(id, visible = true, preserveRB = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n\n    // If the visibility is about to be set to `true` and the group belongs to\n    // any radiobutton groups, hide all other OCGs in these radiobutton groups,\n    // provided that radiobutton state relationships are to be preserved.\n    if (preserveRB && visible && group.rbGroups.length) {\n      for (const rbGroup of group.rbGroups) {\n        for (const otherId of rbGroup) {\n          if (otherId !== id) {\n            this.#groups.get(otherId)?._setVisible(INTERNAL, false, true);\n          }\n        }\n      }\n    }\n\n    group._setVisible(INTERNAL, !!visible, /* userSet = */ true);\n\n    this.#cachedGetHash = null;\n  }\n\n  setOCGState({ state, preserveRB }) {\n    let operator;\n\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          this.setVisibility(elem, true, preserveRB);\n          break;\n        case \"OFF\":\n          this.setVisibility(elem, false, preserveRB);\n          break;\n        case \"Toggle\":\n          this.setVisibility(elem, !group.visible, preserveRB);\n          break;\n      }\n    }\n\n    this.#cachedGetHash = null;\n  }\n\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return (this.#cachedGetHash = hash.hexdigest());\n  }\n\n  [Symbol.iterator]() {\n    return this.#groups.entries();\n  }\n}\n\nexport { OptionalContentConfig };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"../interfaces\").IPDFStream} IPDFStream */\n/** @typedef {import(\"../interfaces\").IPDFStreamReader} IPDFStreamReader */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../interfaces\").IPDFStreamRangeReader} IPDFStreamRangeReader */\n\nimport { assert } from \"../shared/util.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\n/** @implements {IPDFStream} */\nclass PDFDataTransportStream {\n  constructor(\n    pdfDataRangeTransport,\n    { disableRange = false, disableStream = false }\n  ) {\n    assert(\n      pdfDataRangeTransport,\n      'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.'\n    );\n    const { length, initialData, progressiveDone, contentDispositionFilename } =\n      pdfDataRangeTransport;\n\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n\n    if (initialData?.length > 0) {\n      // Prevent any possible issues by only transferring a Uint8Array that\n      // completely \"utilizes\" its underlying ArrayBuffer.\n      const buffer =\n        initialData instanceof Uint8Array &&\n        initialData.byteLength === initialData.buffer.byteLength\n          ? initialData.buffer\n          : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({ begin, chunk });\n    });\n\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({ loaded, total });\n    });\n\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({ chunk });\n    });\n\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n\n    pdfDataRangeTransport.transportReady();\n  }\n\n  _onReceiveData({ begin, chunk }) {\n    // Prevent any possible issues by only transferring a Uint8Array that\n    // completely \"utilizes\" its underlying ArrayBuffer.\n    const buffer =\n      chunk instanceof Uint8Array &&\n      chunk.byteLength === chunk.buffer.byteLength\n        ? chunk.buffer\n        : new Uint8Array(chunk).buffer;\n\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(\n        found,\n        \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\"\n      );\n    }\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      // Reporting to first range reader, if it exists.\n      this._rangeReaders[0]?.onProgress?.({ loaded: evt.loaded });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total,\n      });\n    }\n  }\n\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFDataTransportStream.getFullReader can only be called once.\"\n    );\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(\n      this,\n      queuedChunks,\n      this._progressiveDone,\n      this._contentDispositionFilename\n    );\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFDataTransportStreamReader {\n  constructor(\n    stream,\n    queuedChunks,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename)\n      ? contentDispositionFilename\n      : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // Ignore new data.\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n\n  get headersReady() {\n    return this._headersReady;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // ignore new data\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({ value: chunk, done: false });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({ value: undefined, done: true });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\nexport { PDFDataTransportStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, ResponseException } from \"../shared/util.js\";\nimport { getFilenameFromContentDispositionHeader } from \"./content_disposition.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\nfunction createHeaders(isHttp, httpHeaders) {\n  const headers = new Headers();\n\n  if (!isHttp || !httpHeaders || typeof httpHeaders !== \"object\") {\n    return headers;\n  }\n  for (const key in httpHeaders) {\n    const val = httpHeaders[key];\n    if (val !== undefined) {\n      headers.append(key, val);\n    }\n  }\n  return headers;\n}\n\nfunction getResponseOrigin(url) {\n  // Notably, null is distinct from \"null\" string (e.g. from file:-URLs).\n  return URL.parse(url)?.origin ?? null;\n}\n\nfunction validateRangeRequestCapabilities({\n  responseHeaders,\n  isHttp,\n  rangeChunkSize,\n  disableRange,\n}) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      Number.isInteger(rangeChunkSize) && rangeChunkSize > 0,\n      \"rangeChunkSize must be an integer larger than zero.\"\n    );\n  }\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined,\n  };\n\n  const length = parseInt(responseHeaders.get(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n\n  returnValues.suggestedLength = length;\n\n  if (length <= 2 * rangeChunkSize) {\n    // The file size is smaller than the size of two chunks, so it does not\n    // make any sense to abort the request and retry with a range request.\n    return returnValues;\n  }\n\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (responseHeaders.get(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n\n  const contentEncoding = responseHeaders.get(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\n\nfunction extractFilenameFromHeader(responseHeaders) {\n  const contentDisposition = responseHeaders.get(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\n\nfunction createResponseError(status, url) {\n  return new ResponseException(\n    `Unexpected server response (${status}) while retrieving PDF \"${url}\".`,\n    status,\n    /* missing = */ status === 404 || (status === 0 && url.startsWith(\"file:\"))\n  );\n}\n\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\nexport {\n  createHeaders,\n  createResponseError,\n  extractFilenameFromHeader,\n  getResponseOrigin,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n};\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringToBytes } from \"../shared/util.js\";\n\n// This getFilenameFromContentDispositionHeader function is adapted from\n// https://github.com/Rob--W/open-in-browser/blob/7e2e35a38b8b4e981b11da7b2f01df0149049e92/extension/content-disposition.js\n// with the following changes:\n// - Modified to conform to PDF.js's coding style.\n// - Move return to the end of the function to prevent Babel from dropping the\n//   function declarations.\n\n/**\n * Extract file name from the Content-Disposition HTTP response header.\n *\n * @param {string} contentDisposition\n * @returns {string} Filename, if found in the Content-Disposition header.\n */\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n\n  // filename*=ext-value (\"ext-value\" from RFC 5987, referenced by RFC 6266).\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // Continuations (RFC 2231 section 3, referenced by RFC 5987 section 3.1).\n  // filename*n*=part\n  // filename*n=part\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    // RFC 2047, section\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n\n  // filename=value (RFC 5987, section 4.1).\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // After this line there are only function declarations. We cannot put\n  // \"return\" here for readability because babel would then drop the function\n  // declarations...\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\n      \"(?:^|;)\\\\s*\" +\n        attributePattern +\n        \"\\\\s*=\\\\s*\" +\n        // Captures: value = token | quoted-string\n        // (RFC 2616, section 3.6 and referenced by RFC 6266 4.1)\n        \"(\" +\n        '[^\";\\\\s][^;\\\\s]*' +\n        \"|\" +\n        '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' +\n        \")\",\n      flags\n    );\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {\n        // TextDecoder constructor threw - unrecognized encoding.\n      }\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      // Maybe multi-byte UTF-8.\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        // Try iso-8859-1 encoding.\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    // Iterate over all filename*n= and filename*n*= with n being an integer\n    // of at least zero. Any non-zero number must not start with '0'.\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match; // eslint-disable-line prefer-const\n      n = parseInt(n, 10);\n      if (n in matches) {\n        // Ignore anything after the invalid second filename*0.\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        // Numbers must be consecutive. Truncate when there is a hole.\n        break;\n      }\n      let [quot, part] = matches[n]; // eslint-disable-line prefer-const\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      // Find the first unescaped \" and terminate there.\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1; // Truncates and stop the iteration.\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    // Decodes \"ext-value\" from RFC 5987.\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      // Some servers send \"filename*=\" without encoding 'language' prefix,\n      // e.g. in https://github.com/Rob--W/open-in-browser/issues/26\n      // Let's accept the value like Firefox (57) (Chrome 62 rejects it).\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    // Ignore language (RFC 5987 section 3.2.1, and RFC 6266 section 4.1 ).\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    // RFC 2047-decode the result. Firefox tried to drop support for it, but\n    // backed out because some servers use it - https://bugzil.la/875615\n    // Firefox's condition for decoding is here: https://searchfox.org/mozilla-central/rev/4a590a5a15e35d88a3b23dd6ac3c471cf85b04a8/netwerk/mime/nsMIMEHeaderParamImpl.cpp#742-748\n\n    // We are more strict and only recognize RFC 2047-encoding if the value\n    // starts with \"=?\", since then it is likely that the full value is\n    // RFC 2047-encoded.\n\n    // Firefox also decodes words even where RFC 2047 section 5 states:\n    // \"An 'encoded-word' MUST NOT appear within a 'quoted-string'.\"\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    // RFC 2047, section 2.4\n    // encoded-word = \"=?\" charset \"?\" encoding \"?\" encoded-text \"?=\"\n    // charset = token (but let's restrict to characters that denote a\n    //       possibly valid encoding).\n    // encoding = q or b\n    // encoded-text = any printable ASCII character other than ? or space.\n    //        ... but Firefox permits ? and space.\n    return value.replaceAll(\n      /=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,\n      function (matches, charset, encoding, text) {\n        if (encoding === \"q\" || encoding === \"Q\") {\n          // RFC 2047 section 4.2.\n          text = text.replaceAll(\"_\", \" \");\n          text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n            return String.fromCharCode(parseInt(hex, 16));\n          });\n          return textdecode(charset, text);\n        } // else encoding is b or B - base64 (RFC 2047 section 4.1)\n        try {\n          text = atob(text);\n        } catch {}\n        return textdecode(charset, text);\n      }\n    );\n  }\n\n  return \"\";\n}\n\nexport { getFilenameFromContentDispositionHeader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AbortException, assert, warn } from \"../shared/util.js\";\nimport {\n  createHeaders,\n  createResponseError,\n  extractFilenameFromHeader,\n  getResponseOrigin,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./fetch_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\",\n  };\n}\n\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\n\n/** @implements {IPDFStream} */\nclass PDFFetchStream {\n  _responseOrigin = null;\n\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.headers = createHeaders(this.isHttp, source.httpHeaders);\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFFetchStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    // Always create a copy of the headers.\n    const headers = new Headers(stream.headers);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(headers, this._withCredentials, this._abortController)\n    )\n      .then(response => {\n        stream._responseOrigin = getResponseOrigin(response.url);\n\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseError(response.status, url);\n        }\n        this._reader = response.body.getReader();\n        this._headersCapability.resolve();\n\n        const responseHeaders = response.headers;\n\n        const { allowRangeRequests, suggestedLength } =\n          validateRangeRequestCapabilities({\n            responseHeaders,\n            isHttp: stream.isHttp,\n            rangeChunkSize: this._rangeChunkSize,\n            disableRange: this._disableRange,\n          });\n\n        this._isRangeSupported = allowRangeRequests;\n        // Setting right content length.\n        this._contentLength = suggestedLength || this._contentLength;\n\n        this._filename = extractFilenameFromHeader(responseHeaders);\n\n        // We need to stop reading when range is supported and streaming is\n        // disabled.\n        if (!this._isStreamingSupported && this._isRangeSupported) {\n          this.cancel(new AbortException(\"Streaming is disabled.\"));\n        }\n      })\n      .catch(this._headersCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._headersCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n\n    return { value: getArrayBuffer(value), done: false };\n  }\n\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n\n    this._abortController = new AbortController();\n    // Always create a copy of the headers.\n    const headers = new Headers(stream.headers);\n    headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(headers, this._withCredentials, this._abortController)\n    )\n      .then(response => {\n        const responseOrigin = getResponseOrigin(response.url);\n\n        if (responseOrigin !== stream._responseOrigin) {\n          throw new Error(\n            `Expected range response-origin \"${responseOrigin}\" to match \"${stream._responseOrigin}\".`\n          );\n        }\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseError(response.status, url);\n        }\n        this._readCapability.resolve();\n        this._reader = response.body.getReader();\n      })\n      .catch(this._readCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({ loaded: this._loaded });\n\n    return { value: getArrayBuffer(value), done: false };\n  }\n\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\nexport { PDFFetchStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, stringToBytes, warn } from \"../shared/util.js\";\nimport {\n  createHeaders,\n  createResponseError,\n  extractFilenameFromHeader,\n  getResponseOrigin,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./network.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\n\nfunction getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\n\nclass NetworkManager {\n  _responseOrigin = null;\n\n  constructor({ url, httpHeaders, withCredentials }) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.headers = createHeaders(this.isHttp, httpHeaders);\n    this.withCredentials = withCredentials || false;\n\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = (this.pendingRequests[xhrId] = { xhr });\n\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const [key, val] of this.headers) {\n      xhr.setRequestHeader(key, val);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n\n    assert(args.onError, \"Expected `onError` callback to be provided.\");\n    xhr.onerror = () => {\n      args.onError(xhr.status);\n    };\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n\n    xhr.send(null);\n\n    return xhrId;\n  }\n\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n\n    if (xhr.readyState !== 4) {\n      return;\n    }\n\n    if (!(xhrId in this.pendingRequests)) {\n      // The XHR request might have been aborted in onHeadersReceived()\n      // callback, in which case we should abort request.\n      return;\n    }\n\n    delete this.pendingRequests[xhrId];\n\n    // Success status == 0 can be on ftp, file and other protocols.\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n\n    // From http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2:\n    // \"A server MAY ignore the Range header\". This means it's possible to\n    // get a 200 rather than a 206 response from a range request.\n    const ok_response_on_range_request =\n      xhrStatus === OK_RESPONSE &&\n      pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n\n    if (\n      !ok_response_on_range_request &&\n      xhrStatus !== pendingRequest.expectedStatus\n    ) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n\n    const chunk = getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      if (matches) {\n        pendingRequest.onDone({\n          begin: parseInt(matches[1], 10),\n          chunk,\n        });\n      } else {\n        warn(`Missing or invalid \"Content-Range\" header.`);\n        pendingRequest.onError(0);\n      }\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk,\n      });\n    } else {\n      pendingRequest.onError(xhr.status);\n    }\n  }\n\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\n\n/** @implements {IPDFStream} */\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source);\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNetworkStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(\n      this._manager,\n      this._source\n    );\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(\n      this._manager,\n      begin,\n      end\n    );\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n\n    this._url = source.url;\n    this._fullRequestId = manager.request({\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    });\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length; // Optional\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n\n    this.onProgress = null;\n  }\n\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n\n    this._manager._responseOrigin = getResponseOrigin(\n      fullRequestXhr.responseURL\n    );\n\n    const rawResponseHeaders = fullRequestXhr.getAllResponseHeaders();\n    const responseHeaders = new Headers(\n      rawResponseHeaders\n        ? rawResponseHeaders\n            .trimStart()\n            .replace(/[^\\S ]+$/, \"\") // Not `trimEnd`, to keep regular spaces.\n            .split(/[\\r\\n]+/)\n            .map(x => {\n              const [key, ...val] = x.split(\": \");\n              return [key, val.join(\": \")];\n            })\n        : []\n    );\n\n    const { allowRangeRequests, suggestedLength } =\n      validateRangeRequestCapabilities({\n        responseHeaders,\n        isHttp: this._manager.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange,\n      });\n\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    // Setting right content length.\n    this._contentLength = suggestedLength || this._contentLength;\n\n    this._filename = extractFilenameFromHeader(responseHeaders);\n\n    if (this._isRangeSupported) {\n      // NOTE: by cancelling the full request, and then issuing range\n      // requests, there will be an issue for sites where you can only\n      // request the pdf once. However, if this is the case, then the\n      // server should not be returning that it can support range requests.\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n\n    this._headersCapability.resolve();\n  }\n\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({ value: data.chunk, done: false });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  _onError(status) {\n    this._storedError = createResponseError(status, this._url);\n    this._headersCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength,\n    });\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  async read() {\n    await this._headersCapability.promise;\n\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    this._headersCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n\n    this._url = manager.url;\n    this._requestId = manager.request({\n      begin,\n      end,\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    });\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n\n  _onHeadersReceived() {\n    const responseOrigin = getResponseOrigin(\n      this._manager.getRequestXhr(this._requestId)?.responseURL\n    );\n\n    if (responseOrigin !== this._manager._responseOrigin) {\n      this._storedError = new Error(\n        `Expected range response-origin \"${responseOrigin}\" to match \"${this._manager._responseOrigin}\".`\n      );\n      this._onError(0);\n    }\n  }\n\n  _close() {\n    this.onClosed?.(this);\n  }\n\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n\n  _onError(status) {\n    this._storedError ??= createResponseError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({ loaded: evt.loaded });\n    }\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\nexport { PDFNetworkStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals process */\n\nimport { AbortException, assert } from \"../shared/util.js\";\nimport { createResponseError } from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst urlRegex = /^[a-z][a-z0-9\\-+.]+:/i;\n\nfunction parseUrlOrPath(sourceUrl) {\n  if (urlRegex.test(sourceUrl)) {\n    return new URL(sourceUrl);\n  }\n  const url = process.getBuiltinModule(\"url\");\n  return new URL(url.pathToFileURL(sourceUrl));\n}\n\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrlOrPath(source.url);\n    assert(\n      this.url.protocol === \"file:\",\n      \"PDFNodeStream only supports file:// URLs.\"\n    );\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNodeStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFNodeStreamFsFullReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = new PDFNodeStreamFsRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\nclass PDFNodeStreamFsFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length; // optional\n    this._loaded = 0;\n    this._filename = null;\n\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n\n    const fs = process.getBuiltinModule(\"fs\");\n    fs.promises.lstat(this._url).then(\n      stat => {\n        // Setting right content length.\n        this._contentLength = stat.size;\n\n        this._setReadableStream(fs.createReadStream(this._url));\n        this._headersCapability.resolve();\n      },\n      error => {\n        if (error.code === \"ENOENT\") {\n          error = createResponseError(/* status = */ 0, this._url.href);\n        }\n        this._storedError = error;\n        this._headersCapability.reject(error);\n      }\n    );\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readable to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // We need to stop reading when range is supported and streaming is\n    // disabled.\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n\n    // Destroy ReadableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nclass PDFNodeStreamFsRangeReader {\n  constructor(stream, start, end) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n\n    const fs = process.getBuiltinModule(\"fs\");\n    this._setReadableStream(\n      fs.createReadStream(this._url, { start, end: end - 1 })\n    );\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({ loaded: this._loaded });\n\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readableStream to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // Destroy readableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nexport { PDFNodeStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\n\n/**\n * A PDF document and page is built of many objects. E.g. there are objects for\n * fonts, images, rendering code, etc. These objects may get processed inside of\n * a worker. This class implements some basic methods to manage these objects.\n */\nclass PDFObjects {\n  #objs = Object.create(null);\n\n  /**\n   * Ensures there is an object defined for `objId`.\n   *\n   * @param {string} objId\n   * @returns {Object}\n   */\n  #ensureObj(objId) {\n    return (this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA,\n    });\n  }\n\n  /**\n   * If called *without* callback, this returns the data of `objId` but the\n   * object needs to be resolved. If it isn't, this method throws.\n   *\n   * If called *with* a callback, the callback is called with the data of the\n   * object once the object is resolved. That means, if you call this method\n   * and the object is already resolved, the callback gets called right away.\n   *\n   * @param {string} objId\n   * @param {function} [callback]\n   * @returns {any}\n   */\n  get(objId, callback = null) {\n    // If there is a callback, then the get can be async and the object is\n    // not required to be resolved right now.\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    // If there isn't a callback, the user expects to get the resolved data\n    // directly.\n    const obj = this.#objs[objId];\n    // If there isn't an object yet or the object isn't resolved, then the\n    // data isn't ready yet!\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n\n  /**\n   * @param {string} objId\n   * @returns {boolean}\n   */\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n\n  /**\n   * @param {string} objId\n   * @returns {boolean}\n   */\n  delete(objId) {\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      // Only allow removing the object *after* it's been resolved.\n      return false;\n    }\n    delete this.#objs[objId];\n    return true;\n  }\n\n  /**\n   * Resolves the object `objId` with optional `data`.\n   *\n   * @param {string} objId\n   * @param {any} [data]\n   */\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n\n  clear() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n      data?.bitmap?.close(); // Release any `ImageBitmap` data.\n    }\n    this.#objs = Object.create(null);\n  }\n\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\nexport { PDFObjects };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./api\").TextContent} TextContent */\n\nimport {\n  AbortException,\n  FeatureTest,\n  shadow,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport { OutputScale, setLayerDimensions } from \"./display_utils.js\";\n\n/**\n * @typedef {Object} TextLayerParameters\n * @property {ReadableStream | TextContent} textContentSource - Text content to\n *   render, i.e. the value returned by the page's `streamTextContent` or\n *   `getTextContent` method.\n * @property {HTMLElement} container - The DOM node that will contain the text\n *   runs.\n * @property {PageViewport} viewport - The target viewport to properly layout\n *   the text runs.\n */\n\n/**\n * @typedef {Object} TextLayerUpdateParameters\n * @property {PageViewport} viewport - The target viewport to properly layout\n *   the text runs.\n * @property {function} [onBefore] - Callback invoked before the textLayer is\n *   updated in the DOM.\n */\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\n\nclass TextLayer {\n  #capability = Promise.withResolvers();\n\n  #container = null;\n\n  #disableProcessItems = false;\n\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n\n  #lang = null;\n\n  #layoutTextParams = null;\n\n  #pageHeight = 0;\n\n  #pageWidth = 0;\n\n  #reader = null;\n\n  #rootContainer = null;\n\n  #rotation = 0;\n\n  #scale = 0;\n\n  #styleCache = Object.create(null);\n\n  #textContentItemsStr = [];\n\n  #textContentSource = null;\n\n  #textDivs = [];\n\n  #textDivProperties = new WeakMap();\n\n  #transform = null;\n\n  static #ascentCache = new Map();\n\n  static #canvasContexts = new Map();\n\n  static #canvasCtxFonts = new WeakMap();\n\n  static #minFontSize = null;\n\n  static #pendingTextLayers = new Set();\n\n  /**\n   * @param {TextLayerParameters} options\n   */\n  constructor({ textContentSource, container, viewport }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n      typeof textContentSource === \"object\"\n    ) {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        },\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n\n    this.#scale = viewport.scale * OutputScale.pixelRatio;\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      div: null,\n      properties: null,\n      ctx: null,\n    };\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n\n    TextLayer.#ensureMinFontSizeComputed();\n\n    setLayerDimensions(container, viewport);\n\n    // Always clean-up the temporary canvas once rendering is no longer pending.\n    this.#capability.promise\n      .finally(() => {\n        TextLayer.#pendingTextLayers.delete(this);\n        this.#layoutTextParams = null;\n        this.#styleCache = null;\n      })\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"pageWidth\", {\n        get() {\n          return this.#pageWidth;\n        },\n      });\n      Object.defineProperty(this, \"pageHeight\", {\n        get() {\n          return this.#pageHeight;\n        },\n      });\n    }\n  }\n\n  static get fontFamilyMap() {\n    const { isWindows, isFirefox } = FeatureTest.platform;\n    return shadow(\n      this,\n      \"fontFamilyMap\",\n      new Map([\n        [\n          \"sans-serif\",\n          `${isWindows && isFirefox ? \"Calibri, \" : \"\"}sans-serif`,\n        ],\n        [\n          \"monospace\",\n          `${isWindows && isFirefox ? \"Lucida Console, \" : \"\"}monospace`,\n        ],\n      ])\n    );\n  }\n\n  /**\n   * Render the textLayer.\n   * @returns {Promise}\n   */\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({ value, done }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n\n    return this.#capability.promise;\n  }\n\n  /**\n   * Update a previously rendered textLayer, if necessary.\n   * @param {TextLayerUpdateParameters} options\n   * @returns {undefined}\n   */\n  update({ viewport, onBefore = null }) {\n    const scale = viewport.scale * OutputScale.pixelRatio;\n    const rotation = viewport.rotation;\n\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, { rotation });\n    }\n\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang),\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n\n  /**\n   * Cancel rendering of the textLayer.\n   * @returns {undefined}\n   */\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n\n    this.#reader?.cancel(abortEx).catch(() => {\n      // Avoid \"Uncaught promise\" messages in the console.\n    });\n    this.#reader = null;\n\n    this.#capability.reject(abortEx);\n  }\n\n  /**\n   * @type {Array<HTMLElement>} HTML elements that correspond to the text items\n   *   of the textContent input.\n   *   This is output and will initially be set to an empty array.\n   */\n  get textDivs() {\n    return this.#textDivs;\n  }\n\n  /**\n   * @type {Array<string>} Strings that correspond to the `str` property of\n   *   the text items of the textContent input.\n   *   This is output and will initially be set to an empty array\n   */\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ??= TextLayer.#getCtx(this.#lang);\n\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n\n    for (const item of items) {\n      // No point in rendering many divs as it would make the browser\n      // unusable even after the divs are rendered.\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n\n        this.#disableProcessItems = true; // Avoid multiple warnings for one page.\n        return;\n      }\n\n      if (item.str === undefined) {\n        if (\n          item.type === \"beginMarkedContentProps\" ||\n          item.type === \"beginMarkedContent\"\n        ) {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n\n  #appendText(geom) {\n    // Initialize all used properties to keep the caches monomorphic.\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0,\n    };\n    this.#textDivs.push(textDiv);\n\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n\n    let fontFamily =\n      (this.#fontInspectorEnabled && style.fontSubstitution) ||\n      style.fontFamily;\n\n    // Workaround for bug 1922063.\n    fontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent =\n      fontHeight * TextLayer.#getAscent(fontFamily, style, this.#lang);\n\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n\n    const scaleFactorStr = \"calc(var(--total-scale-factor) *\";\n    const divStyle = textDiv.style;\n    // Setting the style properties individually, rather than all at once,\n    // should be OK since the `textDiv` isn't appended to the document yet.\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${((100 * left) / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${((100 * top) / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      // We're in a marked content span, hence we can't use percents.\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    // We multiply the font size by #minFontSize, and then #layout will\n    // scale the element by 1/#minFontSize. This allows us to effectively\n    // ignore the minimum font size enforced by the browser, so that the text\n    // layer <span>s can always match the size of the text in the canvas.\n    divStyle.fontSize = `${scaleFactorStr}${(TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n\n    textDivProperties.fontSize = fontHeight;\n\n    // Keeps screen readers from pausing on every new text span.\n    textDiv.setAttribute(\"role\", \"presentation\");\n\n    textDiv.textContent = geom.str;\n    // geom.dir may be 'ttb' for vertical texts.\n    textDiv.dir = geom.dir;\n\n    // `fontName` is only used by the FontInspector, and we only use `dataset`\n    // here to make the font name available in the debugger.\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName =\n        style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    // We don't bother scaling single-char text divs, because it has very\n    // little effect on text highlighting. This makes scrolling on docs with\n    // lots of such divs a lot faster.\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      // When the horizontal/vertical scaling differs significantly, also scale\n      // even single-char text to improve highlighting (fixes issue11713.pdf).\n      if (\n        absScaleX !== absScaleY &&\n        Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5\n      ) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n\n    // Finally, layout and append the text to the DOM.\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n\n  #layout(params) {\n    const { div, properties, ctx } = params;\n    const { style } = div;\n\n    let transform = \"\";\n    if (TextLayer.#minFontSize > 1) {\n      transform = `scale(${1 / TextLayer.#minFontSize})`;\n    }\n\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const { fontFamily } = style;\n      const { canvasWidth, fontSize } = properties;\n\n      TextLayer.#ensureCtxFont(ctx, fontSize * this.#scale, fontFamily);\n      // Only measure the width for multi-char text divs, see `appendText`.\n      const { width } = ctx.measureText(div.textContent);\n\n      if (width > 0) {\n        transform = `scaleX(${(canvasWidth * this.#scale) / width}) ${transform}`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n\n  /**\n   * Clean-up global textLayer data.\n   * @returns {undefined}\n   */\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n\n    for (const { canvas } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n\n  static #getCtx(lang = null) {\n    let ctx = this.#canvasContexts.get((lang ||= \"\"));\n    if (!ctx) {\n      // We don't use an OffscreenCanvas here because we use serif/sans serif\n      // fonts with it and they depends on the locale.\n      // In Firefox, the <html> element get a lang attribute that depends on\n      // what Fluent returns for the locale and the OffscreenCanvas uses\n      // the OS locale.\n      // Those two locales can be different and consequently the used fonts will\n      // be different (see bug 1869001).\n      // Ideally, we should use in the text layer the fonts we've in the pdf (or\n      // their replacements when they aren't embedded) and then we can use an\n      // OffscreenCanvas.\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      ctx = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: true,\n      });\n      this.#canvasContexts.set(lang, ctx);\n\n      // Also, initialize state for the `#ensureCtxFont` method.\n      this.#canvasCtxFonts.set(ctx, { size: 0, family: \"\" });\n    }\n    return ctx;\n  }\n\n  static #ensureCtxFont(ctx, size, family) {\n    const cached = this.#canvasCtxFonts.get(ctx);\n    if (size === cached.size && family === cached.family) {\n      return; // The font is already set.\n    }\n    ctx.font = `${size}px ${family}`;\n    cached.size = size;\n    cached.family = family;\n  }\n\n  /**\n   * Compute the minimum font size enforced by the browser.\n   */\n  static #ensureMinFontSizeComputed() {\n    if (this.#minFontSize !== null) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.style.opacity = 0;\n    div.style.lineHeight = 1;\n    div.style.fontSize = \"1px\";\n    div.style.position = \"absolute\";\n    div.textContent = \"X\";\n    document.body.append(div);\n    // In `display:block` elements contain a single line of text,\n    // the height matches the line height (which, when set to 1,\n    // matches the actual font size).\n    this.#minFontSize = div.getBoundingClientRect().height;\n    div.remove();\n  }\n\n  static #getAscent(fontFamily, style, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    this.#ensureCtxFont(ctx, DEFAULT_FONT_SIZE, fontFamily);\n    const metrics = ctx.measureText(\"\");\n\n    const ascent = metrics.fontBoundingBoxAscent;\n    const descent = Math.abs(metrics.fontBoundingBoxDescent);\n\n    ctx.canvas.width = ctx.canvas.height = 0;\n    let ratio = 0.8; // DEFAULT_FONT_ASCENT\n\n    if (ascent) {\n      ratio = ascent / (ascent + descent);\n    } else {\n      if (\n        (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n        FeatureTest.platform.isFirefox\n      ) {\n        warn(\n          \"Enable the `dom.textMetrics.fontBoundingBox.enabled` preference \" +\n            \"in `about:config` to improve TextLayer rendering.\"\n        );\n      }\n      if (style.ascent) {\n        ratio = style.ascent;\n      } else if (style.descent) {\n        ratio = 1 + style.descent;\n      }\n    }\n\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\n\nexport { TextLayer };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./api\").TextContent} TextContent */\n\nclass XfaText {\n  /**\n   * Walk an XFA tree and create an array of text nodes that is compatible\n   * with a regular PDFs TextContent. Currently, only TextItem.str is supported,\n   * all other fields and styles haven't been implemented.\n   *\n   * @param {Object} xfa - An XFA fake DOM object.\n   *\n   * @returns {TextContent}\n   */\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null),\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str,\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n\n  /**\n   * @param {string} name - DOM node name. (lower case)\n   *\n   * @returns {boolean} true if the DOM node should have a corresponding text\n   * node.\n   */\n  static shouldBuildText(name) {\n    return !(\n      name === \"textarea\" ||\n      name === \"input\" ||\n      name === \"option\" ||\n      name === \"select\"\n    );\n  }\n}\n\nexport { XfaText };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @module pdfjsLib\n */\n\nimport {\n  AbortException,\n  AnnotationMode,\n  assert,\n  FeatureTest,\n  getVerbosityLevel,\n  info,\n  isNodeJS,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  AnnotationStorage,\n  PrintAnnotationStorage,\n  SerializableEmpty,\n} from \"./annotation_storage.js\";\nimport {\n  deprecated,\n  isDataScheme,\n  isValidFetchUrl,\n  PageViewport,\n  RenderingCancelledException,\n  StatTimer,\n} from \"./display_utils.js\";\nimport { FontFaceObject, FontLoader } from \"./font_loader.js\";\nimport {\n  getDataProp,\n  getFactoryUrlProp,\n  getUrlProp,\n  isRefProxy,\n  LoopbackPort,\n} from \"./api_utils.js\";\nimport { MessageHandler, wrapReason } from \"../shared/message_handler.js\";\nimport {\n  NodeCanvasFactory,\n  NodeCMapReaderFactory,\n  NodeFilterFactory,\n  NodeStandardFontDataFactory,\n  NodeWasmFactory,\n} from \"display-node_utils\";\nimport { CanvasDependencyTracker } from \"./canvas_dependency_tracker.js\";\nimport { CanvasGraphics } from \"./canvas.js\";\nimport { DOMCanvasFactory } from \"./canvas_factory.js\";\nimport { DOMCMapReaderFactory } from \"display-cmap_reader_factory\";\nimport { DOMFilterFactory } from \"./filter_factory.js\";\nimport { DOMStandardFontDataFactory } from \"display-standard_fontdata_factory\";\nimport { DOMWasmFactory } from \"display-wasm_factory\";\nimport { GlobalWorkerOptions } from \"./worker_options.js\";\nimport { Metadata } from \"./metadata.js\";\nimport { OptionalContentConfig } from \"./optional_content_config.js\";\nimport { PDFDataTransportStream } from \"./transport_stream.js\";\nimport { PDFFetchStream } from \"display-fetch_stream\";\nimport { PDFNetworkStream } from \"display-network\";\nimport { PDFNodeStream } from \"display-node_stream\";\nimport { PDFObjects } from \"./pdf_objects.js\";\nimport { TextLayer } from \"./text_layer.js\";\nimport { XfaText } from \"./xfa_text.js\";\n\nconst RENDERING_CANCELLED_TIMEOUT = 100; // ms\n\n/**\n * @typedef { Int8Array | Uint8Array | Uint8ClampedArray |\n *            Int16Array | Uint16Array |\n *            Int32Array | Uint32Array | Float32Array |\n *            Float64Array\n * } TypedArray\n */\n\n/**\n * @typedef {Object} RefProxy\n * @property {number} num\n * @property {number} gen\n */\n\n/**\n * Document initialization / loading parameters object.\n *\n * @typedef {Object} DocumentInitParameters\n * @property {string | URL} [url] - The URL of the PDF.\n * @property {TypedArray | ArrayBuffer | Array<number> | string} [data] -\n *   Binary PDF data.\n *   Use TypedArrays (Uint8Array) to improve the memory usage. If PDF data is\n *   BASE64-encoded, use `atob()` to convert it to a binary string first.\n *\n *   NOTE: If TypedArrays are used they will generally be transferred to the\n *   worker-thread. This will help reduce main-thread memory usage, however\n *   it will take ownership of the TypedArrays.\n * @property {Object} [httpHeaders] - Basic authentication headers.\n * @property {boolean} [withCredentials] - Indicates whether or not\n *   cross-site Access-Control requests should be made using credentials such\n *   as cookies or authorization headers. The default is `false`.\n * @property {string} [password] - For decrypting password-protected PDFs.\n * @property {number} [length] - The PDF file length. It's used for progress\n *   reports and range requests operations.\n * @property {PDFDataRangeTransport} [range] - Allows for using a custom range\n *   transport implementation.\n * @property {number} [rangeChunkSize] - Specify maximum number of bytes fetched\n *   per range request. The default value is 65536 (= 2^16).\n * @property {PDFWorker} [worker] - The worker that will be used for loading and\n *   parsing the PDF data.\n * @property {number} [verbosity] - Controls the logging level; the constants\n *   from {@link VerbosityLevel} should be used.\n * @property {string} [docBaseUrl] - The base URL of the document, used when\n *   attempting to recover valid absolute URLs for annotations, and outline\n *   items, that (incorrectly) only specify relative URLs.\n * @property {string} [cMapUrl] - The URL where the predefined Adobe CMaps are\n *   located. Include the trailing slash.\n * @property {boolean} [cMapPacked] - Specifies if the Adobe CMaps are binary\n *   packed or not. The default value is `true`.\n * @property {Object} [CMapReaderFactory] - The factory that will be used when\n *   reading built-in CMap files.\n *   The default value is {DOMCMapReaderFactory}.\n * @property {string} [iccUrl] - The URL where the predefined ICC profiles are\n *   located. Include the trailing slash.\n * @property {boolean} [useSystemFonts] - When `true`, fonts that aren't\n *   embedded in the PDF document will fallback to a system font.\n *   The default value is `true` in web environments and `false` in Node.js;\n *   unless `disableFontFace === true` in which case this defaults to `false`\n *   regardless of the environment (to prevent completely broken fonts).\n * @property {string} [standardFontDataUrl] - The URL where the standard font\n *   files are located. Include the trailing slash.\n * @property {Object} [StandardFontDataFactory] - The factory that will be used\n *   when reading the standard font files.\n *   The default value is {DOMStandardFontDataFactory}.\n * @property {string} [wasmUrl] - The URL where the wasm files are located.\n *   Include the trailing slash.\n * @property {Object} [WasmFactory] - The factory that will be used\n *   when reading the wasm files.\n *   The default value is {DOMWasmFactory}.\n * @property {boolean} [useWorkerFetch] - Enable using the Fetch API in the\n *   worker-thread when reading CMap and standard font files. When `true`,\n *   the `CMapReaderFactory`, `StandardFontDataFactory`, and `WasmFactory`\n *   options are ignored.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {boolean} [useWasm] - Attempt to use WebAssembly in order to\n *    improve e.g. image decoding performance.\n *    The default value is `true`.\n * @property {boolean} [stopAtErrors] - Reject certain promises, e.g.\n *   `getOperatorList`, `getTextContent`, and `RenderTask`, when the associated\n *   PDF data cannot be successfully parsed, instead of attempting to recover\n *   whatever possible of the data. The default value is `false`.\n * @property {number} [maxImageSize] - The maximum allowed image size in total\n *   pixels, i.e. width * height. Images above this value will not be rendered.\n *   Use -1 for no limit, which is also the default value.\n * @property {boolean} [isEvalSupported] - Determines if we can evaluate strings\n *   as JavaScript. Primarily used to improve performance of PDF functions.\n *   The default value is `true`.\n * @property {boolean} [isOffscreenCanvasSupported] - Determines if we can use\n *   `OffscreenCanvas` in the worker. Primarily used to improve performance of\n *   image conversion/rendering.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {boolean} [isImageDecoderSupported] - Determines if we can use\n *   `ImageDecoder` in the worker. Primarily used to improve performance of\n *   image conversion/rendering.\n *   The default value is `true` in web environments and `false` in Node.js.\n *\n *   NOTE: Also temporarily disabled in Chromium browsers, until we no longer\n *   support the affected browser versions, because of various bugs:\n *\n *    - Crashes when using the BMP decoder with huge images, e.g. issue6741.pdf;\n *      see https://issues.chromium.org/issues/374807001\n *\n *    - Broken images when using the JPEG decoder with images that have custom\n *      colour profiles, e.g. GitHub discussion 19030;\n *      see https://issues.chromium.org/issues/378869810\n *\n * @property {number} [canvasMaxAreaInBytes] - The integer value is used to\n *   know when an image must be resized (uses `OffscreenCanvas` in the worker).\n *   If it's -1 then a possibly slow algorithm is used to guess the max value.\n * @property {boolean} [disableFontFace] - By default fonts are converted to\n *   OpenType fonts and loaded via the Font Loading API or `@font-face` rules.\n *   If disabled, fonts will be rendered using a built-in font renderer that\n *   constructs the glyphs with primitive path commands.\n *   The default value is `false` in web environments and `true` in Node.js.\n * @property {boolean} [fontExtraProperties] - Include additional properties,\n *   which are unused during rendering of PDF documents, when exporting the\n *   parsed font data from the worker-thread. This may be useful for debugging\n *   purposes (and backwards compatibility), but note that it will lead to\n *   increased memory usage. The default value is `false`.\n * @property {boolean} [enableXfa] - Render Xfa forms if any.\n *   The default value is `false`.\n * @property {HTMLDocument} [ownerDocument] - Specify an explicit document\n *   context to create elements with and to load resources, such as fonts,\n *   into. Defaults to the current document.\n * @property {boolean} [disableRange] - Disable range request loading of PDF\n *   files. When enabled, and if the server supports partial content requests,\n *   then the PDF will be fetched in chunks. The default value is `false`.\n * @property {boolean} [disableStream] - Disable streaming of PDF file data.\n *   By default PDF.js attempts to load PDF files in chunks. The default value\n *   is `false`.\n * @property {boolean} [disableAutoFetch] - Disable pre-fetching of PDF file\n *   data. When range requests are enabled PDF.js will automatically keep\n *   fetching more data even if it isn't needed to display the current page.\n *   The default value is `false`.\n *\n *   NOTE: It is also necessary to disable streaming, see above, in order for\n *   disabling of pre-fetching to work correctly.\n * @property {boolean} [pdfBug] - Enables special hooks for debugging PDF.js\n *   (see `web/debugger.js`). The default value is `false`.\n * @property {Object} [CanvasFactory] - The factory that will be used when\n *    creating canvases. The default value is {DOMCanvasFactory}.\n * @property {Object} [FilterFactory] - The factory that will be used to\n *    create SVG filters when rendering some images on the main canvas.\n *    The default value is {DOMFilterFactory}.\n * @property {boolean} [enableHWA] - Enables hardware acceleration for\n *   rendering. The default value is `false`.\n */\n\n/**\n * This is the main entry point for loading a PDF and interacting with it.\n *\n * NOTE: If a URL is used to fetch the PDF data a standard Fetch API call (or\n * XHR as fallback) is used, which means it must follow same origin rules,\n * e.g. no cross-domain requests without CORS.\n *\n * @param {string | URL | TypedArray | ArrayBuffer | DocumentInitParameters}\n *   src - Can be a URL where a PDF file is located, a typed array (Uint8Array)\n *         already populated with data, or a parameter object.\n * @returns {PDFDocumentLoadingTask}\n */\nfunction getDocument(src = {}) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n    if (typeof src === \"string\" || src instanceof URL) {\n      src = { url: src };\n    } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n      src = { data: src };\n    }\n  }\n  const task = new PDFDocumentLoadingTask();\n  const { docId } = task;\n\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport =\n    src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize =\n    Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0\n      ? src.rangeChunkSize\n      : 2 ** 16;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  // Ignore \"data:\"-URLs, since they can't be used to recover valid absolute\n  // URLs anyway. We want to avoid sending them to the worker-thread, since\n  // they contain the *entire* PDF document and can thus be arbitrarily long.\n  const docBaseUrl =\n    typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl)\n      ? src.docBaseUrl\n      : null;\n  const cMapUrl = getFactoryUrlProp(src.cMapUrl);\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory =\n    src.CMapReaderFactory ||\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n      ? NodeCMapReaderFactory\n      : DOMCMapReaderFactory);\n  const iccUrl = getFactoryUrlProp(src.iccUrl);\n  const standardFontDataUrl = getFactoryUrlProp(src.standardFontDataUrl);\n  const StandardFontDataFactory =\n    src.StandardFontDataFactory ||\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n      ? NodeStandardFontDataFactory\n      : DOMStandardFontDataFactory);\n  const wasmUrl = getFactoryUrlProp(src.wasmUrl);\n  const WasmFactory =\n    src.WasmFactory ||\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n      ? NodeWasmFactory\n      : DOMWasmFactory);\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize =\n    Number.isInteger(src.maxImageSize) && src.maxImageSize > -1\n      ? src.maxImageSize\n      : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported =\n    typeof src.isOffscreenCanvasSupported === \"boolean\"\n      ? src.isOffscreenCanvasSupported\n      : !isNodeJS;\n  const isImageDecoderSupported =\n    // eslint-disable-next-line no-nested-ternary\n    typeof src.isImageDecoderSupported === \"boolean\"\n      ? src.isImageDecoderSupported\n      : // eslint-disable-next-line no-nested-ternary\n        typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")\n        ? true\n        : typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"CHROME\")\n          ? false\n          : !isNodeJS && (FeatureTest.platform.isFirefox || !globalThis.chrome);\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes)\n    ? src.canvasMaxAreaInBytes\n    : -1;\n  const disableFontFace =\n    typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const CanvasFactory =\n    src.CanvasFactory ||\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n      ? NodeCanvasFactory\n      : DOMCanvasFactory);\n  const FilterFactory =\n    src.FilterFactory ||\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS\n      ? NodeFilterFactory\n      : DOMFilterFactory);\n  const enableHWA = src.enableHWA === true;\n  const useWasm = src.useWasm !== false;\n\n  // Parameters whose default values depend on other parameters.\n  const length = rangeTransport ? rangeTransport.length : (src.length ?? NaN);\n  const useSystemFonts =\n    typeof src.useSystemFonts === \"boolean\"\n      ? src.useSystemFonts\n      : !isNodeJS && !disableFontFace;\n  const useWorkerFetch =\n    typeof src.useWorkerFetch === \"boolean\"\n      ? src.useWorkerFetch\n      : (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n        !!(\n          CMapReaderFactory === DOMCMapReaderFactory &&\n          StandardFontDataFactory === DOMStandardFontDataFactory &&\n          WasmFactory === DOMWasmFactory &&\n          cMapUrl &&\n          standardFontDataUrl &&\n          wasmUrl &&\n          isValidFetchUrl(cMapUrl, document.baseURI) &&\n          isValidFetchUrl(standardFontDataUrl, document.baseURI) &&\n          isValidFetchUrl(wasmUrl, document.baseURI)\n        );\n\n  // Parameters only intended for development/testing purposes.\n  const styleElement =\n    typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")\n      ? src.styleElement\n      : null;\n\n  // Set the main-thread verbosity level.\n  setVerbosityLevel(verbosity);\n\n  // Ensure that the various factories can be initialized, when necessary,\n  // since the user may provide *custom* ones.\n  const transportFactory = {\n    canvasFactory: new CanvasFactory({ ownerDocument, enableHWA }),\n    filterFactory: new FilterFactory({ docId, ownerDocument }),\n    cMapReaderFactory:\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      useWorkerFetch\n        ? null\n        : new CMapReaderFactory({ baseUrl: cMapUrl, isCompressed: cMapPacked }),\n    standardFontDataFactory:\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      useWorkerFetch\n        ? null\n        : new StandardFontDataFactory({ baseUrl: standardFontDataUrl }),\n    wasmFactory:\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      useWorkerFetch\n        ? null\n        : new WasmFactory({ baseUrl: wasmUrl }),\n  };\n\n  if (!worker) {\n    // Worker was not provided -- creating and owning our own. If message port\n    // is specified in global worker options, using it.\n    worker = PDFWorker.create({\n      verbosity,\n      port: GlobalWorkerOptions.workerPort,\n    });\n    task._worker = worker;\n  }\n\n  const docParams = {\n    docId,\n    apiVersion:\n      typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"TESTING\")\n        ? PDFJSDev.eval(\"BUNDLE_VERSION\")\n        : null,\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      isImageDecoderSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      useWasm,\n      useWorkerFetch,\n      cMapUrl,\n      iccUrl,\n      standardFontDataUrl,\n      wasmUrl,\n    },\n  };\n  const transportParams = {\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa,\n    },\n  };\n\n  worker.promise\n    .then(function () {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n\n      const workerIdPromise = worker.messageHandler.sendWithPromise(\n        \"GetDocRequest\",\n        docParams,\n        data ? [data.buffer] : null\n      );\n\n      let networkStream;\n      if (rangeTransport) {\n        networkStream = new PDFDataTransportStream(rangeTransport, {\n          disableRange,\n          disableStream,\n        });\n      } else if (!data) {\n        if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n          throw new Error(\"Not implemented: NetworkStream\");\n        }\n        if (!url) {\n          throw new Error(\"getDocument - no `url` parameter provided.\");\n        }\n        // eslint-disable-next-line no-nested-ternary\n        const NetworkStream = isValidFetchUrl(url)\n          ? PDFFetchStream\n          : typeof PDFJSDev !== \"undefined\" &&\n              PDFJSDev.test(\"GENERIC\") &&\n              isNodeJS\n            ? PDFNodeStream\n            : PDFNetworkStream;\n\n        networkStream = new NetworkStream({\n          url,\n          length,\n          httpHeaders,\n          withCredentials,\n          rangeChunkSize,\n          disableRange,\n          disableStream,\n        });\n      }\n\n      return workerIdPromise.then(workerId => {\n        if (task.destroyed) {\n          throw new Error(\"Loading aborted\");\n        }\n        if (worker.destroyed) {\n          throw new Error(\"Worker was destroyed\");\n        }\n\n        const messageHandler = new MessageHandler(docId, workerId, worker.port);\n        const transport = new WorkerTransport(\n          messageHandler,\n          task,\n          networkStream,\n          transportParams,\n          transportFactory,\n          enableHWA\n        );\n        task._transport = transport;\n        messageHandler.send(\"Ready\", null);\n      });\n    })\n    .catch(task._capability.reject);\n\n  return task;\n}\n\n/**\n * @typedef {Object} OnProgressParameters\n * @property {number} loaded - Currently loaded number of bytes.\n * @property {number} total - Total number of bytes in the PDF file.\n */\n\n/**\n * The loading task controls the operations required to load a PDF document\n * (such as network requests) and provides a way to listen for completion,\n * after which individual pages can be rendered.\n */\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n\n  /**\n   * @private\n   */\n  _capability = Promise.withResolvers();\n\n  /**\n   * @private\n   */\n  _transport = null;\n\n  /**\n   * @private\n   */\n  _worker = null;\n\n  /**\n   * Unique identifier for the document loading task.\n   * @type {string}\n   */\n  docId = `d${PDFDocumentLoadingTask.#docId++}`;\n\n  /**\n   * Whether the loading task is destroyed or not.\n   * @type {boolean}\n   */\n  destroyed = false;\n\n  /**\n   * Callback to request a password if a wrong or no password was provided.\n   * The callback receives two parameters: a function that should be called\n   * with the new password, and a reason (see {@link PasswordResponses}).\n   * @type {function}\n   */\n  onPassword = null;\n\n  /**\n   * Callback to be able to monitor the loading progress of the PDF file\n   * (necessary to implement e.g. a loading bar).\n   * The callback receives an {@link OnProgressParameters} argument.\n   * @type {function}\n   */\n  onProgress = null;\n\n  /**\n   * Promise for document loading task completion.\n   * @type {Promise<PDFDocumentProxy>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Abort all network requests and destroy the worker.\n   * @returns {Promise<void>} A promise that is resolved when destruction is\n   *   completed.\n   */\n  async destroy() {\n    this.destroyed = true;\n\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n\n    this._worker?.destroy();\n    this._worker = null;\n  }\n\n  /**\n   * Attempt to fetch the raw data of the PDF document, when e.g.\n   *  - An exception was thrown during document initialization.\n   *  - An `onPassword` callback is delaying initialization.\n   * @returns {Promise<Uint8Array>}\n   */\n  async getData() {\n    return this._transport.getData();\n  }\n}\n\n/**\n * Abstract class to support range requests file loading.\n *\n * NOTE: The TypedArrays passed to the constructor and relevant methods below\n * will generally be transferred to the worker-thread. This will help reduce\n * main-thread memory usage, however it will take ownership of the TypedArrays.\n */\nclass PDFDataRangeTransport {\n  #capability = Promise.withResolvers();\n\n  #progressiveDoneListeners = [];\n\n  #progressiveReadListeners = [];\n\n  #progressListeners = [];\n\n  #rangeListeners = [];\n\n  /**\n   * @param {number} length\n   * @param {Uint8Array|null} initialData\n   * @param {boolean} [progressiveDone]\n   * @param {string} [contentDispositionFilename]\n   */\n  constructor(\n    length,\n    initialData,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addRangeListener(listener) {\n    this.#rangeListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressListener(listener) {\n    this.#progressListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressiveReadListener(listener) {\n    this.#progressiveReadListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressiveDoneListener(listener) {\n    this.#progressiveDoneListeners.push(listener);\n  }\n\n  /**\n   * @param {number} begin\n   * @param {Uint8Array|null} chunk\n   */\n  onDataRange(begin, chunk) {\n    for (const listener of this.#rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n\n  /**\n   * @param {number} loaded\n   * @param {number|undefined} total\n   */\n  onDataProgress(loaded, total) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n\n  /**\n   * @param {Uint8Array|null} chunk\n   */\n  onDataProgressiveRead(chunk) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n\n  onDataProgressiveDone() {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n\n  transportReady() {\n    this.#capability.resolve();\n  }\n\n  /**\n   * @param {number} begin\n   * @param {number} end\n   */\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n\n  abort() {}\n}\n\n/**\n * Proxy to a `PDFDocument` in the worker thread.\n */\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getNetworkStreamName\", {\n        value: () => this._transport.getNetworkStreamName(),\n      });\n      Object.defineProperty(this, \"getXFADatasets\", {\n        value: () => this._transport.getXFADatasets(),\n      });\n      Object.defineProperty(this, \"getXRefPrevValue\", {\n        value: () => this._transport.getXRefPrevValue(),\n      });\n      Object.defineProperty(this, \"getStartXRefPos\", {\n        value: () => this._transport.getStartXRefPos(),\n      });\n      Object.defineProperty(this, \"getAnnotArray\", {\n        value: pageIndex => this._transport.getAnnotArray(pageIndex),\n      });\n    }\n  }\n\n  /**\n   * @type {AnnotationStorage} Storage for annotation data in forms.\n   */\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n\n  /**\n   * @type {Object} The canvas factory instance.\n   */\n  get canvasFactory() {\n    return this._transport.canvasFactory;\n  }\n\n  /**\n   * @type {Object} The filter factory instance.\n   */\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n\n  /**\n   * @type {number} Total number of pages in the PDF file.\n   */\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n\n  /**\n   * @type {Array<string | null>} A (not guaranteed to be) unique ID to identify\n   *   the PDF document.\n   *   NOTE: The first element will always be defined for all PDF documents,\n   *   whereas the second element is only defined for *modified* PDF documents.\n   */\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n\n  /**\n   * NOTE: This is (mostly) intended to support printing of XFA forms.\n   *\n   * @type {Object | null} An object representing a HTML tree structure\n   *   to render the XFA, or `null` when no XFA form exists.\n   */\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n\n  /**\n   * @param {number} pageNumber - The page number to get. The first page is 1.\n   * @returns {Promise<PDFPageProxy>} A promise that is resolved with\n   *   a {@link PDFPageProxy} object.\n   */\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n\n  /**\n   * @param {RefProxy} ref - The page reference.\n   * @returns {Promise<number>} A promise that is resolved with the page index,\n   *   starting from zero, that is associated with the reference.\n   */\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<any>>>} A promise that is resolved\n   *   with a mapping from named destinations to references.\n   *\n   * This can be slow for large documents. Use `getDestination` instead.\n   */\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n\n  /**\n   * @param {string} id - The named destination to get.\n   * @returns {Promise<Array<any> | null>} A promise that is resolved with all\n   *   information of the given named destination, or `null` when the named\n   *   destination is not present in the PDF file.\n   */\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with\n   *   an {Array} containing the page labels that correspond to the page\n   *   indexes, or `null` when no page labels are present in the PDF file.\n   */\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page layout name.\n   */\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page mode name.\n   */\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with an\n   *   {Object} containing the viewer preferences, or `null` when no viewer\n   *   preferences are present in the PDF file.\n   */\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n\n  /**\n   * @returns {Promise<any | null>} A promise that is resolved with an {Array}\n   *   containing the destination, or `null` when no open action is present\n   *   in the PDF.\n   */\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n\n  /**\n   * @returns {Promise<any>} A promise that is resolved with a lookup table\n   *   for mapping named attachments to their content.\n   */\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n\n  /**\n   * @param {Set<number>} types - The annotation types to retrieve.\n   * @param {Set<number>} pageIndexesToSkip\n   * @returns {Promise<Array<Object>>} A promise that is resolved with a list of\n   *   annotations data.\n   */\n  getAnnotationsByType(types, pageIndexesToSkip) {\n    return this._transport.getAnnotationsByType(types, pageIndexesToSkip);\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with the JavaScript actions:\n   *     - from the name tree.\n   *     - from A or AA entries in the catalog dictionary.\n   *   , or `null` if no JavaScript exists.\n   */\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n\n  /**\n   * @typedef {Object} OutlineNode\n   * @property {string} title\n   * @property {boolean} bold\n   * @property {boolean} italic\n   * @property {Uint8ClampedArray} color - The color in RGB format to use for\n   *   display purposes.\n   * @property {string | Array<any> | null} dest\n   * @property {string | null} url\n   * @property {string | undefined} unsafeUrl\n   * @property {boolean | undefined} newWindow\n   * @property {number | undefined} count\n   * @property {Array<OutlineNode>} items\n   */\n\n  /**\n   * @returns {Promise<Array<OutlineNode>>} A promise that is resolved with an\n   *   {Array} that is a tree outline (if it has one) of the PDF file.\n   */\n  getOutline() {\n    return this._transport.getOutline();\n  }\n\n  /**\n   * @typedef {Object} GetOptionalContentConfigParameters\n   * @property {string} [intent] - Determines the optional content groups that\n   *   are visible by default; valid values are:\n   *    - 'display' (viewable groups).\n   *    - 'print' (printable groups).\n   *    - 'any' (all groups).\n   *   The default value is 'display'.\n   */\n\n  /**\n   * @param {GetOptionalContentConfigParameters} [params] - Optional content\n   *   config parameters.\n   * @returns {Promise<OptionalContentConfig>} A promise that is resolved with\n   *   an {@link OptionalContentConfig} that contains all the optional content\n   *   groups (assuming that the document has any).\n   */\n  getOptionalContentConfig({ intent = \"display\" } = {}) {\n    const { renderingIntent } = this._transport.getRenderingIntent(intent);\n\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n\n  /**\n   * @returns {Promise<Array<number> | null>} A promise that is resolved with\n   *   an {Array} that contains the permission flags for the PDF document, or\n   *   `null` when no permissions are present in the PDF file.\n   */\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n\n  /**\n   * @returns {Promise<{ info: Object, metadata: Metadata }>} A promise that is\n   *   resolved with an {Object} that has `info` and `metadata` properties.\n   *   `info` is an {Object} filled with anything available in the information\n   *   dictionary and similarly `metadata` is a {Metadata} object with\n   *   information from the metadata section of the PDF.\n   */\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n\n  /**\n   * @typedef {Object} MarkInfo\n   * Properties correspond to Table 321 of the PDF 32000-1:2008 spec.\n   * @property {boolean} Marked\n   * @property {boolean} UserProperties\n   * @property {boolean} Suspects\n   */\n\n  /**\n   * @returns {Promise<MarkInfo | null>} A promise that is resolved with\n   *   a {MarkInfo} object that contains the MarkInfo flags for the PDF\n   *   document, or `null` when no MarkInfo values are present in the PDF file.\n   */\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the raw data of the PDF document.\n   */\n  getData() {\n    return this._transport.getData();\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the full data of the saved document.\n   */\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n\n  /**\n   * @returns {Promise<{ length: number }>} A promise that is resolved when the\n   *   document's data is loaded. It is resolved with an {Object} that contains\n   *   the `length` property that indicates size of the PDF data in bytes.\n   */\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n\n  /**\n   * Cleans up resources allocated by the document on both the main and worker\n   * threads.\n   *\n   * NOTE: Do not, under any circumstances, call this method when rendering is\n   * currently ongoing since that may lead to rendering errors.\n   *\n   * @param {boolean} [keepLoadedFonts] - Let fonts remain attached to the DOM.\n   *   NOTE: This will increase persistent memory usage, hence don't use this\n   *   option unless absolutely necessary. The default value is `false`.\n   * @returns {Promise} A promise that is resolved when clean-up has finished.\n   */\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n\n  /**\n   * Destroys the current document instance and terminates the worker.\n   */\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n\n  /**\n   * @param {RefProxy} ref - The page reference.\n   * @returns {number | null} The page number, if it's cached.\n   */\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n\n  /**\n   * @type {DocumentInitParameters} A subset of the current\n   *   {DocumentInitParameters}, which are needed in the viewer.\n   */\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n\n  /**\n   * @type {PDFDocumentLoadingTask} The loadingTask for the current document.\n   */\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<Object>> | null>} A promise that is\n   *   resolved with an {Object} containing /AcroForm field data for the JS\n   *   sandbox, or `null` when no field data is present in the PDF file.\n   */\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n\n  /**\n   * @returns {Promise<boolean>} A promise that is resolved with `true`\n   *   if some /AcroForm fields have JavaScript actions.\n   */\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with an\n   *   {Array<string>} containing IDs of annotations that have a calculation\n   *   action, or `null` when no such annotations are present in the PDF file.\n   */\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\n\n/**\n * Page getViewport parameters.\n *\n * @typedef {Object} GetViewportParameters\n * @property {number} scale - The desired scale of the viewport.\n * @property {number} [rotation] - The desired rotation, in degrees, of\n *   the viewport. If omitted it defaults to the page rotation.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be\n *   flipped. The default value is `false`.\n */\n\n/**\n * Page getTextContent parameters.\n *\n * @typedef {Object} getTextContentParameters\n * @property {boolean} [includeMarkedContent] - When true include marked\n *   content items in the items array of TextContent. The default is `false`.\n * @property {boolean} [disableNormalization] - When true the text is *not*\n *   normalized in the worker-thread. The default is `false`.\n */\n\n/**\n * Page text content.\n *\n * @typedef {Object} TextContent\n * @property {Array<TextItem | TextMarkedContent>} items - Array of\n *   {@link TextItem} and {@link TextMarkedContent} objects. TextMarkedContent\n *   items are included when includeMarkedContent is true.\n * @property {Object<string, TextStyle>} styles - {@link TextStyle} objects,\n *   indexed by font name.\n * @property {string | null} lang - The document /Lang attribute.\n */\n\n/**\n * Page text content part.\n *\n * @typedef {Object} TextItem\n * @property {string} str - Text content.\n * @property {string} dir - Text direction: 'ttb', 'ltr' or 'rtl'.\n * @property {Array<any>} transform - Transformation matrix.\n * @property {number} width - Width in device space.\n * @property {number} height - Height in device space.\n * @property {string} fontName - Font name used by PDF.js for converted font.\n * @property {boolean} hasEOL - Indicating if the text content is followed by a\n *   line-break.\n */\n\n/**\n * Page text marked content part.\n *\n * @typedef {Object} TextMarkedContent\n * @property {string} type - Either 'beginMarkedContent',\n *   'beginMarkedContentProps', or 'endMarkedContent'.\n * @property {string} id - The marked content identifier. Only used for type\n *   'beginMarkedContentProps'.\n */\n\n/**\n * Text style.\n *\n * @typedef {Object} TextStyle\n * @property {number} ascent - Font ascent.\n * @property {number} descent - Font descent.\n * @property {boolean} vertical - Whether or not the text is in vertical mode.\n * @property {string} fontFamily - The possible font family.\n */\n\n/**\n * Page annotation parameters.\n *\n * @typedef {Object} GetAnnotationsParameters\n * @property {string} [intent] - Determines the annotations that are fetched,\n *   can be 'display' (viewable annotations), 'print' (printable annotations),\n *   or 'any' (all annotations). The default value is 'display'.\n */\n\n/**\n * Page render parameters.\n *\n * @typedef {Object} RenderParameters\n * @property {HTMLCanvasElement|null} canvas - A DOM Canvas object. The default\n *   value is the canvas associated with the `canvasContext` parameter if no\n *   value is provided explicitly.\n * @property {PageViewport} viewport - Rendering viewport obtained by calling\n *   the `PDFPageProxy.getViewport` method.\n * @property {CanvasRenderingContext2D} [canvasContext] - 2D context of a DOM\n *   Canvas object for backwards compatibility; it is recommended to use the\n *   `canvas` parameter instead.\n *   If the context must absolutely be used to render the page, the canvas must\n *   be null.\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are rendered\n *   onto the canvas, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {Array<any>} [transform] - Additional transform, applied just\n *   before viewport transform.\n * @property {CanvasGradient | CanvasPattern | string} [background] - Background\n *   to use for the canvas.\n *   Any valid `canvas.fillStyle` can be used: a `DOMString` parsed as CSS\n *   <color> value, a `CanvasGradient` object (a linear or radial gradient) or\n *   a `CanvasPattern` object (a repetitive image). The default value is\n *   'rgb(255,255,255)'.\n *\n *   NOTE: This option may be partially, or completely, ignored when the\n *   `pageColors`-option is used.\n * @property {Object} [pageColors] - Overwrites background and foreground colors\n *   with user defined ones in order to improve readability in high contrast\n *   mode.\n * @property {Promise<OptionalContentConfig>} [optionalContentConfigPromise] -\n *   A promise that should resolve with an {@link OptionalContentConfig}\n *   created from `PDFDocumentProxy.getOptionalContentConfig`. If `null`,\n *   the configuration will be fetched automatically with the default visibility\n *   states set.\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap] - Map some\n *   annotation ids with canvases used to render them.\n * @property {PrintAnnotationStorage} [printAnnotationStorage]\n * @property {boolean} [isEditing] - Render the page in editing mode.\n * @property {boolean} [recordOperations] - Record the dependencies and bounding\n *   boxes of all PDF operations that render onto the canvas.\n * @property {Set<number>} [filteredOperationIndexes] - If provided, only run\n *   the PDF operations that are included in this set.\n */\n\n/**\n * Page getOperatorList parameters.\n *\n * @typedef {Object} GetOperatorListParameters\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are included\n *   in the operatorList, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {PrintAnnotationStorage} [printAnnotationStorage]\n * @property {boolean} [isEditing] - Render the page in editing mode.\n */\n\n/**\n * Structure tree node. The root node will have a role \"Root\".\n *\n * @typedef {Object} StructTreeNode\n * @property {Array<StructTreeNode | StructTreeContent>} children - Array of\n *   {@link StructTreeNode} and {@link StructTreeContent} objects.\n * @property {string} role - element's role, already mapped if a role map exists\n * in the PDF.\n */\n\n/**\n * Structure tree content.\n *\n * @typedef {Object} StructTreeContent\n * @property {string} type - either \"content\" for page and stream structure\n *   elements or \"object\" for object references.\n * @property {string} id - unique id that will map to the text layer.\n */\n\n/**\n * PDF page operator list.\n *\n * @typedef {Object} PDFOperatorList\n * @property {Array<number>} fnArray - Array containing the operator functions.\n * @property {Array<any>} argsArray - Array containing the arguments of the\n *   functions.\n */\n\n/**\n * Proxy to a `PDFPage` in the worker thread.\n */\nclass PDFPageProxy {\n  #pendingCleanup = false;\n\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    /** @type {PDFObjects} */\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n\n    this._intentStates = new Map();\n    this.destroyed = false;\n    this.recordedGroups = null;\n  }\n\n  /**\n   * @type {number} Page number of the page. First page is 1.\n   */\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n\n  /**\n   * @type {number} The number of degrees the page is rotated clockwise.\n   */\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n\n  /**\n   * @type {RefProxy | null} The reference that points to this page.\n   */\n  get ref() {\n    return this._pageInfo.ref;\n  }\n\n  /**\n   * @type {number} The default size of units in 1/72nds of an inch.\n   */\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n\n  /**\n   * @type {Array<number>} An array of the visible portion of the PDF page in\n   *   user space units [x1, y1, x2, y2].\n   */\n  get view() {\n    return this._pageInfo.view;\n  }\n\n  /**\n   * @param {GetViewportParameters} params - Viewport parameters.\n   * @returns {PageViewport} Contains 'width' and 'height' properties\n   *   along with transforms required for rendering.\n   */\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * @param {GetAnnotationsParameters} [params] - Annotation parameters.\n   * @returns {Promise<Array<any>>} A promise that is resolved with an\n   *   {Array} of the annotation objects.\n   */\n  getAnnotations({ intent = \"display\" } = {}) {\n    const { renderingIntent } = this._transport.getRenderingIntent(intent);\n\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n\n  /**\n   * @returns {Promise<Object>} A promise that is resolved with an\n   *   {Object} with JS actions.\n   */\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n\n  /**\n   * @type {Object} The filter factory instance.\n   */\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with a fake DOM object (a tree structure where elements\n   *   are {Object} with a name, attributes (class, style, ...), value and\n   *   children, very similar to a HTML DOM tree), or `null` if no XFA exists.\n   */\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n\n  /**\n   * Begins the process of rendering a page to the desired context.\n   *\n   * @param {RenderParameters} params - Page render parameters.\n   * @returns {RenderTask} An object that contains a promise that is\n   *   resolved when the page finishes rendering.\n   */\n  render({\n    canvasContext,\n    canvas = canvasContext.canvas,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n    isEditing = false,\n    recordOperations = false,\n    filteredOperationIndexes = null,\n  }) {\n    this._stats?.time(\"Overall\");\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage,\n      isEditing\n    );\n    const { renderingIntent, cacheKey } = intentArgs;\n    // If there was a pending destroy, cancel it so no cleanup happens during\n    // this call to render.\n    this.#pendingCleanup = false;\n\n    optionalContentConfigPromise ||=\n      this._transport.getOptionalContentConfig(renderingIntent);\n\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n\n    // If there's no displayReadyCapability yet, then the operatorList\n    // was never requested before. Make the request and create the promise.\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n\n    const shouldRecordOperations =\n      !this.recordedGroups &&\n      (recordOperations ||\n        (this._pdfBug && globalThis.StepperManager?.enabled));\n\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n\n      if (shouldRecordOperations) {\n        const recordedGroups = internalRenderTask.gfx?.dependencyTracker.take();\n        if (recordedGroups) {\n          internalRenderTask.stepper?.setOperatorGroups(recordedGroups);\n          if (recordOperations) {\n            this.recordedGroups = recordedGroups;\n          }\n        } else if (recordOperations) {\n          this.recordedGroups = [];\n        }\n      }\n\n      // Attempt to reduce memory usage during *printing*, by always running\n      // cleanup immediately once rendering has finished.\n      if (intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup();\n\n      if (error) {\n        internalRenderTask.capability.reject(error);\n\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error),\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      // Only include the required properties, and *not* the entire object.\n      params: {\n        canvas,\n        canvasContext,\n        dependencyTracker: shouldRecordOperations\n          ? new CanvasDependencyTracker(canvas)\n          : null,\n        viewport,\n        transform,\n        background,\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors,\n      enableHWA: this._transport.enableHWA,\n      filteredOperationIndexes,\n    });\n\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n\n    Promise.all([\n      intentState.displayReadyCapability.promise,\n      optionalContentConfigPromise,\n    ])\n      .then(([transparency, optionalContentConfig]) => {\n        if (this.destroyed) {\n          complete();\n          return;\n        }\n        this._stats?.time(\"Rendering\");\n\n        if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n          throw new Error(\n            \"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" +\n              \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\"\n          );\n        }\n        internalRenderTask.initializeGraphics({\n          transparency,\n          optionalContentConfig,\n        });\n        internalRenderTask.operatorListChanged();\n      })\n      .catch(complete);\n\n    return renderTask;\n  }\n\n  /**\n   * @param {GetOperatorListParameters} params - Page getOperatorList\n   *   parameters.\n   * @returns {Promise<PDFOperatorList>} A promise resolved with an\n   *   {@link PDFOperatorList} object that represents the page's operator list.\n   */\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isEditing = false,\n  } = {}) {\n    if (typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"GENERIC\")) {\n      throw new Error(\"Not implemented: getOperatorList\");\n    }\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage,\n      isEditing,\n      /* isOpList = */ true\n    );\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {ReadableStream} Stream for reading text content chunks.\n   */\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false,\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n\n    return this._transport.messageHandler.sendWithStream(\n      \"GetTextContent\",\n      {\n        pageIndex: this._pageIndex,\n        includeMarkedContent: includeMarkedContent === true,\n        disableNormalization: disableNormalization === true,\n      },\n      {\n        highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n        size(textContent) {\n          return textContent.items.length;\n        },\n      }\n    );\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {Promise<TextContent>} A promise that is resolved with a\n   *   {@link TextContent} object that represents the page's text content.\n   */\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      // TODO: We need to revisit this once the XFA foreground patch lands and\n      // only do this for non-foreground XFA.\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({ value, done }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null,\n      };\n      pump();\n    });\n  }\n\n  /**\n   * @returns {Promise<StructTreeNode>} A promise that is resolved with a\n   *   {@link StructTreeNode} object that represents the page's structure tree,\n   *   or `null` when no structure tree is present for the current page.\n   */\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n\n  /**\n   * Destroys the page object.\n   * @private\n   */\n  _destroy() {\n    this.destroyed = true;\n\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true,\n      });\n\n      if (intentState.opListReadCapability) {\n        // Avoid errors below, since the renderTasks are just stubs.\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n\n    return Promise.all(waitOn);\n  }\n\n  /**\n   * Cleans up resources allocated by the page.\n   *\n   * @param {boolean} [resetStats] - Reset page stats, if enabled.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup();\n\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n\n  /**\n   * Attempts to clean up if rendering is in a state where that's possible.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  #tryCleanup() {\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    for (const { renderTasks, operatorList } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n\n  /**\n   * @private\n   */\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return; // Rendering was cancelled.\n    }\n    this._stats?.timeEnd(\"Page Request\");\n\n    // TODO Refactor RenderPageRequest to separate rendering\n    // and operator list logic\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n\n  /**\n   * @private\n   */\n  _renderPageChunk(operatorListChunk, intentState) {\n    // Add the new chunk to the current operator list.\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n\n    // Notify all the rendering tasks there are more operators to be consumed.\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n    modifiedIds,\n  }) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        Number.isInteger(renderingIntent) && renderingIntent > 0,\n        '_pumpOperatorList: Expected valid \"renderingIntent\" argument.'\n      );\n    }\n    const { map, transfer } = annotationStorageSerializable;\n\n    const readableStream = this._transport.messageHandler.sendWithStream(\n      \"GetOperatorList\",\n      {\n        pageIndex: this._pageIndex,\n        intent: renderingIntent,\n        cacheKey,\n        annotationStorage: map,\n        modifiedIds,\n      },\n      transfer\n    );\n    const reader = readableStream.getReader();\n\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n\n    const pump = () => {\n      reader.read().then(\n        ({ value, done }) => {\n          if (done) {\n            intentState.streamReader = null;\n            return;\n          }\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          this._renderPageChunk(value, intentState);\n          pump();\n        },\n        reason => {\n          intentState.streamReader = null;\n\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          if (intentState.operatorList) {\n            // Mark operator list as complete.\n            intentState.operatorList.lastChunk = true;\n\n            for (const internalRenderTask of intentState.renderTasks) {\n              internalRenderTask.operatorListChanged();\n            }\n            this.#tryCleanup();\n          }\n\n          if (intentState.displayReadyCapability) {\n            intentState.displayReadyCapability.reject(reason);\n          } else if (intentState.opListReadCapability) {\n            intentState.opListReadCapability.reject(reason);\n          } else {\n            throw reason;\n          }\n        }\n      );\n    };\n    pump();\n  }\n\n  /**\n   * @private\n   */\n  _abortOperatorList({ intentState, reason, force = false }) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        reason instanceof Error,\n        '_abortOperatorList: Expected valid \"reason\" argument.'\n      );\n    }\n\n    if (!intentState.streamReader) {\n      return;\n    }\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    if (!force) {\n      // Ensure that an Error occurring in *only* one `InternalRenderTask`, e.g.\n      // multiple render() calls on the same canvas, won't break all rendering.\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      // Don't immediately abort parsing on the worker-thread when rendering is\n      // cancelled, since that will unnecessarily delay re-rendering when (for\n      // partially parsed pages) e.g. zooming/rotation occurs in the viewer.\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < /* ms = */ 1000) {\n          // Above, we prevent the total delay from becoming arbitrarily large.\n          delay += reason.extraDelay;\n        }\n\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({ intentState, reason, force: true });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader\n      .cancel(new AbortException(reason.message))\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n    intentState.streamReader = null;\n\n    if (this._transport.destroyed) {\n      return; // Ignore any pending requests if the worker was terminated.\n    }\n    // Remove the current `intentState`, since a cancelled `getOperatorList`\n    // call on the worker-thread cannot be re-started...\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    // ... and force clean-up to ensure that any old state is always removed.\n    this.cleanup();\n  }\n\n  /**\n   * @type {StatTimer | null} Returns page stats, if enabled; returns `null`\n   *   otherwise.\n   */\n  get stats() {\n    return this._stats;\n  }\n}\n\n/**\n * @typedef {Object} PDFWorkerParameters\n * @property {string} [name] - The name of the worker.\n * @property {Worker} [port] - The `workerPort` object.\n * @property {number} [verbosity] - Controls the logging level;\n *   the constants from {@link VerbosityLevel} should be used.\n */\n\n/**\n * PDF.js web worker abstraction that controls the instantiation of PDF\n * documents. Message handlers are used to pass information from the main\n * thread to the worker thread and vice versa. If the creation of a web\n * worker is not possible, a \"fake\" worker will be used instead.\n *\n * @param {PDFWorkerParameters} params - The worker initialization parameters.\n */\nclass PDFWorker {\n  #capability = Promise.withResolvers();\n\n  #messageHandler = null;\n\n  #port = null;\n\n  #webWorker = null;\n\n  static #fakeWorkerId = 0;\n\n  static #isWorkerDisabled = false;\n\n  static #workerPorts = new WeakMap();\n\n  static {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n      if (isNodeJS) {\n        // Workers aren't supported in Node.js, force-disabling them there.\n        this.#isWorkerDisabled = true;\n\n        GlobalWorkerOptions.workerSrc ||= PDFJSDev.test(\"LIB\")\n          ? \"../pdf.worker.js\"\n          : \"./pdf.worker.mjs\";\n      }\n\n      // Check if URLs have the same origin. For non-HTTP based URLs, returns\n      // false.\n      this._isSameOrigin = (baseUrl, otherUrl) => {\n        const base = URL.parse(baseUrl);\n        if (!base?.origin || base.origin === \"null\") {\n          return false; // non-HTTP url\n        }\n        const other = new URL(otherUrl, base);\n        return base.origin === other.origin;\n      };\n\n      this._createCDNWrapper = url => {\n        // We will rely on blob URL's property to specify origin.\n        // We want this function to fail in case if createObjectURL or Blob do\n        // not exist or fail for some reason -- our Worker creation will fail\n        // anyway.\n        const wrapper = `await import(\"${url}\");`;\n        return URL.createObjectURL(\n          new Blob([wrapper], { type: \"text/javascript\" })\n        );\n      };\n\n      this.fromPort = params => {\n        deprecated(\n          \"`PDFWorker.fromPort` - please use `PDFWorker.create` instead.\"\n        );\n        if (!params?.port) {\n          throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n        }\n        return this.create(params);\n      };\n    }\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      this._resetGlobalState = () => {\n        this.#isWorkerDisabled = false;\n        delete globalThis.pdfjsWorker;\n      };\n    }\n  }\n\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel(),\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n\n    if (port) {\n      if (PDFWorker.#workerPorts.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      PDFWorker.#workerPorts.set(port, this);\n      this.#initializeFromPort(port);\n    } else {\n      this.#initialize();\n    }\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"_webWorker\", {\n        get() {\n          return this.#webWorker;\n        },\n      });\n    }\n  }\n\n  /**\n   * Promise for worker initialization completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this.#capability.promise;\n  }\n\n  #resolve() {\n    this.#capability.resolve();\n    // Send global setting, e.g. verbosity level.\n    this.#messageHandler.send(\"configure\", {\n      verbosity: this.verbosity,\n    });\n  }\n\n  /**\n   * The current `workerPort`, when it exists.\n   * @type {Worker}\n   */\n  get port() {\n    return this.#port;\n  }\n\n  /**\n   * The current MessageHandler-instance.\n   * @type {MessageHandler}\n   */\n  get messageHandler() {\n    return this.#messageHandler;\n  }\n\n  #initializeFromPort(port) {\n    this.#port = port;\n    this.#messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this.#messageHandler.on(\"ready\", () => {\n      // Ignoring \"ready\" event -- MessageHandler should already be initialized\n      // and ready to accept messages.\n    });\n    this.#resolve();\n  }\n\n  #initialize() {\n    // If worker support isn't disabled explicit and the browser has worker\n    // support, create a new web worker and test if it/the browser fulfills\n    // all requirements to run parts of pdf.js in a web worker.\n    // Right now, the requirement is, that an Uint8Array is still an\n    // Uint8Array as it arrives on the worker.\n    if (\n      PDFWorker.#isWorkerDisabled ||\n      PDFWorker.#mainThreadWorkerMessageHandler\n    ) {\n      this.#setupFakeWorker();\n      return;\n    }\n    let { workerSrc } = PDFWorker;\n\n    try {\n      // Wraps workerSrc path into blob URL, if the former does not belong\n      // to the same origin.\n      if (\n        typeof PDFJSDev !== \"undefined\" &&\n        PDFJSDev.test(\"GENERIC\") &&\n        !PDFWorker._isSameOrigin(window.location, workerSrc)\n      ) {\n        workerSrc = PDFWorker._createCDNWrapper(\n          new URL(workerSrc, window.location).href\n        );\n      }\n\n      const worker = new Worker(workerSrc, { type: \"module\" });\n      const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n      const terminateEarly = () => {\n        ac.abort();\n        messageHandler.destroy();\n        worker.terminate();\n        if (this.destroyed) {\n          this.#capability.reject(new Error(\"Worker was destroyed\"));\n        } else {\n          // Fall back to fake worker if the termination is caused by an\n          // error (e.g. NetworkError / SecurityError).\n          this.#setupFakeWorker();\n        }\n      };\n\n      const ac = new AbortController();\n      worker.addEventListener(\n        \"error\",\n        () => {\n          if (!this.#webWorker) {\n            // Worker failed to initialize due to an error. Clean up and fall\n            // back to the fake worker.\n            terminateEarly();\n          }\n        },\n        { signal: ac.signal }\n      );\n\n      messageHandler.on(\"test\", data => {\n        ac.abort();\n        if (this.destroyed || !data) {\n          terminateEarly();\n          return;\n        }\n        this.#messageHandler = messageHandler;\n        this.#port = worker;\n        this.#webWorker = worker;\n\n        this.#resolve();\n      });\n\n      messageHandler.on(\"ready\", data => {\n        ac.abort();\n        if (this.destroyed) {\n          terminateEarly();\n          return;\n        }\n        try {\n          sendTest();\n        } catch {\n          // We need fallback to a faked worker.\n          this.#setupFakeWorker();\n        }\n      });\n\n      const sendTest = () => {\n        const testObj = new Uint8Array();\n        // Ensure that we can use `postMessage` transfers.\n        messageHandler.send(\"test\", testObj, [testObj.buffer]);\n      };\n\n      // It might take time for the worker to initialize. We will try to send\n      // the \"test\" message immediately, and once the \"ready\" message arrives.\n      // The worker shall process only the first received \"test\" message.\n      sendTest();\n      return;\n    } catch {\n      info(\"The worker has been disabled.\");\n    }\n    // Either workers are not supported or have thrown an exception.\n    // Thus, we fallback to a faked worker.\n    this.#setupFakeWorker();\n  }\n\n  #setupFakeWorker() {\n    if (!PDFWorker.#isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorker.#isWorkerDisabled = true;\n    }\n\n    PDFWorker._setupFakeWorkerGlobal\n      .then(WorkerMessageHandler => {\n        if (this.destroyed) {\n          this.#capability.reject(new Error(\"Worker was destroyed\"));\n          return;\n        }\n        const port = new LoopbackPort();\n        this.#port = port;\n\n        // All fake workers use the same port, making id unique.\n        const id = `fake${PDFWorker.#fakeWorkerId++}`;\n\n        // If the main thread is our worker, setup the handling for the\n        // messages -- the main thread sends to it self.\n        const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n        WorkerMessageHandler.setup(workerHandler, port);\n\n        this.#messageHandler = new MessageHandler(id, id + \"_worker\", port);\n        this.#resolve();\n      })\n      .catch(reason => {\n        this.#capability.reject(\n          new Error(`Setting up fake worker failed: \"${reason.message}\".`)\n        );\n      });\n  }\n\n  /**\n   * Destroys the worker instance.\n   */\n  destroy() {\n    this.destroyed = true;\n\n    // We need to terminate only web worker created resource.\n    this.#webWorker?.terminate();\n    this.#webWorker = null;\n\n    PDFWorker.#workerPorts.delete(this.#port);\n    this.#port = null;\n\n    this.#messageHandler?.destroy();\n    this.#messageHandler = null;\n  }\n\n  /**\n   * @param {PDFWorkerParameters} params - The worker initialization parameters.\n   * @returns {PDFWorker}\n   */\n  static create(params) {\n    const cachedPort = this.#workerPorts.get(params?.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\n          \"PDFWorker.create - the worker is being destroyed.\\n\" +\n            \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\"\n        );\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n\n  /**\n   * The current `workerSrc`, when it exists.\n   * @type {string}\n   */\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n\n  // Loads worker code into the main-thread.\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        // The worker was already loaded using e.g. a `<script>` tag.\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker =\n        typeof PDFJSDev === \"undefined\"\n          ? await import(\"pdfjs/pdf.worker.js\")\n          : await __raw_import__(this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass WorkerTransport {\n  #methodPromises = new Map();\n\n  #pageCache = new Map();\n\n  #pagePromises = new Map();\n\n  #pageRefCache = new Map();\n\n  #passwordCapability = null;\n\n  constructor(\n    messageHandler,\n    loadingTask,\n    networkStream,\n    params,\n    factory,\n    enableHWA\n  ) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement,\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.wasmFactory = factory.wasmFactory;\n\n    this.destroyed = false;\n    this.destroyCapability = null;\n\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.enableHWA = enableHWA;\n\n    this.setupMessageHandler();\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getNetworkStreamName\", {\n        value: () => networkStream?.constructor?.name || null,\n      });\n      Object.defineProperty(this, \"getXFADatasets\", {\n        value: () =>\n          this.messageHandler.sendWithPromise(\"GetXFADatasets\", null),\n      });\n      Object.defineProperty(this, \"getXRefPrevValue\", {\n        value: () =>\n          this.messageHandler.sendWithPromise(\"GetXRefPrevValue\", null),\n      });\n      Object.defineProperty(this, \"getStartXRefPos\", {\n        value: () =>\n          this.messageHandler.sendWithPromise(\"GetStartXRefPos\", null),\n      });\n      Object.defineProperty(this, \"getAnnotArray\", {\n        value: pageIndex =>\n          this.messageHandler.sendWithPromise(\"GetAnnotArray\", { pageIndex }),\n      });\n    }\n  }\n\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n\n  getRenderingIntent(\n    intent,\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isEditing = false,\n    isOpList = false\n  ) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY; // Default value.\n    let annotationStorageSerializable = SerializableEmpty;\n\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n\n    const annotationStorage =\n      renderingIntent & RenderingIntentFlag.PRINT &&\n      printAnnotationStorage instanceof PrintAnnotationStorage\n        ? printAnnotationStorage\n        : this.annotationStorage;\n\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n\n    if (isEditing) {\n      renderingIntent += RenderingIntentFlag.IS_EDITING;\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n\n    const { ids: modifiedIds, hash: modifiedIdsHash } =\n      annotationStorage.modifiedIds;\n\n    const cacheKeyBuf = [\n      renderingIntent,\n      annotationStorageSerializable.hash,\n      modifiedIdsHash,\n    ];\n\n    return {\n      renderingIntent,\n      cacheKey: cacheKeyBuf.join(\"_\"),\n      annotationStorageSerializable,\n      modifiedIds,\n    };\n  }\n\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n\n    this.#passwordCapability?.reject(\n      new Error(\"Worker was destroyed during onPassword callback\")\n    );\n\n    const waitOn = [];\n    // We need to wait for all renderings to be completed, e.g.\n    // timeout/rAF can take a long time.\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    // Allow `AnnotationStorage`-related clean-up when destroying the document.\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    // We also need to wait for the worker to finish its long running tasks.\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n\n      this._networkStream?.cancelAllRequests(\n        new AbortException(\"Worker was terminated.\")\n      );\n\n      this.messageHandler?.destroy();\n      this.messageHandler = null;\n\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n\n  setupMessageHandler() {\n    const { messageHandler, loadingTask } = this;\n\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetReader - no `IPDFStream` instance available.\"\n      );\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total,\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              value instanceof ArrayBuffer,\n              \"GetReader - expected an ArrayBuffer.\"\n            );\n            // Enqueue data chunk into sink, and transfer it\n            // to other side as `Transferable` object.\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"ReaderHeadersReady\", async data => {\n      await this._fullReader.headersReady;\n\n      const { isStreamingSupported, isRangeSupported, contentLength } =\n        this._fullReader;\n\n      // If stream or range are disabled, it's our only way to report\n      // loading progress.\n      if (!isStreamingSupported || !isRangeSupported) {\n        if (this._lastProgress) {\n          loadingTask.onProgress?.(this._lastProgress);\n        }\n        this._fullReader.onProgress = evt => {\n          loadingTask.onProgress?.({\n            loaded: evt.loaded,\n            total: evt.total,\n          });\n        };\n      }\n\n      return { isStreamingSupported, isRangeSupported, contentLength };\n    });\n\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetRangeReader - no `IPDFStream` instance available.\"\n      );\n      const rangeReader = this._networkStream.getRangeReader(\n        data.begin,\n        data.end\n      );\n\n      // When streaming is enabled, it's possible that the data requested here\n      // has already been fetched via the `_fullRequestReader` implementation.\n      // However, given that the PDF data is loaded asynchronously on the\n      // main-thread and then sent via `postMessage` to the worker-thread,\n      // it may not have been available during parsing (hence the attempt to\n      // use range requests here).\n      //\n      // To avoid wasting time and resources here, we'll thus *not* dispatch\n      // range requests if the data was already loaded but has not been sent to\n      // the worker-thread yet (which will happen via the `_fullRequestReader`).\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n\n      sink.onPull = () => {\n        rangeReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              value instanceof ArrayBuffer,\n              \"GetRangeReader - expected an ArrayBuffer.\"\n            );\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"GetDoc\", ({ pdfInfo }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n\n    messageHandler.on(\"DocException\", ex => {\n      loadingTask._capability.reject(wrapReason(ex));\n    });\n\n    messageHandler.on(\"PasswordRequest\", ex => {\n      this.#passwordCapability = Promise.withResolvers();\n\n      try {\n        if (!loadingTask.onPassword) {\n          throw wrapReason(ex);\n        }\n\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({ password });\n          }\n        };\n        loadingTask.onPassword(updatePassword, ex.code);\n      } catch (err) {\n        this.#passwordCapability.reject(err);\n      }\n      return this.#passwordCapability.promise;\n    });\n\n    messageHandler.on(\"DataLoaded\", data => {\n      // For consistency: Ensure that progress is always reported when the\n      // entire PDF file has been loaded, regardless of how it was fetched.\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length,\n      });\n\n      this.downloadInfoCapability.resolve(data);\n    });\n\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null; // Ignore any pending requests if the worker was terminated.\n      }\n\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n\n      switch (type) {\n        case \"Font\":\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n\n          const inspectFont =\n            this._params.pdfBug && globalThis.FontInspector?.enabled\n              ? (font, url) => globalThis.FontInspector.fontAdded(font, url)\n              : null;\n          const font = new FontFaceObject(exportedData, inspectFont);\n\n          this.fontLoader\n            .bind(font)\n            .catch(() => messageHandler.sendWithPromise(\"FontFallback\", { id }))\n            .finally(() => {\n              if (!font.fontExtraProperties && font.data) {\n                // Immediately release the `font.data` property once the font\n                // has been attached to the DOM, since it's no longer needed,\n                // rather than waiting for a `PDFDocumentProxy.cleanup` call.\n                // Since `font.data` could be very large, e.g. in some cases\n                // multiple megabytes, this will help reduce memory usage.\n                font.data = null;\n              }\n              this.commonObjs.resolve(id, font);\n            });\n          break;\n        case \"CopyLocalImage\":\n          const { imageRef } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n\n      return null;\n    });\n\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        // Ignore any pending requests if the worker was terminated.\n        return;\n      }\n\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      // Don't store data *after* cleanup has successfully run, see bug 1854145.\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close(); // Release any `ImageBitmap` data.\n        return;\n      }\n\n      switch (type) {\n        case \"Image\":\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total,\n      });\n    });\n\n    messageHandler.on(\"FetchBinaryData\", async data => {\n      if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n        throw new Error(\"Not implemented: FetchBinaryData\");\n      }\n      if (this.destroyed) {\n        throw new Error(\"Worker was destroyed.\");\n      }\n      const factory = this[data.type];\n\n      if (!factory) {\n        throw new Error(\n          `${data.type} not initialized, see the \\`useWorkerFetch\\` parameter.`\n        );\n      }\n      return factory.fetch(data);\n    });\n  }\n\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\n        \"saveDocument called while `annotationStorage` is empty, \" +\n          \"please use the getData-method instead.\"\n      );\n    }\n    const { map, transfer } = this.annotationStorage.serializable;\n\n    return this.messageHandler\n      .sendWithPromise(\n        \"SaveDocument\",\n        {\n          isPureXfa: !!this._htmlForXfa,\n          numPages: this._numPages,\n          annotationStorage: map,\n          filename: this._fullReader?.filename ?? null,\n        },\n        transfer\n      )\n      .finally(() => {\n        this.annotationStorage.resetModified();\n      });\n  }\n\n  getPage(pageNumber) {\n    if (\n      !Number.isInteger(pageNumber) ||\n      pageNumber <= 0 ||\n      pageNumber > this._numPages\n    ) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(\"GetPage\", {\n        pageIndex,\n      })\n      .then(pageInfo => {\n        if (this.destroyed) {\n          throw new Error(\"Transport destroyed\");\n        }\n        if (pageInfo.refStr) {\n          this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n        }\n\n        const page = new PDFPageProxy(\n          pageIndex,\n          pageInfo,\n          this,\n          this._params.pdfBug\n        );\n        this.#pageCache.set(pageIndex, page);\n        return page;\n      });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen,\n    });\n  }\n\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent,\n    });\n  }\n\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id,\n    });\n  }\n\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n\n  getAnnotationsByType(types, pageIndexesToSkip) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotationsByType\", {\n      types,\n      pageIndexesToSkip,\n    });\n  }\n\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex,\n    });\n  }\n\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex,\n    });\n  }\n\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(\n      data => new OptionalContentConfig(data, renderingIntent)\n    );\n  }\n\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(name, null)\n      .then(results => ({\n        info: results[0],\n        metadata: results[1] ? new Metadata(results[1]) : null,\n        contentDispositionFilename: this._fullReader?.filename ?? null,\n        contentLength: this._fullReader?.contentLength ?? null,\n      }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return; // No need to manually clean-up when destruction has started.\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n\n      if (!cleanupSuccessful) {\n        throw new Error(\n          `startCleanup: Page ${page.pageNumber} is currently rendering.`\n        );\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(/* keepHCM = */ true);\n    TextLayer.cleanup();\n  }\n\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\n\n/**\n * Allows controlling of the rendering tasks.\n */\nclass RenderTask {\n  #internalRenderTask = null;\n\n  /**\n   * Callback for incremental rendering -- a function that will be called\n   * each time the rendering is paused.  To continue rendering call the\n   * function that is the first argument to the callback.\n   * @type {function}\n   */\n  onContinue = null;\n\n  /**\n   * A function that will be synchronously called when the rendering tasks\n   * finishes with an error (either because of an actual error, or because the\n   * rendering is cancelled).\n   *\n   * @type {function}\n   * @param {Error} error\n   */\n  onError = null;\n\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getOperatorList\", {\n        value: () => this.#internalRenderTask.operatorList,\n      });\n    }\n  }\n\n  /**\n   * Promise for rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n\n  /**\n   * Cancels the rendering task. If the task is currently rendering it will\n   * not be cancelled until graphics pauses with a timeout. The promise that\n   * this object extends will be rejected when cancelled.\n   *\n   * @param {number} [extraDelay]\n   */\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(/* error = */ null, extraDelay);\n  }\n\n  /**\n   * Whether form fields are rendered separately from the main operatorList.\n   * @type {boolean}\n   */\n  get separateAnnots() {\n    const { separateAnnots } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const { annotationCanvasMap } = this.#internalRenderTask;\n    return (\n      separateAnnots.form ||\n      (separateAnnots.canvas && annotationCanvasMap?.size > 0)\n    );\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass InternalRenderTask {\n  #rAF = null;\n\n  static #canvasInUse = new WeakSet();\n\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null,\n    enableHWA = false,\n    filteredOperationIndexes = null,\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame =\n      useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    // caching this-bound methods\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvas;\n    this._canvasContext = params.canvas ? null : params.canvasContext;\n    this._enableHWA = enableHWA;\n    this._dependencyTracker = params.dependencyTracker;\n    this._filteredOperationIndexes = filteredOperationIndexes;\n  }\n\n  get completed() {\n    return this.capability.promise.catch(function () {\n      // Ignoring errors, since we only want to know when rendering is\n      // no longer pending.\n    });\n  }\n\n  initializeGraphics({ transparency = false, optionalContentConfig }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\n          \"Cannot use the same canvas during multiple render() operations. \" +\n            \"Use different canvas or ensure previous operations were \" +\n            \"cancelled or completed.\"\n        );\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const { viewport, transform, background, dependencyTracker } = this.params;\n\n    // When printing in Firefox, we get a specific context in mozPrintCallback\n    // which cannot be created from the canvas itself.\n    const canvasContext =\n      this._canvasContext ||\n      this._canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: !this._enableHWA,\n      });\n\n    this.gfx = new CanvasGraphics(\n      canvasContext,\n      this.commonObjs,\n      this.objs,\n      this.canvasFactory,\n      this.filterFactory,\n      { optionalContentConfig },\n      this.annotationCanvasMap,\n      this.pageColors,\n      dependencyTracker\n    );\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background,\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    if (this.#rAF) {\n      window.cancelAnimationFrame(this.#rAF);\n      this.#rAF = null;\n    }\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n\n    error ||= new RenderingCancelledException(\n      `Rendering cancelled, page ${this._pageIndex + 1}`,\n      extraDelay\n    );\n    this.callback(error);\n\n    this.task.onError?.(error);\n  }\n\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      this.#rAF = window.requestAnimationFrame(() => {\n        this.#rAF = null;\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(\n      this.operatorList,\n      this.operatorListIdx,\n      this._continueBound,\n      this.stepper,\n      this._filteredOperationIndexes\n    );\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n\n        this.callback();\n      }\n    }\n  }\n}\n\n/** @type {string} */\nconst version =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : null;\n/** @type {string} */\nconst build =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : null;\n\nexport {\n  build,\n  getDocument,\n  PDFDataRangeTransport,\n  PDFDocumentLoadingTask,\n  PDFDocumentProxy,\n  PDFPageProxy,\n  PDFWorker,\n  RenderTask,\n  version,\n};\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationEditorParamsType, shadow } from \"../../shared/util.js\";\nimport { KeyboardManager } from \"./tools.js\";\nimport { noContextMenu } from \"../display_utils.js\";\n\n/**\n * ColorPicker class provides a color picker for the annotation editor.\n * It displays a dropdown with some predefined colors and allows the user\n * to select a color for the annotation.\n */\nclass ColorPicker {\n  #button = null;\n\n  #buttonSwatch = null;\n\n  #defaultColor;\n\n  #dropdown = null;\n\n  #dropdownWasFromKeyboard = false;\n\n  #isMainColorPicker = false;\n\n  #editor = null;\n\n  #eventBus;\n\n  #openDropdownAC = null;\n\n  #uiManager = null;\n\n  static #l10nColor = null;\n\n  static get _keyboardManager() {\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          [\"Escape\", \"mac+Escape\"],\n          ColorPicker.prototype._hideDropdownFromKeyboard,\n        ],\n        [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard],\n        [\n          [\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"],\n          ColorPicker.prototype._moveToNext,\n        ],\n        [\n          [\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"],\n          ColorPicker.prototype._moveToPrevious,\n        ],\n        [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning],\n        [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd],\n      ])\n    );\n  }\n\n  constructor({ editor = null, uiManager = null }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor =\n      editor?.color?.toUpperCase() ||\n      this.#uiManager?.highlightColors.values().next().value ||\n      \"#FFFF98\";\n\n    ColorPicker.#l10nColor ||= Object.freeze({\n      blue: \"pdfjs-editor-colorpicker-blue\",\n      green: \"pdfjs-editor-colorpicker-green\",\n      pink: \"pdfjs-editor-colorpicker-pink\",\n      red: \"pdfjs-editor-colorpicker-red\",\n      yellow: \"pdfjs-editor-colorpicker-yellow\",\n    });\n  }\n\n  renderButton() {\n    const button = (this.#button = document.createElement(\"button\"));\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.ariaHasPopup = \"true\";\n    if (this.#editor) {\n      button.ariaControls = `${this.#editor.id}_colorpicker_dropdown`;\n    }\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"click\", this.#openDropdown.bind(this), { signal });\n    button.addEventListener(\"keydown\", this.#keyDown.bind(this), { signal });\n    const swatch = (this.#buttonSwatch = document.createElement(\"span\"));\n    swatch.className = \"swatch\";\n    swatch.ariaHidden = \"true\";\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n\n  renderMainDropdown() {\n    const dropdown = (this.#dropdown = this.#getDropdownRoot());\n    dropdown.ariaOrientation = \"horizontal\";\n    dropdown.ariaLabelledBy = \"highlightColorPickerLabel\";\n\n    return dropdown;\n  }\n\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    const signal = this.#uiManager._signal;\n    div.addEventListener(\"contextmenu\", noContextMenu, { signal });\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.ariaMultiSelectable = \"false\";\n    div.ariaOrientation = \"vertical\";\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    if (this.#editor) {\n      div.id = `${this.#editor.id}_colorpicker_dropdown`;\n    }\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", ColorPicker.#l10nColor[name]);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.ariaSelected = color === this.#defaultColor;\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color), {\n        signal,\n      });\n      div.append(button);\n    }\n\n    div.addEventListener(\"keydown\", this.#keyDown.bind(this), { signal });\n\n    return div;\n  }\n\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      value: color,\n    });\n    this.updateColor(color);\n  }\n\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n\n  _moveToPrevious(event) {\n    if (\n      event.target === this.#dropdown?.firstChild ||\n      event.target === this.#button\n    ) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n\n    if (!this.#openDropdownAC) {\n      this.#openDropdownAC = new AbortController();\n\n      window.addEventListener(\"pointerdown\", this.#pointerDown.bind(this), {\n        signal: this.#uiManager.combinedSignal(this.#openDropdownAC),\n      });\n    }\n    this.#button.ariaExpanded = \"true\";\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = (this.#dropdown = this.#getDropdownRoot());\n    this.#button.append(root);\n  }\n\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    this.#button.ariaExpanded = \"false\";\n    this.#openDropdownAC?.abort();\n    this.#openDropdownAC = null;\n  }\n\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      // The user pressed Escape with no dropdown visible, so we must\n      // unselect it.\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard,\n    });\n  }\n\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.ariaSelected = i.next().value === color.toUpperCase();\n    }\n  }\n\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\n/**\n * BasicColorPicker class provides a simple color picker.\n * It displays an input element (with type=\"color\") that allows the user\n * to select a color for the annotation.\n */\nclass BasicColorPicker {\n  #input = null;\n\n  #editor = null;\n\n  #uiManager = null;\n\n  static #l10nColor = null;\n\n  constructor(editor) {\n    this.#editor = editor;\n    this.#uiManager = editor._uiManager;\n\n    BasicColorPicker.#l10nColor ||= Object.freeze({\n      freetext: \"pdfjs-editor-color-picker-free-text-input\",\n      ink: \"pdfjs-editor-color-picker-ink-input\",\n    });\n  }\n\n  renderButton() {\n    if (this.#input) {\n      return this.#input;\n    }\n    const { editorType, colorType, colorValue } = this.#editor;\n    const input = (this.#input = document.createElement(\"input\"));\n    input.type = \"color\";\n    input.value = colorValue || \"#000000\";\n    input.className = \"basicColorPicker\";\n    input.tabIndex = 0;\n    input.setAttribute(\"data-l10n-id\", BasicColorPicker.#l10nColor[editorType]);\n    input.addEventListener(\n      \"input\",\n      () => {\n        this.#uiManager.updateParams(colorType, input.value);\n      },\n      { signal: this.#uiManager._signal }\n    );\n    return input;\n  }\n\n  update(value) {\n    if (!this.#input) {\n      return;\n    }\n    this.#input.value = value;\n  }\n\n  destroy() {\n    this.#input?.remove();\n    this.#input = null;\n  }\n\n  hideDropdown() {}\n}\n\nexport { BasicColorPicker, ColorPicker };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * PLEASE NOTE: This file is currently imported in both the `../display/` and\n *              `../scripting_api/` folders, hence be EXTREMELY careful about\n *              introducing any dependencies here since that can lead to an\n *              unexpected/unnecessary size increase of the *built* files.\n */\n\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255)\n    .toString(16)\n    .padStart(2, \"0\");\n}\n\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\n\n// PDF specifications section 10.3\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n\n  static T_HTML() {\n    return \"#00000000\";\n  }\n\n  static T_rgb() {\n    return [null];\n  }\n\n  static CMYK_RGB([c, y, m, k]) {\n    return [\n      \"RGB\",\n      1 - Math.min(1, c + k),\n      1 - Math.min(1, m + k),\n      1 - Math.min(1, y + k),\n    ];\n  }\n\n  static CMYK_rgb([c, y, m, k]) {\n    return [\n      scaleAndClamp(1 - Math.min(1, c + k)),\n      scaleAndClamp(1 - Math.min(1, m + k)),\n      scaleAndClamp(1 - Math.min(1, y + k)),\n    ];\n  }\n\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\nconst DateFormats = [\n  \"m/d\",\n  \"m/d/yy\",\n  \"mm/dd/yy\",\n  \"mm/yy\",\n  \"d-mmm\",\n  \"d-mmm-yy\",\n  \"dd-mmm-yy\",\n  \"yy-mm-dd\",\n  \"mmm-yy\",\n  \"mmmm-yy\",\n  \"mmm d, yyyy\",\n  \"mmmm d, yyyy\",\n  \"m/d/yy h:MM tt\",\n  \"m/d/yy HH:MM\",\n];\nconst TimeFormats = [\"HH:MM\", \"h:MM tt\", \"HH:MM:ss\", \"h:MM:ss tt\"];\n\nexport { ColorConverters, DateFormats, TimeFormats };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SVG_NS } from \"./display_utils.js\";\nimport { unreachable } from \"../shared/util.js\";\n\nclass BaseSVGFactory {\n  constructor() {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) &&\n      this.constructor === BaseSVGFactory\n    ) {\n      unreachable(\"Cannot initialize BaseSVGFactory.\");\n    }\n  }\n\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n\n    return svg;\n  }\n\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\n\nclass DOMSVGFactory extends BaseSVGFactory {\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\nexport { BaseSVGFactory, DOMSVGFactory };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_storage\").AnnotationStorage} AnnotationStorage */\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { XfaText } from \"./xfa_text.js\";\n\n/**\n * @typedef {Object} XfaLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Object} xfaHtml\n * @property {AnnotationStorage} [annotationStorage]\n * @property {IPDFLinkService} linkService\n * @property {string} [intent] - (default value is 'display').\n */\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, { value: null });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, { value: event.target.value });\n        });\n        break;\n      case \"input\":\n        if (\n          element.attributes.type === \"radio\" ||\n          element.attributes.type === \"checkbox\"\n        ) {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            // The checked attribute may have been set when opening the file,\n            // unset through the UI and we're here because of printing.\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked\n                ? event.target.getAttribute(\"xfaOn\")\n                : event.target.getAttribute(\"xfaOff\"),\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, { value: event.target.value });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value =\n            options.selectedIndex === -1\n              ? \"\"\n              : options[options.selectedIndex].value;\n          storage.setValue(id, { value });\n        });\n        break;\n    }\n  }\n\n  static setAttributes({ html, element, storage = null, intent, linkService }) {\n    const { attributes } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n\n    if (attributes.type === \"radio\") {\n      // Avoid to have a radio group when printing with the same as one\n      // already displayed.\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          // We don't need to add dataId in the html object but it can\n          // be useful to know its value when writing printing tests:\n          // in this case, don't skip dataId to have its value.\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || (key !== \"href\" && key !== \"newWindow\")) {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(\n        html,\n        attributes.href,\n        attributes.newWindow\n      );\n    }\n\n    // Set the value after the others to be sure to overwrite any other values.\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n\n  /**\n   * Render the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService,\n      });\n    }\n\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n\n    // Set defaults.\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n\n    // Text nodes used for the text highlighter.\n    const textDivs = [];\n\n    // In the rich text context, it's possible to just have a text node without\n    // a root element, so we handle this case here (see issue 17215).\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return { textDivs };\n    }\n\n    const stack = [[root, -1, rootHtml]];\n\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n\n      const { name } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n\n      const childHtml = child?.attributes?.xmlns\n        ? document.createElementNS(child.attributes.xmlns, name)\n        : document.createElement(name);\n\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService,\n        });\n      }\n\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n\n    /**\n     * TODO: re-enable that stuff once we've JS implementation.\n     * See https://bugzilla.mozilla.org/show_bug.cgi?id=1719465.\n     *\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaDisabled input, .xfaDisabled textarea\"\n     * )) {\n     * el.setAttribute(\"disabled\", true);\n     * }\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaReadOnly input, .xfaReadOnly textarea\"\n     * )) {\n     * el.setAttribute(\"readOnly\", true);\n     * }\n     */\n\n    for (const el of rootDiv.querySelectorAll(\n      \".xfaNonInteractive input, .xfaNonInteractive textarea\"\n    )) {\n      el.setAttribute(\"readOnly\", true);\n    }\n\n    return {\n      textDivs,\n    };\n  }\n\n  /**\n   * Update the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\nexport { XfaLayer };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../web/text_accessibility.js\").TextAccessibilityManager} TextAccessibilityManager */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../web/interfaces\").IDownloadManager} IDownloadManager */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/editor/tools.js\").AnnotationEditorUIManager} AnnotationEditorUIManager */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../web/struct_tree_layer_builder.js\").StructTreeLayerBuilder} StructTreeLayerBuilder */\n\nimport {\n  AnnotationBorderStyleType,\n  AnnotationEditorType,\n  AnnotationPrefix,\n  AnnotationType,\n  FeatureTest,\n  LINE_FACTOR,\n  shadow,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport { PDFDateString, setLayerDimensions } from \"./display_utils.js\";\nimport { AnnotationStorage } from \"./annotation_storage.js\";\nimport { ColorConverters } from \"../shared/scripting_utils.js\";\nimport { DOMSVGFactory } from \"./svg_factory.js\";\nimport { XfaLayer } from \"./xfa_layer.js\";\n\nconst DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nconst TIMEZONE_OFFSET = new Date().getTimezoneOffset() * 60 * 1000;\n\n/**\n * @typedef {Object} AnnotationElementParameters\n * @property {Object} data\n * @property {HTMLDivElement} layer\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} [downloadManager]\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {Object} svgFactory\n * @property {boolean} [enableScripting]\n * @property {boolean} [hasJSActions]\n * @property {Object} [fieldObjects]\n */\n\nclass AnnotationElementFactory {\n  /**\n   * @param {AnnotationElementParameters} parameters\n   * @returns {AnnotationElement}\n   */\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\n\nclass AnnotationElement {\n  #updates = null;\n\n  #hasBorder = false;\n\n  #popupElement = null;\n\n  constructor(\n    parameters,\n    {\n      isRenderable = false,\n      ignoreBorder = false,\n      createQuadrilaterals = false,\n    } = {}\n  ) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableComment = parameters.enableComment;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n\n  static _hasPopupData({ contentsObj, richText }) {\n    return !!(contentsObj?.str || richText?.str);\n  }\n\n  get _isEditable() {\n    return this.data.isEditable;\n  }\n\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n\n  get hasCommentButton() {\n    return this.enableComment && this._isEditable && this.hasPopupElement;\n  }\n\n  get commentButtonPosition() {\n    const { quadPoints, rect } = this.data;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    if (quadPoints?.length >= 8) {\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        if (quadPoints[i + 1] > maxY) {\n          maxY = quadPoints[i + 1];\n          maxX = quadPoints[i + 2];\n        } else if (quadPoints[i + 1] === maxY) {\n          maxX = Math.max(maxX, quadPoints[i + 2]);\n        }\n      }\n      return [maxX, maxY];\n    }\n    if (rect) {\n      return [rect[2], rect[3]];\n    }\n    return null;\n  }\n\n  get commentButtonColor() {\n    if (!this.data.color) {\n      return null;\n    }\n    const [r, g, b] = this.data.color;\n    const opacity = this.data.opacity ?? 1;\n    const oppositeOpacity = 255 * (1 - opacity);\n\n    return this.#changeLightness(\n      Math.min(r + oppositeOpacity, 255),\n      Math.min(g + oppositeOpacity, 255),\n      Math.min(b + oppositeOpacity, 255)\n    );\n  }\n\n  #changeLightness(r, g, b) {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    const l = (max + min) / 2;\n    const newL = (((1 + Math.sqrt(l)) / 2) * 100).toFixed(2);\n\n    if (max === min) {\n      // gray\n      return `hsl(0, 0%, ${newL}%)`;\n    }\n\n    const d = max - min;\n\n    // hue (branch on max only; avoids mod)\n    let h;\n    if (max === r) {\n      h = (g - b) / d + (g < b ? 6 : 0);\n    } else if (max === g) {\n      h = (b - r) / d + 2;\n    } else {\n      // max === b\n      h = (r - g) / d + 4;\n    }\n    h = (h * 60).toFixed(2);\n    const s = ((d / (1 - Math.abs(2 * l - 1))) * 100).toFixed(2);\n\n    return `hsl(${h}, ${s}%, ${newL}%)`;\n  }\n\n  _normalizePoint(point) {\n    const {\n      page: { view },\n      viewport: {\n        rawDims: { pageWidth, pageHeight, pageX, pageY },\n      },\n    } = this.parent;\n    point[1] = view[3] - point[1] + view[1];\n    point[0] = (100 * (point[0] - pageX)) / pageWidth;\n    point[1] = (100 * (point[1] - pageY)) / pageHeight;\n    return point;\n  }\n\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n\n    if (params.rect) {\n      this.#updates ||= {\n        rect: this.data.rect.slice(0),\n      };\n    }\n\n    const { rect, popup: newPopup } = params;\n\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n\n    let popup = this.#popupElement?.popup || this.popup;\n    if (!popup && newPopup?.text) {\n      this._createPopup(newPopup);\n      popup = this.#popupElement.popup;\n    }\n    if (!popup) {\n      return;\n    }\n    popup.updateEdited(params);\n    if (newPopup?.deleted) {\n      popup.remove();\n      this.#popupElement = null;\n      this.popup = null;\n    }\n  }\n\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n\n  #setRectEdited(rect) {\n    const {\n      container: { style },\n      data: { rect: currentRect, rotation },\n      parent: {\n        viewport: {\n          rawDims: { pageWidth, pageHeight, pageX, pageY },\n        },\n      },\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (pageHeight - rect[3] + pageY)) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${(100 * /* width = */ (rect[2] - rect[0])) / pageWidth}%`;\n      style.height = `${(100 * /* height = */ (rect[3] - rect[1])) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n\n  /**\n   * Create an empty container for the annotation's HTML element.\n   *\n   * @private\n   * @param {boolean} ignoreBorder\n   * @memberof AnnotationElement\n   * @returns {HTMLElement} A section element.\n   */\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: { page, viewport },\n    } = this;\n\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (\n      !(this instanceof WidgetAnnotationElement) &&\n      !(this instanceof LinkAnnotationElement)\n    ) {\n      container.tabIndex = 0;\n    }\n    const { style } = container;\n\n    // The accessibility manager will move the annotation in the DOM in\n    // order to match the visual ordering.\n    // But if an annotation is above an other one, then we must draw it\n    // after the other one whatever the order is in the DOM, hence the\n    // use of the z-index.\n    style.zIndex = this.parent.zIndex;\n    // Keep zIndex + 1 for stuff we want to add on top of this annotation.\n    this.parent.zIndex += 2;\n\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const { rotation } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const { width, height } = this;\n\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--total-scale-factor)) / calc(${verticalRadius}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--total-scale-factor)) / calc(${height}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      }\n\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n\n        default:\n          break;\n      }\n\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(\n          borderColor[0] | 0,\n          borderColor[1] | 0,\n          borderColor[2] | 0\n        );\n      } else {\n        // Transparent (invisible) border, so do not draw it at all.\n        style.borderWidth = 0;\n      }\n    }\n\n    // Do *not* modify `data.rect`, since that will corrupt the annotation\n    // position on subsequent calls to `_createContainer` (see issue 6804).\n    const rect = Util.normalizeRect([\n      data.rect[0],\n      page.view[3] - data.rect[1] + page.view[1],\n      data.rect[2],\n      page.view[3] - data.rect[3] + page.view[1],\n    ]);\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n\n    style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (rect[1] - pageY)) / pageHeight}%`;\n\n    const { rotation } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${(100 * width) / pageWidth}%`;\n      style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n\n    return container;\n  }\n\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const { pageWidth, pageHeight } = this.parent.viewport.rawDims;\n    let { width, height } = this;\n\n    if (angle % 180 !== 0) {\n      [width, height] = [height, width];\n    }\n    container.style.width = `${(100 * width) / pageWidth}%`;\n    container.style.height = `${(100 * height) / pageHeight}%`;\n\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] =\n        ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray),\n      });\n    };\n\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const { display } = event.detail;\n        // See scripting/constants.js for the values of `Display`.\n        // 0 = visible, 1 = hidden, 2 = noPrint and 3 = noView.\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2,\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print,\n        });\n      },\n      hidden: event => {\n        const { hidden } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden,\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({ preventScroll: false }), 0);\n      },\n      userName: event => {\n        // tooltip\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle,\n        });\n      },\n    });\n  }\n\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n\n    // Some properties may have been updated thanks to JS.\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail,\n          },\n          target: element,\n        };\n        action(eventProxy);\n        // The action has been consumed: no need to keep it.\n        delete storedData[actionName];\n      }\n    }\n  }\n\n  /**\n   * Create quadrilaterals from the annotation's quadpoints.\n   *\n   * @private\n   * @memberof AnnotationElement\n   */\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const { quadPoints } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map(x =>\n      Math.fround(x)\n    );\n\n    if (quadPoints.length === 8) {\n      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);\n      if (\n        rectTrX === trX &&\n        rectTrY === trY &&\n        rectBlX === blX &&\n        rectBlY === blY\n      ) {\n        // The quadpoints cover the whole annotation rectangle, so no need to\n        // create a quadrilateral.\n        return;\n      }\n    }\n\n    const { style } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const { borderColor, borderWidth } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\n        \"url('data:image/svg+xml;utf8,\",\n        `<svg xmlns=\"http://www.w3.org/2000/svg\"`,\n        ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`,\n        `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`,\n      ];\n      this.container.classList.add(\"hasBorder\");\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      this.container.classList.add(\"hasClipPath\");\n    }\n\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n\n    const { svgFactory } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    svg.role = \"none\";\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n\n    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {\n      const trX = quadPoints[i];\n      const trY = quadPoints[i + 1];\n      const blX = quadPoints[i + 2];\n      const blY = quadPoints[i + 3];\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(\n        `<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`\n      );\n    }\n\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n\n  /**\n   * Create a popup for the annotation's HTML element. This is used for\n   * annotations that do not have a Popup entry in the dictionary, but\n   * are of a type that works with popups (such as Highlight annotations).\n   *\n   * @param {Object} [popupData] - The data for the popup, if any.\n   *\n   * @private\n   * @memberof AnnotationElement\n   */\n  _createPopup(popupData = null) {\n    const { data } = this;\n\n    let contentsObj, modificationDate;\n    if (popupData) {\n      contentsObj = {\n        str: popupData.text,\n      };\n      modificationDate = popupData.date;\n    } else {\n      contentsObj = data.contentsObj;\n      modificationDate = data.modificationDate;\n    }\n    const popup = (this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate,\n        contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation,\n        noRotate: true,\n      },\n      linkService: this.linkService,\n      parent: this.parent,\n      elements: [this],\n    }));\n    this.parent.div.append(popup.render());\n  }\n\n  get hasPopupElement() {\n    return !!(this.#popupElement || this.popup || this.data.popupRef);\n  }\n\n  /**\n   * Render the annotation's HTML element(s).\n   *\n   * @public\n   * @memberof AnnotationElement\n   */\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n\n  /**\n   * @private\n   * @returns {Array}\n   */\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const { page, id, exportValues } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue =\n            typeof exportValues === \"string\" ? exportValues : null;\n\n          const domElement = document.querySelector(\n            `[data-element-id=\"${id}\"]`\n          );\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({ id, exportValue, domElement });\n        }\n      }\n      return fields;\n    }\n    // Fallback to a regular DOM lookup, to ensure that the standalone\n    // viewer components won't break.\n    for (const domElement of document.getElementsByName(name)) {\n      const { exportValue } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({ id, exportValue, domElement });\n    }\n    return fields;\n  }\n\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n\n  /**\n   * Get the HTML element(s) which can trigger a popup when clicked or hovered.\n   *\n   * @public\n   * @memberof AnnotationElement\n   * @returns {Array<HTMLElement>|HTMLElement} An array of elements or an\n   *          element.\n   */\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: { id: editId },\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId,\n        mustEnterInEditMode: true,\n      });\n    });\n  }\n\n  get width() {\n    return this.data.rect[2] - this.data.rect[0];\n  }\n\n  get height() {\n    return this.data.rect[3] - this.data.rect[1];\n  }\n}\n\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true,\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n\n  render() {\n    const { data, linkService } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action, data.overlaidText);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(\n        link,\n        data.attachment,\n        data.overlaidText,\n        data.attachmentDest\n      );\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState, data.overlaidText);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest, data.overlaidText);\n      isBound = true;\n    } else {\n      if (\n        data.actions &&\n        (data.actions.Action ||\n          data.actions[\"Mouse Up\"] ||\n          data.actions[\"Mouse Down\"]) &&\n        this.enableScripting &&\n        this.hasJSActions\n      ) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n\n    return this.container;\n  }\n\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n\n  /**\n   * Bind internal links to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} destination\n   * @param {string} [overlaidText]\n   * @memberof LinkAnnotationElement\n   */\n  _bindLink(link, destination, overlaidText = \"\") {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === /* isTooltipOnly = */ \"\") {\n      this.#setInternalLink();\n    }\n    if (overlaidText) {\n      link.title = overlaidText;\n    }\n  }\n\n  /**\n   * Bind named actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} action\n   * @param {string} [overlaidText]\n   * @memberof LinkAnnotationElement\n   */\n  _bindNamedAction(link, action, overlaidText = \"\") {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    if (overlaidText) {\n      link.title = overlaidText;\n    }\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind attachments to the link element.\n   * @param {Object} link\n   * @param {Object} attachment\n   * @param {string} [overlaidText]\n   * @param {string} [dest]\n   */\n  #bindAttachment(link, attachment, overlaidText = \"\", dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    } else if (overlaidText) {\n      link.title = overlaidText;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(\n        attachment.content,\n        attachment.filename,\n        dest\n      );\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind SetOCGState actions to the link element.\n   * @param {Object} link\n   * @param {Object} action\n   * @param {string} [overlaidText]\n   */\n  #bindSetOCGState(link, action, overlaidText = \"\") {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    if (overlaidText) {\n      link.title = overlaidText;\n    }\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind JS actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} data\n   * @memberof LinkAnnotationElement\n   */\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([\n      [\"Action\", \"onclick\"],\n      [\"Mouse Up\", \"onmouseup\"],\n      [\"Mouse Down\", \"onmousedown\"],\n    ]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name,\n          },\n        });\n        return false;\n      };\n    }\n    if (data.overlaidText) {\n      link.title = data.overlaidText;\n    }\n\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n\n    if (!this._fieldObjects) {\n      warn(\n        `_bindResetFormAction - \"resetForm\" action not supported, ` +\n          \"ensure that the `fieldObjects` parameter is provided.\"\n      );\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n\n    link.onclick = () => {\n      otherClickAction?.();\n\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include,\n      } = resetForm;\n\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const { id } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const { id } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"checkbox\":\n          case \"radiobutton\": {\n            const value = field.defaultValue === field.exportValues;\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"combobox\":\n          case \"listbox\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          default:\n            continue;\n        }\n\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n\n      if (this.enableScripting) {\n        // Update the values in the sandbox.\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\",\n          },\n        });\n      }\n\n      return false;\n    };\n  }\n}\n\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true });\n  }\n\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n\n    const image = document.createElement(\"img\");\n    image.src =\n      this.imageResourcesPath +\n      \"annotation-\" +\n      this.data.name.toLowerCase() +\n      \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\n      \"data-l10n-args\",\n      JSON.stringify({ type: this.data.name })\n    );\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.append(image);\n    return this.container;\n  }\n}\n\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    // Show only the container for unsupported field types.\n    return this.container;\n  }\n\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n\n  _getKeyModifier(event) {\n    return FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      // Mouse events\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event),\n          },\n        });\n      });\n    } else {\n      // Non-mouse events\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n\n        if (!valueGetter) {\n          return;\n        }\n\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n          },\n        });\n      });\n    }\n  }\n\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= { focused: false };\n        }\n        this._setEventListener(\n          element,\n          elementData,\n          baseName,\n          eventName,\n          getter\n        );\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          // Ensure that elementData will have the correct value.\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor =\n      color === null\n        ? \"transparent\"\n        : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n\n  /**\n   * Apply text styles to the text in the element.\n   *\n   * @private\n   * @param {HTMLDivElement} element\n   * @memberof TextWidgetAnnotationElement\n   */\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const { fontColor } = this.data.defaultAppearanceData;\n    const fontSize =\n      this.data.defaultAppearanceData.fontSize || DEFAULT_FONT_SIZE;\n\n    const style = element.style;\n\n    // TODO: If the font-size is zero, calculate it based on the height and\n    //       width of the element.\n    // Not setting `style.fontSize` will use the default font-size for now.\n\n    // We don't use the font, as specified in the PDF document, for the <input>\n    // element. Hence using the original `fontSize` could look bad, which is why\n    // it's instead based on the field height.\n    // If the height is \"big\" then it could lead to a too big font size\n    // so in this case use the one we've in the pdf (hence the min).\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(\n        this.data.rect[3] - this.data.rect[1] - BORDER_SIZE\n      );\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(\n        fontSize,\n        roundToOneDecimal(lineHeight / LINE_FACTOR)\n      );\n    } else {\n      const height = Math.abs(\n        this.data.rect[3] - this.data.rect[1] - BORDER_SIZE\n      );\n      computedFontSize = Math.min(\n        fontSize,\n        roundToOneDecimal(height / LINE_FACTOR)\n      );\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--total-scale-factor))`;\n\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\n\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable =\n      parameters.renderForms ||\n      parameters.data.hasOwnCanvas ||\n      (!parameters.data.hasAppearance && !!parameters.data.fieldValue);\n    super(parameters, { isRenderable });\n  }\n\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(\n      base.name,\n      /* skipId = */ base.id\n    )) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, { [keyInStorage]: value });\n    }\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    this.container.classList.add(\"textWidgetAnnotation\");\n\n    let element = null;\n    if (this.renderForms) {\n      // NOTE: We cannot set the values using `element.value` below, since it\n      //       prevents the AnnotationLayer rasterizer in `test/driver.js`\n      //       from parsing the elements correctly for the reference tests.\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue,\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen,\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n\n      let fieldFormattedValues =\n        storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false,\n      };\n\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = this.data.password ? \"password\" : \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = 0;\n      const { datetimeFormat, datetimeType, timeStep } = this.data;\n      const hasDateOrTime = !!datetimeType && this.enableScripting;\n      if (datetimeFormat) {\n        element.title = datetimeFormat;\n      }\n\n      this._setRequired(element, this.data.required);\n\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, { value: event.target.value });\n        this.setPropertyOnSiblings(\n          element,\n          \"value\",\n          event.target.value,\n          \"value\"\n        );\n        elementData.formattedValue = null;\n      });\n\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n\n      let blurListener = event => {\n        const { formattedValue } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        // Reset the cursor position to the start of the field (issue 12359).\n        event.target.scrollLeft = 0;\n      };\n\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const { target } = event;\n          if (hasDateOrTime) {\n            target.type = datetimeType;\n            if (timeStep) {\n              target.step = timeStep;\n            }\n          }\n\n          if (elementData.userValue) {\n            const value = elementData.userValue;\n            if (hasDateOrTime) {\n              if (datetimeType === \"time\") {\n                const date = new Date(value);\n                const parts = [\n                  date.getHours(),\n                  date.getMinutes(),\n                  date.getSeconds(),\n                ];\n                target.value = parts\n                  .map(v => v.toString().padStart(2, \"0\"))\n                  .join(\":\");\n              } else {\n                target.value = new Date(value - TIMEZONE_OFFSET)\n                  .toISOString()\n                  .split(datetimeType === \"date\" ? \"T\" : \".\", 1)[0];\n              }\n            } else {\n              target.value = value;\n            }\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              if (!hasDateOrTime) {\n                storage.setValue(id, {\n                  value: elementData.userValue.toString(),\n                });\n              }\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const { formattedValue } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (\n                formattedValue !== null &&\n                formattedValue !== undefined &&\n                event.target !== document.activeElement\n              ) {\n                // Input hasn't the focus so display formatted string\n                event.target.value = formattedValue;\n              }\n              const data = {\n                formattedValue,\n              };\n              if (hasDateOrTime) {\n                // If the field is a date or time, we store the formatted value\n                // in the `value` property, so that it can be used by the\n                // `Keystroke` action.\n                data.value = formattedValue;\n              }\n              storage.setValue(id, data);\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const { charLimit } = event.detail;\n              const { target } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, { value });\n\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd,\n                },\n              });\n            },\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n\n        // Even if the field hasn't any actions\n        // leaving it can still trigger some actions with Calculate\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          // If the key is one of Escape, Enter then the data are committed.\n          // If we've a Tab then data will be committed on blur.\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            // When we've a multiline field, \"Enter\" key is a key as the other\n            // hence we don't commit the data (Acrobat behaves the same way)\n            // (see issue #15627).\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const { value } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          // Save the entered value\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd,\n            },\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const { target } = event;\n          let { value } = target;\n          if (hasDateOrTime) {\n            if (value && datetimeType === \"time\") {\n              const parts = value.split(\":\").map(v => parseInt(v, 10));\n              value = new Date(\n                2000,\n                0,\n                1,\n                parts[0],\n                parts[1],\n                parts[2] || 0\n              ).valueOf();\n              target.step = \"\";\n            } else {\n              value = new Date(value).valueOf();\n            }\n            target.type = \"text\";\n          }\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd,\n              },\n            });\n          }\n          _blurListener(event);\n        });\n\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const { data, target } = event;\n            const { value, selectionStart, selectionEnd } = target;\n\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n\n            switch (event.inputType) {\n              // https://rawgit.com/w3c/input-events/v1/index.html#interface-InputEvent-Attributes\n              case \"deleteWordBackward\": {\n                const match = value\n                  .substring(0, selectionStart)\n                  .match(/\\w*[^\\w]*$/);\n                if (match) {\n                  selStart -= match[0].length;\n                }\n                break;\n              }\n              case \"deleteWordForward\": {\n                const match = value\n                  .substring(selectionStart)\n                  .match(/^[^\\w]*\\w*/);\n                if (match) {\n                  selEnd += match[0].length;\n                }\n                break;\n              }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n\n            // We handle the event ourselves.\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd,\n              },\n            });\n          });\n        }\n\n        this._setEventListeners(\n          element,\n          elementData,\n          [\n            [\"focus\", \"Focus\"],\n            [\"blur\", \"Blur\"],\n            [\"mousedown\", \"Mouse Down\"],\n            [\"mouseenter\", \"Mouse Enter\"],\n            [\"mouseleave\", \"Mouse Exit\"],\n            [\"mouseup\", \"Mouse Up\"],\n          ],\n          event => event.target.value\n        );\n      }\n\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--total-scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: !!parameters.data.hasOwnCanvas });\n  }\n}\n\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== \"Off\";\n      storage.setValue(id, { value });\n    }\n\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = 0;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const checkbox of this._getElementsByName(name, /* skipId = */ id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, { value: curChecked });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, { value: event.target.checked });\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        null,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== data.buttonValue;\n      storage.setValue(id, { value });\n    }\n\n    if (value) {\n      // It's possible that multiple radio buttons are checked.\n      // So if this one is checked we just reset the other ones.\n      // (see bug 1864136). Then when the other ones will be rendered they will\n      // unchecked (because of their value in the storage).\n      // Consequently, the first checked radio button will be the only checked\n      // one.\n      for (const radio of this._getElementsByName(\n        data.fieldName,\n        /* skipId = */ id\n      )) {\n        storage.setValue(radio.id, { value: false });\n      }\n    }\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = 0;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const radio of this._getElementsByName(name, /* skipId = */ id)) {\n        storage.setValue(radio.id, { value: false });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked =\n        defaultValue !== null &&\n        defaultValue !== undefined &&\n        defaultValue === data.buttonValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, { value: curChecked });\n            }\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        null,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { ignoreBorder: parameters.data.hasAppearance });\n  }\n\n  render() {\n    // The rendering and functionality of a push button widget annotation is\n    // equal to that of a link annotation, but may have more functionality, such\n    // as performing actions on form fields (resetting, submitting, et cetera).\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n\n    return container;\n  }\n}\n\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue,\n    });\n\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = 0;\n\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n\n    if (!this.data.combo) {\n      // List boxes have a size and (optionally) multiple selection.\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n\n    // Insert the options into the choice field.\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const { options, multiple } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1\n          ? null\n          : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter\n        .call(options, option => option.selected)\n        .map(option => option[name]);\n    };\n\n    let selectedValues = getValue(/* isExport */ false);\n\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value,\n      }));\n    };\n\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(\n                options,\n                option => option.selected\n              );\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, { value: null, items: [] });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          insert(event) {\n            const { index, displayValue, exportValue } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          items(event) {\n            const { items } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const { displayValue, exportValue } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(/* isExport */ true);\n        const change = getValue(/* isExport */ false);\n        storage.setValue(id, { value: exportValue });\n\n        event.preventDefault();\n\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false,\n          },\n        });\n      });\n\n      this._setEventListeners(\n        selectElement,\n        null,\n        [\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n          [\"input\", \"Action\"],\n          [\"input\", \"Validate\"],\n        ],\n        event => event.target.value\n      );\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, { value: getValue(/* isExport */ true) });\n      });\n    }\n\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {\n      // Just use the default font size...\n      // it's a bit hard to guess what is a good size.\n    }\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\n\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const { data, elements } = parameters;\n    super(parameters, { isRenderable: AnnotationElement._hasPopupData(data) });\n    this.elements = elements;\n    this.popup = null;\n  }\n\n  render() {\n    const { container } = this;\n    container.classList.add(\"popupAnnotation\");\n    container.role = \"comment\";\n\n    const popup = (this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate || this.data.creationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open,\n      eventBus: this.linkService.eventBus,\n    }));\n\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      element.container.ariaHasPopup = \"dialog\";\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n\n    this.container.setAttribute(\n      \"aria-controls\",\n      elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\")\n    );\n\n    return this.container;\n  }\n}\n\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n\n  #boundHide = this.#hide.bind(this);\n\n  #boundShow = this.#show.bind(this);\n\n  #boundToggle = this.#toggle.bind(this);\n\n  #color = null;\n\n  #container = null;\n\n  #contentsObj = null;\n\n  #dateObj = null;\n\n  #elements = null;\n\n  #eventBus = null;\n\n  #parent = null;\n\n  #parentRect = null;\n\n  #pinned = false;\n\n  #popup = null;\n\n  #popupAbortController = null;\n\n  #position = null;\n\n  #commentButton = null;\n\n  #commentButtonPosition = null;\n\n  #commentButtonColor = null;\n\n  #rect = null;\n\n  #richText = null;\n\n  #titleObj = null;\n\n  #updates = null;\n\n  #wasVisible = false;\n\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open,\n    eventBus = null,\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#eventBus = eventBus;\n\n    // The modification date is shown in the popup instead of the creation\n    // date if it is available and can be parsed correctly, which is\n    // consistent with other viewers such as Adobe Acrobat.\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    this.#addEventListeners();\n\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      // Since the popup is lazily created, we need to ensure that it'll be\n      // created and displayed during reference tests.\n      this.#parent.popupShow.push(async () => {\n        if (this.#container.hidden) {\n          this.#show();\n        }\n      });\n    }\n  }\n\n  #addEventListeners() {\n    if (this.#popupAbortController) {\n      return;\n    }\n    this.#popupAbortController = new AbortController();\n    const { signal } = this.#popupAbortController;\n\n    // Attach the event listeners to the trigger element.\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle, { signal });\n      element.addEventListener(\"mouseenter\", this.#boundShow, { signal });\n      element.addEventListener(\"mouseleave\", this.#boundHide, { signal });\n      element.classList.add(\"popupTriggerArea\");\n    }\n\n    // Attach the event listener to toggle the popup with the keyboard.\n    for (const element of this.#elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown, {\n        signal,\n      });\n    }\n\n    this.#renderCommentButton();\n  }\n\n  #setCommentButtonPosition() {\n    const element = this.#elements.find(e => e.hasCommentButton);\n    if (!element) {\n      return;\n    }\n    this.#commentButtonPosition = element._normalizePoint(\n      element.commentButtonPosition\n    );\n    this.#commentButtonColor = element.commentButtonColor;\n  }\n\n  #renderCommentButton() {\n    if (this.#commentButton) {\n      return;\n    }\n\n    if (!this.#commentButtonPosition) {\n      this.#setCommentButtonPosition();\n    }\n\n    if (!this.#commentButtonPosition) {\n      return;\n    }\n\n    const button = (this.#commentButton = document.createElement(\"button\"));\n    button.className = \"annotationCommentButton\";\n    const parentContainer = this.#elements[0].container;\n    button.style.zIndex = parentContainer.style.zIndex + 1;\n    button.tabIndex = 0;\n\n    const { signal } = this.#popupAbortController;\n    button.addEventListener(\"hover\", this.#boundToggle, { signal });\n    button.addEventListener(\"keydown\", this.#boundKeyDown, { signal });\n    button.addEventListener(\n      \"click\",\n      () => {\n        const [\n          {\n            data: { id: editId },\n            annotationEditorType: mode,\n          },\n        ] = this.#elements;\n        this.#eventBus?.dispatch(\"switchannotationeditormode\", {\n          source: this,\n          editId,\n          mode,\n          editComment: true,\n        });\n      },\n      { signal }\n    );\n    const { style } = button;\n    style.left = `calc(${this.#commentButtonPosition[0]}%)`;\n    style.top = `calc(${this.#commentButtonPosition[1]}% - var(--comment-button-dim))`;\n    if (this.#commentButtonColor) {\n      style.backgroundColor = this.#commentButtonColor;\n    }\n    parentContainer.after(button);\n  }\n\n  render() {\n    if (this.#popup) {\n      return;\n    }\n\n    const popup = (this.#popup = document.createElement(\"div\"));\n    popup.className = \"popup\";\n\n    if (this.#color) {\n      const baseColor = (popup.style.outlineColor = Util.makeHexColor(\n        ...this.#color\n      ));\n      popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n    }\n\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    if (this.#titleObj?.str) {\n      const title = document.createElement(\"span\");\n      title.className = \"title\";\n      header.append(title);\n      ({ dir: title.dir, str: title.textContent } = this.#titleObj);\n    }\n    popup.append(header);\n\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"time\");\n      modificationDate.className = \"popupDate\";\n      modificationDate.setAttribute(\n        \"data-l10n-id\",\n        \"pdfjs-annotation-date-time-string\"\n      );\n      modificationDate.setAttribute(\n        \"data-l10n-args\",\n        JSON.stringify({ dateObj: this.#dateObj.valueOf() })\n      );\n      modificationDate.dateTime = this.#dateObj.toISOString();\n      header.append(modificationDate);\n    }\n\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: \"richText\",\n        div: popup,\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (\n      richText?.str &&\n      (!contentsObj?.str || contentsObj.str === richText.str)\n    ) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\",\n        },\n        children: [\n          {\n            name: \"p\",\n            children: popupLines,\n          },\n        ],\n      },\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize\n          ? `calc(${this.#fontSize}px * var(--total-scale-factor))`\n          : \"\",\n      },\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes,\n      });\n    }\n    return popupContent;\n  }\n\n  /**\n   * Format the contents of the popup by adding newlines where necessary.\n   *\n   * @private\n   * @param {Object<string, string>} contentsObj\n   * @memberof PopupElement\n   * @returns {HTMLParagraphElement}\n   */\n  _formatContents({ str, dir }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n\n    if (event.key === \"Enter\" || (event.key === \"Escape\" && this.#pinned)) {\n      this.#toggle();\n    }\n  }\n\n  updateEdited({ rect, popup, deleted }) {\n    if (deleted || popup?.deleted) {\n      this.remove();\n      return;\n    }\n    this.#addEventListeners();\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText,\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popup) {\n      this.#richText = this.#makePopupContent(popup.text);\n      this.#dateObj = PDFDateString.toDateObject(popup.date);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({ contentsObj: this.#contentsObj, richText: this.#richText } =\n      this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n\n  remove() {\n    this.#popupAbortController?.abort();\n    this.#popupAbortController = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#wasVisible = false;\n    this.#pinned = false;\n    for (const element of this.trigger) {\n      element.classList.remove(\"popupTriggerArea\");\n    }\n  }\n\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: { view },\n      viewport: {\n        rawDims: { pageWidth, pageHeight, pageX, pageY },\n      },\n    } = this.#parent;\n\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n\n    const normalizedRect = Util.normalizeRect([\n      rect[0],\n      view[3] - rect[1] + view[1],\n      rect[2],\n      view[3] - rect[3] + view[1],\n    ]);\n\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect\n      ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION\n      : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [\n      (100 * (popupLeft - pageX)) / pageWidth,\n      (100 * (popupTop - pageY)) / pageHeight,\n    ];\n\n    const { style } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n\n  /**\n   * Toggle the visibility of the popup.\n   */\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n\n  /**\n   * Show the popup.\n   */\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex =\n        parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n\n  /**\n   * Hide the popup.\n   */\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex =\n      parseInt(this.#container.style.zIndex) - 1000;\n  }\n\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n\n  maybeShow() {\n    this.#addEventListeners();\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\n\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this._editOnDoubleClick();\n\n    return this.container;\n  }\n}\n\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n\n    // Create an invisible line with the same starting and ending coordinates\n    // that acts as the trigger for the popup. Only the line itself should\n    // trigger the popup, not the entire container.\n    const { data, width, height } = this;\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // PDF coordinates are calculated from a bottom left origin, so transform\n    // the line coordinates to a top left origin for the SVG element.\n    const line = (this.#line = this.svgFactory.createElement(\"svg:line\"));\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(line);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the line instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n\n    // Create an invisible square with the same rectangle that acts as the\n    // trigger for the popup. Only the square itself should trigger the\n    // popup, not the entire container.\n    const { data, width, height } = this;\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // The browser draws half of the borders inside the square and half of\n    // the borders outside the square by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const square = (this.#square = this.svgFactory.createElement(\"svg:rect\"));\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(square);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the square instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n\n    // Create an invisible circle with the same ellipse that acts as the\n    // trigger for the popup. Only the circle itself should trigger the\n    // popup, not the entire container.\n    const { data, width, height } = this;\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // The browser draws half of the borders inside the circle and half of\n    // the borders outside the circle by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const circle = (this.#circle =\n      this.svgFactory.createElement(\"svg:ellipse\"));\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(circle);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the circle instead\n    // of to the entire container (which is the default).\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n\n  render() {\n    this.container.classList.add(this.containerClassName);\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup. Only the polyline itself should trigger the\n    // popup, not the entire container.\n    const {\n      data: { rect, vertices, borderStyle, popupRef },\n      width,\n      height,\n    } = this;\n    if (!vertices) {\n      return this.container;\n    }\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // Convert the vertices array to a single points string that the SVG\n    // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n    // calculated from a bottom left origin, so transform the polyline\n    // coordinates to a top left origin for the SVG element.\n    let points = [];\n    for (let i = 0, ii = vertices.length; i < ii; i += 2) {\n      const x = vertices[i] - rect[0];\n      const y = rect[3] - vertices[i + 1];\n      points.push(`${x},${y}`);\n    }\n    points = points.join(\" \");\n\n    const polyline = (this.#polyline = this.svgFactory.createElement(\n      this.svgElementName\n    ));\n    polyline.setAttribute(\"points\", points);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(polyline);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the polyline\n    // instead of to the entire container (which is the default).\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    return this.container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\n\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    // Polygons are specific forms of polylines, so reuse their logic.\n    super(parameters);\n\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\n\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\n\nclass InkAnnotationElement extends AnnotationElement {\n  #polylinesGroupElement = null;\n\n  #polylines = [];\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n\n    this.containerClassName = \"inkAnnotation\";\n\n    // Use the polyline SVG element since it allows us to use coordinates\n    // directly and to draw both straight lines and curves.\n    this.svgElementName = \"svg:polyline\";\n\n    this.annotationEditorType =\n      this.data.it === \"InkHighlight\"\n        ? AnnotationEditorType.HIGHLIGHT\n        : AnnotationEditorType.INK;\n  }\n\n  #getTransform(rotation, rect) {\n    // PDF coordinates are calculated from a bottom left origin, so\n    // transform the polyline coordinates to a top left origin for the\n    // SVG element.\n    switch (rotation) {\n      case 90:\n        return {\n          transform: `rotate(90) translate(${-rect[0]},${rect[1]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0],\n        };\n      case 180:\n        return {\n          transform: `rotate(180) translate(${-rect[2]},${rect[1]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1],\n        };\n      case 270:\n        return {\n          transform: `rotate(270) translate(${-rect[2]},${rect[3]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0],\n        };\n      default:\n        return {\n          transform: `translate(${-rect[0]},${rect[3]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1],\n        };\n    }\n  }\n\n  render() {\n    this.container.classList.add(this.containerClassName);\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup.\n    const {\n      data: { rect, rotation, inkLists, borderStyle, popupRef },\n    } = this;\n    const { transform, width, height } = this.#getTransform(rotation, rect);\n\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n    const g = (this.#polylinesGroupElement =\n      this.svgFactory.createElement(\"svg:g\"));\n    svg.append(g);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    g.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    g.setAttribute(\"stroke-linecap\", \"round\");\n    g.setAttribute(\"stroke-linejoin\", \"round\");\n    g.setAttribute(\"stroke-miterlimit\", 10);\n    g.setAttribute(\"stroke\", \"transparent\");\n    g.setAttribute(\"fill\", \"transparent\");\n    g.setAttribute(\"transform\", transform);\n\n    for (let i = 0, ii = inkLists.length; i < ii; i++) {\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", inkLists[i].join(\",\"));\n      g.append(polyline);\n    }\n\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.append(svg);\n    this._editOnDoubleClick();\n\n    return this.container;\n  }\n\n  updateEdited(params) {\n    super.updateEdited(params);\n    const { thickness, points, rect } = params;\n    const g = this.#polylinesGroupElement;\n    if (thickness >= 0) {\n      g.setAttribute(\"stroke-width\", thickness || 1);\n    }\n    if (points) {\n      for (let i = 0, ii = this.#polylines.length; i < ii; i++) {\n        this.#polylines[i].setAttribute(\"points\", points[i].join(\",\"));\n      }\n    }\n    if (rect) {\n      const { transform, width, height } = this.#getTransform(\n        this.data.rotation,\n        rect\n      );\n      const root = g.parentElement;\n      root.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n      g.setAttribute(\"transform\", transform);\n    }\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n\n  get commentButtonPosition() {\n    const { inkLists, rect } = this.data;\n    if (inkLists?.length >= 1) {\n      let maxX = -Infinity;\n      let maxY = -Infinity;\n      for (const inkList of inkLists) {\n        for (let i = 0, ii = inkList.length; i < ii; i += 2) {\n          if (inkList[i + 1] > maxY) {\n            maxY = inkList[i + 1];\n            maxX = inkList[i];\n          } else if (inkList[i + 1] === maxY) {\n            maxX = Math.max(maxX, inkList[i]);\n          }\n        }\n      }\n      if (maxX !== Infinity) {\n        return [maxX, maxY];\n      }\n    }\n    if (rect) {\n      return [rect[2], rect[3]];\n    }\n    return null;\n  }\n}\n\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n    this.annotationEditorType = AnnotationEditorType.HIGHLIGHT;\n  }\n\n  render() {\n    const {\n      data: { overlaidText, popupRef },\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"highlightAnnotation\");\n    this._editOnDoubleClick();\n\n    if (overlaidText) {\n      const mark = document.createElement(\"mark\");\n      mark.classList.add(\"overlaidText\");\n      mark.textContent = overlaidText;\n      this.container.append(mark);\n    }\n\n    return this.container;\n  }\n}\n\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    const {\n      data: { overlaidText, popupRef },\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"underlineAnnotation\");\n\n    if (overlaidText) {\n      const underline = document.createElement(\"u\");\n      underline.classList.add(\"overlaidText\");\n      underline.textContent = overlaidText;\n      this.container.append(underline);\n    }\n\n    return this.container;\n  }\n}\n\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    const {\n      data: { overlaidText, popupRef },\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"squigglyAnnotation\");\n\n    if (overlaidText) {\n      const underline = document.createElement(\"u\");\n      underline.classList.add(\"overlaidText\");\n      underline.textContent = overlaidText;\n      this.container.append(underline);\n    }\n\n    return this.container;\n  }\n}\n\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    const {\n      data: { overlaidText, popupRef },\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n\n    this.container.classList.add(\"strikeoutAnnotation\");\n\n    if (overlaidText) {\n      const strikeout = document.createElement(\"s\");\n      strikeout.classList.add(\"overlaidText\");\n      strikeout.textContent = overlaidText;\n      this.container.append(strikeout);\n    }\n\n    return this.container;\n  }\n}\n\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true, ignoreBorder: true });\n    this.annotationEditorType = AnnotationEditorType.STAMP;\n  }\n\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    this.container.setAttribute(\"role\", \"img\");\n\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n\n    return this.container;\n  }\n}\n\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n\n  constructor(parameters) {\n    super(parameters, { isRenderable: true });\n\n    const { file } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file,\n    });\n  }\n\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n\n    const { container, data } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      // Unfortunately it seems that it's not clearly specified exactly what\n      // names are actually valid, since Table 184 contains:\n      //   Conforming readers shall provide predefined icon appearances for at\n      //   least the following standard names: GraphPushPin, PaperclipTag.\n      //   Additional names may be supported as well. Default value: PushPin.\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${\n        /paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"\n      }.svg`;\n\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(\n          data.fillAlpha * 100\n        )}%);`;\n\n        if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n          this.container.classList.add(\"hasFillAlpha\");\n        }\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n\n    const { isMac } = FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n\n    container.append(trigger);\n    return container;\n  }\n\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n\n  /**\n   * Download the file attachment associated with this annotation.\n   */\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\n\n/**\n * @typedef {Object} AnnotationLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Array} annotations\n * @property {PDFPageProxy} page\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} [downloadManager]\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {boolean} [enableScripting] - Enable embedded script execution.\n * @property {boolean} [hasJSActions] - Some fields have JS actions.\n *   The default value is `false`.\n * @property {Object<string, Array<Object>> | null} [fieldObjects]\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap]\n * @property {TextAccessibilityManager} [accessibilityManager]\n * @property {AnnotationEditorUIManager} [annotationEditorUIManager]\n * @property {StructTreeLayerBuilder} [structTreeLayer]\n */\n\n/**\n * Manage the layer containing all the annotations.\n */\nclass AnnotationLayer {\n  #accessibilityManager = null;\n\n  #annotationCanvasMap = null;\n\n  #editableAnnotations = new Map();\n\n  #structTreeLayer = null;\n\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n    structTreeLayer,\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.#structTreeLayer = structTreeLayer || null;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"showPopups\", {\n        value: async () => {\n          for (const show of this.popupShow) {\n            await show();\n          }\n        },\n      });\n      this.popupShow = [];\n    }\n  }\n\n  hasEditableAnnotations() {\n    return this.#editableAnnotations.size > 0;\n  }\n\n  async #appendElement(element, id, popupElements) {\n    const contentElement = element.firstChild || element;\n    const annotationId = (contentElement.id = `${AnnotationPrefix}${id}`);\n    const ariaAttributes =\n      await this.#structTreeLayer?.getAriaAttributes(annotationId);\n    if (ariaAttributes) {\n      for (const [key, value] of ariaAttributes) {\n        contentElement.setAttribute(key, value);\n      }\n    }\n\n    if (popupElements) {\n      // Set the popup just after the first element associated with the popup.\n      popupElements.at(-1).container.after(element);\n    } else {\n      this.div.append(element);\n      this.#accessibilityManager?.moveElementInDOM(\n        this.div,\n        element,\n        contentElement,\n        /* isRemovable = */ false\n      );\n    }\n  }\n\n  /**\n   * Render a new annotation layer with all annotation elements.\n   *\n   * @param {AnnotationLayerParameters} params\n   * @memberof AnnotationLayer\n   */\n  async render(params) {\n    const { annotations } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableComment: params.enableComment === true,\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null,\n    };\n\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        if (data.rect[2] === data.rect[0] || data.rect[3] === data.rect[1]) {\n          continue; // Ignore empty annotations.\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          // Ignore popup annotations without a corresponding annotation.\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n\n      if (!element.isRenderable) {\n        continue;\n      }\n\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      await this.#appendElement(rendered, data.id, elementParams.elements);\n\n      if (element._isEditable) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n\n    this.#setAnnotationCanvasMap();\n  }\n\n  /**\n   * Add link annotations to the annotation layer.\n   *\n   * @param {Array<Object>} annotations\n   * @param {IPDFLinkService} linkService\n   * @memberof AnnotationLayer\n   */\n  async addLinkAnnotations(annotations, linkService) {\n    const elementParams = {\n      data: null,\n      layer: this.div,\n      linkService,\n      svgFactory: new DOMSVGFactory(),\n      parent: this,\n    };\n    for (const data of annotations) {\n      data.borderStyle ||= AnnotationLayer._defaultBorderStyle;\n\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n\n      if (!element.isRenderable) {\n        continue;\n      }\n      const rendered = element.render();\n      await this.#appendElement(rendered, data.id, null);\n    }\n  }\n\n  /**\n   * Update the annotation elements on existing annotation layer.\n   *\n   * @param {AnnotationLayerParameters} viewport\n   * @memberof AnnotationLayer\n   */\n  update({ viewport }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, { rotation: viewport.rotation });\n\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n\n      canvas.className = \"annotationContent\";\n      const { firstChild } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n\n      const editableAnnotation = this.#editableAnnotations.get(id);\n      if (!editableAnnotation) {\n        continue;\n      }\n      if (editableAnnotation._hasNoCanvas) {\n        // The canvas wasn't available when the annotation was created.\n        this._annotationEditorUIManager?.setMissingCanvas(\n          id,\n          element.id,\n          canvas\n        );\n        editableAnnotation._hasNoCanvas = false;\n      } else {\n        editableAnnotation.canvas = canvas;\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n\n  /**\n   * @private\n   */\n  static get _defaultBorderStyle() {\n    return shadow(\n      this,\n      \"_defaultBorderStyle\",\n      Object.freeze({\n        width: 1,\n        rawWidth: 1,\n        style: AnnotationBorderStyleType.SOLID,\n        dashArray: [3],\n        horizontalCornerRadius: 0,\n        verticalCornerRadius: 0,\n      })\n    );\n  }\n}\n\nexport {\n  AnnotationLayer,\n  FreeTextAnnotationElement,\n  HighlightAnnotationElement,\n  InkAnnotationElement,\n  StampAnnotationElement,\n};\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  assert,\n  LINE_FACTOR,\n  shadow,\n  Util,\n} from \"../../shared/util.js\";\nimport { AnnotationEditorUIManager, KeyboardManager } from \"./tools.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { BasicColorPicker } from \"./color_picker.js\";\nimport { FreeTextAnnotationElement } from \"../annotation_layer.js\";\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\n\n/**\n * Basic text editor in order to create a FreeTex annotation.\n */\nclass FreeTextEditor extends AnnotationEditor {\n  #color;\n\n  #content = \"\";\n\n  #editorDivId = `${this.id}-editor`;\n\n  #editModeAC = null;\n\n  #fontSize;\n\n  _colorPicker = null;\n\n  static _freeTextDefaultContent = \"\";\n\n  static _internalPadding = 0;\n\n  static _defaultColor = null;\n\n  static _defaultFontSize = 10;\n\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n\n    const arrowChecker = self => self.isEmpty();\n\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [\n          // Commit the text in case the user use ctrl+s to save the document.\n          // The event must bubble in order to be caught by the viewer.\n          // See bug 1831574.\n          [\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"],\n          proto.commitOrRemove,\n          { bubbles: true },\n        ],\n        [\n          [\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"],\n          proto.commitOrRemove,\n        ],\n        [\n          [\"ArrowLeft\", \"mac+ArrowLeft\"],\n          proto._translateEmpty,\n          { args: [-small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"],\n          proto._translateEmpty,\n          { args: [-big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowRight\", \"mac+ArrowRight\"],\n          proto._translateEmpty,\n          { args: [small, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"],\n          proto._translateEmpty,\n          { args: [big, 0], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowUp\", \"mac+ArrowUp\"],\n          proto._translateEmpty,\n          { args: [0, -small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"],\n          proto._translateEmpty,\n          { args: [0, -big], checker: arrowChecker },\n        ],\n        [\n          [\"ArrowDown\", \"mac+ArrowDown\"],\n          proto._translateEmpty,\n          { args: [0, small], checker: arrowChecker },\n        ],\n        [\n          [\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"],\n          proto._translateEmpty,\n          { args: [0, big], checker: arrowChecker },\n        ],\n      ])\n    );\n  }\n\n  static _type = \"freetext\";\n\n  static _editorType = AnnotationEditorType.FREETEXT;\n\n  constructor(params) {\n    super({ ...params, name: \"freeTextEditor\" });\n    this.#color =\n      params.color ||\n      FreeTextEditor._defaultColor ||\n      AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(\"pdfjs-editor-freetext-added-alert\");\n    }\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    const style = getComputedStyle(document.documentElement);\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      const lineHeight = parseFloat(\n        style.getPropertyValue(\"--freetext-line-height\")\n      );\n      assert(\n        lineHeight === LINE_FACTOR,\n        \"Update the CSS variable to agree with the constant.\"\n      );\n    }\n\n    this._internalPadding = parseFloat(\n      style.getPropertyValue(\"--freetext-padding\")\n    );\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  static get defaultPropertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.FREETEXT_SIZE,\n        FreeTextEditor._defaultFontSize,\n      ],\n      [\n        AnnotationEditorParamsType.FREETEXT_COLOR,\n        FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize],\n      [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color],\n    ];\n  }\n\n  /** @inheritdoc */\n  get toolbarButtons() {\n    this._colorPicker ||= new BasicColorPicker(this);\n    return [[\"colorPicker\", this._colorPicker]];\n  }\n\n  get colorType() {\n    return AnnotationEditorParamsType.FREETEXT_COLOR;\n  }\n\n  get colorValue() {\n    return this.#color;\n  }\n\n  /**\n   * Update the font size and make this action as undoable.\n   * @param {number} fontSize\n   */\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--total-scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n      this._colorPicker?.update(col);\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Helper to translate the editor with the keyboard when it's empty.\n   * @param {number} x in page units.\n   * @param {number} y in page units.\n   */\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, /* noCommit = */ true);\n  }\n\n  /** @inheritdoc */\n  getInitialTranslation() {\n    // The start of the base line is where the user clicked.\n    const scale = this.parentScale;\n    return [\n      -FreeTextEditor._internalPadding * scale,\n      -(FreeTextEditor._internalPadding + this.#fontSize) * scale,\n    ];\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilting it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  /** @inheritdoc */\n  enableEditMode() {\n    if (!super.enableEditMode()) {\n      return false;\n    }\n\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        !this.#editModeAC,\n        \"No `this.#editModeAC` AbortController should exist.\"\n      );\n    }\n    this.#editModeAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#editModeAC);\n\n    this.editorDiv.addEventListener(\n      \"keydown\",\n      this.editorDivKeydown.bind(this),\n      { signal }\n    );\n    this.editorDiv.addEventListener(\"focus\", this.editorDivFocus.bind(this), {\n      signal,\n    });\n    this.editorDiv.addEventListener(\"blur\", this.editorDivBlur.bind(this), {\n      signal,\n    });\n    this.editorDiv.addEventListener(\"input\", this.editorDivInput.bind(this), {\n      signal,\n    });\n    this.editorDiv.addEventListener(\"paste\", this.editorDivPaste.bind(this), {\n      signal,\n    });\n\n    return true;\n  }\n\n  /** @inheritdoc */\n  disableEditMode() {\n    if (!super.disableEditMode()) {\n      return false;\n    }\n\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n\n    this.#editModeAC?.abort();\n    this.#editModeAC = null;\n\n    // On Chrome, the focus is given to <body> when contentEditable is set to\n    // false, hence we focus the div.\n    this.div.focus({\n      preventScroll: true /* See issue #15744 */,\n    });\n\n    // In case the blur callback hasn't been called.\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n\n    return true;\n  }\n\n  /** @inheritdoc */\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n\n  /** @inheritdoc */\n  onceAdded(focus) {\n    if (this.width) {\n      // The editor was created in using ctrl+c.\n      return;\n    }\n    this.enableEditMode();\n    if (focus) {\n      this.editorDiv.focus();\n    }\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n\n  /** @inheritdoc */\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n\n  /**\n   * Extract the text from this editor.\n   * @returns {string}\n   */\n  #extractText() {\n    // We don't use innerText because there are some bugs with line breaks.\n    const buffer = [];\n    this.editorDiv.normalize();\n    let prevChild = null;\n    for (const child of this.editorDiv.childNodes) {\n      if (prevChild?.nodeType === Node.TEXT_NODE && child.nodeName === \"BR\") {\n        // It can happen if the user uses shift+enter to add a new line.\n        // If we don't skip it, we'll end up with an extra line (one for the\n        // text and one for the br element).\n        continue;\n      }\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n      prevChild = child;\n    }\n    return buffer.join(\"\\n\");\n  }\n\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      // This editor isn't on screen but we need to get its dimensions, so\n      // we just insert it in the DOM, get its bounding box and then remove it.\n      const { currentLayer, div } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n\n    // The dimensions are relative to the rotation of the page, hence we need to\n    // take that into account (see issue #16636).\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n\n  /**\n   * Commit the content we have in this editor.\n   * @returns {undefined}\n   */\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = (this.#content = this.#extractText().trimEnd());\n    if (savedText === newText) {\n      return;\n    }\n\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false,\n    });\n    this.#setEditorDimensions();\n  }\n\n  /** @inheritdoc */\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n\n  /** @inheritdoc */\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n\n  /** @inheritdoc */\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      // Avoid to add an unwanted new line.\n      event.preventDefault();\n    }\n  }\n\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n\n  /** @inheritdoc */\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n\n  /** @inheritdoc */\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n\n  /** @inheritdoc */\n  get canChangeContent() {\n    return true;\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this._isCopy || this.annotationElementId) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text2\");\n    this.editorDiv.setAttribute(\"data-l10n-attrs\", \"default-content\");\n    this.enableEditing();\n\n    this.editorDiv.contentEditable = true;\n\n    const { style } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n\n    this.div.append(this.editorDiv);\n\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n\n    if (this._isCopy || this.annotationElementId) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        // This stuff is hard to test: if something is changed here, please\n        // test with the following PDF file:\n        //  - freetexts.pdf\n        //  - rotated_freetexts.pdf\n        // Only small variations between the original annotation and its editor\n        // are allowed.\n\n        // position is the position of the first glyph in the annotation\n        // and it's relative to its container.\n        const { position } = this._initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX =\n              baseX +\n              (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY =\n              baseY +\n              (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this._moveAfterPaste(baseX, baseY);\n      }\n\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      this.div.setAttribute(\"annotation-id\", this.annotationElementId);\n    }\n\n    return this.div;\n  }\n\n  static #getNodeContent(node) {\n    return (\n      node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText\n    ).replaceAll(EOL_PATTERN, \"\");\n  }\n\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const { types } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(\n      clipboardData.getData(\"text\") || \"\"\n    ).replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n\n    // Collect the text before and after the caret.\n    const { startContainer, startOffset } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(\n        startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\")\n      );\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(\n        startContainer.nodeValue\n          .slice(0, startOffset)\n          .replaceAll(EOL_PATTERN, \"\")\n      );\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n\n    // Set the caret at the right position.\n    const newRange = new Range();\n    let beforeLength = Math.sumPrecise(bufferBefore.map(line => line.length));\n    for (const { firstChild } of this.editorDiv.childNodes) {\n      // Each child is either a div with a text node or a br element.\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(\n        line ? document.createTextNode(line) : document.createElement(\"br\")\n      );\n      this.editorDiv.append(div);\n    }\n  }\n\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n\n  /** @inheritdoc */\n  get contentDiv() {\n    return this.editorDiv;\n  }\n\n  /** @inheritdoc */\n  getPDFRect() {\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    return this.getRect(padding, padding);\n  }\n\n  /** @inheritdoc */\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: { fontSize, fontColor },\n          rect,\n          rotation,\n          id,\n          popupRef,\n          contentsObj,\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: { pageNumber },\n        },\n      } = data;\n      // textContent is supposed to be an array of strings containing each line\n      // of text. However, it can be null or empty.\n      if (!textContent || textContent.length === 0) {\n        // Empty annotation.\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef,\n        comment: contentsObj?.str || null,\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor._initialData = initialData;\n    if (data.comment) {\n      editor.setCommentData(data.comment);\n    }\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n\n    const rect = this.getPDFRect();\n    const color = AnnotationEditor._colorManager.convert(\n      this.isAttachedToDOM\n        ? getComputedStyle(this.editorDiv).color\n        : this.#color\n    );\n\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n    this.addComment(serialized);\n\n    if (isForCopying) {\n      // Don't add the id when copying because the pasted editor mustn't be\n      // linked to an existing annotation.\n      serialized.isCopy = true;\n      return serialized;\n    }\n\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n\n    serialized.id = this.annotationElementId;\n\n    return serialized;\n  }\n\n  #hasElementChanged(serialized) {\n    const { value, fontSize, color, pageIndex } = this._initialData;\n\n    return (\n      this.hasEditedComment ||\n      this._hasBeenMoved ||\n      serialized.value !== value ||\n      serialized.fontSize !== fontSize ||\n      serialized.color.some((c, i) => c !== color[i]) ||\n      serialized.pageIndex !== pageIndex\n    );\n  }\n\n  /** @inheritdoc */\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (!content) {\n      return null;\n    }\n    const { style } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(\n        line ? document.createTextNode(line) : document.createElement(\"br\")\n      );\n      content.append(div);\n    }\n\n    const params = {\n      rect: this.getPDFRect(),\n    };\n    params.popup = this.hasEditedComment\n      ? this.comment\n      : { text: this.#content };\n    annotation.updateEdited(params);\n\n    return content;\n  }\n\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\nexport { FreeTextEditor };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { unreachable } from \"../../../shared/util.js\";\n\nclass Outline {\n  static PRECISION = 1e-4;\n\n  /**\n   * @returns {string} The SVG path of the outline.\n   */\n  toSVGPath() {\n    unreachable(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n\n  /**\n   * @type {Object|null} The bounding box of the outline.\n   */\n  // eslint-disable-next-line getter-return\n  get box() {\n    unreachable(\"Abstract getter `box` must be implemented.\");\n  }\n\n  serialize(_bbox, _rotation) {\n    unreachable(\"Abstract method `serialize` must be implemented.\");\n  }\n\n  static _rescale(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n\n  static _rescaleAndSwap(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n\n  static _translate(src, tx, ty, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i];\n      dest[i + 1] = ty + src[i + 1];\n    }\n    return dest;\n  }\n\n  static svgRound(x) {\n    // 0.1234 will be 1234 and this way we economize 2 bytes per number.\n    // Of course, it makes sense only when the viewBox is [0 0 10000 10000].\n    // And it helps to avoid bugs like:\n    //  https://bugzilla.mozilla.org/show_bug.cgi?id=1929340\n    return Math.round(x * 10000);\n  }\n\n  static _normalizePoint(x, y, parentWidth, parentHeight, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y / parentWidth, x / parentHeight];\n      case 180:\n        return [1 - x / parentWidth, 1 - y / parentHeight];\n      case 270:\n        return [y / parentWidth, 1 - x / parentHeight];\n      default:\n        return [x / parentWidth, y / parentHeight];\n    }\n  }\n\n  static _normalizePagePoint(x, y, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y, x];\n      case 180:\n        return [1 - x, 1 - y];\n      case 270:\n        return [y, 1 - x];\n      default:\n        return [x, y];\n    }\n  }\n\n  static createBezierPoints(x1, y1, x2, y2, x3, y3) {\n    return [\n      (x1 + 5 * x2) / 6,\n      (y1 + 5 * y2) / 6,\n      (5 * x2 + x3) / 6,\n      (5 * y2 + y3) / 6,\n      (x2 + x3) / 2,\n      (y2 + y3) / 2,\n    ];\n  }\n}\n\nexport { Outline };\n","/* Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Outline } from \"./outline.js\";\nimport { Util } from \"../../../shared/util.js\";\n\nclass FreeDrawOutliner {\n  #box;\n\n  #bottom = [];\n\n  #innerMargin;\n\n  #isLTR;\n\n  #top = [];\n\n  // The first 6 elements are the last 3 points of the top part of the outline.\n  // The next 6 elements are the last 3 points of the line.\n  // The next 6 elements are the last 3 points of the bottom part of the\n  // outline.\n  // We track the last 3 points in order to be able to:\n  //  - compute the normal of the line,\n  //  - compute the control points of the quadratic Bézier curve.\n  #last = new Float32Array(18);\n\n  #lastX;\n\n  #lastY;\n\n  #min;\n\n  #min_dist;\n\n  #scaleFactor;\n\n  #thickness;\n\n  #points = [];\n\n  static #MIN_DIST = 8;\n\n  static #MIN_DIFF = 2;\n\n  static #MIN = FreeDrawOutliner.#MIN_DIST + FreeDrawOutliner.#MIN_DIFF;\n\n  constructor({ x, y }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeDrawOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeDrawOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n\n  isEmpty() {\n    // When we add a second point then this.#last.slice(6) will be something\n    // like [NaN, NaN, firstX, firstY, secondX, secondY,...] so having a NaN\n    // at index 8 means that we've only one point.\n    return isNaN(this.#last[8]);\n  }\n\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n\n    return [\n      (this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width,\n      (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height,\n      (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width,\n      (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height,\n    ];\n  }\n\n  add({ x, y }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      // The idea is to avoid garbage points around the last point.\n      // When the points are too close, it just leads to bad normal vectors and\n      // control points.\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n\n    // We update the last 3 points of the line.\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n\n    // We keep track of the points in order to be able to compute the focus\n    // outline.\n    this.#points?.push(x, y);\n\n    // Create the normal unit vector.\n    // |(shiftX, shiftY)| = |K| * |(diffX, diffY)| = |K| * d = diffD.\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (x1 + thX - layerX) / layerWidth,\n          (y1 + thY - layerY) / layerHeight\n        );\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (x1 - thX - layerX) / layerWidth,\n          (y1 - thY - layerY) / layerHeight\n        );\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n\n    const angle = Math.abs(\n      Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX)\n    );\n    if (angle < Math.PI / 2) {\n      // In order to avoid some possible artifacts, we're going to use the a\n      // straight line instead of a quadratic Bézier curve.\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        ((x1 + x2) / 2 - layerX) / layerWidth,\n        ((y1 + y2) / 2 - layerY) / layerHeight\n      );\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        ((x0 + x1) / 2 - layerX) / layerWidth,\n        ((y0 + y1) / 2 - layerY) / layerHeight\n      );\n      return true;\n    }\n\n    // Control points and the final point for the quadratic Bézier curve.\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(\n      ((x0 + 5 * x1) / 6 - layerX) / layerWidth,\n      ((y0 + 5 * y1) / 6 - layerY) / layerHeight,\n      ((5 * x1 + x2) / 6 - layerX) / layerWidth,\n      ((5 * y1 + y2) / 6 - layerY) / layerHeight,\n      ((x1 + x2) / 2 - layerX) / layerWidth,\n      ((y1 + y2) / 2 - layerY) / layerHeight\n    );\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(\n      ((x0 + 5 * x1) / 6 - layerX) / layerWidth,\n      ((y0 + 5 * y1) / 6 - layerY) / layerHeight,\n      ((5 * x1 + x2) / 6 - layerX) / layerWidth,\n      ((5 * y1 + y2) / 6 - layerY) / layerHeight,\n      ((x1 + x2) / 2 - layerX) / layerWidth,\n      ((y1 + y2) / 2 - layerY) / layerHeight\n    );\n    return true;\n  }\n\n  toSVGPath() {\n    if (this.isEmpty()) {\n      // We've only one point.\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      // We've only two points.\n      return this.#toSVGPathTwoPoints();\n    }\n\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(\n          `C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${\n            top[i + 5]\n          }`\n        );\n      }\n    }\n\n    this.#toSVGPathEnd(buffer);\n\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(\n          `C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${\n            bottom[i + 4]\n          } ${bottom[i + 5]}`\n        );\n      }\n    }\n\n    this.#toSVGPathStart(buffer);\n\n    return buffer.join(\" \");\n  }\n\n  #toSVGPathTwoPoints() {\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] =\n      this.#getLastCoords();\n\n    return `M${(this.#last[2] - x) / width} ${\n      (this.#last[3] - y) / height\n    } L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${\n      (this.#last[16] - x) / width\n    } ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${\n      (this.#last[15] - y) / height\n    } Z`;\n  }\n\n  #toSVGPathStart(buffer) {\n    const bottom = this.#bottom;\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n  }\n\n  #toSVGPathEnd(buffer) {\n    const [x, y, width, height] = this.#box;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] =\n      this.#getLastCoords();\n\n    buffer.push(\n      `L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${\n        (lastBottom[0] - x) / width\n      } ${(lastBottom[1] - y) / height}`\n    );\n  }\n\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeDrawOutline(\n      outline,\n      points,\n      box,\n      scaleFactor,\n      innerMargin,\n      isLTR\n    );\n  }\n\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n\n    const points = new Float32Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      // We've only two points.\n      return this.#getOutlineTwoPoints(points);\n    }\n\n    const outline = new Float32Array(\n      this.#top.length + 24 + this.#bottom.length\n    );\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n\n    N = this.#getOutlineEnd(outline, N);\n\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n\n    this.#getOutlineStart(outline, N);\n\n    return this.newFreeDrawOutline(\n      outline,\n      points,\n      this.#box,\n      this.#scaleFactor,\n      this.#innerMargin,\n      this.#isLTR\n    );\n  }\n\n  #getOutlineTwoPoints(points) {\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] =\n      this.#getLastCoords();\n    const outline = new Float32Array(36);\n    outline.set(\n      [\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (last[2] - layerX) / layerWidth,\n        (last[3] - layerY) / layerHeight,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (last[4] - layerX) / layerWidth,\n        (last[5] - layerY) / layerHeight,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastTopX,\n        lastTopY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastBottomX,\n        lastBottomY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (last[16] - layerX) / layerWidth,\n        (last[17] - layerY) / layerHeight,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (last[14] - layerX) / layerWidth,\n        (last[15] - layerY) / layerHeight,\n      ],\n      0\n    );\n    return this.newFreeDrawOutline(\n      outline,\n      points,\n      this.#box,\n      this.#scaleFactor,\n      this.#innerMargin,\n      this.#isLTR\n    );\n  }\n\n  #getOutlineStart(outline, pos) {\n    const bottom = this.#bottom;\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], pos);\n    return (pos += 6);\n  }\n\n  #getOutlineEnd(outline, pos) {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] =\n      this.#getLastCoords();\n    outline.set(\n      [\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (lastTop[0] - layerX) / layerWidth,\n        (lastTop[1] - layerY) / layerHeight,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastTopX,\n        lastTopY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastBottomX,\n        lastBottomY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (lastBottom[0] - layerX) / layerWidth,\n        (lastBottom[1] - layerY) / layerHeight,\n      ],\n      pos\n    );\n    return (pos += 24);\n  }\n}\n\nclass FreeDrawOutline extends Outline {\n  #box;\n\n  #bbox = new Float32Array(4);\n\n  #innerMargin;\n\n  #isLTR;\n\n  #points;\n\n  #scaleFactor;\n\n  #outline;\n\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.lastPoint = [NaN, NaN];\n    this.#computeMinMax(isLTR);\n\n    const [x, y, width, height] = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(\n        `C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${\n          this.#outline[i + 3]\n        } ${this.#outline[i + 4]} ${this.#outline[i + 5]}`\n      );\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = Outline._rescale(this.#outline, blX, trY, width, -height);\n        points = Outline._rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = Outline._rescaleAndSwap(\n          this.#outline,\n          blX,\n          blY,\n          width,\n          height\n        );\n        points = Outline._rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = Outline._rescale(this.#outline, trX, blY, -width, height);\n        points = Outline._rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = Outline._rescaleAndSwap(\n          this.#outline,\n          trX,\n          trY,\n          -width,\n          -height\n        );\n        points = Outline._rescaleAndSwap(\n          this.#points,\n          trX,\n          trY,\n          -width,\n          -height\n        );\n        break;\n    }\n    return { outline: Array.from(outline), points: [Array.from(points)] };\n  }\n\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    const minMax = [lastX, lastY, lastX, lastY];\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      const x = outline[i + 4],\n        y = outline[i + 5];\n\n      if (isNaN(outline[i])) {\n        Util.pointBoundingBox(x, y, minMax);\n\n        if (lastPointY < y) {\n          lastPointX = x;\n          lastPointY = y;\n        } else if (lastPointY === y) {\n          lastPointX = ltrCallback(lastPointX, x);\n        }\n      } else {\n        const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n        Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6), bbox);\n\n        Util.rectBoundingBox(...bbox, minMax);\n\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = x;\n      lastY = y;\n    }\n\n    const bbox = this.#bbox;\n    bbox[0] = minMax[0] - this.#innerMargin;\n    bbox[1] = minMax[1] - this.#innerMargin;\n    bbox[2] = minMax[2] - minMax[0] + 2 * this.#innerMargin;\n    bbox[3] = minMax[3] - minMax[1] + 2 * this.#innerMargin;\n    this.lastPoint = [lastPointX, lastPointY];\n  }\n\n  get box() {\n    return this.#bbox;\n  }\n\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeDrawOutliner(\n      point,\n      box,\n      scaleFactor,\n      thickness,\n      isLTR,\n      innerMargin\n    );\n  }\n\n  getNewOutline(thickness, innerMargin) {\n    // Build the outline of the highlight to use as the focus outline.\n    const [x, y, width, height] = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = this.newOutliner(\n      {\n        x: this.#points[0] * sx + tx,\n        y: this.#points[1] * sy + ty,\n      },\n      this.#box,\n      this.#scaleFactor,\n      thickness,\n      this.#isLTR,\n      innerMargin ?? this.#innerMargin\n    );\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty,\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\nexport { FreeDrawOutline, FreeDrawOutliner };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FreeDrawOutline, FreeDrawOutliner } from \"./freedraw.js\";\nimport { Outline } from \"./outline.js\";\nimport { Util } from \"../../../shared/util.js\";\n\nclass HighlightOutliner {\n  #box;\n\n  #lastPoint;\n\n  #verticalEdges = [];\n\n  #intervals = [];\n\n  /**\n   * Construct an outliner.\n   * @param {Array<Object>} boxes - An array of axis-aligned rectangles.\n   * @param {number} borderWidth - The width of the border of the boxes, it\n   *   allows to make the boxes bigger (or smaller).\n   * @param {number} innerMargin - The margin between the boxes and the\n   *   outlines. It's important to not have a null innerMargin when we want to\n   *   draw the outline else the stroked outline could be clipped because of its\n   *   width.\n   * @param {boolean} isLTR - true if we're in LTR mode. It's used to determine\n   *   the last point of the boxes.\n   */\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    const minMax = [Infinity, Infinity, -Infinity, -Infinity];\n\n    // We round the coordinates to slightly reduce the number of edges in the\n    // final outlines.\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n\n    // The coordinates of the boxes are in the page coordinate system.\n    for (const { x, y, width, height } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n\n      Util.rectBoundingBox(x1, y1, x2, y2, minMax);\n    }\n\n    const bboxWidth = minMax[2] - minMax[0] + 2 * innerMargin;\n    const bboxHeight = minMax[3] - minMax[1] + 2 * innerMargin;\n    const shiftedMinX = minMax[0] - innerMargin;\n    const shiftedMinY = minMax[1] - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n\n    // Convert the coordinates of the edges into box coordinates.\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n\n    this.#box = new Float32Array([\n      shiftedMinX,\n      shiftedMinY,\n      bboxWidth,\n      bboxHeight,\n    ]);\n    this.#lastPoint = lastPoint;\n  }\n\n  getOutlines() {\n    // We begin to sort lexicographically the vertical edges by their abscissa,\n    // and then by their ordinate.\n    this.#verticalEdges.sort(\n      (a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]\n    );\n\n    // We're now using a sweep line algorithm to find the outlines.\n    // We start with the leftmost vertical edge, and we're going to iterate\n    // over all the vertical edges from left to right.\n    // Each time we encounter a left edge, we're going to insert the interval\n    // [y1, y2] in the set of intervals.\n    // This set of intervals is used to break the vertical edges into chunks:\n    // we only take the part of the vertical edge that isn't in the union of\n    // the intervals.\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        // Left edge.\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        // Right edge.\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n\n    // We sort lexicographically the vertices of each edge by their ordinate and\n    // by their abscissa.\n    // Every pair (v_2i, v_{2i + 1}) of vertices defines a horizontal edge.\n    // So for every vertical edge, we're going to add the two vertical edges\n    // which are connected to it through a horizontal edge.\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n\n      outline = [x, y2];\n      outlines.push(outline);\n\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box, this.#lastPoint);\n  }\n\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n\n    while (start <= end) {\n      const middle = (start + end) >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          // There is no intersection between the interval and the edge, hence\n          // we keep it as is.\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            // The edge is included in the interval, hence we remove it.\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\n\nclass HighlightOutline extends Outline {\n  #box;\n\n  #outlines;\n\n  constructor(outlines, box, lastPoint) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n    this.lastPoint = lastPoint;\n  }\n\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n\n  /**\n   * Serialize the outlines into the PDF page coordinate system.\n   * @param {Array<number>} _bbox - the bounding box of the annotation.\n   * @param {number} _rotation - the rotation of the annotation.\n   * @returns {Array<Array<number>>}\n   */\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n\n  get box() {\n    return this.#box;\n  }\n\n  get classNamesForOutlining() {\n    return [\"highlightOutline\"];\n  }\n}\n\nclass FreeHighlightOutliner extends FreeDrawOutliner {\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeHighlightOutline(\n      outline,\n      points,\n      box,\n      scaleFactor,\n      innerMargin,\n      isLTR\n    );\n  }\n}\n\nclass FreeHighlightOutline extends FreeDrawOutline {\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeHighlightOutliner(\n      point,\n      box,\n      scaleFactor,\n      thickness,\n      isLTR,\n      innerMargin\n    );\n  }\n}\n\nexport { FreeHighlightOutliner, HighlightOutliner };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  shadow,\n  Util,\n} from \"../../shared/util.js\";\nimport { bindEvents, KeyboardManager } from \"./tools.js\";\nimport {\n  FreeHighlightOutliner,\n  HighlightOutliner,\n} from \"./drawers/highlight.js\";\nimport {\n  HighlightAnnotationElement,\n  InkAnnotationElement,\n} from \"../annotation_layer.js\";\nimport { noContextMenu, stopEvent } from \"../display_utils.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { ColorPicker } from \"./color_picker.js\";\n\n/**\n * Basic draw editor in order to generate an Highlight annotation.\n */\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n\n  #anchorOffset = 0;\n\n  #boxes;\n\n  #clipPathId = null;\n\n  #colorPicker = null;\n\n  #focusOutlines = null;\n\n  #focusNode = null;\n\n  #focusOffset = 0;\n\n  #highlightDiv = null;\n\n  #highlightOutlines = null;\n\n  #id = null;\n\n  #isFreeHighlight = false;\n\n  #lastPoint = null;\n\n  #opacity;\n\n  #outlineId = null;\n\n  #text = \"\";\n\n  #thickness;\n\n  #methodOfCreation = \"\";\n\n  static _defaultColor = null;\n\n  static _defaultOpacity = 1;\n\n  static _defaultThickness = 12;\n\n  static _type = \"highlight\";\n\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n\n  static _freeHighlightId = -1;\n\n  static _freeHighlight = null;\n\n  static _freeHighlightClipId = \"\";\n\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(\n      this,\n      \"_keyboardManager\",\n      new KeyboardManager([\n        [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, { args: [0] }],\n        [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, { args: [1] }],\n        [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, { args: [2] }],\n        [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, { args: [3] }],\n      ])\n    );\n  }\n\n  constructor(params) {\n    super({ ...params, name: \"highlightEditor\" });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    this.defaultL10nId = \"pdfjs-editor-highlight-editor\";\n\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else if (this.#boxes) {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(\"pdfjs-editor-highlight-added-alert\");\n    }\n  }\n\n  /** @inheritdoc */\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.getNonHCMColorName(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation,\n    };\n  }\n\n  /** @inheritdoc */\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.getNonHCMColorName(this.color),\n    };\n  }\n\n  get commentColor() {\n    return this.color;\n  }\n\n  static computeTelemetryFinalData(data) {\n    // We want to know how many colors have been used.\n    return { numberOfColors: data.get(\"color\").size };\n  }\n\n  #createOutlines() {\n    const outliner = new HighlightOutliner(\n      this.#boxes,\n      /* borderWidth = */ 0.001\n    );\n    this.#highlightOutlines = outliner.getOutlines();\n    [this.x, this.y, this.width, this.height] = this.#highlightOutlines.box;\n\n    const outlinerForOutline = new HighlightOutliner(\n      this.#boxes,\n      /* borderWidth = */ 0.0025,\n      /* innerMargin = */ 0.001,\n      this._uiManager.direction === \"ltr\"\n    );\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n\n    // The last point is in the pages coordinate system.\n    const { lastPoint } = this.#focusOutlines;\n    this.#lastPoint = [\n      (lastPoint[0] - this.x) / this.width,\n      (lastPoint[1] - this.y) / this.height,\n    ];\n  }\n\n  #createFreeOutlines({ highlightOutlines, highlightId, clipPathId }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(\n      /* Slightly bigger than the highlight in order to have a little\n         space between the highlight and the outline. */\n      this.#thickness / 2 + extraThickness,\n      /* innerMargin = */ 0.0025\n    );\n\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      // We need to redraw the highlight because we change the coordinates to be\n      // in the box coordinate system.\n      this.parent.drawLayer.finalizeDraw(highlightId, {\n        bbox: highlightOutlines.box,\n        path: {\n          d: highlightOutlines.toSVGPath(),\n        },\n      });\n      this.#outlineId = this.parent.drawLayer.drawOutline(\n        {\n          rootClass: {\n            highlightOutline: true,\n            free: true,\n          },\n          bbox: this.#focusOutlines.box,\n          path: {\n            d: this.#focusOutlines.toSVGPath(),\n          },\n        },\n        /* mustRemoveSelfIntersections = */ true\n      );\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateProperties(this.#id, {\n        bbox: HighlightEditor.#rotateBbox(\n          this.#highlightOutlines.box,\n          (angle - this.rotation + 360) % 360\n        ),\n        path: {\n          d: highlightOutlines.toSVGPath(),\n        },\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n        path: {\n          d: this.#focusOutlines.toSVGPath(),\n        },\n      });\n    }\n    const [x, y, width, height] = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90: {\n        const [pageWidth, pageHeight] = this.parentDimensions;\n        this.x = y;\n        this.y = 1 - x;\n        this.width = (width * pageHeight) / pageWidth;\n        this.height = (height * pageWidth) / pageHeight;\n        break;\n      }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270: {\n        const [pageWidth, pageHeight] = this.parentDimensions;\n        this.x = 1 - y;\n        this.y = x;\n        this.width = (width * pageHeight) / pageWidth;\n        this.height = (height * pageWidth) / pageHeight;\n        break;\n      }\n    }\n\n    const { lastPoint } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||=\n      uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  translateInPage(x, y) {}\n\n  /** @inheritdoc */\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n\n  static get defaultPropertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n        HighlightEditor._defaultColor,\n      ],\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,\n        HighlightEditor._defaultThickness,\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n        this.color || HighlightEditor._defaultColor,\n      ],\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,\n        this.#thickness || HighlightEditor._defaultThickness,\n      ],\n      [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight],\n    ];\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const setColorAndOpacity = (col, opa) => {\n      this.color = col;\n      this.#opacity = opa;\n      this.parent?.drawLayer.updateProperties(this.#id, {\n        root: {\n          fill: col,\n          \"fill-opacity\": opa,\n        },\n      });\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    const savedOpacity = this.#opacity;\n    this.addCommands({\n      cmd: setColorAndOpacity.bind(\n        this,\n        color,\n        HighlightEditor._defaultOpacity\n      ),\n      undo: setColorAndOpacity.bind(this, savedColor, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n\n    this._reportTelemetry(\n      {\n        action: \"color_changed\",\n        color: this._uiManager.getNonHCMColorName(color),\n      },\n      /* mustWait = */ true\n    );\n  }\n\n  /**\n   * Update the thickness and make this action undoable.\n   * @param {number} thickness\n   */\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n    this._reportTelemetry(\n      { action: \"thickness_changed\", thickness },\n      /* mustWait = */ true\n    );\n  }\n\n  /** @inheritdoc */\n  get toolbarButtons() {\n    if (this._uiManager.highlightColors) {\n      const colorPicker = (this.#colorPicker = new ColorPicker({\n        editor: this,\n      }));\n      return [[\"colorPicker\", colorPicker]];\n    }\n    return super.toolbarButtons;\n  }\n\n  /** @inheritdoc */\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n\n  /** @inheritdoc */\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n\n  /** @inheritdoc */\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n\n  /** @inheritdoc */\n  getBaseTranslation() {\n    // The editor itself doesn't have any CSS border (we're drawing one\n    // ourselves in using SVG).\n    return [0, 0];\n  }\n\n  /** @inheritdoc */\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n\n  /** @inheritdoc */\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    if (focus) {\n      this.div.focus();\n    }\n  }\n\n  /** @inheritdoc */\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\",\n    });\n    super.remove();\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    this.#addToDrawLayer();\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilding it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      // If mustBeSelected is true it means that this editor was selected\n      // when its parent has been destroyed, hence we must select it again.\n      mustBeSelected =\n        !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      // We select it after the parent has been set.\n      this.select();\n    }\n  }\n\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2),\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({ id: this.#id, clipPathId: this.#clipPathId } = parent.drawLayer.draw(\n      {\n        bbox: this.#highlightOutlines.box,\n        root: {\n          viewBox: \"0 0 1 1\",\n          fill: this.color,\n          \"fill-opacity\": this.#opacity,\n        },\n        rootClass: {\n          highlight: true,\n          free: this.#isFreeHighlight,\n        },\n        path: {\n          d: this.#highlightOutlines.toSVGPath(),\n        },\n      },\n      /* isPathUpdatable = */ false,\n      /* hasClip = */ true\n    ));\n    this.#outlineId = parent.drawLayer.drawOutline(\n      {\n        rootClass: {\n          highlightOutline: true,\n          free: this.#isFreeHighlight,\n        },\n        bbox: this.#focusOutlines.box,\n        path: {\n          d: this.#focusOutlines.toSVGPath(),\n        },\n      },\n      /* mustRemoveSelfIntersections = */ this.#isFreeHighlight\n    );\n\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n\n  static #rotateBbox([x, y, width, height], angle) {\n    switch (angle) {\n      case 90:\n        return [1 - y - height, x, height, width];\n      case 180:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 270:\n        return [y, 1 - x - width, height, width];\n    }\n    return [x, y, width, height];\n  }\n\n  /** @inheritdoc */\n  rotate(angle) {\n    // We need to rotate the svgs because of the coordinates system.\n    const { drawLayer } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      // An highlight annotation is always drawn horizontally.\n      box = HighlightEditor.#rotateBbox(\n        [this.x, this.y, this.width, this.height],\n        angle\n      );\n    }\n    drawLayer.updateProperties(this.#id, {\n      bbox: box,\n      root: {\n        \"data-main-rotation\": angle,\n      },\n    });\n    drawLayer.updateProperties(this.#outlineId, {\n      bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      root: {\n        \"data-main-rotation\": angle,\n      },\n    });\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#keydown.bind(this), {\n        signal: this._uiManager._signal,\n      });\n    }\n    const highlightDiv = (this.#highlightDiv = document.createElement(\"div\"));\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n\n    return div;\n  }\n\n  pointerover() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: true,\n        },\n      });\n    }\n  }\n\n  pointerleave() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: false,\n        },\n      });\n    }\n  }\n\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0 /* left */:\n      case 2 /* up */:\n        this.#setCaret(/* start = */ true);\n        break;\n      case 1 /* right */:\n      case 3 /* down */:\n        this.#setCaret(/* start = */ false);\n        break;\n    }\n  }\n\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n\n  /** @inheritdoc */\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        hovered: false,\n        selected: true,\n      },\n    });\n  }\n\n  /** @inheritdoc */\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        selected: false,\n      },\n    });\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(/* start = */ false);\n    }\n  }\n\n  /** @inheritdoc */\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n\n  /** @inheritdoc */\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.updateProperties(this.#id, {\n        rootClass: {\n          hidden: !visible,\n        },\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hidden: !visible,\n        },\n      });\n    }\n  }\n\n  #getRotation() {\n    // Highlight annotations are always drawn horizontally but if\n    // a free highlight annotation can be rotated.\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const boxes = this.#boxes;\n    const quadPoints = new Float32Array(boxes.length * 8);\n    let i = 0;\n    for (const { x, y, width, height } of boxes) {\n      const sx = x * pageWidth + pageX;\n      const sy = (1 - y) * pageHeight + pageY;\n      // Serializes the rectangle in the Adobe Acrobat format.\n      // The rectangle's coordinates (b = bottom, t = top, L = left, R = right)\n      // are ordered as follows: tL, tR, bL, bR (bL origin).\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy - height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n\n  static startHighlighting(parent, isLTR, { target: textLayer, x, y }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = textLayer.getBoundingClientRect();\n\n    const ac = new AbortController();\n    const signal = parent.combinedSignal(ac);\n\n    const pointerUpCallback = e => {\n      ac.abort();\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback, { signal });\n    window.addEventListener(\"pointerup\", pointerUpCallback, { signal });\n    window.addEventListener(\n      \"pointerdown\",\n      stopEvent /* Avoid to have undesired clicks during the drawing. */,\n      {\n        capture: true,\n        passive: false,\n        signal,\n      }\n    );\n    window.addEventListener(\"contextmenu\", noContextMenu, { signal });\n\n    textLayer.addEventListener(\n      \"pointermove\",\n      this.#highlightMove.bind(this, parent),\n      { signal }\n    );\n    this._freeHighlight = new FreeHighlightOutliner(\n      { x, y },\n      [layerX, layerY, parentWidth, parentHeight],\n      parent.scale,\n      this._defaultThickness / 2,\n      isLTR,\n      /* innerMargin = */ 0.001\n    );\n    ({ id: this._freeHighlightId, clipPathId: this._freeHighlightClipId } =\n      parent.drawLayer.draw(\n        {\n          bbox: [0, 0, 1, 1],\n          root: {\n            viewBox: \"0 0 1 1\",\n            fill: this._defaultColor,\n            \"fill-opacity\": this._defaultOpacity,\n          },\n          rootClass: {\n            highlight: true,\n            free: true,\n          },\n          path: {\n            d: this._freeHighlight.toSVGPath(),\n          },\n        },\n        /* isPathUpdatable = */ true,\n        /* hasClip = */ true\n      ));\n  }\n\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      // Redraw only if the point has been added.\n      parent.drawLayer.updateProperties(this._freeHighlightId, {\n        path: {\n          d: this._freeHighlight.toSVGPath(),\n        },\n      });\n    }\n  }\n\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\",\n      });\n    } else {\n      parent.drawLayer.remove(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n\n  /** @inheritdoc */\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof HighlightAnnotationElement) {\n      const {\n        data: {\n          quadPoints,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          popupRef,\n          contentsObj,\n        },\n        parent: {\n          page: { pageNumber },\n        },\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        opacity,\n        quadPoints,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef,\n        comment: contentsObj?.str || null,\n      };\n    } else if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          borderStyle: { rawWidth: thickness },\n          popupRef,\n          contentsObj,\n        },\n        parent: {\n          page: { pageNumber },\n        },\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        thickness,\n        inkLists,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef,\n        comment: contentsObj?.str || null,\n      };\n    }\n\n    const { color, quadPoints, inkLists, opacity } = data;\n    const editor = await super.deserialize(data, parent, uiManager);\n\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = opacity || 1;\n    if (inkLists) {\n      editor.#thickness = data.thickness;\n    }\n    editor._initialData = initialData;\n    if (data.comment) {\n      editor.setCommentData(data.comment);\n    }\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [pageX, pageY] = editor.pageTranslation;\n\n    if (quadPoints) {\n      const boxes = (editor.#boxes = []);\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        boxes.push({\n          x: (quadPoints[i] - pageX) / pageWidth,\n          y: 1 - (quadPoints[i + 1] - pageY) / pageHeight,\n          width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n          height: (quadPoints[i + 1] - quadPoints[i + 5]) / pageHeight,\n        });\n      }\n      editor.#createOutlines();\n      editor.#addToDrawLayer();\n      editor.rotate(editor.rotation);\n    } else if (inkLists) {\n      editor.#isFreeHighlight = true;\n      const points = inkLists[0];\n      const point = {\n        x: points[0] - pageX,\n        y: pageHeight - (points[1] - pageY),\n      };\n      const outliner = new FreeHighlightOutliner(\n        point,\n        [0, 0, pageWidth, pageHeight],\n        1,\n        editor.#thickness / 2,\n        true,\n        0.001\n      );\n      for (let i = 0, ii = points.length; i < ii; i += 2) {\n        point.x = points[i] - pageX;\n        point.y = pageHeight - (points[i + 1] - pageY);\n        outliner.add(point);\n      }\n      const { id, clipPathId } = parent.drawLayer.draw(\n        {\n          bbox: [0, 0, 1, 1],\n          root: {\n            viewBox: \"0 0 1 1\",\n            fill: editor.color,\n            \"fill-opacity\": editor._defaultOpacity,\n          },\n          rootClass: {\n            highlight: true,\n            free: true,\n          },\n          path: {\n            d: outliner.toSVGPath(),\n          },\n        },\n        /* isPathUpdatable = */ true,\n        /* hasClip = */ true\n      );\n      editor.#createFreeOutlines({\n        highlightOutlines: outliner.getOutlines(),\n        highlightId: id,\n        clipPathId,\n      });\n      editor.#addToDrawLayer();\n      editor.rotate(editor.parentRotation);\n    }\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false) {\n    // It doesn't make sense to copy/paste a highlight annotation.\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n\n    const rect = this.getPDFRect();\n    const color = AnnotationEditor._colorManager.convert(\n      this._uiManager.getNonHCMColor(this.color)\n    );\n\n    const serialized = {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId,\n    };\n    this.addComment(serialized);\n\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n\n  #hasElementChanged(serialized) {\n    const { color } = this._initialData;\n    return (\n      this.hasEditedComment || serialized.color.some((c, i) => c !== color[i])\n    );\n  }\n\n  /** @inheritdoc */\n  renderAnnotationElement(annotation) {\n    if (this.deleted) {\n      annotation.hide();\n      return null;\n    }\n    const params = {\n      rect: this.getPDFRect(),\n    };\n    if (this.hasEditedComment) {\n      params.popup = this.comment;\n    }\n    annotation.updateEdited(params);\n\n    return null;\n  }\n\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\nexport { HighlightEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationEditorParamsType, unreachable } from \"../../shared/util.js\";\nimport { noContextMenu, stopEvent } from \"../display_utils.js\";\nimport { AnnotationEditor } from \"./editor.js\";\n\nclass DrawingOptions {\n  #svgProperties = Object.create(null);\n\n  updateProperty(name, value) {\n    this[name] = value;\n    this.updateSVGProperty(name, value);\n  }\n\n  updateProperties(properties) {\n    if (!properties) {\n      return;\n    }\n    for (const [name, value] of Object.entries(properties)) {\n      if (!name.startsWith(\"_\")) {\n        this.updateProperty(name, value);\n      }\n    }\n  }\n\n  updateSVGProperty(name, value) {\n    this.#svgProperties[name] = value;\n  }\n\n  toSVGProperties() {\n    const root = this.#svgProperties;\n    this.#svgProperties = Object.create(null);\n    return { root };\n  }\n\n  reset() {\n    this.#svgProperties = Object.create(null);\n  }\n\n  updateAll(options = this) {\n    this.updateProperties(options);\n  }\n\n  clone() {\n    unreachable(\"Not implemented\");\n  }\n}\n\n/**\n * Basic draw editor.\n */\nclass DrawingEditor extends AnnotationEditor {\n  #drawOutlines = null;\n\n  #mustBeCommitted;\n\n  _colorPicker = null;\n\n  _drawId = null;\n\n  static _currentDrawId = -1;\n\n  static _currentParent = null;\n\n  static #currentDraw = null;\n\n  static #currentDrawingAC = null;\n\n  static #currentDrawingOptions = null;\n\n  static #currentPointerId = NaN;\n\n  static #currentPointerType = null;\n\n  static #currentPointerIds = null;\n\n  static #currentMoveTimestamp = NaN;\n\n  static _INNER_MARGIN = 3;\n\n  constructor(params) {\n    super(params);\n    this.#mustBeCommitted = params.mustBeCommitted || false;\n\n    this._addOutlines(params);\n  }\n\n  _addOutlines(params) {\n    if (params.drawOutlines) {\n      this.#createDrawOutlines(params);\n      this.#addToDrawLayer();\n    }\n  }\n\n  #createDrawOutlines({ drawOutlines, drawId, drawingOptions }) {\n    this.#drawOutlines = drawOutlines;\n    this._drawingOptions ||= drawingOptions;\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`);\n    }\n\n    if (drawId >= 0) {\n      this._drawId = drawId;\n      // We need to redraw the drawing because we changed the coordinates to be\n      // in the box coordinate system.\n      this.parent.drawLayer.finalizeDraw(\n        drawId,\n        drawOutlines.defaultProperties\n      );\n    } else {\n      // We create a new drawing.\n      this._drawId = this.#createDrawing(drawOutlines, this.parent);\n    }\n\n    this.#updateBbox(drawOutlines.box);\n  }\n\n  #createDrawing(drawOutlines, parent) {\n    const { id } = parent.drawLayer.draw(\n      DrawingEditor._mergeSVGProperties(\n        this._drawingOptions.toSVGProperties(),\n        drawOutlines.defaultSVGProperties\n      ),\n      /* isPathUpdatable = */ false,\n      /* hasClip = */ false\n    );\n    return id;\n  }\n\n  static _mergeSVGProperties(p1, p2) {\n    const p1Keys = new Set(Object.keys(p1));\n\n    for (const [key, value] of Object.entries(p2)) {\n      if (p1Keys.has(key)) {\n        Object.assign(p1[key], value);\n      } else {\n        p1[key] = value;\n      }\n    }\n    return p1;\n  }\n\n  /**\n   * @param {Object} options\n   * @return {DrawingOptions} the default options to use for a new editor.\n   */\n  static getDefaultDrawingOptions(_options) {\n    unreachable(\"Not implemented\");\n  }\n\n  /**\n   * @return {Map<AnnotationEditorParamsType, string>} a map between the\n   *   parameter types and the name of the options.\n   */\n  // eslint-disable-next-line getter-return\n  static get typesMap() {\n    unreachable(\"Not implemented\");\n  }\n\n  static get isDrawer() {\n    return true;\n  }\n\n  /**\n   * @returns {boolean} `true` if several drawings can be added to the\n   * annotation.\n   */\n  static get supportMultipleDrawings() {\n    return false;\n  }\n\n  /** @inheritdoc */\n  static updateDefaultParams(type, value) {\n    const propertyName = this.typesMap.get(type);\n    if (propertyName) {\n      this._defaultDrawingOptions.updateProperty(propertyName, value);\n    }\n    if (this._currentParent) {\n      DrawingEditor.#currentDraw.updateProperty(propertyName, value);\n      this._currentParent.drawLayer.updateProperties(\n        this._currentDrawId,\n        this._defaultDrawingOptions.toSVGProperties()\n      );\n    }\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    const propertyName = this.constructor.typesMap.get(type);\n    if (propertyName) {\n      this._updateProperty(type, propertyName, value);\n    }\n  }\n\n  /** @inheritdoc */\n  static get defaultPropertiesToUpdate() {\n    const properties = [];\n    const options = this._defaultDrawingOptions;\n    for (const [type, name] of this.typesMap) {\n      properties.push([type, options[name]]);\n    }\n    return properties;\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    const properties = [];\n    const { _drawingOptions } = this;\n    for (const [type, name] of this.constructor.typesMap) {\n      properties.push([type, _drawingOptions[name]]);\n    }\n    return properties;\n  }\n\n  /**\n   * Update a property and make this action undoable.\n   * @param {string} color\n   */\n  _updateProperty(type, name, value) {\n    const options = this._drawingOptions;\n    const savedValue = options[name];\n    const setter = val => {\n      options.updateProperty(name, val);\n      const bbox = this.#drawOutlines.updateProperty(name, val);\n      if (bbox) {\n        this.#updateBbox(bbox);\n      }\n      this.parent?.drawLayer.updateProperties(\n        this._drawId,\n        options.toSVGProperties()\n      );\n      if (type === this.colorType) {\n        this._colorPicker?.update(val);\n      }\n    };\n    this.addCommands({\n      cmd: setter.bind(this, value),\n      undo: setter.bind(this, savedValue),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /** @inheritdoc */\n  _onResizing() {\n    this.parent?.drawLayer.updateProperties(\n      this._drawId,\n      DrawingEditor._mergeSVGProperties(\n        this.#drawOutlines.getPathResizingSVGProperties(\n          this.#convertToDrawSpace()\n        ),\n        {\n          bbox: this.#rotateBox(),\n        }\n      )\n    );\n  }\n\n  /** @inheritdoc */\n  _onResized() {\n    this.parent?.drawLayer.updateProperties(\n      this._drawId,\n      DrawingEditor._mergeSVGProperties(\n        this.#drawOutlines.getPathResizedSVGProperties(\n          this.#convertToDrawSpace()\n        ),\n        {\n          bbox: this.#rotateBox(),\n        }\n      )\n    );\n  }\n\n  /** @inheritdoc */\n  _onTranslating(_x, _y) {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      bbox: this.#rotateBox(),\n    });\n  }\n\n  /** @inheritdoc */\n  _onTranslated() {\n    this.parent?.drawLayer.updateProperties(\n      this._drawId,\n      DrawingEditor._mergeSVGProperties(\n        this.#drawOutlines.getPathTranslatedSVGProperties(\n          this.#convertToDrawSpace(),\n          this.parentDimensions\n        ),\n        {\n          bbox: this.#rotateBox(),\n        }\n      )\n    );\n  }\n\n  _onStartDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: true,\n      },\n    });\n  }\n\n  _onStopDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: false,\n      },\n    });\n  }\n\n  /** @inheritdoc */\n  commit() {\n    super.commit();\n\n    this.disableEditMode();\n    this.disableEditing();\n  }\n\n  /** @inheritdoc */\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n\n  /** @inheritdoc */\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n\n  /** @inheritdoc */\n  getBaseTranslation() {\n    // The editor itself doesn't have any CSS border (we're drawing one\n    // ourselves in using SVG).\n    return [0, 0];\n  }\n\n  /** @inheritdoc */\n  get isResizable() {\n    return true;\n  }\n\n  /** @inheritdoc */\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    this._isDraggable = true;\n    if (this.#mustBeCommitted) {\n      this.#mustBeCommitted = false;\n      this.commit();\n      this.parent.setSelected(this);\n      if (focus && this.isOnScreen) {\n        this.div.focus();\n      }\n    }\n  }\n\n  /** @inheritdoc */\n  remove() {\n    this.#cleanDrawLayer();\n    super.remove();\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    this.#addToDrawLayer();\n    this.#updateBbox(this.#drawOutlines.box);\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilding it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this._uiManager.removeShouldRescale(this);\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this._uiManager.addShouldRescale(this);\n      this.#addToDrawLayer(parent);\n      // If mustBeSelected is true it means that this editor was selected\n      // when its parent has been destroyed, hence we must select it again.\n      mustBeSelected =\n        !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    if (mustBeSelected) {\n      // We select it after the parent has been set.\n      this.select();\n    }\n  }\n\n  #cleanDrawLayer() {\n    if (this._drawId === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this._drawId);\n    this._drawId = null;\n\n    // All the SVG properties must be reset in order to make it possible to\n    // undo.\n    this._drawingOptions.reset();\n  }\n\n  #addToDrawLayer(parent = this.parent) {\n    if (this._drawId !== null && this.parent === parent) {\n      return;\n    }\n    if (this._drawId !== null) {\n      // The parent has changed, we need to move the drawing to the new parent.\n      this.parent.drawLayer.updateParent(this._drawId, parent.drawLayer);\n      return;\n    }\n    this._drawingOptions.updateAll();\n    this._drawId = this.#createDrawing(this.#drawOutlines, parent);\n  }\n\n  #convertToParentSpace([x, y, width, height]) {\n    const {\n      parentDimensions: [pW, pH],\n      rotation,\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [y, 1 - x, width * (pH / pW), height * (pW / pH)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [1 - y, x, width * (pH / pW), height * (pW / pH)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n\n  #convertToDrawSpace() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      parentDimensions: [pW, pH],\n      rotation,\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n\n  #updateBbox(bbox) {\n    [this.x, this.y, this.width, this.height] =\n      this.#convertToParentSpace(bbox);\n    if (this.div) {\n      this.fixAndSetPosition();\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n    }\n    this._onResized();\n  }\n\n  #rotateBox() {\n    // We've to deal with two rotations: the rotation of the annotation and the\n    // rotation of the parent page.\n    // When the page is rotated, all the layers are just rotated thanks to CSS\n    // but there is a notable exception: the canvas wrapper.\n    // The canvas wrapper is not rotated but the dimensions are (or not) swapped\n    // and the page is redrawn with the rotation applied to the canvas.\n    // The drawn layer is under the canvas wrapper and is not rotated so we have\n    // to \"manually\" rotate the coordinates.\n    //\n    // The coordinates (this.x, this.y) correspond to the top-left corner of\n    // the editor after it has been rotated in the page coordinate system.\n\n    const {\n      x,\n      y,\n      width,\n      height,\n      rotation,\n      parentRotation,\n      parentDimensions: [pW, pH],\n    } = this;\n    switch ((rotation * 4 + parentRotation) / 90) {\n      case 1:\n        // 0 -> 90\n        return [1 - y - height, x, height, width];\n      case 2:\n        // 0 -> 180\n        return [1 - x - width, 1 - y - height, width, height];\n      case 3:\n        // 0 -> 270\n        return [y, 1 - x - width, height, width];\n      case 4:\n        // 90 -> 0\n        return [\n          x,\n          y - width * (pW / pH),\n          height * (pH / pW),\n          width * (pW / pH),\n        ];\n      case 5:\n        // 90 -> 90\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 6:\n        // 90 -> 180\n        return [\n          1 - x - height * (pH / pW),\n          1 - y,\n          height * (pH / pW),\n          width * (pW / pH),\n        ];\n      case 7:\n        // 90 -> 270\n        return [\n          y - width * (pW / pH),\n          1 - x - height * (pH / pW),\n          width * (pW / pH),\n          height * (pH / pW),\n        ];\n      case 8:\n        // 180 -> 0\n        return [x - width, y - height, width, height];\n      case 9:\n        // 180 -> 90\n        return [1 - y, x - width, height, width];\n      case 10:\n        // 180 -> 180\n        return [1 - x, 1 - y, width, height];\n      case 11:\n        // 180 -> 270\n        return [y - height, 1 - x, height, width];\n      case 12:\n        // 270 -> 0\n        return [\n          x - height * (pH / pW),\n          y,\n          height * (pH / pW),\n          width * (pW / pH),\n        ];\n      case 13:\n        // 270 -> 90\n        return [\n          1 - y - width * (pW / pH),\n          x - height * (pH / pW),\n          width * (pW / pH),\n          height * (pH / pW),\n        ];\n      case 14:\n        // 270 -> 180\n        return [\n          1 - x,\n          1 - y - width * (pW / pH),\n          height * (pH / pW),\n          width * (pW / pH),\n        ];\n      case 15:\n        // 270 -> 270\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        // 0 -> 0\n        return [x, y, width, height];\n    }\n  }\n\n  /** @inheritdoc */\n  rotate() {\n    if (!this.parent) {\n      return;\n    }\n    this.parent.drawLayer.updateProperties(\n      this._drawId,\n      DrawingEditor._mergeSVGProperties(\n        {\n          bbox: this.#rotateBox(),\n        },\n        this.#drawOutlines.updateRotation(\n          (this.parentRotation - this.rotation + 360) % 360\n        )\n      )\n    );\n  }\n\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    this.#updateBbox(\n      this.#drawOutlines.updateParentDimensions(\n        this.parentDimensions,\n        this.parent.scale\n      )\n    );\n  }\n\n  static onScaleChangingWhenDrawing() {}\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    const div = super.render();\n    div.classList.add(\"draw\");\n\n    const drawDiv = document.createElement(\"div\");\n    div.append(drawDiv);\n    drawDiv.setAttribute(\"aria-hidden\", \"true\");\n    drawDiv.className = \"internal\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    this._uiManager.addShouldRescale(this);\n    this.disableEditing();\n\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n\n    return div;\n  }\n\n  /**\n   * Create a new drawer instance.\n   * @param {number} x - The x coordinate of the event.\n   * @param {number} y - The y coordinate of the event.\n   * @param {number} parentWidth - The parent width.\n   * @param {number} parentHeight - The parent height.\n   * @param {number} rotation - The parent rotation.\n   */\n  static createDrawerInstance(_x, _y, _parentWidth, _parentHeight, _rotation) {\n    unreachable(\"Not implemented\");\n  }\n\n  static startDrawing(parent, uiManager, _isLTR, event) {\n    // The _currentPointerType is set when the user starts an empty drawing\n    // session. If, in the same drawing session, the user starts using a\n    // different type of pointer (e.g. a pen and then a finger), we just return.\n    //\n    // The _currentPointerId  and _currentPointerIds are used to keep track of\n    // the pointers with a same type (e.g. two fingers). If the user starts to\n    // draw with a finger and then uses a second finger, we just stop the\n    // current drawing and let the user zoom the document.\n\n    const { target, offsetX: x, offsetY: y, pointerId, pointerType } = event;\n    if (\n      DrawingEditor.#currentPointerType &&\n      DrawingEditor.#currentPointerType !== pointerType\n    ) {\n      return;\n    }\n\n    const {\n      viewport: { rotation },\n    } = parent;\n    const { width: parentWidth, height: parentHeight } =\n      target.getBoundingClientRect();\n\n    const ac = (DrawingEditor.#currentDrawingAC = new AbortController());\n    const signal = parent.combinedSignal(ac);\n\n    DrawingEditor.#currentPointerId ||= pointerId;\n    DrawingEditor.#currentPointerType ??= pointerType;\n\n    window.addEventListener(\n      \"pointerup\",\n      e => {\n        if (DrawingEditor.#currentPointerId === e.pointerId) {\n          this._endDraw(e);\n        } else {\n          DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n        }\n      },\n      { signal }\n    );\n    window.addEventListener(\n      \"pointercancel\",\n      e => {\n        if (DrawingEditor.#currentPointerId === e.pointerId) {\n          this._currentParent.endDrawingSession();\n        } else {\n          DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n        }\n      },\n      { signal }\n    );\n    window.addEventListener(\n      \"pointerdown\",\n      e => {\n        if (DrawingEditor.#currentPointerType !== e.pointerType) {\n          // For example, we started with a pen and the user\n          // is now using a finger.\n          return;\n        }\n\n        // For example, the user is using a second finger.\n        (DrawingEditor.#currentPointerIds ||= new Set()).add(e.pointerId);\n\n        // The first finger created a first point and a second finger just\n        // started, so we stop the drawing and remove this only point.\n        if (DrawingEditor.#currentDraw.isCancellable()) {\n          DrawingEditor.#currentDraw.removeLastElement();\n          if (DrawingEditor.#currentDraw.isEmpty()) {\n            this._currentParent.endDrawingSession(/* isAborted = */ true);\n          } else {\n            this._endDraw(null);\n          }\n        }\n      },\n      {\n        capture: true,\n        passive: false,\n        signal,\n      }\n    );\n    window.addEventListener(\"contextmenu\", noContextMenu, { signal });\n    target.addEventListener(\"pointermove\", this._drawMove.bind(this), {\n      signal,\n    });\n    target.addEventListener(\n      \"touchmove\",\n      e => {\n        if (e.timeStamp === DrawingEditor.#currentMoveTimestamp) {\n          // This move event is used to draw so we don't want to scroll.\n          stopEvent(e);\n        }\n      },\n      { signal }\n    );\n    parent.toggleDrawing();\n    uiManager._editorUndoBar?.hide();\n\n    if (DrawingEditor.#currentDraw) {\n      parent.drawLayer.updateProperties(\n        this._currentDrawId,\n        DrawingEditor.#currentDraw.startNew(\n          x,\n          y,\n          parentWidth,\n          parentHeight,\n          rotation\n        )\n      );\n      return;\n    }\n\n    uiManager.updateUIForDefaultProperties(this);\n\n    DrawingEditor.#currentDraw = this.createDrawerInstance(\n      x,\n      y,\n      parentWidth,\n      parentHeight,\n      rotation\n    );\n    DrawingEditor.#currentDrawingOptions = this.getDefaultDrawingOptions();\n    this._currentParent = parent;\n\n    ({ id: this._currentDrawId } = parent.drawLayer.draw(\n      this._mergeSVGProperties(\n        DrawingEditor.#currentDrawingOptions.toSVGProperties(),\n        DrawingEditor.#currentDraw.defaultSVGProperties\n      ),\n      /* isPathUpdatable = */ true,\n      /* hasClip = */ false\n    ));\n  }\n\n  static _drawMove(event) {\n    DrawingEditor.#currentMoveTimestamp = -1;\n    if (!DrawingEditor.#currentDraw) {\n      return;\n    }\n    const { offsetX, offsetY, pointerId } = event;\n\n    if (DrawingEditor.#currentPointerId !== pointerId) {\n      return;\n    }\n    if (DrawingEditor.#currentPointerIds?.size >= 1) {\n      // The user is using multiple fingers and the first one is moving.\n      this._endDraw(event);\n      return;\n    }\n    this._currentParent.drawLayer.updateProperties(\n      this._currentDrawId,\n      DrawingEditor.#currentDraw.add(offsetX, offsetY)\n    );\n    // We track the timestamp to know if the touchmove event is used to draw.\n    DrawingEditor.#currentMoveTimestamp = event.timeStamp;\n    stopEvent(event);\n  }\n\n  static _cleanup(all) {\n    if (all) {\n      this._currentDrawId = -1;\n      this._currentParent = null;\n      DrawingEditor.#currentDraw = null;\n      DrawingEditor.#currentDrawingOptions = null;\n      DrawingEditor.#currentPointerType = null;\n      DrawingEditor.#currentMoveTimestamp = NaN;\n    }\n\n    if (DrawingEditor.#currentDrawingAC) {\n      DrawingEditor.#currentDrawingAC.abort();\n      DrawingEditor.#currentDrawingAC = null;\n      DrawingEditor.#currentPointerId = NaN;\n      DrawingEditor.#currentPointerIds = null;\n    }\n  }\n\n  static _endDraw(event) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n\n    parent.toggleDrawing(true);\n    this._cleanup(false);\n\n    if (event?.target === parent.div) {\n      parent.drawLayer.updateProperties(\n        this._currentDrawId,\n        DrawingEditor.#currentDraw.end(event.offsetX, event.offsetY)\n      );\n    }\n    if (this.supportMultipleDrawings) {\n      const draw = DrawingEditor.#currentDraw;\n      const drawId = this._currentDrawId;\n      const lastElement = draw.getLastElement();\n      parent.addCommands({\n        cmd: () => {\n          parent.drawLayer.updateProperties(\n            drawId,\n            draw.setLastElement(lastElement)\n          );\n        },\n        undo: () => {\n          parent.drawLayer.updateProperties(drawId, draw.removeLastElement());\n        },\n        mustExec: false,\n        type: AnnotationEditorParamsType.DRAW_STEP,\n      });\n\n      return;\n    }\n\n    this.endDrawing(/* isAborted = */ false);\n  }\n\n  static endDrawing(isAborted) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return null;\n    }\n    parent.toggleDrawing(true);\n    parent.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP);\n\n    if (!DrawingEditor.#currentDraw.isEmpty()) {\n      const {\n        pageDimensions: [pageWidth, pageHeight],\n        scale,\n      } = parent;\n\n      const editor = parent.createAndAddNewEditor(\n        { offsetX: 0, offsetY: 0 },\n        false,\n        {\n          drawId: this._currentDrawId,\n          drawOutlines: DrawingEditor.#currentDraw.getOutlines(\n            pageWidth * scale,\n            pageHeight * scale,\n            scale,\n            this._INNER_MARGIN\n          ),\n          drawingOptions: DrawingEditor.#currentDrawingOptions,\n          mustBeCommitted: !isAborted,\n        }\n      );\n      this._cleanup(true);\n      return editor;\n    }\n\n    parent.drawLayer.remove(this._currentDrawId);\n    this._cleanup(true);\n    return null;\n  }\n\n  /**\n   * Create the drawing options.\n   * @param {Object} _data\n   */\n  createDrawingOptions(_data) {}\n\n  /**\n   * Deserialize the drawing outlines.\n   * @param {number} pageX - The x coordinate of the page.\n   * @param {number} pageY - The y coordinate of the page.\n   * @param {number} pageWidth - The width of the page.\n   * @param {number} pageHeight - The height of the page.\n   * @param {number} innerWidth - The inner width.\n   * @param {Object} data - The data to deserialize.\n   * @returns {Object} The deserialized outlines.\n   */\n  static deserializeDraw(\n    _pageX,\n    _pageY,\n    _pageWidth,\n    _pageHeight,\n    _innerWidth,\n    _data\n  ) {\n    unreachable(\"Not implemented\");\n  }\n\n  /** @inheritdoc */\n  static async deserialize(data, parent, uiManager) {\n    const {\n      rawDims: { pageWidth, pageHeight, pageX, pageY },\n    } = parent.viewport;\n    const drawOutlines = this.deserializeDraw(\n      pageX,\n      pageY,\n      pageWidth,\n      pageHeight,\n      this._INNER_MARGIN,\n      data\n    );\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.createDrawingOptions(data);\n    editor.#createDrawOutlines({ drawOutlines });\n    editor.#addToDrawLayer();\n    editor.onScaleChanging();\n    editor.rotate();\n\n    return editor;\n  }\n\n  serializeDraw(isForCopying) {\n    const [pageX, pageY] = this.pageTranslation;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    return this.#drawOutlines.serialize(\n      [pageX, pageY, pageWidth, pageHeight],\n      isForCopying\n    );\n  }\n\n  /** @inheritdoc */\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getPDFRect(),\n    });\n\n    return null;\n  }\n\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\nexport { DrawingEditor, DrawingOptions };\n","/* Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MathClamp, Util } from \"../../../shared/util.js\";\nimport { Outline } from \"./outline.js\";\n\nclass InkDrawOutliner {\n  // The last 3 points of the line.\n  #last = new Float64Array(6);\n\n  #line;\n\n  #lines;\n\n  #rotation;\n\n  #thickness;\n\n  #points;\n\n  #lastSVGPath = \"\";\n\n  #lastIndex = 0;\n\n  #outlines = new InkDrawOutline();\n\n  #parentWidth;\n\n  #parentHeight;\n\n  constructor(x, y, parentWidth, parentHeight, rotation, thickness) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n\n    [x, y] = this.#normalizePoint(x, y);\n\n    const line = (this.#line = [NaN, NaN, NaN, NaN, x, y]);\n    this.#points = [x, y];\n    this.#lines = [{ line, points: this.#points }];\n    this.#last.set(line, 0);\n  }\n\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      this.#thickness = value;\n    }\n  }\n\n  #normalizePoint(x, y) {\n    return Outline._normalizePoint(\n      x,\n      y,\n      this.#parentWidth,\n      this.#parentHeight,\n      this.#rotation\n    );\n  }\n\n  isEmpty() {\n    return !this.#lines || this.#lines.length === 0;\n  }\n\n  isCancellable() {\n    // The user a second finger after drawing 5 points: it's small enough\n    // to not be a real drawing.\n    return this.#points.length <= 10;\n  }\n\n  add(x, y) {\n    // The point is in canvas coordinates which means that there is no rotation.\n    // It's the same as parent coordinates.\n    [x, y] = this.#normalizePoint(x, y);\n    const [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(this.#parentWidth * diffX, this.#parentHeight * diffY);\n    if (d <= 2) {\n      // The idea is to avoid garbage points around the last point.\n      // When the points are too close, it just leads to bad normal vectors and\n      // control points.\n      return null;\n    }\n\n    this.#points.push(x, y);\n\n    if (isNaN(x1)) {\n      // We've only one point.\n      this.#last.set([x2, y2, x, y], 2);\n      this.#line.push(NaN, NaN, NaN, NaN, x, y);\n      return {\n        path: {\n          d: this.toSVGPath(),\n        },\n      };\n    }\n\n    if (isNaN(this.#last[0])) {\n      // We've only two points.\n      this.#line.splice(6, 6);\n    }\n\n    this.#last.set([x1, y1, x2, y2, x, y], 0);\n    this.#line.push(...Outline.createBezierPoints(x1, y1, x2, y2, x, y));\n\n    return {\n      path: {\n        d: this.toSVGPath(),\n      },\n    };\n  }\n\n  end(x, y) {\n    const change = this.add(x, y);\n    if (change) {\n      return change;\n    }\n    if (this.#points.length === 2) {\n      // We've only one point.\n      return {\n        path: {\n          d: this.toSVGPath(),\n        },\n      };\n    }\n    return null;\n  }\n\n  startNew(x, y, parentWidth, parentHeight, rotation) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n\n    [x, y] = this.#normalizePoint(x, y);\n\n    const line = (this.#line = [NaN, NaN, NaN, NaN, x, y]);\n    this.#points = [x, y];\n    const last = this.#lines.at(-1);\n    if (last) {\n      last.line = new Float32Array(last.line);\n      last.points = new Float32Array(last.points);\n    }\n    this.#lines.push({ line, points: this.#points });\n    this.#last.set(line, 0);\n    this.#lastIndex = 0;\n    this.toSVGPath();\n\n    return null;\n  }\n\n  getLastElement() {\n    return this.#lines.at(-1);\n  }\n\n  setLastElement(element) {\n    if (!this.#lines) {\n      return this.#outlines.setLastElement(element);\n    }\n    this.#lines.push(element);\n    this.#line = element.line;\n    this.#points = element.points;\n    this.#lastIndex = 0;\n    return {\n      path: {\n        d: this.toSVGPath(),\n      },\n    };\n  }\n\n  removeLastElement() {\n    if (!this.#lines) {\n      return this.#outlines.removeLastElement();\n    }\n    this.#lines.pop();\n    this.#lastSVGPath = \"\";\n    for (let i = 0, ii = this.#lines.length; i < ii; i++) {\n      const { line, points } = this.#lines[i];\n      this.#line = line;\n      this.#points = points;\n      this.#lastIndex = 0;\n      this.toSVGPath();\n    }\n\n    return {\n      path: {\n        d: this.#lastSVGPath,\n      },\n    };\n  }\n\n  toSVGPath() {\n    const firstX = Outline.svgRound(this.#line[4]);\n    const firstY = Outline.svgRound(this.#line[5]);\n    if (this.#points.length === 2) {\n      this.#lastSVGPath = `${this.#lastSVGPath} M ${firstX} ${firstY} Z`;\n      return this.#lastSVGPath;\n    }\n\n    if (this.#points.length <= 6) {\n      // We've 2 or 3 points.\n      const i = this.#lastSVGPath.lastIndexOf(\"M\");\n      this.#lastSVGPath = `${this.#lastSVGPath.slice(0, i)} M ${firstX} ${firstY}`;\n      this.#lastIndex = 6;\n    }\n\n    if (this.#points.length === 4) {\n      const secondX = Outline.svgRound(this.#line[10]);\n      const secondY = Outline.svgRound(this.#line[11]);\n      this.#lastSVGPath = `${this.#lastSVGPath} L ${secondX} ${secondY}`;\n      this.#lastIndex = 12;\n      return this.#lastSVGPath;\n    }\n\n    const buffer = [];\n    if (this.#lastIndex === 0) {\n      buffer.push(`M ${firstX} ${firstY}`);\n      this.#lastIndex = 6;\n    }\n\n    for (let i = this.#lastIndex, ii = this.#line.length; i < ii; i += 6) {\n      const [c1x, c1y, c2x, c2y, x, y] = this.#line\n        .slice(i, i + 6)\n        .map(Outline.svgRound);\n      buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n    }\n    this.#lastSVGPath += buffer.join(\" \");\n    this.#lastIndex = this.#line.length;\n\n    return this.#lastSVGPath;\n  }\n\n  getOutlines(parentWidth, parentHeight, scale, innerMargin) {\n    const last = this.#lines.at(-1);\n    last.line = new Float32Array(last.line);\n    last.points = new Float32Array(last.points);\n\n    this.#outlines.build(\n      this.#lines,\n      parentWidth,\n      parentHeight,\n      scale,\n      this.#rotation,\n      this.#thickness,\n      innerMargin\n    );\n\n    // We reset everything: the drawing is done.\n    this.#last = null;\n    this.#line = null;\n    this.#lines = null;\n    this.#lastSVGPath = null;\n\n    return this.#outlines;\n  }\n\n  get defaultSVGProperties() {\n    return {\n      root: {\n        viewBox: \"0 0 10000 10000\",\n      },\n      rootClass: {\n        draw: true,\n      },\n      bbox: [0, 0, 1, 1],\n    };\n  }\n}\n\nclass InkDrawOutline extends Outline {\n  #bbox;\n\n  #currentRotation = 0;\n\n  #innerMargin;\n\n  #lines;\n\n  #parentWidth;\n\n  #parentHeight;\n\n  #parentScale;\n\n  #rotation;\n\n  #thickness;\n\n  build(\n    lines,\n    parentWidth,\n    parentHeight,\n    parentScale,\n    rotation,\n    thickness,\n    innerMargin\n  ) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#parentScale = parentScale;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    this.#innerMargin = innerMargin ?? 0;\n    this.#lines = lines;\n\n    this.#computeBbox();\n  }\n\n  get thickness() {\n    return this.#thickness;\n  }\n\n  setLastElement(element) {\n    this.#lines.push(element);\n    return {\n      path: {\n        d: this.toSVGPath(),\n      },\n    };\n  }\n\n  removeLastElement() {\n    this.#lines.pop();\n    return {\n      path: {\n        d: this.toSVGPath(),\n      },\n    };\n  }\n\n  toSVGPath() {\n    const buffer = [];\n    for (const { line } of this.#lines) {\n      buffer.push(`M${Outline.svgRound(line[4])} ${Outline.svgRound(line[5])}`);\n      if (line.length === 6) {\n        buffer.push(\"Z\");\n        continue;\n      }\n      if (line.length === 12 && isNaN(line[6])) {\n        buffer.push(\n          `L${Outline.svgRound(line[10])} ${Outline.svgRound(line[11])}`\n        );\n        continue;\n      }\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line\n          .subarray(i, i + 6)\n          .map(Outline.svgRound);\n        buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n      }\n    }\n    return buffer.join(\"\");\n  }\n\n  serialize([pageX, pageY, pageWidth, pageHeight], isForCopying) {\n    const serializedLines = [];\n    const serializedPoints = [];\n    const [x, y, width, height] = this.#getBBoxWithNoMargin();\n    let tx, ty, sx, sy, x1, y1, x2, y2, rescaleFn;\n\n    switch (this.#rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = pageX;\n        ty = pageY + pageHeight;\n        sx = pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + x * pageWidth;\n        y1 = pageY + (1 - y - height) * pageHeight;\n        x2 = pageX + (x + width) * pageWidth;\n        y2 = pageY + (1 - y) * pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX;\n        ty = pageY;\n        sx = pageWidth;\n        sy = pageHeight;\n        x1 = pageX + y * pageWidth;\n        y1 = pageY + x * pageHeight;\n        x2 = pageX + (y + height) * pageWidth;\n        y2 = pageY + (x + width) * pageHeight;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX + pageWidth;\n        ty = pageY;\n        sx = -pageWidth;\n        sy = pageHeight;\n        x1 = pageX + (1 - x - width) * pageWidth;\n        y1 = pageY + y * pageHeight;\n        x2 = pageX + (1 - x) * pageWidth;\n        y2 = pageY + (y + height) * pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX + pageWidth;\n        ty = pageY + pageHeight;\n        sx = -pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + (1 - y - height) * pageWidth;\n        y1 = pageY + (1 - x - width) * pageHeight;\n        x2 = pageX + (1 - y) * pageWidth;\n        y2 = pageY + (1 - x) * pageHeight;\n        break;\n    }\n\n    for (const { line, points } of this.#lines) {\n      serializedLines.push(\n        rescaleFn(\n          line,\n          tx,\n          ty,\n          sx,\n          sy,\n          isForCopying ? new Array(line.length) : null\n        )\n      );\n      serializedPoints.push(\n        rescaleFn(\n          points,\n          tx,\n          ty,\n          sx,\n          sy,\n          isForCopying ? new Array(points.length) : null\n        )\n      );\n    }\n\n    return {\n      lines: serializedLines,\n      points: serializedPoints,\n      rect: [x1, y1, x2, y2],\n    };\n  }\n\n  static deserialize(\n    pageX,\n    pageY,\n    pageWidth,\n    pageHeight,\n    innerMargin,\n    { paths: { lines, points }, rotation, thickness }\n  ) {\n    const newLines = [];\n    let tx, ty, sx, sy, rescaleFn;\n    switch (rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = -pageX / pageWidth;\n        ty = pageY / pageHeight + 1;\n        sx = 1 / pageWidth;\n        sy = -1 / pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = -pageY / pageHeight;\n        ty = -pageX / pageWidth;\n        sx = 1 / pageHeight;\n        sy = 1 / pageWidth;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX / pageWidth + 1;\n        ty = -pageY / pageHeight;\n        sx = -1 / pageWidth;\n        sy = 1 / pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageY / pageHeight + 1;\n        ty = pageX / pageWidth + 1;\n        sx = -1 / pageHeight;\n        sy = -1 / pageWidth;\n        break;\n    }\n\n    if (!lines) {\n      lines = [];\n      for (const point of points) {\n        const len = point.length;\n        if (len === 2) {\n          lines.push(\n            new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1]])\n          );\n          continue;\n        }\n        if (len === 4) {\n          lines.push(\n            new Float32Array([\n              NaN,\n              NaN,\n              NaN,\n              NaN,\n              point[0],\n              point[1],\n              NaN,\n              NaN,\n              NaN,\n              NaN,\n              point[2],\n              point[3],\n            ])\n          );\n          continue;\n        }\n        const line = new Float32Array(3 * (len - 2));\n        lines.push(line);\n        let [x1, y1, x2, y2] = point.subarray(0, 4);\n        line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n        for (let i = 4; i < len; i += 2) {\n          const x = point[i];\n          const y = point[i + 1];\n          line.set(\n            Outline.createBezierPoints(x1, y1, x2, y2, x, y),\n            (i - 2) * 3\n          );\n          [x1, y1, x2, y2] = [x2, y2, x, y];\n        }\n      }\n    }\n\n    for (let i = 0, ii = lines.length; i < ii; i++) {\n      newLines.push({\n        line: rescaleFn(\n          lines[i].map(x => x ?? NaN),\n          tx,\n          ty,\n          sx,\n          sy\n        ),\n        points: rescaleFn(\n          points[i].map(x => x ?? NaN),\n          tx,\n          ty,\n          sx,\n          sy\n        ),\n      });\n    }\n\n    const outlines = new this.prototype.constructor();\n    outlines.build(\n      newLines,\n      pageWidth,\n      pageHeight,\n      1,\n      rotation,\n      thickness,\n      innerMargin\n    );\n\n    return outlines;\n  }\n\n  #getMarginComponents(thickness = this.#thickness) {\n    const margin = this.#innerMargin + (thickness / 2) * this.#parentScale;\n    return this.#rotation % 180 === 0\n      ? [margin / this.#parentWidth, margin / this.#parentHeight]\n      : [margin / this.#parentHeight, margin / this.#parentWidth];\n  }\n\n  #getBBoxWithNoMargin() {\n    const [x, y, width, height] = this.#bbox;\n    const [marginX, marginY] = this.#getMarginComponents(0);\n\n    return [\n      x + marginX,\n      y + marginY,\n      width - 2 * marginX,\n      height - 2 * marginY,\n    ];\n  }\n\n  #computeBbox() {\n    const bbox = (this.#bbox = new Float32Array([\n      Infinity,\n      Infinity,\n      -Infinity,\n      -Infinity,\n    ]));\n\n    for (const { line } of this.#lines) {\n      if (line.length <= 12) {\n        // We've only one or two points => no bezier curve.\n        for (let i = 4, ii = line.length; i < ii; i += 6) {\n          Util.pointBoundingBox(line[i], line[i + 1], bbox);\n        }\n        continue;\n      }\n      let lastX = line[4],\n        lastY = line[5];\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6);\n        Util.bezierBoundingBox(lastX, lastY, c1x, c1y, c2x, c2y, x, y, bbox);\n        lastX = x;\n        lastY = y;\n      }\n    }\n\n    const [marginX, marginY] = this.#getMarginComponents();\n    bbox[0] = MathClamp(bbox[0] - marginX, 0, 1);\n    bbox[1] = MathClamp(bbox[1] - marginY, 0, 1);\n    bbox[2] = MathClamp(bbox[2] + marginX, 0, 1);\n    bbox[3] = MathClamp(bbox[3] + marginY, 0, 1);\n\n    bbox[2] -= bbox[0];\n    bbox[3] -= bbox[1];\n  }\n\n  get box() {\n    return this.#bbox;\n  }\n\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      return this.#updateThickness(value);\n    }\n    return null;\n  }\n\n  #updateThickness(thickness) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#thickness = thickness;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const [diffMarginX, diffMarginY] = [\n      newMarginX - oldMarginX,\n      newMarginY - oldMarginY,\n    ];\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n\n    return bbox;\n  }\n\n  updateParentDimensions([width, height], scale) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#parentWidth = width;\n    this.#parentHeight = height;\n    this.#parentScale = scale;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const diffMarginX = newMarginX - oldMarginX;\n    const diffMarginY = newMarginY - oldMarginY;\n\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n\n    return bbox;\n  }\n\n  updateRotation(rotation) {\n    this.#currentRotation = rotation;\n    return {\n      path: {\n        transform: this.rotationTransform,\n      },\n    };\n  }\n\n  get viewBox() {\n    return this.#bbox.map(Outline.svgRound).join(\" \");\n  }\n\n  get defaultProperties() {\n    const [x, y] = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox,\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,\n      },\n    };\n  }\n\n  get rotationTransform() {\n    const [, , width, height] = this.#bbox;\n    let a = 0,\n      b = 0,\n      c = 0,\n      d = 0,\n      e = 0,\n      f = 0;\n    switch (this.#currentRotation) {\n      case 90:\n        b = height / width;\n        c = -width / height;\n        e = width;\n        break;\n      case 180:\n        a = -1;\n        d = -1;\n        e = width;\n        f = height;\n        break;\n      case 270:\n        b = -height / width;\n        c = width / height;\n        f = height;\n        break;\n      default:\n        return \"\";\n    }\n    return `matrix(${a} ${b} ${c} ${d} ${Outline.svgRound(e)} ${Outline.svgRound(f)})`;\n  }\n\n  getPathResizingSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const [x, y, width, height] = this.#bbox;\n\n    if (\n      Math.abs(width - marginX) <= Outline.PRECISION ||\n      Math.abs(height - marginY) <= Outline.PRECISION\n    ) {\n      // Center the path in the new bounding box.\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      return {\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: `${this.rotationTransform} translate(${tx} ${ty})`,\n        },\n      };\n    }\n\n    // We compute the following transform:\n    //  1. Translate the path to the origin (-marginX, -marginY).\n    //  2. Scale the path to the new size:\n    //   ((newWidth - 2*marginX) / (bbox.width - 2*marginX),\n    //   (newHeight - 2*marginY) / (bbox.height - 2*marginY)).\n    //  3. Translate the path back to its original position\n    //   (marginX, marginY).\n    //  4. Scale the inverse of bbox scaling:\n    //   (bbox.width / newWidth, bbox.height / newHeight).\n\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const s2x = width / newWidth;\n    const s2y = height / newHeight;\n\n    return {\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,\n        transform:\n          `${this.rotationTransform} scale(${s2x} ${s2y}) ` +\n          `translate(${Outline.svgRound(marginX)} ${Outline.svgRound(marginY)}) scale(${s1x} ${s1y}) ` +\n          `translate(${Outline.svgRound(-marginX)} ${Outline.svgRound(-marginY)})`,\n      },\n    };\n  }\n\n  getPathResizedSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const bbox = this.#bbox;\n    const [x, y, width, height] = bbox;\n\n    bbox[0] = newX;\n    bbox[1] = newY;\n    bbox[2] = newWidth;\n    bbox[3] = newHeight;\n\n    if (\n      Math.abs(width - marginX) <= Outline.PRECISION ||\n      Math.abs(height - marginY) <= Outline.PRECISION\n    ) {\n      // Center the path in the new bounding box.\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      for (const { line, points } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n      return {\n        root: {\n          viewBox: this.viewBox,\n        },\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: this.rotationTransform || null,\n          d: this.toSVGPath(),\n        },\n      };\n    }\n\n    // We compute the following transform:\n    //  1. Translate the path to the origin (-(x + marginX), -(y + marginY)).\n    //  2. Scale the path to the new size:\n    //   ((newWidth - 2*marginX) / (bbox.width - 2*marginX),\n    //   (newHeight - 2*marginY) / (bbox.height - 2*marginY)).\n    //  3. Translate the path back to its new position\n    //     (newX + marginX,y newY + marginY).\n\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const tx = -s1x * (x + marginX) + newX + marginX;\n    const ty = -s1y * (y + marginY) + newY + marginY;\n\n    if (s1x !== 1 || s1y !== 1 || tx !== 0 || ty !== 0) {\n      for (const { line, points } of this.#lines) {\n        Outline._rescale(line, tx, ty, s1x, s1y, line);\n        Outline._rescale(points, tx, ty, s1x, s1y, points);\n      }\n    }\n\n    return {\n      root: {\n        viewBox: this.viewBox,\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n        transform: this.rotationTransform || null,\n        d: this.toSVGPath(),\n      },\n    };\n  }\n\n  getPathTranslatedSVGProperties([newX, newY], parentDimensions) {\n    const [newParentWidth, newParentHeight] = parentDimensions;\n    const bbox = this.#bbox;\n    const tx = newX - bbox[0];\n    const ty = newY - bbox[1];\n\n    if (\n      this.#parentWidth === newParentWidth &&\n      this.#parentHeight === newParentHeight\n    ) {\n      // We don't change the parent dimensions so it's a simple translation.\n      for (const { line, points } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n    } else {\n      const sx = this.#parentWidth / newParentWidth;\n      const sy = this.#parentHeight / newParentHeight;\n      this.#parentWidth = newParentWidth;\n      this.#parentHeight = newParentHeight;\n\n      for (const { line, points } of this.#lines) {\n        Outline._rescale(line, tx, ty, sx, sy, line);\n        Outline._rescale(points, tx, ty, sx, sy, points);\n      }\n      bbox[2] *= sx;\n      bbox[3] *= sy;\n    }\n    bbox[0] = newX;\n    bbox[1] = newY;\n\n    return {\n      root: {\n        viewBox: this.viewBox,\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n      },\n    };\n  }\n\n  get defaultSVGProperties() {\n    const bbox = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox,\n      },\n      rootClass: {\n        draw: true,\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(bbox[0])} ${Outline.svgRound(bbox[1])}`,\n        transform: this.rotationTransform || null,\n      },\n      bbox,\n    };\n  }\n}\n\nexport { InkDrawOutline, InkDrawOutliner };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  shadow,\n  Util,\n} from \"../../shared/util.js\";\nimport { DrawingEditor, DrawingOptions } from \"./draw.js\";\nimport { InkDrawOutline, InkDrawOutliner } from \"./drawers/inkdraw.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { BasicColorPicker } from \"./color_picker.js\";\nimport { InkAnnotationElement } from \"../annotation_layer.js\";\n\nclass InkDrawingOptions extends DrawingOptions {\n  constructor(viewerParameters) {\n    super();\n    this._viewParameters = viewerParameters;\n\n    super.updateProperties({\n      fill: \"none\",\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-opacity\": 1,\n      \"stroke-width\": 1,\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-miterlimit\": 10,\n    });\n  }\n\n  updateSVGProperty(name, value) {\n    if (name === \"stroke-width\") {\n      value ??= this[\"stroke-width\"];\n      value *= this._viewParameters.realScale;\n    }\n    super.updateSVGProperty(name, value);\n  }\n\n  clone() {\n    const clone = new InkDrawingOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\n\n/**\n * Basic draw editor in order to generate an Ink annotation.\n */\nclass InkEditor extends DrawingEditor {\n  static _type = \"ink\";\n\n  static _editorType = AnnotationEditorType.INK;\n\n  static _defaultDrawingOptions = null;\n\n  constructor(params) {\n    super({ ...params, name: \"inkEditor\" });\n    this._willKeepAspectRatio = true;\n    this.defaultL10nId = \"pdfjs-editor-ink-editor\";\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new InkDrawingOptions(\n      uiManager.viewParameters\n    );\n  }\n\n  /** @inheritdoc */\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n\n  /** @inheritdoc */\n  static get supportMultipleDrawings() {\n    return true;\n  }\n\n  /** @inheritdoc */\n  static get typesMap() {\n    return shadow(\n      this,\n      \"typesMap\",\n      new Map([\n        [AnnotationEditorParamsType.INK_THICKNESS, \"stroke-width\"],\n        [AnnotationEditorParamsType.INK_COLOR, \"stroke\"],\n        [AnnotationEditorParamsType.INK_OPACITY, \"stroke-opacity\"],\n      ])\n    );\n  }\n\n  /** @inheritdoc */\n  static createDrawerInstance(x, y, parentWidth, parentHeight, rotation) {\n    return new InkDrawOutliner(\n      x,\n      y,\n      parentWidth,\n      parentHeight,\n      rotation,\n      this._defaultDrawingOptions[\"stroke-width\"]\n    );\n  }\n\n  /** @inheritdoc */\n  static deserializeDraw(\n    pageX,\n    pageY,\n    pageWidth,\n    pageHeight,\n    innerMargin,\n    data\n  ) {\n    return InkDrawOutline.deserialize(\n      pageX,\n      pageY,\n      pageWidth,\n      pageHeight,\n      innerMargin,\n      data\n    );\n  }\n\n  /** @inheritdoc */\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          borderStyle: { rawWidth: thickness },\n          popupRef,\n          contentsObj,\n        },\n        parent: {\n          page: { pageNumber },\n        },\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.INK,\n        color: Array.from(color),\n        thickness,\n        opacity,\n        paths: { points: inkLists },\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef,\n        comment: contentsObj?.str || null,\n      };\n    }\n\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor._initialData = initialData;\n    if (data.comment) {\n      editor.setCommentData(data.comment);\n    }\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  get toolbarButtons() {\n    this._colorPicker ||= new BasicColorPicker(this);\n    return [[\"colorPicker\", this._colorPicker]];\n  }\n\n  get colorType() {\n    return AnnotationEditorParamsType.INK_COLOR;\n  }\n\n  get colorValue() {\n    return this._drawingOptions.stroke;\n  }\n\n  /** @inheritdoc */\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    super.onScaleChanging();\n    const { _drawId, _drawingOptions, parent } = this;\n    _drawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(\n      _drawId,\n      _drawingOptions.toSVGProperties()\n    );\n  }\n\n  static onScaleChangingWhenDrawing() {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    super.onScaleChangingWhenDrawing();\n    this._defaultDrawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(\n      this._currentDrawId,\n      this._defaultDrawingOptions.toSVGProperties()\n    );\n  }\n\n  /** @inheritdoc */\n  createDrawingOptions({ color, thickness, opacity }) {\n    this._drawingOptions = InkEditor.getDefaultDrawingOptions({\n      stroke: Util.makeHexColor(...color),\n      \"stroke-width\": thickness,\n      \"stroke-opacity\": opacity,\n    });\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n\n    const { lines, points, rect } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        stroke,\n        \"stroke-opacity\": opacity,\n        \"stroke-width\": thickness,\n      },\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.INK,\n      color: AnnotationEditor._colorManager.convert(stroke),\n      opacity,\n      thickness,\n      paths: {\n        lines,\n        points,\n      },\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n    this.addComment(serialized);\n\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n\n  #hasElementChanged(serialized) {\n    const { color, thickness, opacity, pageIndex } = this._initialData;\n    return (\n      this.hasEditedComment ||\n      this._hasBeenMoved ||\n      this._hasBeenResized ||\n      serialized.color.some((c, i) => c !== color[i]) ||\n      serialized.thickness !== thickness ||\n      serialized.opacity !== opacity ||\n      serialized.pageIndex !== pageIndex\n    );\n  }\n\n  /** @inheritdoc */\n  renderAnnotationElement(annotation) {\n    if (this.deleted) {\n      annotation.hide();\n      return null;\n    }\n    const { points, rect } = this.serializeDraw(/* isForCopying = */ false);\n    const params = {\n      rect,\n      thickness: this._drawingOptions[\"stroke-width\"],\n      points,\n    };\n    if (this.hasEditedComment) {\n      params.popup = this.comment;\n    }\n    annotation.updateEdited(params);\n\n    return null;\n  }\n}\n\nexport { InkDrawingOptions, InkEditor };\n","/* Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InkDrawOutline } from \"./inkdraw.js\";\n\nclass ContourDrawOutline extends InkDrawOutline {\n  toSVGPath() {\n    let path = super.toSVGPath();\n    if (!path.endsWith(\"Z\")) {\n      path += \"Z\";\n    }\n    return path;\n  }\n}\n\nexport { ContourDrawOutline };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { fromBase64Util, toBase64Util, warn } from \"../../../shared/util.js\";\nimport { ContourDrawOutline } from \"./contour.js\";\nimport { InkDrawOutline } from \"./inkdraw.js\";\nimport { Outline } from \"./outline.js\";\n\nconst BASE_HEADER_LENGTH = 8;\nconst POINTS_PROPERTIES_NUMBER = 3;\n\n/**\n * Basic text editor in order to create a Signature annotation.\n */\nclass SignatureExtractor {\n  static #PARAMETERS = {\n    maxDim: 512,\n    sigmaSFactor: 0.02,\n    sigmaR: 25,\n    kernelSize: 16,\n  };\n\n  static #neighborIndexToId(i0, j0, i, j) {\n    /*\n      The idea is to map the neighbors of a pixel into a unique id.\n        3 2 1\n        4 X 0\n        5 6 7\n    */\n\n    i -= i0;\n    j -= j0;\n\n    if (i === 0) {\n      return j > 0 ? 0 : 4;\n    }\n\n    if (i === 1) {\n      return j + 6;\n    }\n\n    return 2 - j;\n  }\n\n  static #neighborIdToIndex = new Int32Array([\n    0, 1, -1, 1, -1, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1,\n  ]);\n\n  static #clockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (-k + id - offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n\n  static #counterClockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (k + id + offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n\n  static #findContours(buf, width, height, threshold) {\n    // Based on the Suzuki's algorithm:\n    //  https://web.archive.org/web/20231213161741/https://www.nevis.columbia.edu/~vgenty/public/suzuki_et_al.pdf\n\n    const N = buf.length;\n    const types = new Int32Array(N);\n    for (let i = 0; i < N; i++) {\n      types[i] = buf[i] <= threshold ? 1 : 0;\n    }\n\n    for (let i = 1; i < height - 1; i++) {\n      types[i * width] = types[i * width + width - 1] = 0;\n    }\n    for (let i = 0; i < width; i++) {\n      types[i] = types[width * height - 1 - i] = 0;\n    }\n\n    let nbd = 1;\n    let lnbd;\n    const contours = [];\n\n    for (let i = 1; i < height - 1; i++) {\n      lnbd = 1;\n      for (let j = 1; j < width - 1; j++) {\n        const ij = i * width + j;\n        const pix = types[ij];\n        if (pix === 0) {\n          continue;\n        }\n\n        let i2 = i;\n        let j2 = j;\n\n        if (pix === 1 && types[ij - 1] === 0) {\n          // Outer border.\n          nbd += 1;\n          j2 -= 1;\n        } else if (pix >= 1 && types[ij + 1] === 0) {\n          // Hole border.\n          nbd += 1;\n          j2 += 1;\n          if (pix > 1) {\n            lnbd = pix;\n          }\n        } else {\n          if (pix !== 1) {\n            lnbd = Math.abs(pix);\n          }\n          continue;\n        }\n\n        const points = [j, i];\n        const isHole = j2 === j + 1;\n        const contour = {\n          isHole,\n          points,\n          id: nbd,\n          parent: 0,\n        };\n        contours.push(contour);\n\n        let contour0;\n        for (const c of contours) {\n          if (c.id === lnbd) {\n            contour0 = c;\n            break;\n          }\n        }\n\n        if (!contour0) {\n          contour.parent = isHole ? lnbd : 0;\n        } else if (contour0.isHole) {\n          contour.parent = isHole ? contour0.parent : lnbd;\n        } else {\n          contour.parent = isHole ? lnbd : contour0.parent;\n        }\n\n        const k = this.#clockwiseNonZero(types, width, i, j, i2, j2, 0);\n        if (k === -1) {\n          types[ij] = -nbd;\n          if (types[ij] !== 1) {\n            lnbd = Math.abs(types[ij]);\n          }\n          continue;\n        }\n\n        let shiftI = this.#neighborIdToIndex[2 * k];\n        let shiftJ = this.#neighborIdToIndex[2 * k + 1];\n        const i1 = i + shiftI;\n        const j1 = j + shiftJ;\n        i2 = i1;\n        j2 = j1;\n        let i3 = i;\n        let j3 = j;\n\n        while (true) {\n          const kk = this.#counterClockwiseNonZero(\n            types,\n            width,\n            i3,\n            j3,\n            i2,\n            j2,\n            1\n          );\n          shiftI = this.#neighborIdToIndex[2 * kk];\n          shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n          const i4 = i3 + shiftI;\n          const j4 = j3 + shiftJ;\n          points.push(j4, i4);\n          const ij3 = i3 * width + j3;\n          if (types[ij3 + 1] === 0) {\n            types[ij3] = -nbd;\n          } else if (types[ij3] === 1) {\n            types[ij3] = nbd;\n          }\n\n          if (i4 === i && j4 === j && i3 === i1 && j3 === j1) {\n            if (types[ij] !== 1) {\n              lnbd = Math.abs(types[ij]);\n            }\n            break;\n          } else {\n            i2 = i3;\n            j2 = j3;\n            i3 = i4;\n            j3 = j4;\n          }\n        }\n      }\n    }\n    return contours;\n  }\n\n  static #douglasPeuckerHelper(points, start, end, output) {\n    // Based on the Douglas-Peucker algorithm:\n    //  https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm\n    if (end - start <= 4) {\n      for (let i = start; i < end - 2; i += 2) {\n        output.push(points[i], points[i + 1]);\n      }\n      return;\n    }\n\n    const ax = points[start];\n    const ay = points[start + 1];\n    const abx = points[end - 4] - ax;\n    const aby = points[end - 3] - ay;\n    const dist = Math.hypot(abx, aby);\n    const nabx = abx / dist;\n    const naby = aby / dist;\n    const aa = nabx * ay - naby * ax;\n\n    // Guessing the epsilon value.\n    // See \"A novel framework for making dominant point detection methods\n    // non-parametric\".\n    const m = aby / abx;\n    const invS = 1 / dist;\n    const phi = Math.atan(m);\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const tmax = invS * (Math.abs(cosPhi) + Math.abs(sinPhi));\n    const poly = invS * (1 - tmax + tmax ** 2);\n    const partialPhi = Math.max(\n      Math.atan(Math.abs(sinPhi + cosPhi) * poly),\n      Math.atan(Math.abs(sinPhi - cosPhi) * poly)\n    );\n\n    let dmax = 0;\n    let index = start;\n    for (let i = start + 2; i < end - 2; i += 2) {\n      const d = Math.abs(aa - nabx * points[i + 1] + naby * points[i]);\n      if (d > dmax) {\n        index = i;\n        dmax = d;\n      }\n    }\n\n    if (dmax > (dist * partialPhi) ** 2) {\n      this.#douglasPeuckerHelper(points, start, index + 2, output);\n      this.#douglasPeuckerHelper(points, index, end, output);\n    } else {\n      output.push(ax, ay);\n    }\n  }\n\n  static #douglasPeucker(points) {\n    const output = [];\n    const len = points.length;\n    this.#douglasPeuckerHelper(points, 0, len, output);\n    output.push(points[len - 2], points[len - 1]);\n    return output.length <= 4 ? null : output;\n  }\n\n  static #bilateralFilter(buf, width, height, sigmaS, sigmaR, kernelSize) {\n    // The bilateral filter is a nonlinear filter that does spatial averaging.\n    // Its main interest is to preserve edges while removing noise.\n    // See https://en.wikipedia.org/wiki/Bilateral_filter for more details.\n    // sigmaS is the standard deviation of the spatial gaussian.\n    // sigmaR is the standard deviation of the range (in term of pixel\n    // intensity) gaussian.\n\n    // Create a gaussian kernel\n    const kernel = new Float32Array(kernelSize ** 2);\n    const sigmaS2 = -2 * sigmaS ** 2;\n    const halfSize = kernelSize >> 1;\n\n    for (let i = 0; i < kernelSize; i++) {\n      const x = (i - halfSize) ** 2;\n      for (let j = 0; j < kernelSize; j++) {\n        kernel[i * kernelSize + j] = Math.exp(\n          (x + (j - halfSize) ** 2) / sigmaS2\n        );\n      }\n    }\n\n    // Create the range values to be used with the distance between pixels.\n    // It's a way faster with a lookup table than computing the exponential.\n    const rangeValues = new Float32Array(256);\n    const sigmaR2 = -2 * sigmaR ** 2;\n    for (let i = 0; i < 256; i++) {\n      rangeValues[i] = Math.exp(i ** 2 / sigmaR2);\n    }\n\n    const N = buf.length;\n    const out = new Uint8Array(N);\n\n    // We compute the histogram here instead of doing it later: it's slightly\n    // faster.\n    const histogram = new Uint32Array(256);\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        const ij = i * width + j;\n        const center = buf[ij];\n        let sum = 0;\n        let norm = 0;\n\n        for (let k = 0; k < kernelSize; k++) {\n          const y = i + k - halfSize;\n          if (y < 0 || y >= height) {\n            continue;\n          }\n          for (let l = 0; l < kernelSize; l++) {\n            const x = j + l - halfSize;\n            if (x < 0 || x >= width) {\n              continue;\n            }\n            const neighbour = buf[y * width + x];\n            const w =\n              kernel[k * kernelSize + l] *\n              rangeValues[Math.abs(neighbour - center)];\n            sum += neighbour * w;\n            norm += w;\n          }\n        }\n\n        const pix = (out[ij] = Math.round(sum / norm));\n        histogram[pix]++;\n      }\n    }\n\n    return [out, histogram];\n  }\n\n  static #getHistogram(buf) {\n    const histogram = new Uint32Array(256);\n    for (const g of buf) {\n      histogram[g]++;\n    }\n    return histogram;\n  }\n\n  static #toUint8(buf) {\n    // We have a RGBA buffer, containing a grayscale image.\n    // We want to convert it into a basic G buffer.\n    // Also, we want to normalize the values between 0 and 255 in order to\n    // increase the contrast.\n    const N = buf.length;\n    const out = new Uint8ClampedArray(N >> 2);\n    let max = -Infinity;\n    let min = Infinity;\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      const pix = (out[i] = buf[i << 2]);\n      max = Math.max(max, pix);\n      min = Math.min(min, pix);\n    }\n    const ratio = 255 / (max - min);\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      out[i] = (out[i] - min) * ratio;\n    }\n\n    return out;\n  }\n\n  static #guessThreshold(histogram) {\n    // We want to find the threshold that will separate the background from the\n    // foreground.\n    // We could have used Otsu's method, but unfortunately it doesn't work well\n    // when the background has too much shade of greys.\n    // So the idea is to find a maximum in the black part of the histogram and\n    // figure out the value which will be the first one of the white part.\n\n    let i;\n    let M = -Infinity;\n    let L = -Infinity;\n    const min = histogram.findIndex(v => v !== 0);\n    let pos = min;\n    let spos = min;\n    for (i = min; i < 256; i++) {\n      const v = histogram[i];\n      if (v > M) {\n        if (i - pos > L) {\n          L = i - pos;\n          spos = i - 1;\n        }\n        M = v;\n        pos = i;\n      }\n    }\n    for (i = spos - 1; i >= 0; i--) {\n      if (histogram[i] > histogram[i + 1]) {\n        break;\n      }\n    }\n\n    return i;\n  }\n\n  static #getGrayPixels(bitmap) {\n    const originalBitmap = bitmap;\n    const { width, height } = bitmap;\n    const { maxDim } = this.#PARAMETERS;\n    let newWidth = width;\n    let newHeight = height;\n\n    if (width > maxDim || height > maxDim) {\n      let prevWidth = width;\n      let prevHeight = height;\n\n      let steps = Math.log2(Math.max(width, height) / maxDim);\n      const isteps = Math.floor(steps);\n      steps = steps === isteps ? isteps - 1 : isteps;\n      for (let i = 0; i < steps; i++) {\n        newWidth = Math.ceil(prevWidth / 2);\n        newHeight = Math.ceil(prevHeight / 2);\n\n        const offscreen = new OffscreenCanvas(newWidth, newHeight);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(\n          bitmap,\n          0,\n          0,\n          prevWidth,\n          prevHeight,\n          0,\n          0,\n          newWidth,\n          newHeight\n        );\n        prevWidth = newWidth;\n        prevHeight = newHeight;\n\n        // Release the resources associated with the bitmap.\n        if (bitmap !== originalBitmap) {\n          bitmap.close();\n        }\n        bitmap = offscreen.transferToImageBitmap();\n      }\n\n      const ratio = Math.min(maxDim / newWidth, maxDim / newHeight);\n      newWidth = Math.round(newWidth * ratio);\n      newHeight = Math.round(newHeight * ratio);\n    }\n    const offscreen = new OffscreenCanvas(newWidth, newHeight);\n    const ctx = offscreen.getContext(\"2d\", { willReadFrequently: true });\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, newWidth, newHeight);\n    ctx.filter = \"grayscale(1)\";\n    ctx.drawImage(\n      bitmap,\n      0,\n      0,\n      bitmap.width,\n      bitmap.height,\n      0,\n      0,\n      newWidth,\n      newHeight\n    );\n    const grayImage = ctx.getImageData(0, 0, newWidth, newHeight).data;\n    const uint8Buf = this.#toUint8(grayImage);\n\n    return [uint8Buf, newWidth, newHeight];\n  }\n\n  static extractContoursFromText(\n    text,\n    { fontFamily, fontStyle, fontWeight },\n    pageWidth,\n    pageHeight,\n    rotation,\n    innerMargin\n  ) {\n    let canvas = new OffscreenCanvas(1, 1);\n    let ctx = canvas.getContext(\"2d\", { alpha: false });\n    const fontSize = 200;\n    const font =\n      (ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`);\n    const {\n      actualBoundingBoxLeft,\n      actualBoundingBoxRight,\n      actualBoundingBoxAscent,\n      actualBoundingBoxDescent,\n      fontBoundingBoxAscent,\n      fontBoundingBoxDescent,\n      width,\n    } = ctx.measureText(text);\n\n    // We rescale the canvas to make \"sure\" the text fits.\n    const SCALE = 1.5;\n    const canvasWidth = Math.ceil(\n      Math.max(\n        Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) || 0,\n        width\n      ) * SCALE\n    );\n    const canvasHeight = Math.ceil(\n      Math.max(\n        Math.abs(actualBoundingBoxAscent) +\n          Math.abs(actualBoundingBoxDescent) || fontSize,\n        Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent) ||\n          fontSize\n      ) * SCALE\n    );\n    canvas = new OffscreenCanvas(canvasWidth, canvasHeight);\n    ctx = canvas.getContext(\"2d\", { alpha: true, willReadFrequently: true });\n    ctx.font = font;\n    ctx.filter = \"grayscale(1)\";\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n    ctx.fillStyle = \"black\";\n    ctx.fillText(\n      text,\n      (canvasWidth * (SCALE - 1)) / 2,\n      (canvasHeight * (3 - SCALE)) / 2\n    );\n\n    const uint8Buf = this.#toUint8(\n      ctx.getImageData(0, 0, canvasWidth, canvasHeight).data\n    );\n    const histogram = this.#getHistogram(uint8Buf);\n    const threshold = this.#guessThreshold(histogram);\n\n    const contourList = this.#findContours(\n      uint8Buf,\n      canvasWidth,\n      canvasHeight,\n      threshold\n    );\n\n    return this.processDrawnLines({\n      lines: { curves: contourList, width: canvasWidth, height: canvasHeight },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true,\n    });\n  }\n\n  static process(bitmap, pageWidth, pageHeight, rotation, innerMargin) {\n    const [uint8Buf, width, height] = this.#getGrayPixels(bitmap);\n    const [buffer, histogram] = this.#bilateralFilter(\n      uint8Buf,\n      width,\n      height,\n      Math.hypot(width, height) * this.#PARAMETERS.sigmaSFactor,\n      this.#PARAMETERS.sigmaR,\n      this.#PARAMETERS.kernelSize\n    );\n\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(buffer, width, height, threshold);\n\n    return this.processDrawnLines({\n      lines: { curves: contourList, width, height },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true,\n    });\n  }\n\n  static processDrawnLines({\n    lines,\n    pageWidth,\n    pageHeight,\n    rotation,\n    innerMargin,\n    mustSmooth,\n    areContours,\n  }) {\n    if (rotation % 180 !== 0) {\n      [pageWidth, pageHeight] = [pageHeight, pageWidth];\n    }\n\n    const { curves, width, height } = lines;\n    const thickness = lines.thickness ?? 0;\n    const linesAndPoints = [];\n    const ratio = Math.min(pageWidth / width, pageHeight / height);\n    const xScale = ratio / pageWidth;\n    const yScale = ratio / pageHeight;\n    const newCurves = [];\n\n    for (const { points } of curves) {\n      const reducedPoints = mustSmooth ? this.#douglasPeucker(points) : points;\n      if (!reducedPoints) {\n        continue;\n      }\n      newCurves.push(reducedPoints);\n\n      const len = reducedPoints.length;\n      const newPoints = new Float32Array(len);\n      const line = new Float32Array(3 * (len === 2 ? 2 : len - 2));\n      linesAndPoints.push({ line, points: newPoints });\n\n      if (len === 2) {\n        newPoints[0] = reducedPoints[0] * xScale;\n        newPoints[1] = reducedPoints[1] * yScale;\n        line.set([NaN, NaN, NaN, NaN, newPoints[0], newPoints[1]], 0);\n        continue;\n      }\n\n      let [x1, y1, x2, y2] = reducedPoints;\n      x1 *= xScale;\n      y1 *= yScale;\n      x2 *= xScale;\n      y2 *= yScale;\n      newPoints.set([x1, y1, x2, y2], 0);\n\n      line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n      for (let i = 4; i < len; i += 2) {\n        const x = (newPoints[i] = reducedPoints[i] * xScale);\n        const y = (newPoints[i + 1] = reducedPoints[i + 1] * yScale);\n        line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n        [x1, y1, x2, y2] = [x2, y2, x, y];\n      }\n    }\n\n    if (linesAndPoints.length === 0) {\n      return null;\n    }\n\n    const outline = areContours\n      ? new ContourDrawOutline()\n      : new InkDrawOutline();\n\n    outline.build(\n      linesAndPoints,\n      pageWidth,\n      pageHeight,\n      1,\n      rotation,\n      areContours ? 0 : thickness,\n      innerMargin\n    );\n\n    return { outline, newCurves, areContours, thickness, width, height };\n  }\n\n  static async compressSignature({\n    outlines,\n    areContours,\n    thickness,\n    width,\n    height,\n  }) {\n    // We create a single array containing all the outlines.\n    // The format is the following:\n    // - 4 bytes: data length.\n    // - 4 bytes: version.\n    // - 4 bytes: width.\n    // - 4 bytes: height.\n    // - 4 bytes: 0 if it's a contour, 1 if it's an ink.\n    // - 4 bytes: thickness.\n    // - 4 bytes: number of drawings.\n    // - 4 bytes: size of the buffer containing the diff of the coordinates.\n    // - 4 bytes: number of points in the first drawing.\n    // - 4 bytes: x coordinate of the first point.\n    // - 4 bytes: y coordinate of the first point.\n    // - 4 bytes: number of points in the second drawing.\n    // - 4 bytes: x coordinate of the first point.\n    // - 4 bytes: y coordinate of the first point.\n    // - ...\n    // - The buffer containing the diff of the coordinates.\n\n    // The coordinates are supposed to be positive integers.\n\n    // We also compute the min and max difference between two points.\n    // This will help us to determine the type of the buffer (Int8, Int16 or\n    // Int32) in order to minimize the amount of data we have.\n    let minDiff = Infinity;\n    let maxDiff = -Infinity;\n    let outlinesLength = 0;\n    for (const points of outlines) {\n      outlinesLength += points.length;\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        const dx = points[i] - points[i - 2];\n        minDiff = Math.min(minDiff, dx);\n        maxDiff = Math.max(maxDiff, dx);\n      }\n    }\n\n    let bufferType;\n    if (minDiff >= -128 && maxDiff <= 127) {\n      bufferType = Int8Array;\n    } else if (minDiff >= -32768 && maxDiff <= 32767) {\n      bufferType = Int16Array;\n    } else {\n      bufferType = Int32Array;\n    }\n\n    const len = outlines.length;\n    const headerLength = BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * len;\n    const header = new Uint32Array(headerLength);\n\n    let offset = 0;\n    header[offset++] =\n      headerLength * Uint32Array.BYTES_PER_ELEMENT +\n      (outlinesLength - 2 * len) * bufferType.BYTES_PER_ELEMENT;\n    header[offset++] = 0; // Version.\n    header[offset++] = width;\n    header[offset++] = height;\n    header[offset++] = areContours ? 0 : 1;\n    header[offset++] = Math.max(0, Math.floor(thickness ?? 0));\n    header[offset++] = len;\n    header[offset++] = bufferType.BYTES_PER_ELEMENT;\n    for (const points of outlines) {\n      header[offset++] = points.length - 2;\n      header[offset++] = points[0];\n      header[offset++] = points[1];\n    }\n\n    const cs = new CompressionStream(\"deflate-raw\");\n    const writer = cs.writable.getWriter();\n    await writer.ready;\n\n    writer.write(header);\n    const BufferCtor = bufferType.prototype.constructor;\n    for (const points of outlines) {\n      const diffs = new BufferCtor(points.length - 2);\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        diffs[i - 2] = points[i] - points[i - 2];\n      }\n      writer.write(diffs);\n    }\n\n    writer.close();\n\n    const buf = await new Response(cs.readable).arrayBuffer();\n    const bytes = new Uint8Array(buf);\n\n    return toBase64Util(bytes);\n  }\n\n  static async decompressSignature(signatureData) {\n    try {\n      const bytes = fromBase64Util(signatureData);\n      const { readable, writable } = new DecompressionStream(\"deflate-raw\");\n      const writer = writable.getWriter();\n      await writer.ready;\n\n      // We can't await writer.write() because it'll block until the reader\n      // starts which happens few lines below.\n      writer\n        .write(bytes)\n        .then(async () => {\n          await writer.ready;\n          await writer.close();\n        })\n        .catch(() => {});\n\n      let data = null;\n      let offset = 0;\n      for await (const chunk of readable) {\n        data ||= new Uint8Array(new Uint32Array(chunk.buffer, 0, 4)[0]);\n        data.set(chunk, offset);\n        offset += chunk.length;\n      }\n\n      // We take a bit too much data for the header but it's fine.\n      const header = new Uint32Array(data.buffer, 0, data.length >> 2);\n      const version = header[1];\n      if (version !== 0) {\n        throw new Error(`Invalid version: ${version}`);\n      }\n      const width = header[2];\n      const height = header[3];\n      const areContours = header[4] === 0;\n      const thickness = header[5];\n      const numberOfDrawings = header[6];\n      const bufferType = header[7];\n      const outlines = [];\n      const diffsOffset =\n        (BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * numberOfDrawings) *\n        Uint32Array.BYTES_PER_ELEMENT;\n      let diffs;\n\n      switch (bufferType) {\n        case Int8Array.BYTES_PER_ELEMENT:\n          diffs = new Int8Array(data.buffer, diffsOffset);\n          break;\n        case Int16Array.BYTES_PER_ELEMENT:\n          diffs = new Int16Array(data.buffer, diffsOffset);\n          break;\n        case Int32Array.BYTES_PER_ELEMENT:\n          diffs = new Int32Array(data.buffer, diffsOffset);\n          break;\n      }\n\n      offset = 0;\n      for (let i = 0; i < numberOfDrawings; i++) {\n        const len = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH];\n        const points = new Float32Array(len + 2);\n        outlines.push(points);\n\n        for (let j = 0; j < POINTS_PROPERTIES_NUMBER - 1; j++) {\n          points[j] =\n            header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH + j + 1];\n        }\n        for (let j = 0; j < len; j++) {\n          points[j + 2] = points[j] + diffs[offset++];\n        }\n      }\n\n      return {\n        areContours,\n        thickness,\n        outlines,\n        width,\n        height,\n      };\n    } catch (e) {\n      warn(`decompressSignature: ${e}`);\n      return null;\n    }\n  }\n}\n\nexport { SignatureExtractor };\n","/* Copyright 2025 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationEditorType, shadow } from \"../../shared/util.js\";\nimport { DrawingEditor, DrawingOptions } from \"./draw.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { ContourDrawOutline } from \"./drawers/contour.js\";\nimport { InkDrawingOptions } from \"./ink.js\";\nimport { InkDrawOutline } from \"./drawers/inkdraw.js\";\nimport { SignatureExtractor } from \"./drawers/signaturedraw.js\";\n\nclass SignatureOptions extends DrawingOptions {\n  constructor() {\n    super();\n\n    super.updateProperties({\n      fill: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 0,\n    });\n  }\n\n  clone() {\n    const clone = new SignatureOptions();\n    clone.updateAll(this);\n    return clone;\n  }\n}\n\nclass DrawnSignatureOptions extends InkDrawingOptions {\n  constructor(viewerParameters) {\n    super(viewerParameters);\n\n    super.updateProperties({\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 1,\n    });\n  }\n\n  clone() {\n    const clone = new DrawnSignatureOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\n\n/**\n * Basic editor in order to generate an Stamp annotation annotation containing\n * a signature drawing.\n */\nclass SignatureEditor extends DrawingEditor {\n  #isExtracted = false;\n\n  #description = null;\n\n  #signatureData = null;\n\n  #signatureUUID = null;\n\n  static _type = \"signature\";\n\n  static _editorType = AnnotationEditorType.SIGNATURE;\n\n  static _defaultDrawingOptions = null;\n\n  constructor(params) {\n    super({ ...params, mustBeCommitted: true, name: \"signatureEditor\" });\n    this._willKeepAspectRatio = true;\n    this.#signatureData = params.signatureData || null;\n    this.#description = null;\n    this.defaultL10nId = \"pdfjs-editor-signature-editor1\";\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n\n    this._defaultDrawingOptions = new SignatureOptions();\n    this._defaultDrawnSignatureOptions = new DrawnSignatureOptions(\n      uiManager.viewParameters\n    );\n  }\n\n  /** @inheritdoc */\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n\n  /** @inheritdoc */\n  static get supportMultipleDrawings() {\n    return false;\n  }\n\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map());\n  }\n\n  static get isDrawer() {\n    return false;\n  }\n\n  /** @inheritdoc */\n  get telemetryFinalData() {\n    return {\n      type: \"signature\",\n      hasDescription: !!this.#description,\n    };\n  }\n\n  static computeTelemetryFinalData(data) {\n    const hasDescriptionStats = data.get(\"hasDescription\");\n    return {\n      hasAltText: hasDescriptionStats.get(true) ?? 0,\n      hasNoAltText: hasDescriptionStats.get(false) ?? 0,\n    };\n  }\n\n  /** @inheritdoc */\n  get isResizable() {\n    return true;\n  }\n\n  /** @inheritdoc */\n  onScaleChanging() {\n    if (this._drawId === null) {\n      return;\n    }\n    super.onScaleChanging();\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    const { _isCopy } = this;\n    if (_isCopy) {\n      // No need to adjust the position when rendering in DrawingEditor.\n      this._isCopy = false;\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n\n    if (this._drawId === null) {\n      if (this.#signatureData) {\n        const {\n          lines,\n          mustSmooth,\n          areContours,\n          description,\n          uuid,\n          heightInPage,\n        } = this.#signatureData;\n        const {\n          rawDims: { pageWidth, pageHeight },\n          rotation,\n        } = this.parent.viewport;\n        const outline = SignatureExtractor.processDrawnLines({\n          lines,\n          pageWidth,\n          pageHeight,\n          rotation,\n          innerMargin: SignatureEditor._INNER_MARGIN,\n          mustSmooth,\n          areContours,\n        });\n        this.addSignature(outline, heightInPage, description, uuid);\n      } else {\n        // Avoid Firefox crashing (with a local build) because the description\n        // parameter is missing.\n        this.div.setAttribute(\n          \"data-l10n-args\",\n          JSON.stringify({ description: \"\" })\n        );\n        this.div.hidden = true;\n        this._uiManager.getSignature(this);\n      }\n    } else {\n      this.div.setAttribute(\n        \"data-l10n-args\",\n        JSON.stringify({ description: this.#description || \"\" })\n      );\n    }\n\n    if (_isCopy) {\n      this._isCopy = true;\n      this._moveAfterPaste(baseX, baseY);\n    }\n\n    return this.div;\n  }\n\n  setUuid(uuid) {\n    this.#signatureUUID = uuid;\n    this.addEditToolbar();\n  }\n\n  getUuid() {\n    return this.#signatureUUID;\n  }\n\n  get description() {\n    return this.#description;\n  }\n\n  set description(description) {\n    this.#description = description;\n    if (!this.div) {\n      return;\n    }\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({ description }));\n    super.addEditToolbar().then(toolbar => {\n      toolbar?.updateEditSignatureButton(description);\n    });\n  }\n\n  getSignaturePreview() {\n    const { newCurves, areContours, thickness, width, height } =\n      this.#signatureData;\n    const maxDim = Math.max(width, height);\n    const outlineData = SignatureExtractor.processDrawnLines({\n      lines: {\n        curves: newCurves.map(points => ({ points })),\n        thickness,\n        width,\n        height,\n      },\n      pageWidth: maxDim,\n      pageHeight: maxDim,\n      rotation: 0,\n      innerMargin: 0,\n      mustSmooth: false,\n      areContours,\n    });\n    return { areContours, outline: outlineData.outline };\n  }\n\n  /** @inheritdoc */\n  get toolbarButtons() {\n    if (this._uiManager.signatureManager) {\n      return [[\"editSignature\", this._uiManager.signatureManager]];\n    }\n    return super.toolbarButtons;\n  }\n\n  addSignature(data, heightInPage, description, uuid) {\n    const { x: savedX, y: savedY } = this;\n    const { outline } = (this.#signatureData = data);\n    this.#isExtracted = outline instanceof ContourDrawOutline;\n    this.description = description;\n    let drawingOptions;\n    if (this.#isExtracted) {\n      drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      drawingOptions.updateProperties({ \"stroke-width\": outline.thickness });\n    }\n    this._addOutlines({\n      drawOutlines: outline,\n      drawingOptions,\n    });\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const [, pageHeight] = this.pageDimensions;\n    let newHeight = heightInPage / pageHeight;\n    // Ensure the signature doesn't exceed the page height.\n    // If the signature is too big, we scale it down to 50% of the page height.\n    newHeight = newHeight >= 1 ? 0.5 : newHeight;\n\n    this.width *= newHeight / this.height;\n    if (this.width >= 1) {\n      newHeight *= 0.9 / this.width;\n      this.width = 0.9;\n    }\n\n    this.height = newHeight;\n    this.setDims(parentWidth * this.width, parentHeight * this.height);\n    this.x = savedX;\n    this.y = savedY;\n    this.center();\n\n    this._onResized();\n    this.onScaleChanging();\n    this.rotate();\n    this._uiManager.addToAnnotationStorage(this);\n    this.setUuid(uuid);\n\n    this._reportTelemetry({\n      action: \"pdfjs.signature.inserted\",\n      data: {\n        hasBeenSaved: !!uuid,\n        hasDescription: !!description,\n      },\n    });\n\n    this.div.hidden = false;\n  }\n\n  getFromImage(bitmap) {\n    const {\n      rawDims: { pageWidth, pageHeight },\n      rotation,\n    } = this.parent.viewport;\n    return SignatureExtractor.process(\n      bitmap,\n      pageWidth,\n      pageHeight,\n      rotation,\n      SignatureEditor._INNER_MARGIN\n    );\n  }\n\n  getFromText(text, fontInfo) {\n    const {\n      rawDims: { pageWidth, pageHeight },\n      rotation,\n    } = this.parent.viewport;\n    return SignatureExtractor.extractContoursFromText(\n      text,\n      fontInfo,\n      pageWidth,\n      pageHeight,\n      rotation,\n      SignatureEditor._INNER_MARGIN\n    );\n  }\n\n  getDrawnSignature(curves) {\n    const {\n      rawDims: { pageWidth, pageHeight },\n      rotation,\n    } = this.parent.viewport;\n    return SignatureExtractor.processDrawnLines({\n      lines: curves,\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin: SignatureEditor._INNER_MARGIN,\n      mustSmooth: false,\n      areContours: false,\n    });\n  }\n\n  /** @inheritdoc */\n  createDrawingOptions({ areContours, thickness }) {\n    if (areContours) {\n      this._drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      this._drawingOptions =\n        SignatureEditor._defaultDrawnSignatureOptions.clone();\n      this._drawingOptions.updateProperties({ \"stroke-width\": thickness });\n    }\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const { lines, points, rect } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: { \"stroke-width\": thickness },\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.SIGNATURE,\n      isSignature: true,\n      areContours: this.#isExtracted,\n      color: [0, 0, 0],\n      thickness: this.#isExtracted ? 0 : thickness,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n    this.addComment(serialized);\n    if (isForCopying) {\n      serialized.paths = { lines, points };\n      serialized.uuid = this.#signatureUUID;\n      serialized.isCopy = true;\n    } else {\n      serialized.lines = lines;\n    }\n    if (this.#description) {\n      serialized.accessibilityData = { type: \"Figure\", alt: this.#description };\n    }\n    return serialized;\n  }\n\n  /** @inheritdoc */\n  static deserializeDraw(\n    pageX,\n    pageY,\n    pageWidth,\n    pageHeight,\n    innerMargin,\n    data\n  ) {\n    if (data.areContours) {\n      return ContourDrawOutline.deserialize(\n        pageX,\n        pageY,\n        pageWidth,\n        pageHeight,\n        innerMargin,\n        data\n      );\n    }\n\n    return InkDrawOutline.deserialize(\n      pageX,\n      pageY,\n      pageWidth,\n      pageHeight,\n      innerMargin,\n      data\n    );\n  }\n\n  /** @inheritdoc */\n  static async deserialize(data, parent, uiManager) {\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#isExtracted = data.areContours;\n    editor.description = data.accessibilityData?.alt || \"\";\n    editor.#signatureUUID = data.uuid;\n    return editor;\n  }\n}\n\nexport { SignatureEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationEditorType, AnnotationPrefix } from \"../../shared/util.js\";\nimport {\n  OutputScale,\n  PixelsPerInch,\n  SupportedImageMimeTypes,\n} from \"../display_utils.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { StampAnnotationElement } from \"../annotation_layer.js\";\n\n/**\n * Basic text editor in order to create a FreeTex annotation.\n */\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n\n  #bitmapId = null;\n\n  #bitmapPromise = null;\n\n  #bitmapUrl = null;\n\n  #bitmapFile = null;\n\n  #bitmapFileName = \"\";\n\n  #canvas = null;\n\n  #missingCanvas = false;\n\n  #resizeTimeoutId = null;\n\n  #isSvg = false;\n\n  #hasBeenAddedInUndoStack = false;\n\n  static _type = \"stamp\";\n\n  static _editorType = AnnotationEditorType.STAMP;\n\n  constructor(params) {\n    super({ ...params, name: \"stampEditor\" });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n    this.defaultL10nId = \"pdfjs-editor-stamp-editor\";\n  }\n\n  /** @inheritdoc */\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n\n  /** @inheritdoc */\n  static isHandlingMimeForPasting(mime) {\n    return SupportedImageMimeTypes.includes(mime);\n  }\n\n  /** @inheritdoc */\n  static paste(item, parent) {\n    parent.pasteEditor(\n      { mode: AnnotationEditorType.STAMP },\n      { bitmapFile: item.getAsFile() }\n    );\n  }\n\n  /** @inheritdoc */\n  altTextFinish() {\n    if (this._uiManager.useNewAltTextFlow) {\n      this.div.hidden = false;\n    }\n    super.altTextFinish();\n  }\n\n  /** @inheritdoc */\n  get telemetryFinalData() {\n    return {\n      type: \"stamp\",\n      hasAltText: !!this.altTextData?.altText,\n    };\n  }\n\n  static computeTelemetryFinalData(data) {\n    const hasAltTextStats = data.get(\"hasAltText\");\n    return {\n      hasAltText: hasAltTextStats.get(true) ?? 0,\n      hasNoAltText: hasAltTextStats.get(false) ?? 0,\n    };\n  }\n\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (!this.#canvas) {\n      return;\n    }\n    if (\n      this._uiManager.useNewAltTextWhenAddingImage &&\n      this._uiManager.useNewAltTextFlow &&\n      this.#bitmap\n    ) {\n      this.addEditToolbar().then(() => {\n        this._editToolbar.hide();\n        this._uiManager.editAltText(this, /* firstTime = */ true);\n      });\n      return;\n    }\n\n    if (\n      !this._uiManager.useNewAltTextWhenAddingImage &&\n      this._uiManager.useNewAltTextFlow &&\n      this.#bitmap\n    ) {\n      this._reportTelemetry({\n        action: \"pdfjs.image.image_added\",\n        data: { alt_text_modal: false, alt_text_type: \"empty\" },\n      });\n      try {\n        // The alt-text dialog isn't opened but we still want to guess the alt\n        // text.\n        this.mlGuessAltText();\n      } catch {}\n    }\n\n    this.div.focus();\n  }\n\n  async mlGuessAltText(imageData = null, updateAltTextData = true) {\n    if (this.hasAltTextData()) {\n      return null;\n    }\n\n    const { mlManager } = this._uiManager;\n    if (!mlManager) {\n      throw new Error(\"No ML.\");\n    }\n    if (!(await mlManager.isEnabledFor(\"altText\"))) {\n      throw new Error(\"ML isn't enabled for alt text.\");\n    }\n    const { data, width, height } =\n      imageData ||\n      this.copyCanvas(null, null, /* createImageData = */ true).imageData;\n    const response = await mlManager.guess({\n      name: \"altText\",\n      request: {\n        data,\n        width,\n        height,\n        channels: data.length / (width * height),\n      },\n    });\n    if (!response) {\n      throw new Error(\"No response from the AI service.\");\n    }\n    if (response.error) {\n      throw new Error(\"Error from the AI service.\");\n    }\n    if (response.cancel) {\n      return null;\n    }\n    if (!response.output) {\n      throw new Error(\"No valid response from the AI service.\");\n    }\n    const altText = response.output;\n    await this.setGuessedAltText(altText);\n    if (updateAltTextData && !this.hasAltTextData()) {\n      this.altTextData = { alt: altText, decorative: false };\n    }\n    return altText;\n  }\n\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager\n        .getFromId(this.#bitmapId)\n        .then(data => this.#getBitmapFetched(data, /* fromId = */ true))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromUrl(url)\n        .then(data => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromFile(file)\n        .then(data => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n\n    const input = document.createElement(\"input\");\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n      input.hidden = true;\n      input.id = \"stampEditorFileInput\";\n      document.body.append(input);\n    }\n    input.type = \"file\";\n    input.accept = SupportedImageMimeTypes.join(\",\");\n    const signal = this._uiManager._signal;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\n        \"change\",\n        async () => {\n          if (!input.files || input.files.length === 0) {\n            this.remove();\n          } else {\n            this._uiManager.enableWaiting(true);\n            const data = await this._uiManager.imageManager.getFromFile(\n              input.files[0]\n            );\n            this._reportTelemetry({\n              action: \"pdfjs.image.image_selected\",\n              data: { alt_text_modal: this._uiManager.useNewAltTextFlow },\n            });\n            this.#getBitmapFetched(data);\n          }\n          if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\")) {\n            input.remove();\n          }\n          resolve();\n        },\n        { signal }\n      );\n      input.addEventListener(\n        \"cancel\",\n        () => {\n          this.remove();\n          resolve();\n        },\n        { signal }\n      );\n    }).finally(() => this.#getBitmapDone());\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"TESTING\")) {\n      input.click();\n    }\n  }\n\n  /** @inheritdoc */\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    if (!this.parent) {\n      // It's possible to have to rebuild an editor which is not on a visible\n      // page.\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilting it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  /** @inheritdoc */\n  onceAdded(focus) {\n    this._isDraggable = true;\n    if (focus) {\n      this.div.focus();\n    }\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return !(\n      this.#bitmapPromise ||\n      this.#bitmap ||\n      this.#bitmapUrl ||\n      this.#bitmapFile ||\n      this.#bitmapId ||\n      this.#missingCanvas\n    );\n  }\n\n  /** @inheritdoc */\n  get toolbarButtons() {\n    return [[\"altText\", this.createAltText()]];\n  }\n\n  /** @inheritdoc */\n  get isResizable() {\n    return true;\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n    this.div.hidden = true;\n\n    this.createAltText();\n\n    if (!this.#missingCanvas) {\n      if (this.#bitmap) {\n        this.#createCanvas();\n      } else {\n        this.#getBitmap();\n      }\n    }\n\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n\n    this._uiManager.addShouldRescale(this);\n\n    return this.div;\n  }\n\n  setCanvas(annotationElementId, canvas) {\n    const { id: bitmapId, bitmap } = this._uiManager.imageManager.getFromCanvas(\n      annotationElementId,\n      canvas\n    );\n    canvas.remove();\n    if (bitmapId && this._uiManager.imageManager.isValidId(bitmapId)) {\n      this.#bitmapId = bitmapId;\n      if (bitmap) {\n        this.#bitmap = bitmap;\n      }\n      this.#missingCanvas = false;\n      this.#createCanvas();\n    }\n  }\n\n  /** @inheritdoc */\n  _onResized() {\n    // We used a CSS-zoom during the resizing, but now it's resized we can\n    // rescale correctly the bitmap to fit the new dimensions.\n    this.onScaleChanging();\n  }\n\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    // The user's zooming the page, there is no need to redraw the bitmap at\n    // each step, hence we wait a bit before redrawing it.\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap();\n    }, TIME_TO_WAIT);\n  }\n\n  #createCanvas() {\n    const { div } = this;\n    let { width, height } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (\n      width > MAX_RATIO * pageWidth ||\n      height > MAX_RATIO * pageHeight\n    ) {\n      // If the image is too big compared to the page dimensions\n      // (more than MAX_RATIO) then we scale it down.\n      const factor = Math.min(\n        (MAX_RATIO * pageWidth) / width,\n        (MAX_RATIO * pageHeight) / height\n      );\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(\n      (width * parentWidth) / pageWidth,\n      (height * parentHeight) / pageHeight\n    );\n\n    this._uiManager.enableWaiting(false);\n    const canvas = (this.#canvas = document.createElement(\"canvas\"));\n    canvas.setAttribute(\"role\", \"img\");\n    this.addContainer(canvas);\n\n    this.width = width / pageWidth;\n    this.height = height / pageHeight;\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n\n    if (\n      !this._uiManager.useNewAltTextWhenAddingImage ||\n      !this._uiManager.useNewAltTextFlow ||\n      this.annotationElementId\n    ) {\n      div.hidden = false;\n    }\n    this.#drawBitmap();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n\n    // There are multiple ways to add an image to the page, so here we just\n    // count the number of times an image is added to the page whatever the way\n    // is.\n    this._reportTelemetry({\n      action: \"inserted_image\",\n    });\n    if (this.#bitmapFileName) {\n      this.div.setAttribute(\"aria-description\", this.#bitmapFileName);\n    }\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(\"pdfjs-editor-stamp-added-alert\");\n    }\n  }\n\n  copyCanvas(maxDataDimension, maxPreviewDimension, createImageData = false) {\n    if (!maxDataDimension) {\n      // TODO: get this value from Firefox\n      //   (https://bugzilla.mozilla.org/show_bug.cgi?id=1908184)\n      // It's the maximum dimension that the AI can handle.\n      maxDataDimension = 224;\n    }\n\n    const { width: bitmapWidth, height: bitmapHeight } = this.#bitmap;\n    const outputScale = new OutputScale();\n\n    let bitmap = this.#bitmap;\n    let width = bitmapWidth,\n      height = bitmapHeight;\n    let canvas = null;\n\n    if (maxPreviewDimension) {\n      if (\n        bitmapWidth > maxPreviewDimension ||\n        bitmapHeight > maxPreviewDimension\n      ) {\n        const ratio = Math.min(\n          maxPreviewDimension / bitmapWidth,\n          maxPreviewDimension / bitmapHeight\n        );\n        width = Math.floor(bitmapWidth * ratio);\n        height = Math.floor(bitmapHeight * ratio);\n      }\n\n      canvas = document.createElement(\"canvas\");\n      const scaledWidth = (canvas.width = Math.ceil(width * outputScale.sx));\n      const scaledHeight = (canvas.height = Math.ceil(height * outputScale.sy));\n\n      if (!this.#isSvg) {\n        bitmap = this.#scaleBitmap(scaledWidth, scaledHeight);\n      }\n\n      const ctx = canvas.getContext(\"2d\");\n      ctx.filter = this._uiManager.hcmFilter;\n\n      // Add a checkerboard pattern as a background in case the image has some\n      // transparency.\n      let white = \"white\",\n        black = \"#cfcfd8\";\n      if (this._uiManager.hcmFilter !== \"none\") {\n        black = \"black\";\n      } else if (window.matchMedia?.(\"(prefers-color-scheme: dark)\").matches) {\n        white = \"#8f8f9d\";\n        black = \"#42414d\";\n      }\n      const boxDim = 15;\n      const boxDimWidth = boxDim * outputScale.sx;\n      const boxDimHeight = boxDim * outputScale.sy;\n      const pattern = new OffscreenCanvas(boxDimWidth * 2, boxDimHeight * 2);\n      const patternCtx = pattern.getContext(\"2d\");\n      patternCtx.fillStyle = white;\n      patternCtx.fillRect(0, 0, boxDimWidth * 2, boxDimHeight * 2);\n      patternCtx.fillStyle = black;\n      patternCtx.fillRect(0, 0, boxDimWidth, boxDimHeight);\n      patternCtx.fillRect(boxDimWidth, boxDimHeight, boxDimWidth, boxDimHeight);\n      ctx.fillStyle = ctx.createPattern(pattern, \"repeat\");\n      ctx.fillRect(0, 0, scaledWidth, scaledHeight);\n      ctx.drawImage(\n        bitmap,\n        0,\n        0,\n        bitmap.width,\n        bitmap.height,\n        0,\n        0,\n        scaledWidth,\n        scaledHeight\n      );\n    }\n\n    let imageData = null;\n    if (createImageData) {\n      let dataWidth, dataHeight;\n      if (\n        outputScale.symmetric &&\n        bitmap.width < maxDataDimension &&\n        bitmap.height < maxDataDimension\n      ) {\n        dataWidth = bitmap.width;\n        dataHeight = bitmap.height;\n      } else {\n        bitmap = this.#bitmap;\n        if (bitmapWidth > maxDataDimension || bitmapHeight > maxDataDimension) {\n          const ratio = Math.min(\n            maxDataDimension / bitmapWidth,\n            maxDataDimension / bitmapHeight\n          );\n          dataWidth = Math.floor(bitmapWidth * ratio);\n          dataHeight = Math.floor(bitmapHeight * ratio);\n\n          if (!this.#isSvg) {\n            bitmap = this.#scaleBitmap(dataWidth, dataHeight);\n          }\n        }\n      }\n\n      const offscreen = new OffscreenCanvas(dataWidth, dataHeight);\n      const offscreenCtx = offscreen.getContext(\"2d\", {\n        willReadFrequently: true,\n      });\n      offscreenCtx.drawImage(\n        bitmap,\n        0,\n        0,\n        bitmap.width,\n        bitmap.height,\n        0,\n        0,\n        dataWidth,\n        dataHeight\n      );\n      imageData = {\n        width: dataWidth,\n        height: dataHeight,\n        data: offscreenCtx.getImageData(0, 0, dataWidth, dataHeight).data,\n      };\n    }\n\n    return { canvas, width, height, imageData };\n  }\n\n  #scaleBitmap(width, height) {\n    const { width: bitmapWidth, height: bitmapHeight } = this.#bitmap;\n\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n\n      if (newWidth > 2 * width) {\n        // See bug 1820511 (Windows specific bug).\n        // TODO: once the above bug is fixed we could revert to:\n        // newWidth = Math.ceil(newWidth / 2);\n        newWidth =\n          newWidth >= 16384\n            ? Math.floor(newWidth / 2) - 1\n            : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight =\n          newHeight >= 16384\n            ? Math.floor(newHeight / 2) - 1\n            : Math.ceil(newHeight / 2);\n      }\n\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(\n        bitmap,\n        0,\n        0,\n        prevWidth,\n        prevHeight,\n        0,\n        0,\n        newWidth,\n        newHeight\n      );\n      bitmap = offscreen.transferToImageBitmap();\n    }\n\n    return bitmap;\n  }\n\n  #drawBitmap() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const { width, height } = this;\n    const outputScale = new OutputScale();\n    const scaledWidth = Math.ceil(width * parentWidth * outputScale.sx);\n    const scaledHeight = Math.ceil(height * parentHeight * outputScale.sy);\n    const canvas = this.#canvas;\n\n    if (\n      !canvas ||\n      (canvas.width === scaledWidth && canvas.height === scaledHeight)\n    ) {\n      return;\n    }\n\n    canvas.width = scaledWidth;\n    canvas.height = scaledHeight;\n\n    const bitmap = this.#isSvg\n      ? this.#bitmap\n      : this.#scaleBitmap(scaledWidth, scaledHeight);\n\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(\n      bitmap,\n      0,\n      0,\n      bitmap.width,\n      bitmap.height,\n      0,\n      0,\n      scaledWidth,\n      scaledHeight\n    );\n  }\n\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      // We convert to a data url because it's sync and the url can live in the\n      // clipboard.\n      const canvas = document.createElement(\"canvas\");\n      ({ width: canvas.width, height: canvas.height } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n\n      return canvas.toDataURL();\n    }\n\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      // Multiply by PixelsPerInch.PDF_TO_CSS_UNITS in order to increase the\n      // image resolution when rasterizing it.\n      const width = Math.round(\n        this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS\n      );\n      const height = Math.round(\n        this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS\n      );\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(\n        this.#bitmap,\n        0,\n        0,\n        this.#bitmap.width,\n        this.#bitmap.height,\n        0,\n        0,\n        width,\n        height\n      );\n      return offscreen.transferToImageBitmap();\n    }\n\n    return structuredClone(this.#bitmap);\n  }\n\n  /** @inheritdoc */\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    let missingCanvas = false;\n    if (data instanceof StampAnnotationElement) {\n      const {\n        data: { rect, rotation, id, structParent, popupRef, contentsObj },\n        container,\n        parent: {\n          page: { pageNumber },\n        },\n        canvas,\n      } = data;\n      let bitmapId, bitmap;\n      if (canvas) {\n        delete data.canvas;\n        ({ id: bitmapId, bitmap } = uiManager.imageManager.getFromCanvas(\n          container.id,\n          canvas\n        ));\n        canvas.remove();\n      } else {\n        missingCanvas = true;\n        data._hasNoCanvas = true;\n      }\n\n      // When switching to edit mode, we wait for the structure tree to be\n      // ready (see pdf_viewer.js), so it's fine to use getAriaAttributesSync.\n      const altText =\n        (\n          await parent._structTree.getAriaAttributes(`${AnnotationPrefix}${id}`)\n        )?.get(\"aria-label\") || \"\";\n\n      initialData = data = {\n        annotationType: AnnotationEditorType.STAMP,\n        bitmapId,\n        bitmap,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        accessibilityData: {\n          decorative: false,\n          altText,\n        },\n        isSvg: false,\n        structParent,\n        popupRef,\n        comment: contentsObj?.str || null,\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    const { rect, bitmap, bitmapUrl, bitmapId, isSvg, accessibilityData } =\n      data;\n    if (missingCanvas) {\n      uiManager.addMissingCanvas(data.id, editor);\n      editor.#missingCanvas = true;\n    } else if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n      if (bitmap) {\n        editor.#bitmap = bitmap;\n      }\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    editor._initialData = initialData;\n    if (data.comment) {\n      editor.setCommentData(data.comment);\n    }\n    // No need to be add in the undo stack if the editor is created from an\n    // existing one.\n    editor.#hasBeenAddedInUndoStack = !!initialData;\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getPDFRect(),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId,\n    };\n    this.addComment(serialized);\n\n    if (isForCopying) {\n      // We don't know what's the final destination (this pdf or another one)\n      // of this annotation and the clipboard doesn't support ImageBitmaps,\n      // hence we serialize the bitmap to a data url.\n      serialized.bitmapUrl = this.#serializeBitmap(/* toUrl = */ true);\n      serialized.accessibilityData = this.serializeAltText(true);\n      serialized.isCopy = true;\n      return serialized;\n    }\n\n    const { decorative, altText } = this.serializeAltText(false);\n    if (!decorative && altText) {\n      serialized.accessibilityData = { type: \"Figure\", alt: altText };\n    }\n    if (this.annotationElementId) {\n      const changes = this.#hasElementChanged(serialized);\n      if (changes.isSame) {\n        // Nothing has been changed.\n        return null;\n      }\n      if (changes.isSameAltText) {\n        delete serialized.accessibilityData;\n      } else {\n        serialized.accessibilityData.structParent =\n          this._initialData.structParent ?? -1;\n      }\n    }\n    serialized.id = this.annotationElementId;\n\n    if (context === null) {\n      return serialized;\n    }\n\n    context.stamps ||= new Map();\n    const area = this.#isSvg\n      ? (serialized.rect[2] - serialized.rect[0]) *\n        (serialized.rect[3] - serialized.rect[1])\n      : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      // We don't want to have multiple copies of the same bitmap in the\n      // annotationMap, hence we only add the bitmap the first time we meet it.\n      context.stamps.set(this.#bitmapId, { area, serialized });\n      serialized.bitmap = this.#serializeBitmap(/* toUrl = */ false);\n    } else if (this.#isSvg) {\n      // If we have multiple copies of the same svg but with different sizes,\n      // then we want to keep the biggest one.\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(/* toUrl = */ false);\n      }\n    }\n    return serialized;\n  }\n\n  #hasElementChanged(serialized) {\n    const {\n      pageIndex,\n      accessibilityData: { altText },\n    } = this._initialData;\n\n    const isSamePageIndex = serialized.pageIndex === pageIndex;\n    const isSameAltText = (serialized.accessibilityData?.alt || \"\") === altText;\n\n    return {\n      isSame:\n        !this.hasEditedComment &&\n        !this._hasBeenMoved &&\n        !this._hasBeenResized &&\n        isSamePageIndex &&\n        isSameAltText,\n      isSameAltText,\n    };\n  }\n\n  /** @inheritdoc */\n  renderAnnotationElement(annotation) {\n    if (this.deleted) {\n      annotation.hide();\n      return null;\n    }\n    const params = {\n      rect: this.getPDFRect(),\n    };\n    if (this.hasEditedComment) {\n      params.popup = this.comment;\n    }\n    annotation.updateEdited(params);\n\n    return null;\n  }\n}\n\nexport { StampEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./tools.js\").AnnotationEditorUIManager} AnnotationEditorUIManager */\n/** @typedef {import(\"../display_utils.js\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../../web/text_accessibility.js\").TextAccessibilityManager} TextAccessibilityManager */\n/** @typedef {import(\"../../../web/interfaces\").IL10n} IL10n */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../annotation_layer.js\").AnnotationLayer} AnnotationLayer */\n/** @typedef {import(\"../draw_layer.js\").DrawLayer} DrawLayer */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/struct_tree_layer_builder.js\").StructTreeLayerBuilder} StructTreeLayerBuilder */\n\nimport {\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  FeatureTest,\n} from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { FreeTextEditor } from \"./freetext.js\";\nimport { HighlightEditor } from \"./highlight.js\";\nimport { InkEditor } from \"./ink.js\";\nimport { setLayerDimensions } from \"../display_utils.js\";\nimport { SignatureEditor } from \"./signature.js\";\nimport { StampEditor } from \"./stamp.js\";\n\n/**\n * @typedef {Object} AnnotationEditorLayerOptions\n * @property {Object} mode\n * @property {HTMLDivElement} div\n * @property {StructTreeLayerBuilder} structTreeLayer\n * @property {AnnotationEditorUIManager} uiManager\n * @property {boolean} enabled\n * @property {TextAccessibilityManager} [accessibilityManager]\n * @property {number} pageIndex\n * @property {IL10n} l10n\n * @property {AnnotationLayer} [annotationLayer]\n * @property {HTMLDivElement} [textLayer]\n * @property {DrawLayer} drawLayer\n * @property {PageViewport} viewport\n */\n\n/**\n * @typedef {Object} RenderEditorLayerOptions\n * @property {PageViewport} viewport\n */\n\n/**\n * Manage all the different editors on a page.\n */\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n\n  #allowClick = false;\n\n  #annotationLayer = null;\n\n  #clickAC = null;\n\n  #editorFocusTimeoutId = null;\n\n  #editors = new Map();\n\n  #hadPointerDown = false;\n\n  #isDisabling = false;\n\n  #isEnabling = false;\n\n  #drawingAC = null;\n\n  #focusedElement = null;\n\n  #textLayer = null;\n\n  #textSelectionAC = null;\n\n  #textLayerDblClickAC = null;\n\n  #lastPointerDownTimestamp = -1;\n\n  #uiManager;\n\n  static _initialized = false;\n\n  static #editorTypes = new Map(\n    [\n      FreeTextEditor,\n      InkEditor,\n      StampEditor,\n      HighlightEditor,\n      SignatureEditor,\n    ].map(type => [type._editorType, type])\n  );\n\n  /**\n   * @param {AnnotationEditorLayerOptions} options\n   */\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    structTreeLayer,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n,\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this._structTree = structTreeLayer;\n\n    this.#uiManager.addLayer(this);\n  }\n\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n\n  get isInvisible() {\n    return (\n      this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE\n    );\n  }\n\n  /**\n   * Update the toolbar if it's required to reflect the tool currently used.\n   * @param {Object} options\n   */\n  updateToolbar(options) {\n    this.#uiManager.updateToolbar(options);\n  }\n\n  /**\n   * The mode has changed: it must be updated.\n   * @param {number} mode\n   */\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n\n    this.toggleAnnotationLayerPointerEvents(false);\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(\n        `${editorType._type}Editing`,\n        mode === editorType._editorType\n      );\n    }\n    this.div.hidden = false;\n  }\n\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n\n  /**\n   * Set the editing state.\n   * @param {boolean} isEditing\n   */\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n\n  /**\n   * Add some commands into the CommandManager (undo/redo stuff).\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n\n  cleanUndoStack(type) {\n    this.#uiManager.cleanUndoStack(type);\n  }\n\n  toggleDrawing(enabled = false) {\n    this.div.classList.toggle(\"drawing\", !enabled);\n  }\n\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n\n  /**\n   * Enable pointer events on the main div in order to enable\n   * editor creation.\n   */\n  async enable() {\n    this.#isEnabling = true;\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    this.#textLayerDblClickAC?.abort();\n    this.#textLayerDblClickAC = null;\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n\n    if (!this.#annotationLayer) {\n      this.#isEnabling = false;\n      return;\n    }\n\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      // The element must be hidden whatever its state is.\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = await this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n    this.#isEnabling = false;\n  }\n\n  /**\n   * Disable editor creation.\n   */\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    if (this.#textLayer && !this.#textLayerDblClickAC) {\n      this.#textLayerDblClickAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textLayerDblClickAC);\n      this.#textLayer.div.addEventListener(\n        \"pointerdown\",\n        e => {\n          // It's the default value in Fenix:\n          // https://searchfox.org/mozilla-central/rev/beba5cde846f944c4d709e75cbe499d17af880a4/modules/libpref/init/StaticPrefList.yaml#19064\n          // and in Chrome and Windows:\n          // https://source.chromium.org/chromium/chromium/src/+/main:ui/events/event_constants.h;drc=f0f5f3ceebb00da9363ccc7a1e2c0f17b6b383ba;l=115\n          const DBL_CLICK_THRESHOLD = 500;\n          const { clientX, clientY, timeStamp } = e;\n          const lastPointerDownTimestamp = this.#lastPointerDownTimestamp;\n          if (timeStamp - lastPointerDownTimestamp > DBL_CLICK_THRESHOLD) {\n            this.#lastPointerDownTimestamp = timeStamp;\n            return;\n          }\n          this.#lastPointerDownTimestamp = -1;\n          const { classList } = this.div;\n          classList.toggle(\"getElements\", true);\n          const elements = document.elementsFromPoint(clientX, clientY);\n          classList.toggle(\"getElements\", false);\n          if (!this.div.contains(elements[0])) {\n            return;\n          }\n          let id;\n          const regex = new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);\n          for (const element of elements) {\n            if (regex.test(element.id)) {\n              id = element.id;\n              break;\n            }\n          }\n          if (!id) {\n            return;\n          }\n          const editor = this.#editors.get(id);\n          if (editor?.annotationElementId === null) {\n            e.stopPropagation();\n            e.preventDefault();\n            editor.dblclick();\n          }\n        },\n        { signal, capture: true }\n      );\n    }\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n\n    if (this.#annotationLayer) {\n      // Show the annotations that were hidden in enable().\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const { id } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          editable.updateEdited({ deleted: true });\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          if (editor.renderAnnotationElement(editable)) {\n            // Content has changed, so we need to hide the editor.\n            editor.show(false);\n          }\n        }\n        editable.show();\n      }\n    }\n\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n\n    this.#isDisabling = false;\n  }\n\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n\n  /**\n   * Set the current editor.\n   * @param {AnnotationEditor} editor\n   */\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n\n    this.#uiManager.setActiveEditor(editor);\n  }\n\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#textSelectionAC) {\n      this.#textSelectionAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textSelectionAC);\n\n      this.#textLayer.div.addEventListener(\n        \"pointerdown\",\n        this.#textLayerPointerDown.bind(this),\n        { signal }\n      );\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#textSelectionAC) {\n      this.#textSelectionAC.abort();\n      this.#textSelectionAC = null;\n\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n\n  #textLayerPointerDown(event) {\n    // Unselect all the editors in order to let the user select some text\n    // without being annoyed by an editor toolbar.\n    this.#uiManager.unselectAll();\n    const { target } = event;\n    if (\n      target === this.#textLayer.div ||\n      ((target.getAttribute(\"role\") === \"img\" ||\n        target.classList.contains(\"endOfContent\")) &&\n        this.#textLayer.div.contains(target))\n    ) {\n      const { isMac } = FeatureTest.platform;\n      if (event.button !== 0 || (event.ctrlKey && isMac)) {\n        // Do nothing on right click.\n        return;\n      }\n      this.#uiManager.showAllEditors(\n        \"highlight\",\n        true,\n        /* updateButton = */ true\n      );\n      this.#textLayer.div.classList.add(\"free\");\n      this.toggleDrawing();\n      HighlightEditor.startHighlighting(\n        this,\n        this.#uiManager.direction === \"ltr\",\n        { target: this.#textLayer.div, x: event.x, y: event.y }\n      );\n      this.#textLayer.div.addEventListener(\n        \"pointerup\",\n        () => {\n          this.#textLayer.div.classList.remove(\"free\");\n          this.toggleDrawing(true);\n        },\n        { once: true, signal: this.#uiManager._signal }\n      );\n      event.preventDefault();\n    }\n  }\n\n  enableClick() {\n    if (this.#clickAC) {\n      return;\n    }\n    this.#clickAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#clickAC);\n\n    this.div.addEventListener(\"pointerdown\", this.pointerdown.bind(this), {\n      signal,\n    });\n    const pointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerup\", pointerup, { signal });\n    this.div.addEventListener(\"pointercancel\", pointerup, { signal });\n  }\n\n  disableClick() {\n    this.#clickAC?.abort();\n    this.#clickAC = null;\n  }\n\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const { annotationElementId } = editor;\n    if (\n      annotationElementId &&\n      this.#uiManager.isDeletedAnnotationElement(annotationElementId)\n    ) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n\n  /**\n   * Remove an editor.\n   * @param {AnnotationEditor} editor\n   */\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n  }\n\n  /**\n   * An editor can have a different parent, for example after having\n   * being dragged and dropped from a page to another.\n   * @param {AnnotationEditor} editor\n   */\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n\n  /**\n   * Add a new editor in the current view.\n   * @param {AnnotationEditor} editor\n   */\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n\n    // The editor will be correctly moved into the DOM (see fixAndSetPosition).\n    editor.fixAndSetPosition();\n    editor.onceAdded(/* focus = */ !this.#isEnabling);\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n\n    const { activeElement } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      // When the div is moved in the DOM the focus can move somewhere else,\n      // so we want to be sure that the focus will stay on the editor but we\n      // don't want to call any focus callbacks, hence we disable them and only\n      // re-enable them when the editor has the focus.\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\n            \"focusin\",\n            () => {\n              editor._focusEventsAllowed = true;\n            },\n            { once: true, signal: this.#uiManager._signal }\n          );\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(\n      this.div,\n      editor.div,\n      editor.contentDiv,\n      /* isRemovable = */ true\n    );\n  }\n\n  /**\n   * Add or rebuild depending if it has been removed or not.\n   * @param {AnnotationEditor} editor\n   */\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n\n  /**\n   * Add a new editor and make this addition undoable.\n   * @param {AnnotationEditor} editor\n   */\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n\n    this.addCommands({ cmd, undo, mustExec: false });\n  }\n\n  /**\n   * Get an id for an editor.\n   * @returns {string}\n   */\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n\n  combinedSignal(ac) {\n    return this.#uiManager.combinedSignal(ac);\n  }\n\n  /**\n   * Create a new editor\n   * @param {Object} params\n   * @returns {AnnotationEditor}\n   */\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n\n  /**\n   * Paste some content into a new editor.\n   * @param {Object} options\n   * @param {Object} params\n   */\n  async pasteEditor(options, params) {\n    this.updateToolbar(options);\n    await this.#uiManager.updateMode(options.mode);\n\n    const { offsetX, offsetY } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n\n  /**\n   * Create a new editor\n   * @param {Object} data\n   * @returns {AnnotationEditor | null}\n   */\n  async deserialize(data) {\n    return (\n      (await AnnotationEditorLayer.#editorTypes\n        .get(data.annotationType ?? data.annotationEditorType)\n        ?.deserialize(data, this, this.#uiManager)) || null\n    );\n  }\n\n  /**\n   * Create and add a new editor.\n   * @param {PointerEvent} event\n   * @param {boolean} isCentered\n   * @param [Object] data\n   * @returns {AnnotationEditor}\n   */\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n\n    return editor;\n  }\n\n  #getCenterPoint() {\n    const { x, y, width, height } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] =\n      this.viewport.rotation % 180 === 0\n        ? [centerX, centerY]\n        : [centerY, centerX];\n\n    return { offsetX, offsetY };\n  }\n\n  /**\n   * Create and add a new editor.\n   */\n  addNewEditor(data = {}) {\n    this.createAndAddNewEditor(\n      this.#getCenterPoint(),\n      /* isCentered = */ true,\n      data\n    );\n  }\n\n  /**\n   * Set the last selected editor.\n   * @param {AnnotationEditor} editor\n   */\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n\n  /**\n   * Add or remove an editor the current selection.\n   * @param {AnnotationEditor} editor\n   */\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n\n  /**\n   * Unselect an editor.\n   * @param {AnnotationEditor} editor\n   */\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n\n  /**\n   * Pointerup callback.\n   * @param {PointerEvent} event\n   */\n  pointerup(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Don't create an editor on right click.\n      return;\n    }\n\n    if (event.target !== this.div) {\n      return;\n    }\n\n    if (!this.#hadPointerDown) {\n      // It can happen when the user starts a drag inside a text editor\n      // and then releases the mouse button outside of it. In such a case\n      // we don't want to create a new editor, hence we check that a pointerdown\n      // occurred on this div previously.\n      return;\n    }\n    this.#hadPointerDown = false;\n\n    if (\n      this.#currentEditorType?.isDrawer &&\n      this.#currentEditorType.supportMultipleDrawings\n    ) {\n      return;\n    }\n\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n\n    const currentMode = this.#uiManager.getMode();\n    if (\n      currentMode === AnnotationEditorType.STAMP ||\n      currentMode === AnnotationEditorType.SIGNATURE\n    ) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n\n    this.createAndAddNewEditor(event, /* isCentered = */ false);\n  }\n\n  /**\n   * Pointerdown callback.\n   * @param {PointerEvent} event\n   */\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      // It's possible to have a second pointerdown event before a pointerup one\n      // when the user puts a finger on a touchscreen and then add a second one\n      // to start a pinch-to-zoom gesture.\n      // That said, in case it's possible to have two pointerdown events with\n      // a mouse, we don't want to create a new editor in such a case either.\n      this.#hadPointerDown = false;\n      return;\n    }\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Do nothing on right click.\n      return;\n    }\n\n    if (event.target !== this.div) {\n      return;\n    }\n\n    this.#hadPointerDown = true;\n\n    if (this.#currentEditorType?.isDrawer) {\n      this.startDrawingSession(event);\n      return;\n    }\n\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n\n  startDrawingSession(event) {\n    this.div.focus({\n      preventScroll: true,\n    });\n    if (this.#drawingAC) {\n      this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n      return;\n    }\n\n    this.#uiManager.setCurrentDrawingSession(this);\n    this.#drawingAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#drawingAC);\n    this.div.addEventListener(\n      \"blur\",\n      ({ relatedTarget }) => {\n        if (relatedTarget && !this.div.contains(relatedTarget)) {\n          this.#focusedElement = null;\n          this.commitOrRemove();\n        }\n      },\n      { signal }\n    );\n    this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n  }\n\n  pause(on) {\n    if (on) {\n      const { activeElement } = document;\n      if (this.div.contains(activeElement)) {\n        this.#focusedElement = activeElement;\n      }\n      return;\n    }\n    if (this.#focusedElement) {\n      setTimeout(() => {\n        this.#focusedElement?.focus();\n        this.#focusedElement = null;\n      }, 0);\n    }\n  }\n\n  endDrawingSession(isAborted = false) {\n    if (!this.#drawingAC) {\n      return null;\n    }\n    this.#uiManager.setCurrentDrawingSession(null);\n    this.#drawingAC.abort();\n    this.#drawingAC = null;\n    this.#focusedElement = null;\n    return this.#currentEditorType.endDrawing(isAborted);\n  }\n\n  /**\n   *\n   * @param {AnnotationEditor} editor\n   * @param {number} x\n   * @param {number} y\n   * @returns\n   */\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n\n  commitOrRemove() {\n    if (this.#drawingAC) {\n      this.endDrawingSession();\n      return true;\n    }\n    return false;\n  }\n\n  onScaleChanging() {\n    if (!this.#drawingAC) {\n      return;\n    }\n    this.#currentEditorType.onScaleChangingWhenDrawing(this);\n  }\n\n  /**\n   * Destroy the main editor.\n   */\n  destroy() {\n    this.commitOrRemove();\n    if (this.#uiManager.getActive()?.parent === this) {\n      // We need to commit the current editor before destroying the layer.\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n\n  #cleanup() {\n    // When we're cleaning up, some editors are removed but we don't want\n    // to add a new one which will induce an addition in this.#editors, hence\n    // an infinite loop.\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n  }\n\n  /**\n   * Render the main editor.\n   * @param {RenderEditorLayerOptions} parameters\n   */\n  render({ viewport }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    // We're maybe rendering a layer which was invisible when we started to edit\n    // so we must set the different callbacks for it.\n    this.updateMode();\n  }\n\n  /**\n   * Update the main editor.\n   * @param {RenderEditorLayerOptions} parameters\n   */\n  update({ viewport }) {\n    // Editors have their dimensions/positions in percent so to avoid any\n    // issues (see #15582), we must commit the current one before changing\n    // the viewport.\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n\n    this.viewport = viewport;\n    setLayerDimensions(this.div, { rotation });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n  }\n\n  /**\n   * Get page dimensions.\n   * @returns {Object} dimensions.\n   */\n  get pageDimensions() {\n    const { pageWidth, pageHeight } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\nexport { AnnotationEditorLayer };\n","/* Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DOMSVGFactory } from \"./svg_factory.js\";\nimport { shadow } from \"../shared/util.js\";\n\n/**\n * Manage the SVGs drawn on top of the page canvas.\n * It's important to have them directly on top of the canvas because we want to\n * be able to use mix-blend-mode for some of them.\n */\nclass DrawLayer {\n  #parent = null;\n\n  #mapping = new Map();\n\n  #toUpdate = new Map();\n\n  static #id = 0;\n\n  constructor({ pageIndex }) {\n    this.pageIndex = pageIndex;\n  }\n\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n\n  static #setBox(element, [x, y, width, height]) {\n    const { style } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n\n  #createSVG() {\n    const svg = DrawLayer._svgFactory.create(1, 1, /* skipDimensions = */ true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n\n    return svg;\n  }\n\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n\n    return clipPathId;\n  }\n\n  #updateProperties(element, properties) {\n    for (const [key, value] of Object.entries(properties)) {\n      if (value === null) {\n        element.removeAttribute(key);\n      } else {\n        element.setAttribute(key, value);\n      }\n    }\n  }\n\n  draw(properties, isPathUpdatable = false, hasClip = false) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n\n    // Create the clipping path for the editor div.\n    const clipPathId = hasClip ? this.#createClipPath(defs, pathId) : null;\n\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.updateProperties(root, properties);\n\n    this.#mapping.set(id, root);\n\n    return { id, clipPathId: `url(#${clipPathId})` };\n  }\n\n  drawOutline(properties, mustRemoveSelfIntersections) {\n    // We cannot draw the outline directly in the SVG for highlights because\n    // it composes with its parent with mix-blend-mode: multiply.\n    // But the outline has a different mix-blend-mode, so we need to draw it in\n    // its own SVG.\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n\n    let maskId;\n    if (mustRemoveSelfIntersections) {\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n\n    this.updateProperties(root, properties);\n\n    this.#mapping.set(id, root);\n\n    return id;\n  }\n\n  finalizeDraw(id, properties) {\n    this.#toUpdate.delete(id);\n    this.updateProperties(id, properties);\n  }\n\n  updateProperties(elementOrId, properties) {\n    if (!properties) {\n      return;\n    }\n    const { root, bbox, rootClass, path } = properties;\n    const element =\n      typeof elementOrId === \"number\"\n        ? this.#mapping.get(elementOrId)\n        : elementOrId;\n    if (!element) {\n      return;\n    }\n    if (root) {\n      this.#updateProperties(element, root);\n    }\n    if (bbox) {\n      DrawLayer.#setBox(element, bbox);\n    }\n    if (rootClass) {\n      const { classList } = element;\n      for (const [className, value] of Object.entries(rootClass)) {\n        classList.toggle(className, value);\n      }\n    }\n    if (path) {\n      const defs = element.firstChild;\n      const pathElement = defs.firstChild;\n      this.#updateProperties(pathElement, path);\n    }\n  }\n\n  updateParent(id, layer) {\n    if (layer === this) {\n      return;\n    }\n    const root = this.#mapping.get(id);\n    if (!root) {\n      return;\n    }\n    layer.#parent.append(root);\n    this.#mapping.delete(id);\n    layer.#mapping.set(id, root);\n  }\n\n  remove(id) {\n    this.#toUpdate.delete(id);\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n    this.#toUpdate.clear();\n  }\n}\n\nexport { DrawLayer };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").OnProgressParameters} OnProgressParameters */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").PDFDocumentLoadingTask} PDFDocumentLoadingTask */\n/** @typedef {import(\"./display/api\").PDFDocumentProxy} PDFDocumentProxy */\n/** @typedef {import(\"./display/api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display/api\").RenderTask} RenderTask */\n/** @typedef {import(\"./display/display_utils\").PageViewport} PageViewport */\n\nimport {\n  AbortException,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationMode,\n  AnnotationType,\n  createValidAbsoluteUrl,\n  FeatureTest,\n  getUuid,\n  ImageKind,\n  InvalidPDFException,\n  MathClamp,\n  normalizeUnicode,\n  OPS,\n  PasswordResponses,\n  PermissionFlag,\n  ResponseException,\n  shadow,\n  updateUrlHash,\n  Util,\n  VerbosityLevel,\n} from \"./shared/util.js\";\nimport {\n  build,\n  getDocument,\n  PDFDataRangeTransport,\n  PDFWorker,\n  version,\n} from \"./display/api.js\";\nimport {\n  fetchData,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getRGB,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  noContextMenu,\n  OutputScale,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n  stopEvent,\n  SupportedImageMimeTypes,\n} from \"./display/display_utils.js\";\nimport { AnnotationEditorLayer } from \"./display/editor/annotation_editor_layer.js\";\nimport { AnnotationEditorUIManager } from \"./display/editor/tools.js\";\nimport { AnnotationLayer } from \"./display/annotation_layer.js\";\nimport { ColorPicker } from \"./display/editor/color_picker.js\";\nimport { DOMSVGFactory } from \"./display/svg_factory.js\";\nimport { DrawLayer } from \"./display/draw_layer.js\";\nimport { GlobalWorkerOptions } from \"./display/worker_options.js\";\nimport { HighlightOutliner } from \"./display/editor/drawers/highlight.js\";\nimport { isValidExplicitDest } from \"./display/api_utils.js\";\nimport { SignatureExtractor } from \"./display/editor/drawers/signaturedraw.js\";\nimport { TextLayer } from \"./display/text_layer.js\";\nimport { TouchManager } from \"./display/touch_manager.js\";\nimport { XfaLayer } from \"./display/xfa_layer.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING || GENERIC\")) {\n  globalThis._pdfjsTestingUtils = {\n    HighlightOutliner,\n  };\n}\n\nglobalThis.pdfjsLib = {\n  AbortException,\n  AnnotationEditorLayer,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationEditorUIManager,\n  AnnotationLayer,\n  AnnotationMode,\n  AnnotationType,\n  build,\n  ColorPicker,\n  createValidAbsoluteUrl,\n  DOMSVGFactory,\n  DrawLayer,\n  FeatureTest,\n  fetchData,\n  getDocument,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getRGB,\n  getUuid,\n  getXfaPageViewport,\n  GlobalWorkerOptions,\n  ImageKind,\n  InvalidPDFException,\n  isDataScheme,\n  isPdfFile,\n  isValidExplicitDest,\n  MathClamp,\n  noContextMenu,\n  normalizeUnicode,\n  OPS,\n  OutputScale,\n  PasswordResponses,\n  PDFDataRangeTransport,\n  PDFDateString,\n  PDFWorker,\n  PermissionFlag,\n  PixelsPerInch,\n  RenderingCancelledException,\n  ResponseException,\n  setLayerDimensions,\n  shadow,\n  SignatureExtractor,\n  stopEvent,\n  SupportedImageMimeTypes,\n  TextLayer,\n  TouchManager,\n  updateUrlHash,\n  Util,\n  VerbosityLevel,\n  version,\n  XfaLayer,\n};\n\nexport {\n  AbortException,\n  AnnotationEditorLayer,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationEditorUIManager,\n  AnnotationLayer,\n  AnnotationMode,\n  AnnotationType,\n  build,\n  ColorPicker,\n  createValidAbsoluteUrl,\n  DOMSVGFactory,\n  DrawLayer,\n  FeatureTest,\n  fetchData,\n  getDocument,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getRGB,\n  getUuid,\n  getXfaPageViewport,\n  GlobalWorkerOptions,\n  ImageKind,\n  InvalidPDFException,\n  isDataScheme,\n  isPdfFile,\n  isValidExplicitDest,\n  MathClamp,\n  noContextMenu,\n  normalizeUnicode,\n  OPS,\n  OutputScale,\n  PasswordResponses,\n  PDFDataRangeTransport,\n  PDFDateString,\n  PDFWorker,\n  PermissionFlag,\n  PixelsPerInch,\n  RenderingCancelledException,\n  ResponseException,\n  setLayerDimensions,\n  shadow,\n  SignatureExtractor,\n  stopEvent,\n  SupportedImageMimeTypes,\n  TextLayer,\n  TouchManager,\n  updateUrlHash,\n  Util,\n  VerbosityLevel,\n  version,\n  XfaLayer,\n};\n"],"names":["_toSetter","t","e","n","r","length","Object","defineProperty","set","o","apply","_checkPrivateRedeclaration","has","TypeError","_classPrivateMethodInitSpec","a","add","_classPrivateFieldInitSpec","_assertClassBrand","arguments","_classPrivateGetter","s","get","_classPrivateFieldSet2","AsyncFromSyncIterator","AsyncFromSyncIteratorContinuation","Promise","reject","done","resolve","value","then","this","next","prototype","isCallable","__webpack_require__","module","exports","it","call","aCallable","anObject","tryToString","getIteratorMethod","$TypeError","argument","usingIterator","iteratorMethod","$","iterate","getIteratorDirect","iteratorClose","findWithoutClosingOnEarlyError","iteratorHelperWithoutClosingOnEarlyError","target","proto","real","forced","find","predicate","error","record","counter","stop","IS_RECORD","INTERRUPTED","result","uncurryThis","fails","hasOwn","DESCRIPTORS","CONFIGURABLE_FUNCTION_NAME","CONFIGURABLE","inspectSource","InternalStateModule","enforceInternalState","enforce","getInternalState","$String","String","stringSlice","slice","replace","join","CONFIGURABLE_LENGTH","TEMPLATE","split","makeBuiltIn","name","options","getter","setter","configurable","arity","constructor","writable","undefined","state","source","Function","toString","FunctionPrototype","getDescriptor","getOwnPropertyDescriptor","EXISTS","PROPER","getBuiltIn","globalThis","anUint8Array","notDetached","numberToString","Uint8Array","INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS","toHex","buffer","i","hex","fn","ITERATOR_INSTEAD_OF_RECORD","step","iterator","getIteratorFlattenable","createIteratorProxy","IS_PURE","iteratorHelperThrowsOnInvalidIterator","FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR","flatMapWithoutClosingOnEarlyError","FORCED","IteratorProxy","inner","mapper","flatMap","test","bind","hasOwnProperty","classof","isPrototypeOf","Prototype","methodName","method","Iterator","ceil","Math","floor","trunc","x","USE_SYMBOL_AS_UID","$Object","$Symbol","getMethod","isNullOrUndefined","Iterators","ITERATOR","wellKnownSymbol","alphabet","internalObjectKeys","enumBugKeys","keys","O","exec","klass","everyWithoutClosingOnEarlyError","every","stopped","NATIVE_WEAK_MAP","isObject","createNonEnumerableProperty","shared","sharedKey","hiddenKeys","OBJECT_ALREADY_INITIALIZED","WeakMap","store","metadata","facade","STATE","getterFor","TYPE","type","number","iters","kind","V8","ENVIRONMENT","structuredClone","ArrayBuffer","clone","transfer","byteLength","newPromiseCapabilityModule","perform","ACCEPT_ARGUMENTS","stat","callbackfn","args","promiseCapability","f","promise","union","setMethodGetKeysBeforeCloning","setMethodAcceptSetLike","callWithSafeIterationClosing","MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR","mapWithoutClosingOnEarlyError","map","obj","toIndexedObject","indexOf","push","object","names","key","descriptor","F","getPrototypeOf","SyntaxError","parseInt","min","NOT_HEX","string","into","stringLength","maxLength","bytes","read","written","hexits","activeXDocument","definePropertiesModule","html","documentCreateElement","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","content","LT","NullProtoObjectViaActiveX","write","close","temp","parentWindow","NullProtoObject","ActiveXObject","document","domain","iframeDocument","iframe","JS","style","display","appendChild","src","contentWindow","open","NullProtoObjectViaIFrame","create","Properties","isSupersetOf","FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR","filterWithoutClosingOnEarlyError","filter","$default","isArrayIteratorMethod","lengthOfArrayLike","getIterator","Result","ResultPrototype","iterable","unboundFunction","iterFn","index","that","AS_ENTRIES","IS_ITERATOR","condition","callFn","isSymbol","ordinaryToPrimitive","TO_PRIMITIVE","input","pref","exoticToPrim","toObject","CORRECT_PROTOTYPE_GETTER","ObjectPrototype","replacement","isForced","feature","detection","data","normalize","POLYFILL","NATIVE","toLowerCase","commonAlphabet","base64Alphabet","base64UrlAlphabet","inverse","characters","charAt","i2c","c2i","i2cUrl","c2iUrl","passed","required","navigator","userAgent","uncurryThisAccessor","requireObjectCoercible","aPossiblePrototype","setPrototypeOf","CORRECT_SETTER","Array","__proto__","$RangeError","RangeError","$Infinity","Infinity","abs","pow","POW_2_1023","MAX_SAFE_INTEGER","MAX_DOUBLE","Number","MAX_VALUE","MAX_ULP","NOT_A_NUMBER","MINUS_INFINITY","PLUS_INFINITY","MINUS_ZERO","FINITE","twosum","y","hi","lo","sumPrecise","items","numbers","count","NaN","sum","tmp","partials","overflow","actuallyUsedPartials","j","sign","$this","dummy","Wrapper","NewTarget","NewTargetPrototype","NATIVE_ARRAY_BUFFER","arrayBufferByteLength","DataView","id","postfix","random","aSet","SetHelpers","size","getSetRecord","iterateSet","iterateSimple","remove","other","otherRec","includes","isPossiblePrototype","someWithoutClosingOnEarlyError","some","keysIter","functionToString","getOwnPropertySymbols","toIntegerOrInfinity","INVALID_SIZE","max","SetRecord","intSize","numSize","isDisjointFrom","createElement","setArrayLength","doesNotExceedSafeInteger","properErrorOnNonWritableLength","item","len","argCount","ArrayPrototype","userAgentStartsWith","Bun","version","Deno","process","window","aString","$fromHex","setFromHex","val","valueOf","isArray","SetPrototype","Set","WorkerThreads","channel","$detach","getBuiltInNodeModule","PROPER_STRUCTURED_CLONE_TRANSFER","$ArrayBuffer","$MessageChannel","MessageChannel","detach","transferable","port1","postMessage","V8_VERSION","symbol","Symbol","sham","SILENT_ON_NON_WRITABLE_LENGTH_SET","METHOD_NAME","ExpectedError","IteratorPrototype","CLOSED","check","self","global","defineBuiltIn","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","append","$delete","forEach","params","$value","entries","v","k","entry","dindex","found","entriesLength","enumerable","unsafe","withResolvers","NAME","Constructor","defineBuiltInAccessor","uid","Int8Array","Int8ArrayPrototype","Uint8ClampedArray","Uint8ClampedArrayPrototype","TypedArray","TypedArrayPrototype","TO_STRING_TAG","TYPED_ARRAY_TAG","TYPED_ARRAY_CONSTRUCTOR","NATIVE_ARRAY_BUFFER_VIEWS","opera","TYPED_ARRAY_TAG_REQUIRED","TypedArrayConstructorsList","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigIntArrayConstructorsList","BigInt64Array","BigUint64Array","getTypedArrayConstructor","isTypedArray","aTypedArray","aTypedArrayConstructor","C","exportTypedArrayMethod","KEY","property","ARRAY","TypedArrayConstructor","error2","exportTypedArrayStaticMethod","isView","definePropertyModule","createPropertyDescriptor","documentAll","all","IE8_DOM_DEFINE","V8_PROTOTYPE_DEFINE_BUG","toPropertyKey","$defineProperty","$getOwnPropertyDescriptor","ENUMERABLE","WRITABLE","P","Attributes","current","createSetLike","createSetLikeWithInfinitySize","Error","callback","notANaN","toPositiveInteger","takeWithoutClosingOnEarlyError","remaining","take","limit","anInstance","inheritIfRequired","normalizeStringArgument","DOMExceptionConstants","clearErrorStack","DOM_EXCEPTION","NativeDOMException","$DOMException","DOMExceptionPrototype","argumentsLength","message","stack","ERROR_HAS_STACK","DOM_EXCEPTION_HAS_STACK","BUGGY_DESCRIPTOR","FORCED_CONSTRUCTOR","DOMException","PolyfilledDOMException","PolyfilledDOMExceptionPrototype","constant","constantName","c","IndexSizeError","m","DOMStringSizeError","HierarchyRequestError","WrongDocumentError","InvalidCharacterError","NoDataAllowedError","NoModificationAllowedError","NotFoundError","NotSupportedError","InUseAttributeError","InvalidStateError","InvalidModificationError","NamespaceError","InvalidAccessError","ValidationError","TypeMismatchError","SecurityError","NetworkError","AbortError","URLMismatchError","QuotaExceededError","TimeoutError","InvalidNodeTypeError","DataCloneError","symmetricDifference","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","concat","isDetached","arrayFromConstructorAndList","$fromBase64","fromBase64","list","$length","IndexedObject","integer","toIndex","detachTransferable","ArrayBufferPrototype","DataViewPrototype","isResizable","maxByteLength","getInt8","setInt8","arrayBuffer","newLength","preserveResizability","newBuffer","newByteLength","fixedLength","b","copyLength","USE_NATIVE_URL","URL","parse","url","urlString","base","toPrimitive","prim","BigInt","isSubsetOf","V","func","PromiseCapability","$$resolve","$$reject","NATIVE_BIND","toLength","ENTRIES","defineGlobalProperty","copyConstructorProperties","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","dontCallGetSet","setFromBase64","objectKeys","defineProperties","props","simple","nonConfigurable","nonWritable","TO_STRING_TAG_SUPPORT","classofRaw","CORRECT_ARGUMENTS","tag","tryGet","callee","bitmap","NATIVE_SYMBOL","propertyIsEnumerable","propertyIsEnumerableModule","searchParams","params2","pathname","toJSON","sort","href","username","host","hash","getAll","$has","values","forEachWithoutClosingOnEarlyError","SHARED","versions","mode","copyright","license","difference","setLike","baseSet","clear","PrototypeOfArrayIteratorPrototype","arrayIterator","BUGGY_SAFARI_ITERATORS","ownKeys","getOwnPropertyDescriptorModule","exceptions","namespace","$transfer","transferToFixedLength","intersection","from","createProperty","CONSTRUCTOR","NativeIterator","IteratorConstructor","defineIteratorPrototypeAccessor","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","$SyntaxError","$parseInt","fromCharCode","at","codePoints","IS_4_HEX_DIGITS","IS_C0_CONTROL_CODE","unterminated","chr","twoChars","fourHexDigits","end","FAILS_ON_INITIAL_UNDEFINED","reduce","reduceWithoutClosingOnEarlyError","reducer","noInitial","accumulator","parseJSONString","JSON","nativeParse","enumerableOwnProperties","IS_DIGIT","IS_NON_ZERO_DIGIT","IS_NUMBER_START","IS_WHITESPACE","internalize","holder","reviver","node","elementRecordsLen","unmodified","context","nodeIsArray","nodes","internalizeProperty","Node","Context","fork","nextIndex","skip","array","keyword","start","expectKeypair","until","expectElement","parsed","startIndex","endIndex","regex","NO_SOURCE_SUPPORT","unsafeInt","PROPER_BASE_PARSE","text","root","$parse","interruptible","getOwnPropertyNames","$Error","TEST","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","dropEntries","prepareStackTrace","stringHandling","Reflect","$propertyIsEnumerable","NASHORN_BUG","anObjectOrUndefined","base64Map","getAlphabetOption","skipAsciiWhitespace","decodeBase64Chunk","chunk","throwOnExtraBits","chunkLength","triplet","chunkBytes","writeBytes","elements","elementsLength","lastChunkHandling","remainingBytes","DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR","dropWithoutClosingOnEarlyError","drop","IS_NODE","getBuiltinModule","defineBuiltIns","createIterResultObject","iteratorCloseAll","ITERATOR_HELPER","WRAP_FOR_VALID_ITERATOR","NORMAL","THROW","setInternalState","createIteratorProxyPrototype","nextHandler","returnHandlerResult","returnMethod","openIters","WrapForValidIteratorPrototype","IteratorHelperPrototype","RETURN_HANDLER_RESULT","toBase64","omitPadding","shift","uncurryThisWithBind","match","v8","innerResult","innerError","arrayWith","ArrayBufferViewCore","isBigIntArray","toBigInt","PROPER_ORDER","THROW_ON_NEGATIVE_FRACTIONAL_INDEX","relativeIndex","actualValue","toAbsoluteIndex","createMethod","IS_INCLUDES","el","fromIndex","actualIndex","A","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","d","definition","prop","isNodeJS","nw","electron","FONT_IDENTITY_MATRIX","LINE_FACTOR","RenderingIntentFlag","AnnotationMode","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","AnnotationEditorPrefix","AnnotationEditorType","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","POPUP","SIGNATURE","COMMENT","AnnotationEditorParamsType","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","DRAW_STEP","PermissionFlag","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","TextRenderingMode","util_ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","UNDERLINE","SQUIGGLY","STRIKEOUT","CARET","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","AnnotationBorderStyleType","VerbosityLevel","ERRORS","WARNINGS","INFOS","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","setStrokeTransparent","setFillTransparent","rawFillPath","DrawOPS","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","verbosity","setVerbosityLevel","level","isInteger","getVerbosityLevel","info","msg","console","log","warn","unreachable","assert","cond","createValidAbsoluteUrl","baseUrl","addDefaultProtocol","startsWith","dots","tryConvertEncoding","decodeURIComponent","escape","_unused","absoluteUrl","protocol","_isValidProtocol","updateUrlHash","allowRel","res","shadow","nonSerializable","BaseException","PasswordException","code","super","UnknownErrorException","details","InvalidPDFException","ResponseException","status","missing","FormatError","AbortException","bytesToString","MAX_ARGUMENT_COUNT","strBuf","chunkEnd","subarray","stringToBytes","str","charCodeAt","util_FeatureTest","isLittleEndian","buffer8","isEvalSupported","_unused2","isOffscreenCanvasSupported","OffscreenCanvas","isImageDecoderSupported","ImageDecoder","platform","isAndroid","isLinux","isMac","isWindows","isFirefox","isCSSRoundSupported","_globalThis$CSS","_globalThis$CSS$suppo","CSS","supports","hexNumbers","padStart","Util","makeHexColor","g","domMatrixToTransform","dm","scaleMinMax","minMax","m1","m2","multiplyByDOMMatrix","md","applyTransform","p","pos","p0","p1","applyTransformToBezier","m0","m3","m4","m5","pI","pI1","applyInverseTransform","axialAlignedBoundingBox","rect","output","r0","r1","r2","r3","a0","a2","a1","a3","b0","b2","b1","b3","m1r0","m1r2","m2r1","m2r3","inverseTransform","singularValueDecompose2dScale","matrix","first","second","sqrt","normalizeRect","intersect","rect1","rect2","xLow","xHigh","yLow","yHigh","pointBoundingBox","rectBoundingBox","x0","y0","x1","y1","bezierBoundingBox","x2","y2","x3","y3","_getExtremum","_getExtremumOnCurve","mt","tt","ttt","delta","sqrtDelta","_Util","NormalizeRegex","NormalizationMap","normalizeUnicode","Map","replaceAll","_","p2","getUuid","crypto","randomUUID","buf","getRandomValues","AnnotationPrefix","MathClamp","toBase64Util","arr","btoa","AbortSignal","any","ac","AbortController","signal","aborted","abort","reason","addEventListener","SVG_NS","PixelsPerInch","async","fetchData","isValidFetchUrl","baseURI","response","fetch","ok","statusText","blob","json","request","XMLHttpRequest","responseType","onreadystatechange","readyState","DONE","responseText","send","_PixelsPerInch","_defineProperty","PDF","PageViewport","_ref","viewBox","userUnit","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","width","height","rawDims","dims","pageWidth","pageHeight","pageX","pageY","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","RenderingCancelledException","extraDelay","isDataScheme","ii","trim","substring","isPdfFile","filename","getFilenameFromUrl","lastIndexOf","getPdfFilenameFromUrl","defaultFilename","newURL","_unused3","_unused4","_unused5","_unused6","getURL","decode","decoded","_unused7","pdfRegex","reverse","hashFilename","StatTimer","time","started","Date","now","timeEnd","times","outBuf","longest","padEnd","noContextMenu","preventDefault","stopEvent","stopPropagation","PDFDateString","toDateObject","_regex","RegExp","matches","year","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","getXfaPageViewport","xfaPage","_ref2","attributes","getRGB","color","colorRGB","getCurrentTransform","ctx","getTransform","getCurrentTransformInverse","invertSelf","setLayerDimensions","div","viewport","mustFlip","mustRotate","useRound","w","h","widthStr","heightStr","setAttribute","OutputScale","pixelRatio","sx","sy","scaled","symmetric","limitCanvas","maxPixels","maxDim","capAreaFactor","maxAreaScale","maxWidthScale","maxHeightScale","capPixels","maxScale","devicePixelRatio","winPixels","screen","availWidth","availHeight","SupportedImageMimeTypes","EditorToolbar","editor","_EditorToolbar_brand","_toolbar","_colorPicker","_editor","_buttons","_altText","_comment","_signatureDescriptionButton","_classPrivateFieldSet","_l10nRemove","freeze","freetext","highlight","ink","stamp","signature","render","editToolbar","classList","_classPrivateFieldGet","_uiManager","_signal","_pointerDown","buttons","className","position","toolbarPosition","direction","insetInlineEnd","top","hide","_classPrivateFieldGet2","hideDropdown","show","_classPrivateFieldGet3","_classPrivateFieldGet4","shown","addDeleteButton","editorType","button","tabIndex","_addListenersToElement","delete","addAltText","altText","_get_divider","addComment","comment","toolbar","addColorPicker","colorPicker","renderButton","addEditSignatureButton","signatureManager","renderEditButton","addButton","tool","updateEditSignatureButton","description","title","_classPrivateFieldGet5","destroy","_focusIn","_focusEventsAllowed","_focusOut","element","capture","_this","divider","_buttons2","_toolbar2","_uiManager2","_FloatingToolbar_brand","WeakSet","FloatingToolbar","uiManager","parent","boxes","isLTR","_getLastPoint","_render","hasCommentManager","_makeButton","commentSelection","highlightSelection","lastY","lastX","box","buttonClass","l10nId","labelL10nId","clickHandler","span","bindEvents","_id","IdManager","_this$id","_this$id2","_baseId","_id2","_cache","_ImageManager_brand","ImageManager","_isSVGFittingCanvas","getContext","willReadFrequently","image","Image","drawImage","getImageData","getFromFile","file","lastModified","_get","getFromUrl","getFromBlob","blobPromise","getFromId","refCounter","getFromCanvas","canvas","_this$id5","_this$id6","_data2","offscreen","transferToImageBitmap","isSvg","getSvgUrl","svgUrl","deleteId","_bitmap$close","transferFromImageBitmap","convertToBlob","isValidId","rawData","_data4","_this$id3","_this$id4","File","Blob","mustRemoveAspectRatioPromise","fileReader","FileReader","imageElement","imagePromise","onload","onerror","readAsDataURL","createImageBitmap","_ImageManager","_commands","_locked","_maxSize","_position","CommandManager","maxSize","_ref3","cmd","undo","post","mustExec","overwriteIfSameType","keepUndo","splice","redo","hasSomethingToUndo","hasSomethingToRedo","cleanType","_KeyboardManager_brand","KeyboardManager","callbacks","allKeys","isMacKey","event","_serialize","bubbles","checker","altKey","ctrlKey","metaKey","shiftKey","ColorManager","_colors","colors","visibility","colorScheme","body","computedColor","getComputedStyle","getColorValues","convert","rgb","matchMedia","RGB","_colorsMapping","getHexCode","_abortController","_activeEditor","_allEditableAnnotations","_allEditors","_allLayers","_altTextManager","_annotationStorage","_changedExistingAnnotations","_commandManager","_commentManager","_copyPasteAC","_currentDrawingSession","_currentPageIndex","_deletedAnnotationsElementIds","_draggingEditors","_editorTypes","_editorsToRescale","_enableHighlightFloatingButton","_enableUpdatedAddImage","_enableNewAltTextWhenAddingImage","_filterFactory","_focusMainContainerTimeoutId","_focusManagerAC","_highlightColors2","_highlightWhenShiftUp","_floatingToolbar","_idManager","_isEnabled","_isPointerDown","_isWaiting","_keyboardManagerAC","_lastActiveElement","_mainHighlightColorPicker","_missingCanvases","_mlManager","_mode","_selectedEditors","_selectedTextNode","_signatureManager","_pageColors","_showAllStates","_pdfDocument","_previousStates","_translation","_translationTimeoutId","_container","_viewer","_viewerAlert","_updateModeCapability","_AnnotationEditorUIManager_brand","AnnotationEditorUIManager","_keyboardManager","arrowChecker","contains","activeElement","tagName","hasSomethingToControl","textInputChecker","_self","_ref4","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","_ref5","HTMLButtonElement","isEnterHandled","_ref6","unselectAll","translateSelectedEditors","container","viewer","viewerAlert","altTextManager","commentManager","eventBus","pdfDocument","pageColors","highlightColors","enableHighlightFloatingButton","enableUpdatedAddImage","enableNewAltTextWhenAddingImage","mlManager","editorUndoBar","supportsPinchToZoom","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","_eventBus","_on","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","onSetPreference","evt","updateParams","_addSelectionListener","_addDragAndDropListeners","_addKeyboardManager","annotationStorage","filterFactory","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","_editorUndoBar","_supportsPinchToZoom","_classPrivateFieldGet6","_classPrivateFieldGet7","_classPrivateFieldGet8","_classPrivateFieldGet9","_classPrivateFieldGet0","_classPrivateFieldGet1","_classPrivateFieldGet10","_classPrivateFieldGet11","_this$_editorUndoBar","layer","clearTimeout","combinedSignal","useNewAltTextFlow","useNewAltTextWhenAddingImage","hcmFilter","addHCMFilter","foreground","background","_highlightColors","pair","toUpperCase","hasHCM","isNameForHCM","endsWith","highlightColorNames","getNonHCMColor","colorName","getNonHCMColorName","setCurrentDrawingSession","disableUserSelect","setMainHighlightColorPicker","editAltText","_classPrivateFieldGet12","firstTime","editComment","_classPrivateFieldGet13","getSignature","_classPrivateFieldGet14","switchToMode","on","once","dispatch","setPreference","_ref7","_ref8","pageNumber","focusMainContainer","focus","findParent","layerX","layerY","getBoundingClientRect","toggle","addShouldRescale","removeShouldRescale","_ref9","_classPrivateFieldGet15","commitOrRemove","_ref0","pagesRotation","methodOfCreation","selection","getSelection","isCollapsed","anchorNode","anchorOffset","focusNode","focusOffset","textLayer","_getAnchorElementForSelection","closest","getSelectionBoxes","empty","_getLayerForTextLayer","isNoneMode","createAndAddNewEditor","showAllEditors","addToAnnotationStorage","setValue","a11yAlert","messageId","stringify","removeAttribute","blur","_onSelectEnd","hasSelection","lastEditor","lastActiveElement","addEditListeners","_addCopyPasteListeners","removeEditListeners","_removeKeyboardManager","_removeCopyPasteListeners","dragOver","dataTransfer","isHandlingMimeForPasting","dropEffect","paste","currentLayer","copy","_classPrivateFieldGet16","editors","serialized","serialize","clipboardData","setData","cut","getData","ex","newEditors","deserializedEditor","deserialize","_addEditorToLayer","_selectEditors","addCommands","keydown","isEditorHandlingKeyboard","keyup","_ref1","setEditingState","_addFocusManager","_dispatchUpdateStates","_isEmpty","_removeFocusManager","registerEditorTypes","types","_dispatchUpdateUI","defaultPropertiesToUpdate","getId","getLayer","pageIndex","currentPageIndex","addLayer","enable","disable","removeLayer","updateMode","_classPrivateFieldGet17","editId","isFromKeyboard","mustEnterInEditMode","_classPrivateFieldGet18","_this$_editorUndoBar2","_classPrivateFieldGet19","_classPrivateFieldGet20","hideSidebar","_disableAll","loadSignatures","getAnnotationsByType","editorClass","_editorType","showSidebar","_enableAll","annotationElementId","setSelected","enterInEditMode","unselect","canCreateNewEmptyEditor","addNewEditor","updateToolbar","_objectSpread","action","updateDefaultParams","visible","_classPrivateFieldGet21","_classPrivateFieldGet22","enableWaiting","mustWait","disableClick","enableClick","getEditors","getEditor","addEditor","removeEditor","_classPrivateFieldGet23","_classPrivateFieldGet24","setTimeout","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","setActiveEditor","propertiesToUpdate","updateUI","_get_lastSelectedEditor","updateUIForDefaultProperties","toggleSelected","select","_classPrivateFieldGet25","ed","isSelected","firstSelectedEditor","_this$_editorUndoBar3","cleanUndoStack","_this$currentLayer","drawingEditor","endDrawingSession","_this$_editorUndoBar4","_classPrivateFieldGet26","commit","_classPrivateFieldGet27","totalX","totalY","translateInPage","translationDone","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","addOrRebuild","_this$getActive","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","_ref10","_ref11","_classPrivateFieldGet28","renderAnnotationElement","annotation","_classPrivateFieldGet29","editorId","getRawValue","hasBeenModified","setMissingCanvas","annotationId","_classPrivateFieldGet30","setCanvas","addMissingCanvas","_ref91","nodeType","TEXT_NODE","parentElement","hasTextLayer","_displayFloatingToolbar","_selectionChange","_classPrivateFieldGet101","_classPrivateFieldGet99","_classPrivateFieldGet100","activeLayer","toggleDrawing","pointerup","_classPrivateFieldGet102","_classPrivateFieldGet103","_classPrivateFieldGet104","_ref92","assign","promises","_this2","AltText","_AltText_brand","_altText2","_altTextDecorative","_altTextButton","_altTextButtonLabel","_altTextTooltip","_altTextTooltipTimeout","_altTextWasFromKeyBoard","_badge","_editor2","_guessedText","_textWithDisclaimer","_useNewAltTextFlow","_l10nNewButton","added","review","initialize","l10n","_AltText$_l10n","_l10n","label","onClick","_reportTelemetry","_get_label","_setState","finish","focusVisible","hasData","guessedText","setGuessedText","generatedAltText","toggleAltTextBadge","_classPrivateFieldGet31","badge","isForCopying","decorative","textWithDisclaimer","_ref12","cancel","enabled","disabled","_classPrivateFieldGet32","_classPrivateFieldGet33","_this3","_classPrivateFieldGet105","_classPrivateFieldGet106","_classPrivateFieldGet107","tooltip","DELAY_TO_SHOW_TOOLTIP","_classPrivateFieldGet108","textContent","parentNode","getElementForAltText","Comment","_commentButton","_commentWasFromKeyBoard","_editor3","_initialText","_text","_date","_deleted","edit","bottom","left","right","getClientDimensions","isDeleted","hasBeenEdited","date","setInitialText","_classPrivateFieldGet34","TouchManager","_ref13","isPinchingDisabled","isPinchingStopped","onPinchStart","onPinching","onPinchEnd","_TouchManager_brand","_container2","_isPinching","_isPinchingStopped","_isPinchingDisabled","_onPinchStart","_onPinching","_onPinchEnd","_pointerDownAC","_signal2","_touchInfo","_touchManagerAC","_touchMoveAC","_onTouchStart","passive","MIN_TOUCH_DISTANCE_TO_PINCH","_classPrivateFieldGet35","_classPrivateFieldGet36","_classPrivateFieldGet109","_classPrivateFieldGet112","touches","pointerDownAC","opts","cancelPointerDown","_classPrivateFieldGet110","pointerType","_classPrivateFieldGet111","opt","_onTouchMove","onTouchEnd","_onTouchEnd","touch0","touch1","identifier","touch0X","screenX","touch0Y","screenY","touch1X","touch1Y","_classPrivateFieldGet113","screen0X","screen0Y","screen1X","screen1Y","touchInfo","pTouch0X","pTouch0Y","pTouch1X","pTouch1Y","prevGapX","prevGapY","currGapX","currGapY","distance","hypot","pDistance","origin","_classPrivateFieldGet114","_TouchManager","AnnotationEditor","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_AnnotationEditor_brand","_accessibilityData","_allResizerDivs","_altText3","_comment2","_disabled","_dragPointerId","_dragPointerType","_keepAspectRatio","_resizersDiv","_lastPointerCoords","_savedDimensions","_focusAC","_focusedResizerName","_hasBeenClicked","_initialRect","_isEditing","_isInEditMode","_isResizerEnabledForKeyboard","_moveInDOMTimeout","_prevDragX","_prevDragY","_telemetryTimeouts","_touchManager","_isDraggable","_zIndex","_willKeepAspectRatio","_initialOptions","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","_type","isDrawer","_defaultLineColor","_colorManager","deleteAnnotationElement","fakeEditor","FakeEditor","getNextId","_AnnotationEditor$_l","_l10nResizer","topMiddle","topRight","middleRight","bottomMiddle","bottomLeft","middleLeft","_borderLineWidth","documentElement","parseFloat","getPropertyValue","_value","mime","_this$div","center","parentRotation","fixAndSetPosition","setInBackground","zIndex","setInForeground","setParent","_stopResizing","focusin","focusout","_this$parent","relatedTarget","isMultipleSelection","isInEditMode","setAt","screenToPageTranslation","_moveAfterPaste","baseX","baseY","_onTranslated","translate","_translate","scrollIntoView","block","findNewParent","bx","by","getBaseTranslation","toFixed","_onTranslating","_hasBeenMoved","_hasBeenResized","_mustFixPosition","moveInDOM","_rotatePoint","pageTranslationToScreen","parentScale","setDims","fixDims","widthPercent","heightPercent","getInitialTranslation","_onResized","_round","round","_onResizing","altTextFinish","_classPrivateFieldGet37","toolbarButtons","addEditToolbar","_editToolbar","addCommentButton","removeEditToolbar","_classPrivateFieldGet38","addContainer","_this$_editToolbar","editToolbarDiv","before","createAltText","altTextData","_classPrivateFieldGet39","guessedAltText","_classPrivateFieldGet40","setGuessedAltText","_classPrivateFieldGet41","serializeAltText","_classPrivateFieldGet42","hasAltText","hasAltTextData","_classPrivateFieldGet43","_classPrivateFieldGet44","commentColor","setCommentData","hasEditedComment","_classPrivateFieldGet45","DEFAULT_POPUP_WIDTH","DEFAULT_POPUP_HEIGHT","trY","blX","blY","trX","popup","contents","_this$_uiManager$_edi","defaultL10nId","_isVisible","_addFocusListeners","maxWidth","maxHeight","_touchPinchStartCallback","_touchPinchCallback","_touchPinchEndCallback","pointerdown","_setUpDragSession","_selectOnPointerEvent","_onStartDragging","_onStopDragging","_this$parent2","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","getPDFRect","onceAdded","enableEditMode","disableEditMode","needsToBeRebuilt","isOnScreen","innerHeight","innerWidth","rotate","_angle","serializeDeleted","_this$_initialData","popupRef","_initialData","accessibilityData","_isCopy","isCopy","_classPrivateFieldGet46","_classPrivateFieldGet47","timeout","makeResizable","_createResizers","savedWidth","savedHeight","children","boundResizerKeydown","_resizerKeydown","boundResizerBlur","_resizerBlur","_resizerFocus","firstPosition","nextFirstPosition","firstChild","lastChild","child","_setResizerTabIndex","stopImmediatePropagation","_resizerPointermove","deltaX","deltaY","fromKeyboard","_this$div2","_this$_editToolbar3","_classPrivateFieldGet48","_this$div3","_this$_editToolbar2","_classPrivateFieldGet49","_this$div4","_this$div5","_this$_editToolbar4","_classPrivateFieldGet50","preventScroll","disableEditing","enableEditing","canChangeContent","dblclick","contentDiv","setAspectRatio","aspectRatio","MIN_SIZE","telemetryInitialData","telemetryFinalData","_telemetryTimeout","querySelector","nodeName","prepend","resetAnnotationElement","_ref93","angle","_getRotationMatrix","classes","_resizerPointerdown","_classPrivateFieldGet115","savedDraggable","togglePointerEvents","savedParentCursor","cursor","savedCursor","pointerUpCallback","_classPrivateFieldGet116","_addResizeToUndoStack","_resize","newWidth","newHeight","minWidth","minHeight","rotationMatrix","transf","invRotationMatrix","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","ratioX","ratioY","lastScreenX","lastScreenY","invTransf","oldDiag","_classPrivateFieldGet117","_origin","prevDistance","factor","transfCenterPoint","newTransfCenterPoint","_classPrivateFieldGet118","hasDraggingStarted","cancelDrag","clientX","clientY","pointerId","isPrimary","_event$relatedTarget","_AnnotationEditor","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","_modified","_modifiedIds","_storage","_AnnotationStorage_brand","AnnotationStorage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","modified","_setModified","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","_stats","_counters$get","counters","computeTelemetryFinalData","resetModifiedIds","modifiedIds","ids","_serializable","FontLoader","_ref14","ownerDocument","styleElement","_systemFonts","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","_ref15","systemFontInfo","disableFontFace","_inspectFont","loadedName","isFontLoadingAPISupported","fontFace","FontFace","load","_unused8","baseFontName","font","attached","missingFile","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","_this$_document","complete","otherRequest","_loadTestFont","atob","int32","offset","spliceString","insert","called","XXXX_VALUE","checksum","fontFamily","isFontReady","fillText","FontFaceObject","translatedData","inspectFont","compiledGlyphs","_this$_inspectFont","cssFontInfo","css","weight","fontWeight","italicAngle","_this$_inspectFont2","mimetype","getPathGenerator","objs","character","objId","cmds","path","Path2D","fontExtraProperties","getFactoryUrlProp","isRefProxy","num","gen","isValidExplicitDest","validRef","validName","dest","page","zoom","argsLen","allowNull","arg","_listeners","_deferred","LoopbackPort","listener","rmAbort","onAbort","removeEventListener","terminate","CallbackKind","StreamKind","onFn","wrapReason","_messageAC","_MessageHandler_brand","MessageHandler","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","_onMessage","actionName","handler","ah","transfers","sendWithPromise","capability","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","stream","cancelCapability","_classPrivateFieldGet51","_ref94","_processStreamMessage","try","_createStreamSink","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","onPull","onCancel","success","streamController","_deleteStreamController","dataReason","_streamController$sta","_streamController$pul","_streamController$can","allSettled","BaseCanvasFactory","_ref16","enableHWA","_enableHWA","_createCanvas","reset","canvasAndContext","DOMCanvasFactory","_ref17","BaseCMapReaderFactory","_ref18","isCompressed","_ref19","_fetch","cMapData","catch","DOMCMapReaderFactory","BaseFilterFactory","addFilter","maps","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","_baseUrl","_cache2","_defs","_docId","_hcmCache","_id3","_DOMFilterFactory_brand","DOMFilterFactory","_ref20","docId","_this$id7","_this$id8","_get_cache","tableR","tableG","tableB","_createTables","_createUrl","_createFilter","_addTransferMapConversion","_info","_get_hcmCache","_info$filter","fgRGB","_getRGB","bgRGB","_get_defs","table","_addGrayConversion","getSteps","_this$id9","_this$id0","tableA","_addTransferMapAlphaConversion","_this$id1","_this$id10","_addLuminosityConversion","_info2","_info$filter2","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","newStart","newStep","prev","_classPrivateFieldGet52","_classPrivateFieldGet53","_classPrivateFieldGet54","_classPrivateFieldGet55","_this4","_this5","_this6","contain","svg","createElementNS","mapR","mapG","mapB","bufferR","bufferG","bufferB","feColorMatrix","_appendFeFunc","feComponentTransfer","feFunc","rTable","gTable","bTable","aTable","BaseStandardFontDataFactory","_ref21","_ref22","DOMStandardFontDataFactory","BaseWasmFactory","_ref23","_ref24","DOMWasmFactory","_globalThis$navigator","require","createRequire","import","_canvas","_canvas2","_canvas3","DOMMatrix","ImageData","language","node_utils_fetchData","fs","readFile","NodeFilterFactory","NodeCanvasFactory","createCanvas","NodeCMapReaderFactory","NodeStandardFontDataFactory","NodeWasmFactory","FORCED_DEPENDENCY_LABEL","_simple","_incremental","_namedDependencies","_savesStack","_markedContentStack","_baseTransformStack","_clipBox","_pendingBBox","_pendingBBoxIdx","_pendingDependencies","_operations","_fontBBoxTrustworthy","_canvasWidth","_canvasHeight","CanvasDependencyTracker","sameLineText","opIdx","previous","lastPair","pop","recordOpenMarker","idx","getOpenMarker","recordCloseMarker","pushBaseTransform","popBaseTransform","recordSimpleData","recordIncrementalData","resetIncrementalData","recordNamedData","recordFutureForcedDependency","inheritSimpleDataAsFutureForcedDependencies","inheritPendingDependenciesAsFutureForcedDependencies","dep","resetBBox","hasPendingBBox","recordClipBox","minX","maxX","minY","maxY","clipBox","recordBBox","bbox","recordCharacterBBox","getMeasure","fontBBox","isBBoxTrustworthy","computedBBox","fontMatrix","recordFullPageBBox","measure","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","getSimpleIndex","dependencyName","recordDependencies","dependencyNames","pendingDependencies","incremental","copyDependenciesFromIncrementalOperation","operations","depIdx","dependencies","recordNamedDependency","recordOperation","preserveBbox","pairs","bboxToClipBoxDropOperation","_takePendingDependencies","_extractOperation","operation","_pushPendingDependencies","_ref25","_bbox$minX","_bbox$maxX","_bbox$minY","_bbox$maxY","_dependencyTracker","_opIdx","_nestingLevel","_outerDependencies","_savesLevel","CanvasNestedDependencyTracker","dependencyTracker","_this$savesLevel","_this$savesLevel3","_this$nestingLevel","_this$nestingLevel3","recordNestedDependencies","Dependencies","PathType","applyBoundingBox","region","BaseShadingPattern","isModifyingCurrentTransform","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","pathType","pattern","ownerBBox","getClippedPathBoundingBox","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","baseTransform","fillStyle","createPattern","domMatrix","setTransform","drawTriangle","p3","c1","c2","c3","coords","rowSize","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","boundsWidth","boundsHeight","paddedWidth","BORDER_SIZE","paddedHeight","createImageData","putImageData","matrixScaleX","matrixScaleY","temporaryPatternCanvas","DummyShadingPattern","PaintType","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","_graphics$dependencyT","_graphics$dependencyT2","_graphics$dependencyT3","_graphics$dependencyT4","combinedScaleX","combinedScaleY","canvasWidth","canvasHeight","redrawHorizontally","redrawVertically","xScaledStep","yScaledStep","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","clipBbox","executeOperatorList","endDrawing","dimx2","dimy2","xSize","ySize","tmpCanvas2","tmpCtx2","jj","realOutputSize","MAX_PATTERN_SIZE","bboxWidth","bboxHeight","strokeStyle","fillColor","strokeColor","convertBlackAndWhiteToRGBA","_ref26","srcPos","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","FULL_CHUNK_HEIGHT","SCALE_MATRIX","XY","MIN_MAX_INIT","CachedCanvases","canvasFactory","cache","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","CanvasExtraState","preInit","getPathBoundingBox","xStrokePad","lineWidth","yStrokePad","updateClipFromPath","startNewPathAndClipBox","isEmptyClip","putBinaryImageData","imgData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","mask","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","getImageSmoothingEnabled","interpolate","actualScale","fround","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","_CanvasGraphics_brand","CanvasGraphics","canvasCtx","commonObjs","_ref28","annotationCanvasMap","optionalContentConfig","markedContentStack","stateStack","pendingClip","pendingEOFill","xobjs","groupStack","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","_this$dependencyTrack","beginDrawing","_ref29","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","filteredOperationIndexes","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","fnArgs","nextBreakPoint","breakIt","_argsArray$i","depObjId","_this$dependencyTrack2","objsPool","_restoreInitialState","HTMLCanvasElement","_drawFilter","_scaleImage","img","_img$width","_img$height","displayWidth","displayHeight","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","_this$dependencyTrack4","isPatternFill","patternFill","currentTransform","cacheKey","maskCanvas","mainKey","cachedImage","_this$dependencyTrack3","maskToCanvas","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","_this$dependencyTrack5","_this$dependencyTrack6","_this$dependencyTrack7","_this$dependencyTrack8","dashArray","dashPhase","_this$dependencyTrack9","intent","flatness","states","_this$dependencyTrack0","_this$dependencyTrack1","_this$dependencyTrack10","_this$dependencyTrack11","_this$dependencyTrack12","strokeAlpha","fillAlpha","activeSMask","checkSMaskState","transferMaps","inSMaskMode","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","mirrorContextOperations","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","_this$dependencyTrack13","old","_this$dependencyTrack14","_this$dependencyTrack15","op","outerExtraSize","path2d","_pathStartIdx","_this$dependencyTrack16","consumePath","newPath","addPath","multiplySelf","rescaleAndStroke","_this$dependencyTrack18","needRestore","_this$dependencyTrack17","_this$dependencyTrack19","_this$dependencyTrack20","_this$dependencyTrack21","_this$dependencyTrack22","_this$dependencyTrack23","textMatrix","textMatrixScale","lineX","lineY","paths","pendingTextPaths","fontSize","preMultiplySelf","spacing","_this$dependencyTrack24","charSpacing","_this$dependencyTrack25","wordSpacing","_this$dependencyTrack26","textHScale","leading","_this$dependencyTrack27","fontRefName","_this$dependencyTrack28","_fontObj$systemFontIn","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","fontSizeScale","_this$dependencyTrack29","textRenderingMode","rise","_this$dependencyTrack30","textRise","_this$dependencyTrack31","_this$dependencyTrack32","_this$dependencyTrack33","_this$dependencyTrack34","paintChar","patternFillTransform","patternStrokeTransform","fillStrokeMode","isAddToPathSet","patternStroke","_this$dependencyTrack35","scaledPath","_getScaledPath","invPatternTransform","_this$dependencyTrack36","measureText","_this$dependencyTrack37","strokeText","_this$dependencyTrack38","isFontSubpixelAAEnabled","glyphs","_this$dependencyTrack42","_this$dependencyTrack39","showType3Text","_this$dependencyTrack40","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","joinedChars","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","characterScaleX","_this$dependencyTrack41","isInFont","scaledAccentX","scaledAccentY","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","_this$dependencyTrack43","getColorN_Pattern","_getPattern","_this$dependencyTrack44","_len","_key","_this$dependencyTrack45","_len2","_key2","_this$dependencyTrack46","_this$dependencyTrack47","_this$dependencyTrack48","_this$dependencyTrack49","getShadingPattern","_this$dependencyTrack50","inv","_this$dependencyTrack51","group","_this$dependencyTrack52","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","_this$dependencyTrack53","currentMtx","hasOwnCanvas","annotationCanvas","savedCtx","_this$dependencyTrack54","_this$dependencyTrack55","_this$dependencyTrack57","skewX","skewY","positions","_this$dependencyTrack56","trans","images","_this$dependencyTrack58","_this$dependencyTrack60","_this$dependencyTrack59","applyTransferMapsToCanvas","applyTransferMapsToBitmap","_this$dependencyTrack61","imgToPaint","HTMLElement","_this$dependencyTrack62","_this$dependencyTrack64","_this$dependencyTrack63","_this$dependencyTrack65","_this$dependencyTrack66","_this$dependencyTrack67","isVisible","isContentVisible","_this$dependencyTrack68","_this$dependencyTrack69","_this$dependencyTrack70","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","hcmFilterId","savedFilter","GlobalWorkerOptions","workerPort","_port","Worker","workerSrc","_src","Metadata","_ref30","parsedData","_map","_data3","getRaw","_classPrivateFieldGet56","INTERNAL","_isDisplay","_isPrint","_userSet","_visible","OptionalContentGroup","renderingIntent","_ref31","usage","rbGroups","view","viewState","printState","_setVisible","internal","userSet","_cachedGetHash","_groups","_initialHash","_order","_OptionalContentConfig_brand","OptionalContentConfig","creator","order","groups","baseState","off","getHash","expression","_evaluateVisibilityExpression","policy","setVisibility","preserveRB","rbGroup","otherId","_classPrivateFieldGet57","setOCGState","_ref32","operator","hasInitialVisibility","getOrder","getGroup","PDFDataTransportStream","pdfDataRangeTransport","_ref33","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_ref34","_enqueue","rangeReader","_begin","_progressiveDataLength","_this$_fullRequestRea","_this$_fullRequestRea2","_loaded","_this$_rangeReaders$","_this$_rangeReaders$$","_this$_fullRequestRea3","_this$_fullRequestRea4","onProgress","_this$_fullRequestRea5","_removeRangeReader","reader","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","_this$_fullRequestRea6","_stream","_done","_filename","_requests","_headersReady","headersReady","isRangeSupported","isStreamingSupported","contentLength","requestCapability","_end","_queuedChunk","createHeaders","isHttp","httpHeaders","headers","Headers","getResponseOrigin","_URL$parse$origin","_URL$parse","validateRangeRequestCapabilities","_ref35","responseHeaders","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","extractFilenameFromHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","contentDispositionStr","iter","quot","part","parts","rfc2231getparam","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","fatal","_unused9","quotindex","extvalue","encodingend","charset","_unused0","getFilenameFromContentDispositionHeader","_unused1","createResponseError","validateResponseStatus","createFetchOptions","withCredentials","abortController","credentials","redirect","getArrayBuffer","PDFFetchStream","_rangeRequestReaders","_this$_fullRequestRea7","_this$_fullRequestRea8","PDFFetchStreamReader","PDFFetchStreamRangeReader","_this$_fullRequestRea9","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_responseOrigin","getReader","_this$onProgress","_this$_reader","_readCapability","responseOrigin","_this$onProgress2","_this$_reader2","NetworkManager","_ref36","currXhrId","pendingRequests","xhr","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","_pendingRequest$onPro","xhrStatus","network_getArrayBuffer","rangeHeader","getResponseHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","_this$_fullRequestRea0","manager","_url","_fullRequestId","_onHeadersReceived","_onDone","_onError","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","responseURL","rawResponseHeaders","getAllResponseHeaders","trimStart","_this$onProgress3","lengthComputable","_requestId","_this$_manager$getReq","_close","_this$onClosed","_this$_storedError","_this$onProgress4","urlRegex","PDFNodeStream","sourceUrl","pathToFileURL","parseUrlOrPath","_this$_fullRequestRea1","_this$_fullRequestRea10","PDFNodeStreamFsFullReader","PDFNodeStreamFsRangeReader","_this$_fullRequestRea11","_readableStream","lstat","_setReadableStream","createReadStream","_this$onProgress5","_error","readableStream","_this$onProgress6","INITIAL_DATA","_objs","_PDFObjects_brand","PDFObjects","_ensureObj","_data$bitmap","_classPrivateFieldGet119","_capability","_container4","_disableProcessItems","_fontInspectorEnabled","_lang","_layoutTextParams","_pageHeight3","_pageWidth3","_rootContainer","_rotation3","_scale","_styleCache","_textContentItemsStr","_textContentSource","_textDivs","_textDivProperties","_transform","_TextLayer_brand","TextLayer","_ref37","_globalThis$FontInspe","textContentSource","FontInspector","_ensureMinFontSizeComputed","finally","_pendingTextLayers","fontFamilyMap","pump","_ref38","_classPrivateFieldGet58","lang","styles","_processItems","_ref39","onBefore","_getCtx","_layout","_classPrivateFieldGet59","abortEx","textDivs","textContentItemsStr","cleanup","_ascentCache","_canvasContexts","_classPrivateFieldGet120","_classPrivateFieldGet121","_appendText","geom","textDiv","textDivProperties","hasText","hasEOL","atan2","fontName","PI","fontSubstitution","fontHeight","fontAscent","_getAscent","sin","cos","scaleFactorStr","divStyle","_minFontSize","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","_ensureCtxFont","alpha","_canvasCtxFonts","cached","opacity","lineHeight","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","_TextLayer","XfaText","xfa","walk","_node$attributes","shouldBuildText","getDocument","_src$password","_src$length","task","PDFDocumentLoadingTask","location","getUrlProp","Buffer","isNaN","getDataProp","password","rangeTransport","PDFDataRangeTransport","worker","PDFWorker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","iccUrl","standardFontDataUrl","StandardFontDataFactory","wasmUrl","WasmFactory","ignoreErrors","stopAtErrors","maxImageSize","chrome","canvasMaxAreaInBytes","enableXfa","disableAutoFetch","pdfBug","CanvasFactory","FilterFactory","useWasm","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","wasmFactory","port","_worker","docParams","apiVersion","evaluatorOptions","transportParams","loadingParams","destroyed","workerIdPromise","messageHandler","networkStream","NetworkStream","workerId","transport","WorkerTransport","_transport","_docId2","_PDFDocumentLoadingTa","_PDFDocumentLoadingTa2","_this$_worker3","_this$_worker","_this$_transport","_pendingDestroy","_this$_worker2","_capability2","_progressiveDoneListeners","_progressiveReadListeners","_progressListeners","_rangeListeners","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","ref","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","pageIndexesToSkip","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","getFieldObjects","hasJSActions","getCalculationOrderIds","_pendingCleanup","_PDFPageProxy_brand","PDFPageProxy","pageInfo","_pageIndex","_pageInfo","_pdfBug","_intentStates","recordedGroups","getViewport","getAnnotations","getPageJSActions","getXfa","_this$_transport$_htm","_ref40","_this$_stats","_globalThis$StepperMa","_intentState","canvasContext","annotationMode","optionalContentConfigPromise","printAnnotationStorage","recordOperations","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","_this$_stats2","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","shouldRecordOperations","StepperManager","renderTasks","internalRenderTask","_internalRenderTask$g","gfx","_internalRenderTask$s","setOperatorGroups","_globalThis$Stats","_tryCleanup","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","_ref41","_this$_stats3","initializeGraphics","operatorListChanged","getOperatorList","opListTask","_intentState2","_this$_stats4","opListReadCapability","streamTextContent","includeMarkedContent","disableNormalization","highWaterMark","getTextContent","_ref42","_textContent$lang","getStructTree","_destroy","waitOn","force","completed","resetStats","_startRenderPage","_this$_stats5","_intentState$displayR","_renderPageChunk","operatorListChunk","_ref43","annotationStorageSerializable","streamReader","_ref44","_ref45","delay","curCacheKey","curIntentState","_capability3","_messageHandler","_port2","_webWorker","_PDFWorker_brand","_workerPorts","_initializeFromPort","_initialize","_classPrivateFieldGet60","_classPrivateFieldGet61","cachedPort","_setupFakeWorkerGlobal","_get_mainThreadWorkerMessageHandler","WorkerMessageHandler","loader","_resolve","_isWorkerDisabled","_setupFakeWorker","_isSameOrigin","_createCDNWrapper","terminateEarly","sendTest","_unused10","testObj","_unused11","_PDFWorker$fakeWorker","_PDFWorker$fakeWorker2","_fakeWorkerId","workerHandler","setup","_this7","_globalThis$pdfjsWork","pdfjsWorker","_unused12","_PDFWorker","otherUrl","wrapper","createObjectURL","fromPort","_methodPromises","_pageCache","_pagePromises","_pageRefCache","_passwordCapability","_WorkerTransport_brand","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","isOpList","modifiedIdsHash","_classPrivateFieldGet62","terminated","_this$_networkStream","_this$messageHandler","sink","_ref46","readyReason","_loadingTask$onProgre","_loadingTask$onProgre2","_ref47","_ref48","_numPages","htmlForXfa","onPassword","updatePassword","err","_loadingTask$onProgre3","_ref49","_globalThis$FontInspe2","exportedData","exportedError","fontAdded","imageRef","pageProxy","dataLen","_ref50","imageData","_imageData$bitmap","_loadingTask$onProgre4","_this$_fullReader$fil","_this$_fullReader","cachedPromise","refStr","_cacheSimpleMethod","results","_this$_fullReader$fil2","_this$_fullReader2","_this$_fullReader$con","_this$_fullReader3","_classPrivateFieldGet63","_internalRenderTask","RenderTask","form","_rAF","_ref51","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvasContext","_filteredOperationIndexes","_ref52","_globalThis$StepperMa2","_this$graphicsReadyCa","_canvasInUse","init","getNextBreakPoint","_this$gfx","_this$task$onError","_this$task","cancelAnimationFrame","_this$stepper","updateOperatorList","onContinue","requestAnimationFrame","build","ColorPicker","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","_ref53","_editor$color","_classPrivateFieldGet64","_ColorPicker_brand","_button","_buttonSwatch","_defaultColor","_dropdown","_dropdownWasFromKeyboard","_isMainColorPicker","_editor4","_openDropdownAC","_uiManager3","_l10nColor","blue","green","pink","red","yellow","ariaHasPopup","ariaControls","_openDropdown","_keyDown","swatch","ariaHidden","renderMainDropdown","dropdown","_getDropdownRoot","ariaOrientation","ariaLabelledBy","_colorSelect","_event$target$nextSib","_classPrivateFieldGet65","_get_isDropdownVisible","nextSibling","_classPrivateFieldGet66","_event$target$previou","previousSibling","_classPrivateFieldGet67","_classPrivateFieldGet68","_classPrivateFieldGet69","_classPrivateFieldGet70","ariaExpanded","_classPrivateFieldGet71","updateColor","ariaSelected","_classPrivateFieldGet72","_classPrivateFieldGet73","role","ariaMultiSelectable","detail","_pointerDown3","_classPrivateFieldGet122","_this8","_ColorPicker","_input","_editor5","_uiManager4","BasicColorPicker","_l10nColor2","colorType","colorValue","_classPrivateFieldGet74","makeColorComp","scaleAndClamp","ColorConverters","CMYK_G","_ref54","G_CMYK","_ref55","G_RGB","_ref56","G_rgb","_ref57","G_HTML","_ref58","G","RGB_G","_ref59","RGB_rgb","RGB_HTML","T_HTML","T_rgb","CMYK_RGB","_ref60","CMYK_rgb","_ref61","CMYK_HTML","components","RGB_CMYK","_ref62","BaseSVGFactory","skipDimensions","_createSVG","DOMSVGFactory","XfaLayer","setupStorage","storage","storedData","xfaOn","xfaOff","checked","option","selected","selectedIndex","setAttributes","_ref63","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","xfaHtml","rootHtml","isNotForRichText","rootDiv","createTextNode","_child$attributes","_child$children","childHtml","xmlns","querySelectorAll","hidden","GetElementsByNameSet","TIMEZONE_OFFSET","getTimezoneOffset","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","_updates","_hasBorder","_popupElement","_AnnotationElement_brand","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableComment","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","_hasPopupData","_ref64","contentsObj","richText","_isEditable","isEditable","hasPopupData","hasCommentButton","hasPopupElement","commentButtonPosition","quadPoints","commentButtonColor","_this$data$opacity","oppositeOpacity","_changeLightness","_normalizePoint","updateEdited","_classPrivateFieldGet75","newPopup","_setRectEdited","_createPopup","resetEdited","_classPrivateFieldGet76","alternativeText","noRotate","setRotation","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","_commonActions","setColor","jsName","styleName","colorArray","noView","noPrint","userName","readonly","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","rectBlX","rectBlY","rectTrX","rectTrY","svgBuffer","defs","clipPath","_svgBuffer","rectWidth","rectHeight","backgroundImage","popupData","modificationDate","titleObj","parentRect","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","_this$popup","maybeShow","_this$popup2","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_editOnDoubleClick","annotationEditorType","_this$linkService$eve","l","newL","currentRect","_LinkAnnotationElement_brand","isTooltipOnly","link","isBound","_bindNamedAction","overlaidText","attachment","_bindAttachment","attachmentDest","_bindSetOCGState","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","getDestinationHash","onclick","goToDestination","_setInternalLink","getAnchorUrl","executeNamedAction","_this$linkService$eve2","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","allIds","dispatchEvent","Event","_this$linkService$eve3","_this$downloadManager","openOrDownloadData","executeSetOCGState","showElementAndHideCanvas","_element$previousSibl","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","_this$linkService$eve4","modifier","_this$linkService$eve5","focused","_setEventListeners","_this$data$actions","_this$data$actions2","_this$data$actions3","Blur","Focus","_setBackgroundColor","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","textAlignment","textAlign","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","_this$data$textConten","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","datetimeFormat","datetimeType","timeStep","hasDateOrTime","_this$data$defaultFie","defaultFieldValue","blurListener","scrollLeft","_this$data$actions6","_this$data$actions4","getHours","getMinutes","getSeconds","toISOString","_event$detail$value","selRange","setSelectionRange","_this$linkService$eve6","willCommit","selStart","selectionStart","selEnd","selectionEnd","_this$linkService$eve7","_blurListener","_this$data$actions5","_this$linkService$eve8","Keystroke","_this$linkService$eve9","inputType","change","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","_removeEmptyEntry","multipleSelection","findIndex","selectChild","indices","editable","_this$linkService$eve0","changeEx","keyDown","PopupElement","creationDate","elementIds","_boundKeyDown","_boundHide","_boundShow","_boundToggle","_color","_container5","_contentsObj","_dateObj","_elements","_eventBus2","_parent","_parentRect","_pinned","_popup","_popupAbortController","_position2","_commentButton2","_commentButtonPosition","_commentButtonColor","_rect","_richText","_titleObj","_updates2","_wasVisible","_PopupElement_brand","_ref65","_keyDown2","_hide","_show","_toggle","trigger","_addEventListeners","_classPrivateFieldGet77","baseColor","outlineColor","header","dateObj","dateTime","_get_html","_formatContents","_ref66","lines","line","_ref67","_classPrivateFieldGet78","_makePopupContent","_classPrivateFieldGet79","_classPrivateFieldGet80","_classPrivateFieldGet81","_element$container","_renderCommentButton","_setCommentButtonPosition","parentContainer","_classPrivateFieldGet123","after","_this9","_get_fontSize","_this0","_classPrivateGetter5","_get_fontColor","_this1","_classPrivateGetter6","popupLines","popupContent","lineAttributes","_setPosition","useParentRect","normalizedRect","popupLeft","popupTop","textPosition","lineSpan","_line","lineCoordinates","_square","square","_circle","circle","_polyline","containerClassName","svgElementName","vertices","points","polyline","_polylinesGroupElement","_polylines","_InkAnnotationElement_brand","inkLists","_getTransform","thickness","inkList","mark","underline","strikeout","_trigger","_FileAttachmentAnnotationElement_brand","_this$linkService$eve1","_download","_this$downloadManager2","_accessibilityManager","_annotationCanvasMap","_editableAnnotations","_structTreeLayer","_AnnotationLayer_brand","AnnotationLayer","_ref68","accessibilityManager","annotationEditorUIManager","structTreeLayer","_annotationEditorUIManager","hasEditableAnnotations","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","_this$_annotationEdit","_appendElement","_setAnnotationCanvasMap","addLinkAnnotations","_defaultBorderStyle","_ref69","getEditableAnnotations","getEditableAnnotation","rawWidth","popupElements","_classPrivateFieldGet124","contentElement","ariaAttributes","getAriaAttributes","_classPrivateFieldGet125","moveElementInDOM","replaceWith","editableAnnotation","_this$_annotationEdit2","_hasNoCanvas","EOL_PATTERN","_color2","_content","_editorDivId","_editModeAC","_fontSize","_FreeTextEditor_brand","FreeTextEditor","_translateEmpty","_defaultFontSize","_internalPadding","_updateFontSize","_updateColor","overlayDiv","editorDiv","contentEditable","editorDivKeydown","editorDivFocus","editorDivBlur","editorDivInput","editorDivPaste","_classPrivateFieldGet82","_this$_initialOptions","innerText","savedText","newText","_extractText","trimEnd","setText","_setContent","_setEditorDimensions","posX","posY","_deserializeContent","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","nodeValue","childNodes","_getNodeContent","newRange","Range","beforeLength","setStart","setEnd","removeAllRanges","addRange","padding","_serializeContent","structTreeParentId","_hasElementChanged","replaceChildren","setFontsize","savedFontsize","col","_this$_colorPicker2","savedColor","prevChild","_prevChild","savedDisplay","savedVisibility","_FreeTextEditor","Outline","toSVGPath","_rotation","_rescale","_rescaleAndSwap","svgRound","_normalizePagePoint","createBezierPoints","FreeDrawOutliner","_ref70","scaleFactor","innerMargin","_FreeDrawOutliner_brand","_box","_bottom","_innerMargin","_isLTR2","_top","_last","_lastX","_lastY","_min","_min_dist","_scaleFactor","_thickness","_points","_MIN_DIST","_MIN","_ref71","_classPrivateFieldGet83","diffX","diffY","diffD","K","nY","thX","thY","_toSVGPathTwoPoints","_toSVGPathEnd","_toSVGPathStart","newFreeDrawOutline","outline","FreeDrawOutline","getOutlines","_classPrivateFieldGet84","_classPrivateFieldGet85","last","_getOutlineTwoPoints","N","_getOutlineEnd","_getOutlineStart","_getLastCoords","lastTop","lastBottom","lastTopX","lastTopY","lastBottomX","lastBottomY","_box2","_bbox2","_innerMargin2","_isLTR3","_points2","_scaleFactor2","_outline","_FreeDrawOutline_brand","lastPoint","_computeMinMax","_ref72","newOutliner","getNewOutline","outliner","lastPointX","lastPointY","ltrCallback","HighlightOutliner","_HighlightOutliner_brand","_box3","_lastPoint","_verticalEdges","_intervals","EPSILON","shiftedMinX","shiftedMinY","lastEdge","edge","outlineVerticalEdges","_breakEdge","_insert","_remove","_getOutlines","edges","allEdges","edge1","edge2","outlines","HighlightOutline","_binarySearch","middle","_ref95","_ref96","y4","_box4","_outlines","polygon","prevX","prevY","_ref73","classNamesForOutlining","FreeHighlightOutliner","FreeHighlightOutline","HighlightEditor","_moveCaret","_HighlightEditor_brand","_anchorNode","_anchorOffset","_boxes","_clipPathId","_colorPicker2","_focusOutlines","_focusNode","_focusOffset","_highlightDiv","_highlightOutlines","_id4","_isFreeHighlight","_lastPoint2","_opacity","_outlineId","_text2","_thickness2","_methodOfCreation","_defaultThickness","_defaultOpacity","highlightId","_createFreeOutlines","_addToDrawLayer","_createOutlines","numberOfColors","_uiManager$highlightC","_updateColor2","_updateThickness","_getRotation","addUndoableEditor","_cleanDrawLayer","mustBeSelected","_this$div6","drawLayer","_rotateBbox","updateProperties","_keydown","highlightDiv","pointerover","_this$parent3","rootClass","hovered","pointerleave","_this$parent4","_setCaret","_this$parent5","_this$parent6","startHighlighting","_ref74","_endHighlight","_highlightMove","_freeHighlight","_freeHighlightId","clipPathId","_freeHighlightClipId","draw","free","highlightOutlines","_serializeBoxes","_serializeOutlines","_hasElementChanged2","outlinerForOutline","_ref97","finalizeDraw","drawOutline","highlightOutline","setColorAndOpacity","opa","_this$parent12","_classPrivateFieldGet126","savedOpacity","savedThickness","setThickness","th","_changeThickness","_ref98","setPosition","_HighlightEditor","DrawingOptions","_svgProperties","updateProperty","updateSVGProperty","toSVGProperties","updateAll","_drawOutlines","_mustBeCommitted","_DrawingEditor_brand","DrawingEditor","mustBeCommitted","_addOutlines","drawOutlines","_createDrawOutlines","_addToDrawLayer2","_mergeSVGProperties","p1Keys","getDefaultDrawingOptions","_options","typesMap","supportMultipleDrawings","propertyName","_defaultDrawingOptions","_currentParent","_currentDraw","_currentDrawId","_updateProperty","_drawingOptions","savedValue","_this$parent7","_this$_colorPicker","_updateBbox","_drawId","_this$parent8","getPathResizingSVGProperties","_convertToDrawSpace","_rotateBox","_this$parent9","getPathResizedSVGProperties","_x","_y","_this$parent0","_this$parent1","getPathTranslatedSVGProperties","_this$parent10","moving","_this$parent11","_cleanDrawLayer2","_this$div7","updateRotation","updateParentDimensions","onScaleChangingWhenDrawing","drawDiv","createDrawerInstance","_parentWidth","_parentHeight","startDrawing","_isLTR","_currentPointerType$_","_uiManager$_editorUnd","_currentPointerType","_currentDrawingAC","_currentPointerId","_currentPointerIds$_","_endDraw","_currentPointerIds","_currentPointerIds$_2","isCancellable","removeLastElement","_drawMove","timeStamp","_currentMoveTimestamp","startNew","_currentDrawingOptions","defaultSVGProperties","_currentPointerIds$_3","_cleanup","drawId","lastElement","getLastElement","setLastElement","isAborted","_INNER_MARGIN","drawingOptions","createDrawingOptions","_data","deserializeDraw","_pageX","_pageY","_pageWidth","_pageHeight","_innerWidth","serializeDraw","_ref99","defaultProperties","_createDrawing","updateParent","_convertToParentSpace","_ref100","pW","pH","_DrawingEditor","InkDrawOutliner","_InkDrawOutliner_brand","_last2","_line2","_lines","_rotation4","_thickness3","_points3","_lastSVGPath","_lastIndex","_outlines2","InkDrawOutline","_parentWidth2","_parentHeight2","firstX","firstY","secondX","secondY","c1x","c1y","c2x","c2y","_bbox3","_currentRotation","_innerMargin3","_lines2","_parentWidth3","_parentHeight3","_parentScale","_rotation5","_thickness4","_InkDrawOutline_brand","_computeBbox","_ref75","serializedLines","serializedPoints","_getBBoxWithNoMargin","rescaleFn","_ref76","newLines","_updateThickness2","_ref77","oldMarginX","oldMarginY","_getMarginComponents","newMarginX","newMarginY","diffMarginX","diffMarginY","rotationTransform","_ref78","marginX","marginY","PRECISION","s1x","s1y","s2x","s2y","_ref79","_ref80","newParentWidth","newParentHeight","margin","InkDrawingOptions","viewerParameters","_viewParameters","_InkEditor_brand","InkEditor","_ref81","_hasElementChanged3","ContourDrawOutline","SignatureExtractor","extractContoursFromText","_ref82","fontStyle","SCALE","uint8Buf","_toUint","histogram","_getHistogram","threshold","_guessThreshold","contourList","_findContours","processDrawnLines","curves","mustSmooth","areContours","_getGrayPixels","_bilateralFilter","_PARAMETERS","sigmaSFactor","sigmaR","kernelSize","_ref83","_lines$thickness","linesAndPoints","xScale","yScale","newCurves","reducedPoints","_douglasPeucker","newPoints","compressSignature","_ref84","bufferType","minDiff","maxDiff","outlinesLength","dx","headerLength","BYTES_PER_ELEMENT","CompressionStream","writer","getWriter","BufferCtor","diffs","Response","readable","decompressSignature","signatureData","DecompressionStream","_iteratorError","_iteratorAbruptCompletion","_didIteratorError","_step","_iterator","asyncIterator","_asyncIterator","return","numberOfDrawings","diffsOffset","POINTS_PROPERTIES_NUMBER","_neighborIndexToId","i0","j0","_clockwiseNonZero","kk","_neighborIdToIndex","_counterClockwiseNonZero","lnbd","nbd","contours","ij","pix","i2","j2","isHole","contour","contour0","shiftI","shiftJ","i1","j1","i3","j3","i4","j4","ij3","_douglasPeuckerHelper","ax","ay","abx","aby","dist","nabx","naby","aa","invS","phi","atan","cosPhi","sinPhi","tmax","poly","partialPhi","dmax","sigmaS","kernel","sigmaS2","halfSize","exp","rangeValues","sigmaR2","out","norm","neighbour","M","L","spos","originalBitmap","prevWidth","prevHeight","log2","isteps","grayImage","_SignatureExtractor","SignatureOptions","DrawnSignatureOptions","_isExtracted","_description","_signatureData","_signatureUUID","SignatureEditor","_defaultDrawnSignatureOptions","hasDescription","_hasDescriptionStats$","_hasDescriptionStats$2","hasDescriptionStats","hasNoAltText","uuid","heightInPage","addSignature","setUuid","getSignaturePreview","hasBeenSaved","getFromImage","getFromText","fontInfo","getDrawnSignature","_ref85","isSignature","alt","_data$accessibilityDa","StampEditor","_StampEditor_brand","_bitmap","_bitmapId","_bitmapPromise","_bitmapUrl","_bitmapFile","_bitmapFileName","_canvas4","_missingCanvas","_resizeTimeoutId","_isSvg","_hasBeenAddedInUndoStack","bitmapUrl","bitmapFile","pasteEditor","getAsFile","_this$altTextData","_hasAltTextStats$get","_hasAltTextStats$get2","hasAltTextStats","mlGuessAltText","updateAltTextData","isEnabledFor","copyCanvas","guess","channels","_classPrivateFieldGet86","_getBitmap","bitmapId","_drawBitmap","maxDataDimension","maxPreviewDimension","bitmapWidth","bitmapHeight","outputScale","_window$matchMedia","_window","scaledWidth","scaledHeight","_scaleBitmap","boxDim","boxDimWidth","boxDimHeight","patternCtx","dataWidth","dataHeight","offscreenCtx","missingCanvas","_await$parent$_struct","structParent","_structTree","_serializeBitmap","changes","_hasElementChanged4","isSame","_this$_initialData$st","isSameAltText","stamps","area","prevData","_getBitmapFetched","fromId","_getBitmapDone","alt_text_modal","alt_text_type","_unused13","accept","files","click","_this$_initialOptions2","MAX_RATIO","toUrl","toDataURL","_serialized$accessibi","isSamePageIndex","AnnotationEditorLayer","_ref86","annotationLayer","_AnnotationEditorLayer_brand","_accessibilityManager2","_allowClick","_annotationLayer","_clickAC","_editorFocusTimeoutId","_editors","_hadPointerDown","_isDisabling","_isEnabling","_drawingAC","_focusedElement","_textLayer","_textSelectionAC","_textLayerDblClickAC","_lastPointerDownTimestamp","_uiManager5","editorTypes","_editorTypes2","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","_classPrivateFieldGet87","_classPrivateFieldGet88","_classPrivateFieldGet89","annotationElementIds","editables","elementsFromPoint","changedAnnotations","resetAnnotations","_this$getEditableAnno","_classPrivateFieldGet90","_classPrivateFieldGet91","_textLayerPointerDown","_classPrivateFieldGet92","_classPrivateFieldGet93","attach","_classPrivateFieldGet94","removePointerInTextLayer","_editor$parent","_classPrivateFieldGet95","_classPrivateGetter2","_get_currentEditorType","_getCenterPoint","_createNewEditor","_editorTypes2$_$get","_data$annotationType","_classPrivateGetter3","currentMode","_classPrivateGetter4","startDrawingSession","_ref87","pause","_classPrivateFieldGet96","_classPrivateFieldGet97","_classPrivateFieldGet98","_ref88","_ref89","oldRotation","_this10","DrawLayer","_ref90","_DrawLayer_brand","_parent2","_mapping","_toUpdate","_svgFactory","_DrawLayer$id","_DrawLayer$id2","isPathUpdatable","hasClip","_id5","pathId","_createClipPath","use","mustRemoveSelfIntersections","_DrawLayer$id3","_DrawLayer$id4","maskId","use1","use2","cloneNode","elementOrId","_updateProperties","_setBox","pathElement","_ref101","clipPathUse","_DrawLayer","_pdfjsTestingUtils","pdfjsLib","FeatureTest","ImageKind"],"sourceRoot":""}